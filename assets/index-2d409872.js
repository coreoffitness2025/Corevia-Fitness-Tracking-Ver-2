var Ib=Object.defineProperty;var Sb=(t,e,n)=>e in t?Ib(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Y=(t,e,n)=>(Sb(t,typeof e!="symbol"?e+"":e,n),n);function bb(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Zw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var eE={exports:{}},qu={},tE={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Za=Symbol.for("react.element"),kb=Symbol.for("react.portal"),Ab=Symbol.for("react.fragment"),Cb=Symbol.for("react.strict_mode"),Pb=Symbol.for("react.profiler"),Rb=Symbol.for("react.provider"),Db=Symbol.for("react.context"),Nb=Symbol.for("react.forward_ref"),Mb=Symbol.for("react.suspense"),Ob=Symbol.for("react.memo"),Lb=Symbol.for("react.lazy"),Xy=Symbol.iterator;function Vb(t){return t===null||typeof t!="object"?null:(t=Xy&&t[Xy]||t["@@iterator"],typeof t=="function"?t:null)}var nE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},iE=Object.assign,rE={};function Ys(t,e,n){this.props=t,this.context=e,this.refs=rE,this.updater=n||nE}Ys.prototype.isReactComponent={};Ys.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ys.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sE(){}sE.prototype=Ys.prototype;function Lp(t,e,n){this.props=t,this.context=e,this.refs=rE,this.updater=n||nE}var Vp=Lp.prototype=new sE;Vp.constructor=Lp;iE(Vp,Ys.prototype);Vp.isPureReactComponent=!0;var Jy=Array.isArray,oE=Object.prototype.hasOwnProperty,Fp={current:null},aE={key:!0,ref:!0,__self:!0,__source:!0};function lE(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)oE.call(e,i)&&!aE.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Za,type:t,key:s,ref:o,props:r,_owner:Fp.current}}function Fb(t,e){return{$$typeof:Za,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function jp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Za}function jb(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Zy=/\/+/g;function ad(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jb(""+t.key):e.toString(36)}function vc(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Za:case kb:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+ad(o,0):i,Jy(r)?(n="",t!=null&&(n=t.replace(Zy,"$&/")+"/"),vc(r,e,n,"",function(c){return c})):r!=null&&(jp(r)&&(r=Fb(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Zy,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",Jy(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+ad(s,a);o+=vc(s,e,n,l,r)}else if(l=Vb(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+ad(s,a++),o+=vc(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ml(t,e,n){if(t==null)return t;var i=[],r=0;return vc(t,i,"","",function(s){return e.call(n,s,r++)}),i}function Ub(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var bt={current:null},wc={transition:null},zb={ReactCurrentDispatcher:bt,ReactCurrentBatchConfig:wc,ReactCurrentOwner:Fp};function cE(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:Ml,forEach:function(t,e,n){Ml(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ml(t,function(){e++}),e},toArray:function(t){return Ml(t,function(e){return e})||[]},only:function(t){if(!jp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ee.Component=Ys;ee.Fragment=Ab;ee.Profiler=Pb;ee.PureComponent=Lp;ee.StrictMode=Cb;ee.Suspense=Mb;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zb;ee.act=cE;ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=iE({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Fp.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)oE.call(e,l)&&!aE.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Za,type:t.type,key:r,ref:s,props:i,_owner:o}};ee.createContext=function(t){return t={$$typeof:Db,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Rb,_context:t},t.Consumer=t};ee.createElement=lE;ee.createFactory=function(t){var e=lE.bind(null,t);return e.type=t,e};ee.createRef=function(){return{current:null}};ee.forwardRef=function(t){return{$$typeof:Nb,render:t}};ee.isValidElement=jp;ee.lazy=function(t){return{$$typeof:Lb,_payload:{_status:-1,_result:t},_init:Ub}};ee.memo=function(t,e){return{$$typeof:Ob,type:t,compare:e===void 0?null:e}};ee.startTransition=function(t){var e=wc.transition;wc.transition={};try{t()}finally{wc.transition=e}};ee.unstable_act=cE;ee.useCallback=function(t,e){return bt.current.useCallback(t,e)};ee.useContext=function(t){return bt.current.useContext(t)};ee.useDebugValue=function(){};ee.useDeferredValue=function(t){return bt.current.useDeferredValue(t)};ee.useEffect=function(t,e){return bt.current.useEffect(t,e)};ee.useId=function(){return bt.current.useId()};ee.useImperativeHandle=function(t,e,n){return bt.current.useImperativeHandle(t,e,n)};ee.useInsertionEffect=function(t,e){return bt.current.useInsertionEffect(t,e)};ee.useLayoutEffect=function(t,e){return bt.current.useLayoutEffect(t,e)};ee.useMemo=function(t,e){return bt.current.useMemo(t,e)};ee.useReducer=function(t,e,n){return bt.current.useReducer(t,e,n)};ee.useRef=function(t){return bt.current.useRef(t)};ee.useState=function(t){return bt.current.useState(t)};ee.useSyncExternalStore=function(t,e,n){return bt.current.useSyncExternalStore(t,e,n)};ee.useTransition=function(){return bt.current.useTransition()};ee.version="18.3.1";tE.exports=ee;var j=tE.exports;const el=Zw(j),Bb=bb({__proto__:null,default:el},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $b=j,Wb=Symbol.for("react.element"),Hb=Symbol.for("react.fragment"),qb=Object.prototype.hasOwnProperty,Kb=$b.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Gb={key:!0,ref:!0,__self:!0,__source:!0};function uE(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)qb.call(e,i)&&!Gb.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:Wb,type:t,key:s,ref:o,props:r,_owner:Kb.current}}qu.Fragment=Hb;qu.jsx=uE;qu.jsxs=uE;eE.exports=qu;var C=eE.exports,of={},hE={exports:{}},Wt={},dE={exports:{}},fE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,K){var G=B.length;B.push(K);e:for(;0<G;){var ge=G-1>>>1,re=B[ge];if(0<r(re,K))B[ge]=K,B[G]=re,G=ge;else break e}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var K=B[0],G=B.pop();if(G!==K){B[0]=G;e:for(var ge=0,re=B.length,me=re>>>1;ge<me;){var Xe=2*(ge+1)-1,wt=B[Xe],Je=Xe+1,wn=B[Je];if(0>r(wt,G))Je<re&&0>r(wn,wt)?(B[ge]=wn,B[Je]=G,ge=Je):(B[ge]=wt,B[Xe]=G,ge=Xe);else if(Je<re&&0>r(wn,G))B[ge]=wn,B[Je]=G,ge=Je;else break e}}return K}function r(B,K){var G=B.sortIndex-K.sortIndex;return G!==0?G:B.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,m=!1,y=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(B){for(var K=n(c);K!==null;){if(K.callback===null)i(c);else if(K.startTime<=B)i(c),K.sortIndex=K.expirationTime,e(l,K);else break;K=n(c)}}function D(B){if(E=!1,S(B),!y)if(n(l)!==null)y=!0,be(M);else{var K=n(c);K!==null&&De(D,K.startTime-B)}}function M(B,K){y=!1,E&&(E=!1,_(w),w=-1),m=!0;var G=p;try{for(S(K),d=n(l);d!==null&&(!(d.expirationTime>K)||B&&!P());){var ge=d.callback;if(typeof ge=="function"){d.callback=null,p=d.priorityLevel;var re=ge(d.expirationTime<=K);K=t.unstable_now(),typeof re=="function"?d.callback=re:d===n(l)&&i(l),S(K)}else i(l);d=n(l)}if(d!==null)var me=!0;else{var Xe=n(c);Xe!==null&&De(D,Xe.startTime-K),me=!1}return me}finally{d=null,p=G,m=!1}}var L=!1,I=null,w=-1,b=5,k=-1;function P(){return!(t.unstable_now()-k<b)}function R(){if(I!==null){var B=t.unstable_now();k=B;var K=!0;try{K=I(!0,B)}finally{K?A():(L=!1,I=null)}}else L=!1}var A;if(typeof v=="function")A=function(){v(R)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,ue=Se.port2;Se.port1.onmessage=R,A=function(){ue.postMessage(null)}}else A=function(){T(R,0)};function be(B){I=B,L||(L=!0,A())}function De(B,K){w=T(function(){B(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,be(M))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(p){case 1:case 2:case 3:var K=3;break;default:K=p}var G=p;p=K;try{return B()}finally{p=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,K){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var G=p;p=B;try{return K()}finally{p=G}},t.unstable_scheduleCallback=function(B,K,G){var ge=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ge+G:ge):G=ge,B){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=G+re,B={id:h++,callback:K,priorityLevel:B,startTime:G,expirationTime:re,sortIndex:-1},G>ge?(B.sortIndex=G,e(c,B),n(l)===null&&B===n(c)&&(E?(_(w),w=-1):E=!0,De(D,G-ge))):(B.sortIndex=re,e(l,B),y||m||(y=!0,be(M))),B},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(B){var K=p;return function(){var G=p;p=K;try{return B.apply(this,arguments)}finally{p=G}}}})(fE);dE.exports=fE;var Qb=dE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yb=j,$t=Qb;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pE=new Set,ya={};function Br(t,e){Rs(t,e),Rs(t+"Capture",e)}function Rs(t,e){for(ya[t]=e,t=0;t<e.length;t++)pE.add(e[t])}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),af=Object.prototype.hasOwnProperty,Xb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,e_={},t_={};function Jb(t){return af.call(t_,t)?!0:af.call(e_,t)?!1:Xb.test(t)?t_[t]=!0:(e_[t]=!0,!1)}function Zb(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ek(t,e,n,i){if(e===null||typeof e>"u"||Zb(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kt(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){st[t]=new kt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];st[e]=new kt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){st[t]=new kt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){st[t]=new kt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){st[t]=new kt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){st[t]=new kt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){st[t]=new kt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){st[t]=new kt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){st[t]=new kt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Up=/[\-:]([a-z])/g;function zp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Up,zp);st[e]=new kt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Up,zp);st[e]=new kt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Up,zp);st[e]=new kt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){st[t]=new kt(t,1,!1,t.toLowerCase(),null,!1,!1)});st.xlinkHref=new kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){st[t]=new kt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bp(t,e,n,i){var r=st.hasOwnProperty(e)?st[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ek(e,n,r,i)&&(n=null),i||r===null?Jb(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var ci=Yb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ol=Symbol.for("react.element"),as=Symbol.for("react.portal"),ls=Symbol.for("react.fragment"),$p=Symbol.for("react.strict_mode"),lf=Symbol.for("react.profiler"),gE=Symbol.for("react.provider"),mE=Symbol.for("react.context"),Wp=Symbol.for("react.forward_ref"),cf=Symbol.for("react.suspense"),uf=Symbol.for("react.suspense_list"),Hp=Symbol.for("react.memo"),mi=Symbol.for("react.lazy"),yE=Symbol.for("react.offscreen"),n_=Symbol.iterator;function Io(t){return t===null||typeof t!="object"?null:(t=n_&&t[n_]||t["@@iterator"],typeof t=="function"?t:null)}var Pe=Object.assign,ld;function Fo(t){if(ld===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ld=e&&e[1]||""}return`
`+ld+t}var cd=!1;function ud(t,e){if(!t||cd)return"";cd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{cd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Fo(t):""}function tk(t){switch(t.tag){case 5:return Fo(t.type);case 16:return Fo("Lazy");case 13:return Fo("Suspense");case 19:return Fo("SuspenseList");case 0:case 2:case 15:return t=ud(t.type,!1),t;case 11:return t=ud(t.type.render,!1),t;case 1:return t=ud(t.type,!0),t;default:return""}}function hf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ls:return"Fragment";case as:return"Portal";case lf:return"Profiler";case $p:return"StrictMode";case cf:return"Suspense";case uf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case mE:return(t.displayName||"Context")+".Consumer";case gE:return(t._context.displayName||"Context")+".Provider";case Wp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Hp:return e=t.displayName||null,e!==null?e:hf(t.type)||"Memo";case mi:e=t._payload,t=t._init;try{return hf(t(e))}catch{}}return null}function nk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hf(e);case 8:return e===$p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Hi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _E(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ik(t){var e=_E(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ll(t){t._valueTracker||(t._valueTracker=ik(t))}function vE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=_E(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Wc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function df(t,e){var n=e.checked;return Pe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function i_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Hi(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wE(t,e){e=e.checked,e!=null&&Bp(t,"checked",e,!1)}function ff(t,e){wE(t,e);var n=Hi(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?pf(t,e.type,n):e.hasOwnProperty("defaultValue")&&pf(t,e.type,Hi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function r_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function pf(t,e,n){(e!=="number"||Wc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var jo=Array.isArray;function vs(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Hi(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function gf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Pe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function s_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(jo(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Hi(n)}}function EE(t,e){var n=Hi(e.value),i=Hi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function o_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function TE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?TE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vl,xE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Vl=Vl||document.createElement("div"),Vl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _a(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Yo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rk=["Webkit","ms","Moz","O"];Object.keys(Yo).forEach(function(t){rk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Yo[e]=Yo[t]})});function IE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Yo.hasOwnProperty(t)&&Yo[t]?(""+e).trim():e+"px"}function SE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=IE(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var sk=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yf(t,e){if(e){if(sk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function _f(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vf=null;function qp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var wf=null,ws=null,Es=null;function a_(t){if(t=il(t)){if(typeof wf!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Xu(e),wf(t.stateNode,t.type,e))}}function bE(t){ws?Es?Es.push(t):Es=[t]:ws=t}function kE(){if(ws){var t=ws,e=Es;if(Es=ws=null,a_(t),e)for(t=0;t<e.length;t++)a_(e[t])}}function AE(t,e){return t(e)}function CE(){}var hd=!1;function PE(t,e,n){if(hd)return t(e,n);hd=!0;try{return AE(t,e,n)}finally{hd=!1,(ws!==null||Es!==null)&&(CE(),kE())}}function va(t,e){var n=t.stateNode;if(n===null)return null;var i=Xu(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Ef=!1;if(Zn)try{var So={};Object.defineProperty(So,"passive",{get:function(){Ef=!0}}),window.addEventListener("test",So,So),window.removeEventListener("test",So,So)}catch{Ef=!1}function ok(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Xo=!1,Hc=null,qc=!1,Tf=null,ak={onError:function(t){Xo=!0,Hc=t}};function lk(t,e,n,i,r,s,o,a,l){Xo=!1,Hc=null,ok.apply(ak,arguments)}function ck(t,e,n,i,r,s,o,a,l){if(lk.apply(this,arguments),Xo){if(Xo){var c=Hc;Xo=!1,Hc=null}else throw Error(U(198));qc||(qc=!0,Tf=c)}}function $r(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function RE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function l_(t){if($r(t)!==t)throw Error(U(188))}function uk(t){var e=t.alternate;if(!e){if(e=$r(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return l_(r),t;if(s===i)return l_(r),e;s=s.sibling}throw Error(U(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==i)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function DE(t){return t=uk(t),t!==null?NE(t):null}function NE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=NE(t);if(e!==null)return e;t=t.sibling}return null}var ME=$t.unstable_scheduleCallback,c_=$t.unstable_cancelCallback,hk=$t.unstable_shouldYield,dk=$t.unstable_requestPaint,Ve=$t.unstable_now,fk=$t.unstable_getCurrentPriorityLevel,Kp=$t.unstable_ImmediatePriority,OE=$t.unstable_UserBlockingPriority,Kc=$t.unstable_NormalPriority,pk=$t.unstable_LowPriority,LE=$t.unstable_IdlePriority,Ku=null,bn=null;function gk(t){if(bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(Ku,t,void 0,(t.current.flags&128)===128)}catch{}}var fn=Math.clz32?Math.clz32:_k,mk=Math.log,yk=Math.LN2;function _k(t){return t>>>=0,t===0?32:31-(mk(t)/yk|0)|0}var Fl=64,jl=4194304;function Uo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Gc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Uo(a):(s&=o,s!==0&&(i=Uo(s)))}else o=n&~r,o!==0?i=Uo(o):s!==0&&(i=Uo(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-fn(e),r=1<<n,i|=t[n],e&=~r;return i}function vk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wk(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-fn(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=vk(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function xf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function VE(){var t=Fl;return Fl<<=1,!(Fl&4194240)&&(Fl=64),t}function dd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function tl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-fn(e),t[e]=n}function Ek(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-fn(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function Gp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-fn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var fe=0;function FE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jE,Qp,UE,zE,BE,If=!1,Ul=[],Ri=null,Di=null,Ni=null,wa=new Map,Ea=new Map,_i=[],Tk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function u_(t,e){switch(t){case"focusin":case"focusout":Ri=null;break;case"dragenter":case"dragleave":Di=null;break;case"mouseover":case"mouseout":Ni=null;break;case"pointerover":case"pointerout":wa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ea.delete(e.pointerId)}}function bo(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=il(e),e!==null&&Qp(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function xk(t,e,n,i,r){switch(e){case"focusin":return Ri=bo(Ri,t,e,n,i,r),!0;case"dragenter":return Di=bo(Di,t,e,n,i,r),!0;case"mouseover":return Ni=bo(Ni,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return wa.set(s,bo(wa.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Ea.set(s,bo(Ea.get(s)||null,t,e,n,i,r)),!0}return!1}function $E(t){var e=_r(t.target);if(e!==null){var n=$r(e);if(n!==null){if(e=n.tag,e===13){if(e=RE(n),e!==null){t.blockedOn=e,BE(t.priority,function(){UE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ec(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Sf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);vf=i,n.target.dispatchEvent(i),vf=null}else return e=il(n),e!==null&&Qp(e),t.blockedOn=n,!1;e.shift()}return!0}function h_(t,e,n){Ec(t)&&n.delete(e)}function Ik(){If=!1,Ri!==null&&Ec(Ri)&&(Ri=null),Di!==null&&Ec(Di)&&(Di=null),Ni!==null&&Ec(Ni)&&(Ni=null),wa.forEach(h_),Ea.forEach(h_)}function ko(t,e){t.blockedOn===e&&(t.blockedOn=null,If||(If=!0,$t.unstable_scheduleCallback($t.unstable_NormalPriority,Ik)))}function Ta(t){function e(r){return ko(r,t)}if(0<Ul.length){ko(Ul[0],t);for(var n=1;n<Ul.length;n++){var i=Ul[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Ri!==null&&ko(Ri,t),Di!==null&&ko(Di,t),Ni!==null&&ko(Ni,t),wa.forEach(e),Ea.forEach(e),n=0;n<_i.length;n++)i=_i[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<_i.length&&(n=_i[0],n.blockedOn===null);)$E(n),n.blockedOn===null&&_i.shift()}var Ts=ci.ReactCurrentBatchConfig,Qc=!0;function Sk(t,e,n,i){var r=fe,s=Ts.transition;Ts.transition=null;try{fe=1,Yp(t,e,n,i)}finally{fe=r,Ts.transition=s}}function bk(t,e,n,i){var r=fe,s=Ts.transition;Ts.transition=null;try{fe=4,Yp(t,e,n,i)}finally{fe=r,Ts.transition=s}}function Yp(t,e,n,i){if(Qc){var r=Sf(t,e,n,i);if(r===null)Td(t,e,i,Yc,n),u_(t,i);else if(xk(r,t,e,n,i))i.stopPropagation();else if(u_(t,i),e&4&&-1<Tk.indexOf(t)){for(;r!==null;){var s=il(r);if(s!==null&&jE(s),s=Sf(t,e,n,i),s===null&&Td(t,e,i,Yc,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Td(t,e,i,null,n)}}var Yc=null;function Sf(t,e,n,i){if(Yc=null,t=qp(i),t=_r(t),t!==null)if(e=$r(t),e===null)t=null;else if(n=e.tag,n===13){if(t=RE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yc=t,null}function WE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fk()){case Kp:return 1;case OE:return 4;case Kc:case pk:return 16;case LE:return 536870912;default:return 16}default:return 16}}var xi=null,Xp=null,Tc=null;function HE(){if(Tc)return Tc;var t,e=Xp,n=e.length,i,r="value"in xi?xi.value:xi.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return Tc=r.slice(t,1<i?1-i:void 0)}function xc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zl(){return!0}function d_(){return!1}function Ht(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?zl:d_,this.isPropagationStopped=d_,this}return Pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zl)},persist:function(){},isPersistent:zl}),e}var Xs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jp=Ht(Xs),nl=Pe({},Xs,{view:0,detail:0}),kk=Ht(nl),fd,pd,Ao,Gu=Pe({},nl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ao&&(Ao&&t.type==="mousemove"?(fd=t.screenX-Ao.screenX,pd=t.screenY-Ao.screenY):pd=fd=0,Ao=t),fd)},movementY:function(t){return"movementY"in t?t.movementY:pd}}),f_=Ht(Gu),Ak=Pe({},Gu,{dataTransfer:0}),Ck=Ht(Ak),Pk=Pe({},nl,{relatedTarget:0}),gd=Ht(Pk),Rk=Pe({},Xs,{animationName:0,elapsedTime:0,pseudoElement:0}),Dk=Ht(Rk),Nk=Pe({},Xs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Mk=Ht(Nk),Ok=Pe({},Xs,{data:0}),p_=Ht(Ok),Lk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Fk[t])?!!e[t]:!1}function Zp(){return jk}var Uk=Pe({},nl,{key:function(t){if(t.key){var e=Lk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Vk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zp,charCode:function(t){return t.type==="keypress"?xc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zk=Ht(Uk),Bk=Pe({},Gu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),g_=Ht(Bk),$k=Pe({},nl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zp}),Wk=Ht($k),Hk=Pe({},Xs,{propertyName:0,elapsedTime:0,pseudoElement:0}),qk=Ht(Hk),Kk=Pe({},Gu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Gk=Ht(Kk),Qk=[9,13,27,32],eg=Zn&&"CompositionEvent"in window,Jo=null;Zn&&"documentMode"in document&&(Jo=document.documentMode);var Yk=Zn&&"TextEvent"in window&&!Jo,qE=Zn&&(!eg||Jo&&8<Jo&&11>=Jo),m_=String.fromCharCode(32),y_=!1;function KE(t,e){switch(t){case"keyup":return Qk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function GE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var cs=!1;function Xk(t,e){switch(t){case"compositionend":return GE(e);case"keypress":return e.which!==32?null:(y_=!0,m_);case"textInput":return t=e.data,t===m_&&y_?null:t;default:return null}}function Jk(t,e){if(cs)return t==="compositionend"||!eg&&KE(t,e)?(t=HE(),Tc=Xp=xi=null,cs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qE&&e.locale!=="ko"?null:e.data;default:return null}}var Zk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function __(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Zk[t.type]:e==="textarea"}function QE(t,e,n,i){bE(i),e=Xc(e,"onChange"),0<e.length&&(n=new Jp("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Zo=null,xa=null;function eA(t){o1(t,0)}function Qu(t){var e=ds(t);if(vE(e))return t}function tA(t,e){if(t==="change")return e}var YE=!1;if(Zn){var md;if(Zn){var yd="oninput"in document;if(!yd){var v_=document.createElement("div");v_.setAttribute("oninput","return;"),yd=typeof v_.oninput=="function"}md=yd}else md=!1;YE=md&&(!document.documentMode||9<document.documentMode)}function w_(){Zo&&(Zo.detachEvent("onpropertychange",XE),xa=Zo=null)}function XE(t){if(t.propertyName==="value"&&Qu(xa)){var e=[];QE(e,xa,t,qp(t)),PE(eA,e)}}function nA(t,e,n){t==="focusin"?(w_(),Zo=e,xa=n,Zo.attachEvent("onpropertychange",XE)):t==="focusout"&&w_()}function iA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qu(xa)}function rA(t,e){if(t==="click")return Qu(e)}function sA(t,e){if(t==="input"||t==="change")return Qu(e)}function oA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mn=typeof Object.is=="function"?Object.is:oA;function Ia(t,e){if(mn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!af.call(e,r)||!mn(t[r],e[r]))return!1}return!0}function E_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function T_(t,e){var n=E_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=E_(n)}}function JE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?JE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ZE(){for(var t=window,e=Wc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Wc(t.document)}return e}function tg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function aA(t){var e=ZE(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&JE(n.ownerDocument.documentElement,n)){if(i!==null&&tg(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=T_(n,s);var o=T_(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var lA=Zn&&"documentMode"in document&&11>=document.documentMode,us=null,bf=null,ea=null,kf=!1;function x_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;kf||us==null||us!==Wc(i)||(i=us,"selectionStart"in i&&tg(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ea&&Ia(ea,i)||(ea=i,i=Xc(bf,"onSelect"),0<i.length&&(e=new Jp("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=us)))}function Bl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var hs={animationend:Bl("Animation","AnimationEnd"),animationiteration:Bl("Animation","AnimationIteration"),animationstart:Bl("Animation","AnimationStart"),transitionend:Bl("Transition","TransitionEnd")},_d={},e1={};Zn&&(e1=document.createElement("div").style,"AnimationEvent"in window||(delete hs.animationend.animation,delete hs.animationiteration.animation,delete hs.animationstart.animation),"TransitionEvent"in window||delete hs.transitionend.transition);function Yu(t){if(_d[t])return _d[t];if(!hs[t])return t;var e=hs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in e1)return _d[t]=e[n];return t}var t1=Yu("animationend"),n1=Yu("animationiteration"),i1=Yu("animationstart"),r1=Yu("transitionend"),s1=new Map,I_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ji(t,e){s1.set(t,e),Br(e,[t])}for(var vd=0;vd<I_.length;vd++){var wd=I_[vd],cA=wd.toLowerCase(),uA=wd[0].toUpperCase()+wd.slice(1);Ji(cA,"on"+uA)}Ji(t1,"onAnimationEnd");Ji(n1,"onAnimationIteration");Ji(i1,"onAnimationStart");Ji("dblclick","onDoubleClick");Ji("focusin","onFocus");Ji("focusout","onBlur");Ji(r1,"onTransitionEnd");Rs("onMouseEnter",["mouseout","mouseover"]);Rs("onMouseLeave",["mouseout","mouseover"]);Rs("onPointerEnter",["pointerout","pointerover"]);Rs("onPointerLeave",["pointerout","pointerover"]);Br("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Br("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Br("onBeforeInput",["compositionend","keypress","textInput","paste"]);Br("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Br("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Br("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hA=new Set("cancel close invalid load scroll toggle".split(" ").concat(zo));function S_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,ck(i,e,void 0,t),t.currentTarget=null}function o1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;S_(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;S_(r,a,c),s=l}}}if(qc)throw t=Tf,qc=!1,Tf=null,t}function Ee(t,e){var n=e[Df];n===void 0&&(n=e[Df]=new Set);var i=t+"__bubble";n.has(i)||(a1(e,t,2,!1),n.add(i))}function Ed(t,e,n){var i=0;e&&(i|=4),a1(n,t,i,e)}var $l="_reactListening"+Math.random().toString(36).slice(2);function Sa(t){if(!t[$l]){t[$l]=!0,pE.forEach(function(n){n!=="selectionchange"&&(hA.has(n)||Ed(n,!1,t),Ed(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$l]||(e[$l]=!0,Ed("selectionchange",!1,e))}}function a1(t,e,n,i){switch(WE(e)){case 1:var r=Sk;break;case 4:r=bk;break;default:r=Yp}n=r.bind(null,e,n,t),r=void 0,!Ef||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Td(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=_r(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}PE(function(){var c=s,h=qp(n),d=[];e:{var p=s1.get(t);if(p!==void 0){var m=Jp,y=t;switch(t){case"keypress":if(xc(n)===0)break e;case"keydown":case"keyup":m=zk;break;case"focusin":y="focus",m=gd;break;case"focusout":y="blur",m=gd;break;case"beforeblur":case"afterblur":m=gd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=f_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Ck;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Wk;break;case t1:case n1:case i1:m=Dk;break;case r1:m=qk;break;case"scroll":m=kk;break;case"wheel":m=Gk;break;case"copy":case"cut":case"paste":m=Mk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=g_}var E=(e&4)!==0,T=!E&&t==="scroll",_=E?p!==null?p+"Capture":null:p;E=[];for(var v=c,S;v!==null;){S=v;var D=S.stateNode;if(S.tag===5&&D!==null&&(S=D,_!==null&&(D=va(v,_),D!=null&&E.push(ba(v,D,S)))),T)break;v=v.return}0<E.length&&(p=new m(p,y,null,n,h),d.push({event:p,listeners:E}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==vf&&(y=n.relatedTarget||n.fromElement)&&(_r(y)||y[ei]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=c,y=y?_r(y):null,y!==null&&(T=$r(y),y!==T||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(E=f_,D="onMouseLeave",_="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(E=g_,D="onPointerLeave",_="onPointerEnter",v="pointer"),T=m==null?p:ds(m),S=y==null?p:ds(y),p=new E(D,v+"leave",m,n,h),p.target=T,p.relatedTarget=S,D=null,_r(h)===c&&(E=new E(_,v+"enter",y,n,h),E.target=S,E.relatedTarget=T,D=E),T=D,m&&y)t:{for(E=m,_=y,v=0,S=E;S;S=ts(S))v++;for(S=0,D=_;D;D=ts(D))S++;for(;0<v-S;)E=ts(E),v--;for(;0<S-v;)_=ts(_),S--;for(;v--;){if(E===_||_!==null&&E===_.alternate)break t;E=ts(E),_=ts(_)}E=null}else E=null;m!==null&&b_(d,p,m,E,!1),y!==null&&T!==null&&b_(d,T,y,E,!0)}}e:{if(p=c?ds(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var M=tA;else if(__(p))if(YE)M=sA;else{M=iA;var L=nA}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(M=rA);if(M&&(M=M(t,c))){QE(d,M,n,h);break e}L&&L(t,p,c),t==="focusout"&&(L=p._wrapperState)&&L.controlled&&p.type==="number"&&pf(p,"number",p.value)}switch(L=c?ds(c):window,t){case"focusin":(__(L)||L.contentEditable==="true")&&(us=L,bf=c,ea=null);break;case"focusout":ea=bf=us=null;break;case"mousedown":kf=!0;break;case"contextmenu":case"mouseup":case"dragend":kf=!1,x_(d,n,h);break;case"selectionchange":if(lA)break;case"keydown":case"keyup":x_(d,n,h)}var I;if(eg)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else cs?KE(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(qE&&n.locale!=="ko"&&(cs||w!=="onCompositionStart"?w==="onCompositionEnd"&&cs&&(I=HE()):(xi=h,Xp="value"in xi?xi.value:xi.textContent,cs=!0)),L=Xc(c,w),0<L.length&&(w=new p_(w,t,null,n,h),d.push({event:w,listeners:L}),I?w.data=I:(I=GE(n),I!==null&&(w.data=I)))),(I=Yk?Xk(t,n):Jk(t,n))&&(c=Xc(c,"onBeforeInput"),0<c.length&&(h=new p_("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=I))}o1(d,e)})}function ba(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xc(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=va(t,n),s!=null&&i.unshift(ba(t,s,r)),s=va(t,e),s!=null&&i.push(ba(t,s,r))),t=t.return}return i}function ts(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function b_(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=va(n,s),l!=null&&o.unshift(ba(n,l,a))):r||(l=va(n,s),l!=null&&o.push(ba(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var dA=/\r\n?/g,fA=/\u0000|\uFFFD/g;function k_(t){return(typeof t=="string"?t:""+t).replace(dA,`
`).replace(fA,"")}function Wl(t,e,n){if(e=k_(e),k_(t)!==e&&n)throw Error(U(425))}function Jc(){}var Af=null,Cf=null;function Pf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Rf=typeof setTimeout=="function"?setTimeout:void 0,pA=typeof clearTimeout=="function"?clearTimeout:void 0,A_=typeof Promise=="function"?Promise:void 0,gA=typeof queueMicrotask=="function"?queueMicrotask:typeof A_<"u"?function(t){return A_.resolve(null).then(t).catch(mA)}:Rf;function mA(t){setTimeout(function(){throw t})}function xd(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Ta(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Ta(e)}function Mi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function C_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Js=Math.random().toString(36).slice(2),Sn="__reactFiber$"+Js,ka="__reactProps$"+Js,ei="__reactContainer$"+Js,Df="__reactEvents$"+Js,yA="__reactListeners$"+Js,_A="__reactHandles$"+Js;function _r(t){var e=t[Sn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ei]||n[Sn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=C_(t);t!==null;){if(n=t[Sn])return n;t=C_(t)}return e}t=n,n=t.parentNode}return null}function il(t){return t=t[Sn]||t[ei],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ds(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Xu(t){return t[ka]||null}var Nf=[],fs=-1;function Zi(t){return{current:t}}function xe(t){0>fs||(t.current=Nf[fs],Nf[fs]=null,fs--)}function ve(t,e){fs++,Nf[fs]=t.current,t.current=e}var qi={},yt=Zi(qi),Dt=Zi(!1),Pr=qi;function Ds(t,e){var n=t.type.contextTypes;if(!n)return qi;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Nt(t){return t=t.childContextTypes,t!=null}function Zc(){xe(Dt),xe(yt)}function P_(t,e,n){if(yt.current!==qi)throw Error(U(168));ve(yt,e),ve(Dt,n)}function l1(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(U(108,nk(t)||"Unknown",r));return Pe({},n,i)}function eu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qi,Pr=yt.current,ve(yt,t),ve(Dt,Dt.current),!0}function R_(t,e,n){var i=t.stateNode;if(!i)throw Error(U(169));n?(t=l1(t,e,Pr),i.__reactInternalMemoizedMergedChildContext=t,xe(Dt),xe(yt),ve(yt,t)):xe(Dt),ve(Dt,n)}var zn=null,Ju=!1,Id=!1;function c1(t){zn===null?zn=[t]:zn.push(t)}function vA(t){Ju=!0,c1(t)}function er(){if(!Id&&zn!==null){Id=!0;var t=0,e=fe;try{var n=zn;for(fe=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}zn=null,Ju=!1}catch(r){throw zn!==null&&(zn=zn.slice(t+1)),ME(Kp,er),r}finally{fe=e,Id=!1}}return null}var ps=[],gs=0,tu=null,nu=0,Kt=[],Gt=0,Rr=null,Wn=1,Hn="";function fr(t,e){ps[gs++]=nu,ps[gs++]=tu,tu=t,nu=e}function u1(t,e,n){Kt[Gt++]=Wn,Kt[Gt++]=Hn,Kt[Gt++]=Rr,Rr=t;var i=Wn;t=Hn;var r=32-fn(i)-1;i&=~(1<<r),n+=1;var s=32-fn(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Wn=1<<32-fn(e)+r|n<<r|i,Hn=s+t}else Wn=1<<s|n<<r|i,Hn=t}function ng(t){t.return!==null&&(fr(t,1),u1(t,1,0))}function ig(t){for(;t===tu;)tu=ps[--gs],ps[gs]=null,nu=ps[--gs],ps[gs]=null;for(;t===Rr;)Rr=Kt[--Gt],Kt[Gt]=null,Hn=Kt[--Gt],Kt[Gt]=null,Wn=Kt[--Gt],Kt[Gt]=null}var zt=null,jt=null,Ie=!1,hn=null;function h1(t,e){var n=Yt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function D_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zt=t,jt=Mi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zt=t,jt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Rr!==null?{id:Wn,overflow:Hn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,zt=t,jt=null,!0):!1;default:return!1}}function Mf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Of(t){if(Ie){var e=jt;if(e){var n=e;if(!D_(t,e)){if(Mf(t))throw Error(U(418));e=Mi(n.nextSibling);var i=zt;e&&D_(t,e)?h1(i,n):(t.flags=t.flags&-4097|2,Ie=!1,zt=t)}}else{if(Mf(t))throw Error(U(418));t.flags=t.flags&-4097|2,Ie=!1,zt=t}}}function N_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zt=t}function Hl(t){if(t!==zt)return!1;if(!Ie)return N_(t),Ie=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Pf(t.type,t.memoizedProps)),e&&(e=jt)){if(Mf(t))throw d1(),Error(U(418));for(;e;)h1(t,e),e=Mi(e.nextSibling)}if(N_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){jt=Mi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}jt=null}}else jt=zt?Mi(t.stateNode.nextSibling):null;return!0}function d1(){for(var t=jt;t;)t=Mi(t.nextSibling)}function Ns(){jt=zt=null,Ie=!1}function rg(t){hn===null?hn=[t]:hn.push(t)}var wA=ci.ReactCurrentBatchConfig;function Co(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var i=n.stateNode}if(!i)throw Error(U(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function ql(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function M_(t){var e=t._init;return e(t._payload)}function f1(t){function e(_,v){if(t){var S=_.deletions;S===null?(_.deletions=[v],_.flags|=16):S.push(v)}}function n(_,v){if(!t)return null;for(;v!==null;)e(_,v),v=v.sibling;return null}function i(_,v){for(_=new Map;v!==null;)v.key!==null?_.set(v.key,v):_.set(v.index,v),v=v.sibling;return _}function r(_,v){return _=Fi(_,v),_.index=0,_.sibling=null,_}function s(_,v,S){return _.index=S,t?(S=_.alternate,S!==null?(S=S.index,S<v?(_.flags|=2,v):S):(_.flags|=2,v)):(_.flags|=1048576,v)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,v,S,D){return v===null||v.tag!==6?(v=Rd(S,_.mode,D),v.return=_,v):(v=r(v,S),v.return=_,v)}function l(_,v,S,D){var M=S.type;return M===ls?h(_,v,S.props.children,D,S.key):v!==null&&(v.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===mi&&M_(M)===v.type)?(D=r(v,S.props),D.ref=Co(_,v,S),D.return=_,D):(D=Pc(S.type,S.key,S.props,null,_.mode,D),D.ref=Co(_,v,S),D.return=_,D)}function c(_,v,S,D){return v===null||v.tag!==4||v.stateNode.containerInfo!==S.containerInfo||v.stateNode.implementation!==S.implementation?(v=Dd(S,_.mode,D),v.return=_,v):(v=r(v,S.children||[]),v.return=_,v)}function h(_,v,S,D,M){return v===null||v.tag!==7?(v=br(S,_.mode,D,M),v.return=_,v):(v=r(v,S),v.return=_,v)}function d(_,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Rd(""+v,_.mode,S),v.return=_,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ol:return S=Pc(v.type,v.key,v.props,null,_.mode,S),S.ref=Co(_,null,v),S.return=_,S;case as:return v=Dd(v,_.mode,S),v.return=_,v;case mi:var D=v._init;return d(_,D(v._payload),S)}if(jo(v)||Io(v))return v=br(v,_.mode,S,null),v.return=_,v;ql(_,v)}return null}function p(_,v,S,D){var M=v!==null?v.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return M!==null?null:a(_,v,""+S,D);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ol:return S.key===M?l(_,v,S,D):null;case as:return S.key===M?c(_,v,S,D):null;case mi:return M=S._init,p(_,v,M(S._payload),D)}if(jo(S)||Io(S))return M!==null?null:h(_,v,S,D,null);ql(_,S)}return null}function m(_,v,S,D,M){if(typeof D=="string"&&D!==""||typeof D=="number")return _=_.get(S)||null,a(v,_,""+D,M);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Ol:return _=_.get(D.key===null?S:D.key)||null,l(v,_,D,M);case as:return _=_.get(D.key===null?S:D.key)||null,c(v,_,D,M);case mi:var L=D._init;return m(_,v,S,L(D._payload),M)}if(jo(D)||Io(D))return _=_.get(S)||null,h(v,_,D,M,null);ql(v,D)}return null}function y(_,v,S,D){for(var M=null,L=null,I=v,w=v=0,b=null;I!==null&&w<S.length;w++){I.index>w?(b=I,I=null):b=I.sibling;var k=p(_,I,S[w],D);if(k===null){I===null&&(I=b);break}t&&I&&k.alternate===null&&e(_,I),v=s(k,v,w),L===null?M=k:L.sibling=k,L=k,I=b}if(w===S.length)return n(_,I),Ie&&fr(_,w),M;if(I===null){for(;w<S.length;w++)I=d(_,S[w],D),I!==null&&(v=s(I,v,w),L===null?M=I:L.sibling=I,L=I);return Ie&&fr(_,w),M}for(I=i(_,I);w<S.length;w++)b=m(I,_,w,S[w],D),b!==null&&(t&&b.alternate!==null&&I.delete(b.key===null?w:b.key),v=s(b,v,w),L===null?M=b:L.sibling=b,L=b);return t&&I.forEach(function(P){return e(_,P)}),Ie&&fr(_,w),M}function E(_,v,S,D){var M=Io(S);if(typeof M!="function")throw Error(U(150));if(S=M.call(S),S==null)throw Error(U(151));for(var L=M=null,I=v,w=v=0,b=null,k=S.next();I!==null&&!k.done;w++,k=S.next()){I.index>w?(b=I,I=null):b=I.sibling;var P=p(_,I,k.value,D);if(P===null){I===null&&(I=b);break}t&&I&&P.alternate===null&&e(_,I),v=s(P,v,w),L===null?M=P:L.sibling=P,L=P,I=b}if(k.done)return n(_,I),Ie&&fr(_,w),M;if(I===null){for(;!k.done;w++,k=S.next())k=d(_,k.value,D),k!==null&&(v=s(k,v,w),L===null?M=k:L.sibling=k,L=k);return Ie&&fr(_,w),M}for(I=i(_,I);!k.done;w++,k=S.next())k=m(I,_,w,k.value,D),k!==null&&(t&&k.alternate!==null&&I.delete(k.key===null?w:k.key),v=s(k,v,w),L===null?M=k:L.sibling=k,L=k);return t&&I.forEach(function(R){return e(_,R)}),Ie&&fr(_,w),M}function T(_,v,S,D){if(typeof S=="object"&&S!==null&&S.type===ls&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Ol:e:{for(var M=S.key,L=v;L!==null;){if(L.key===M){if(M=S.type,M===ls){if(L.tag===7){n(_,L.sibling),v=r(L,S.props.children),v.return=_,_=v;break e}}else if(L.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===mi&&M_(M)===L.type){n(_,L.sibling),v=r(L,S.props),v.ref=Co(_,L,S),v.return=_,_=v;break e}n(_,L);break}else e(_,L);L=L.sibling}S.type===ls?(v=br(S.props.children,_.mode,D,S.key),v.return=_,_=v):(D=Pc(S.type,S.key,S.props,null,_.mode,D),D.ref=Co(_,v,S),D.return=_,_=D)}return o(_);case as:e:{for(L=S.key;v!==null;){if(v.key===L)if(v.tag===4&&v.stateNode.containerInfo===S.containerInfo&&v.stateNode.implementation===S.implementation){n(_,v.sibling),v=r(v,S.children||[]),v.return=_,_=v;break e}else{n(_,v);break}else e(_,v);v=v.sibling}v=Dd(S,_.mode,D),v.return=_,_=v}return o(_);case mi:return L=S._init,T(_,v,L(S._payload),D)}if(jo(S))return y(_,v,S,D);if(Io(S))return E(_,v,S,D);ql(_,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,v!==null&&v.tag===6?(n(_,v.sibling),v=r(v,S),v.return=_,_=v):(n(_,v),v=Rd(S,_.mode,D),v.return=_,_=v),o(_)):n(_,v)}return T}var Ms=f1(!0),p1=f1(!1),iu=Zi(null),ru=null,ms=null,sg=null;function og(){sg=ms=ru=null}function ag(t){var e=iu.current;xe(iu),t._currentValue=e}function Lf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function xs(t,e){ru=t,sg=ms=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rt=!0),t.firstContext=null)}function rn(t){var e=t._currentValue;if(sg!==t)if(t={context:t,memoizedValue:e,next:null},ms===null){if(ru===null)throw Error(U(308));ms=t,ru.dependencies={lanes:0,firstContext:t}}else ms=ms.next=t;return e}var vr=null;function lg(t){vr===null?vr=[t]:vr.push(t)}function g1(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,lg(e)):(n.next=r.next,r.next=n),e.interleaved=n,ti(t,i)}function ti(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var yi=!1;function cg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function m1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Oi(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,oe&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,ti(t,n)}return r=i.interleaved,r===null?(e.next=e,lg(i)):(e.next=r.next,r.next=e),i.interleaved=e,ti(t,n)}function Ic(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Gp(t,n)}}function O_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function su(t,e,n,i){var r=t.updateQueue;yi=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((i&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,E=a;switch(p=e,m=n,E.tag){case 1:if(y=E.payload,typeof y=="function"){d=y.call(m,d,p);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=E.payload,p=typeof y=="function"?y.call(m,d,p):y,p==null)break e;d=Pe({},d,p);break e;case 2:yi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=m,l=d):h=h.next=m,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(1);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Nr|=o,t.lanes=o,t.memoizedState=d}}function L_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(U(191,r));r.call(i)}}}var rl={},kn=Zi(rl),Aa=Zi(rl),Ca=Zi(rl);function wr(t){if(t===rl)throw Error(U(174));return t}function ug(t,e){switch(ve(Ca,e),ve(Aa,t),ve(kn,rl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mf(e,t)}xe(kn),ve(kn,e)}function Os(){xe(kn),xe(Aa),xe(Ca)}function y1(t){wr(Ca.current);var e=wr(kn.current),n=mf(e,t.type);e!==n&&(ve(Aa,t),ve(kn,n))}function hg(t){Aa.current===t&&(xe(kn),xe(Aa))}var ke=Zi(0);function ou(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Sd=[];function dg(){for(var t=0;t<Sd.length;t++)Sd[t]._workInProgressVersionPrimary=null;Sd.length=0}var Sc=ci.ReactCurrentDispatcher,bd=ci.ReactCurrentBatchConfig,Dr=0,Ce=null,We=null,Ge=null,au=!1,ta=!1,Pa=0,EA=0;function ut(){throw Error(U(321))}function fg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!mn(t[n],e[n]))return!1;return!0}function pg(t,e,n,i,r,s){if(Dr=s,Ce=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Sc.current=t===null||t.memoizedState===null?SA:bA,t=n(i,r),ta){s=0;do{if(ta=!1,Pa=0,25<=s)throw Error(U(301));s+=1,Ge=We=null,e.updateQueue=null,Sc.current=kA,t=n(i,r)}while(ta)}if(Sc.current=lu,e=We!==null&&We.next!==null,Dr=0,Ge=We=Ce=null,au=!1,e)throw Error(U(300));return t}function gg(){var t=Pa!==0;return Pa=0,t}function xn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Ce.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function sn(){if(We===null){var t=Ce.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var e=Ge===null?Ce.memoizedState:Ge.next;if(e!==null)Ge=e,We=t;else{if(t===null)throw Error(U(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Ge===null?Ce.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function Ra(t,e){return typeof e=="function"?e(t):e}function kd(t){var e=sn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var i=We,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((Dr&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,Ce.lanes|=h,Nr|=h}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,mn(i,e.memoizedState)||(Rt=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Ce.lanes|=s,Nr|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ad(t){var e=sn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);mn(s,e.memoizedState)||(Rt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function _1(){}function v1(t,e){var n=Ce,i=sn(),r=e(),s=!mn(i.memoizedState,r);if(s&&(i.memoizedState=r,Rt=!0),i=i.queue,mg(T1.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,Da(9,E1.bind(null,n,i,r,e),void 0,null),Ye===null)throw Error(U(349));Dr&30||w1(n,e,r)}return r}function w1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ce.updateQueue,e===null?(e={lastEffect:null,stores:null},Ce.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function E1(t,e,n,i){e.value=n,e.getSnapshot=i,x1(e)&&I1(t)}function T1(t,e,n){return n(function(){x1(e)&&I1(t)})}function x1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mn(t,n)}catch{return!0}}function I1(t){var e=ti(t,1);e!==null&&pn(e,t,1,-1)}function V_(t){var e=xn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:t},e.queue=t,t=t.dispatch=IA.bind(null,Ce,t),[e.memoizedState,t]}function Da(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ce.updateQueue,e===null?(e={lastEffect:null,stores:null},Ce.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function S1(){return sn().memoizedState}function bc(t,e,n,i){var r=xn();Ce.flags|=t,r.memoizedState=Da(1|e,n,void 0,i===void 0?null:i)}function Zu(t,e,n,i){var r=sn();i=i===void 0?null:i;var s=void 0;if(We!==null){var o=We.memoizedState;if(s=o.destroy,i!==null&&fg(i,o.deps)){r.memoizedState=Da(e,n,s,i);return}}Ce.flags|=t,r.memoizedState=Da(1|e,n,s,i)}function F_(t,e){return bc(8390656,8,t,e)}function mg(t,e){return Zu(2048,8,t,e)}function b1(t,e){return Zu(4,2,t,e)}function k1(t,e){return Zu(4,4,t,e)}function A1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function C1(t,e,n){return n=n!=null?n.concat([t]):null,Zu(4,4,A1.bind(null,e,t),n)}function yg(){}function P1(t,e){var n=sn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&fg(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function R1(t,e){var n=sn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&fg(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function D1(t,e,n){return Dr&21?(mn(n,e)||(n=VE(),Ce.lanes|=n,Nr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rt=!0),t.memoizedState=n)}function TA(t,e){var n=fe;fe=n!==0&&4>n?n:4,t(!0);var i=bd.transition;bd.transition={};try{t(!1),e()}finally{fe=n,bd.transition=i}}function N1(){return sn().memoizedState}function xA(t,e,n){var i=Vi(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},M1(t))O1(e,n);else if(n=g1(t,e,n,i),n!==null){var r=It();pn(n,t,i,r),L1(n,e,i)}}function IA(t,e,n){var i=Vi(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(M1(t))O1(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,mn(a,o)){var l=e.interleaved;l===null?(r.next=r,lg(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=g1(t,e,r,i),n!==null&&(r=It(),pn(n,t,i,r),L1(n,e,i))}}function M1(t){var e=t.alternate;return t===Ce||e!==null&&e===Ce}function O1(t,e){ta=au=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function L1(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Gp(t,n)}}var lu={readContext:rn,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useInsertionEffect:ut,useLayoutEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useMutableSource:ut,useSyncExternalStore:ut,useId:ut,unstable_isNewReconciler:!1},SA={readContext:rn,useCallback:function(t,e){return xn().memoizedState=[t,e===void 0?null:e],t},useContext:rn,useEffect:F_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,bc(4194308,4,A1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return bc(4194308,4,t,e)},useInsertionEffect:function(t,e){return bc(4,2,t,e)},useMemo:function(t,e){var n=xn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=xn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=xA.bind(null,Ce,t),[i.memoizedState,t]},useRef:function(t){var e=xn();return t={current:t},e.memoizedState=t},useState:V_,useDebugValue:yg,useDeferredValue:function(t){return xn().memoizedState=t},useTransition:function(){var t=V_(!1),e=t[0];return t=TA.bind(null,t[1]),xn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ce,r=xn();if(Ie){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Ye===null)throw Error(U(349));Dr&30||w1(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,F_(T1.bind(null,i,s,t),[t]),i.flags|=2048,Da(9,E1.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=xn(),e=Ye.identifierPrefix;if(Ie){var n=Hn,i=Wn;n=(i&~(1<<32-fn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Pa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=EA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},bA={readContext:rn,useCallback:P1,useContext:rn,useEffect:mg,useImperativeHandle:C1,useInsertionEffect:b1,useLayoutEffect:k1,useMemo:R1,useReducer:kd,useRef:S1,useState:function(){return kd(Ra)},useDebugValue:yg,useDeferredValue:function(t){var e=sn();return D1(e,We.memoizedState,t)},useTransition:function(){var t=kd(Ra)[0],e=sn().memoizedState;return[t,e]},useMutableSource:_1,useSyncExternalStore:v1,useId:N1,unstable_isNewReconciler:!1},kA={readContext:rn,useCallback:P1,useContext:rn,useEffect:mg,useImperativeHandle:C1,useInsertionEffect:b1,useLayoutEffect:k1,useMemo:R1,useReducer:Ad,useRef:S1,useState:function(){return Ad(Ra)},useDebugValue:yg,useDeferredValue:function(t){var e=sn();return We===null?e.memoizedState=t:D1(e,We.memoizedState,t)},useTransition:function(){var t=Ad(Ra)[0],e=sn().memoizedState;return[t,e]},useMutableSource:_1,useSyncExternalStore:v1,useId:N1,unstable_isNewReconciler:!1};function ln(t,e){if(t&&t.defaultProps){e=Pe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Vf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Pe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var eh={isMounted:function(t){return(t=t._reactInternals)?$r(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=It(),r=Vi(t),s=Xn(i,r);s.payload=e,n!=null&&(s.callback=n),e=Oi(t,s,r),e!==null&&(pn(e,t,r,i),Ic(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=It(),r=Vi(t),s=Xn(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Oi(t,s,r),e!==null&&(pn(e,t,r,i),Ic(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=It(),i=Vi(t),r=Xn(n,i);r.tag=2,e!=null&&(r.callback=e),e=Oi(t,r,i),e!==null&&(pn(e,t,i,n),Ic(e,t,i))}};function j_(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ia(n,i)||!Ia(r,s):!0}function V1(t,e,n){var i=!1,r=qi,s=e.contextType;return typeof s=="object"&&s!==null?s=rn(s):(r=Nt(e)?Pr:yt.current,i=e.contextTypes,s=(i=i!=null)?Ds(t,r):qi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=eh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function U_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&eh.enqueueReplaceState(e,e.state,null)}function Ff(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},cg(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=rn(s):(s=Nt(e)?Pr:yt.current,r.context=Ds(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Vf(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&eh.enqueueReplaceState(r,r.state,null),su(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Ls(t,e){try{var n="",i=e;do n+=tk(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Cd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function jf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var AA=typeof WeakMap=="function"?WeakMap:Map;function F1(t,e,n){n=Xn(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){uu||(uu=!0,Qf=i),jf(t,e)},n}function j1(t,e,n){n=Xn(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){jf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){jf(t,e),typeof i!="function"&&(Li===null?Li=new Set([this]):Li.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function z_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new AA;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=BA.bind(null,t,e,n),e.then(t,t))}function B_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function $_(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Xn(-1,1),e.tag=2,Oi(n,e,1))),n.lanes|=1),t)}var CA=ci.ReactCurrentOwner,Rt=!1;function xt(t,e,n,i){e.child=t===null?p1(e,null,n,i):Ms(e,t.child,n,i)}function W_(t,e,n,i,r){n=n.render;var s=e.ref;return xs(e,r),i=pg(t,e,n,i,s,r),n=gg(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ni(t,e,r)):(Ie&&n&&ng(e),e.flags|=1,xt(t,e,i,r),e.child)}function H_(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Sg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,U1(t,e,s,i,r)):(t=Pc(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ia,n(o,i)&&t.ref===e.ref)return ni(t,e,r)}return e.flags|=1,t=Fi(s,i),t.ref=e.ref,t.return=e,e.child=t}function U1(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Ia(s,i)&&t.ref===e.ref)if(Rt=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Rt=!0);else return e.lanes=t.lanes,ni(t,e,r)}return Uf(t,e,n,i,r)}function z1(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(_s,Ft),Ft|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ve(_s,Ft),Ft|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,ve(_s,Ft),Ft|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,ve(_s,Ft),Ft|=i;return xt(t,e,r,n),e.child}function B1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Uf(t,e,n,i,r){var s=Nt(n)?Pr:yt.current;return s=Ds(e,s),xs(e,r),n=pg(t,e,n,i,s,r),i=gg(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ni(t,e,r)):(Ie&&i&&ng(e),e.flags|=1,xt(t,e,n,r),e.child)}function q_(t,e,n,i,r){if(Nt(n)){var s=!0;eu(e)}else s=!1;if(xs(e,r),e.stateNode===null)kc(t,e),V1(e,n,i),Ff(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=rn(c):(c=Nt(n)?Pr:yt.current,c=Ds(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&U_(e,o,i,c),yi=!1;var p=e.memoizedState;o.state=p,su(e,i,o,r),l=e.memoizedState,a!==i||p!==l||Dt.current||yi?(typeof h=="function"&&(Vf(e,n,h,i),l=e.memoizedState),(a=yi||j_(e,n,a,i,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,m1(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ln(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=rn(l):(l=Nt(n)?Pr:yt.current,l=Ds(e,l));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&U_(e,o,i,l),yi=!1,p=e.memoizedState,o.state=p,su(e,i,o,r);var y=e.memoizedState;a!==d||p!==y||Dt.current||yi?(typeof m=="function"&&(Vf(e,n,m,i),y=e.memoizedState),(c=yi||j_(e,n,c,i,p,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),o.props=i,o.state=y,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return zf(t,e,n,i,s,r)}function zf(t,e,n,i,r,s){B1(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&R_(e,n,!1),ni(t,e,s);i=e.stateNode,CA.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Ms(e,t.child,null,s),e.child=Ms(e,null,a,s)):xt(t,e,a,s),e.memoizedState=i.state,r&&R_(e,n,!0),e.child}function $1(t){var e=t.stateNode;e.pendingContext?P_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&P_(t,e.context,!1),ug(t,e.containerInfo)}function K_(t,e,n,i,r){return Ns(),rg(r),e.flags|=256,xt(t,e,n,i),e.child}var Bf={dehydrated:null,treeContext:null,retryLane:0};function $f(t){return{baseLanes:t,cachePool:null,transitions:null}}function W1(t,e,n){var i=e.pendingProps,r=ke.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),ve(ke,r&1),t===null)return Of(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ih(o,i,0,null),t=br(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=$f(n),e.memoizedState=Bf,t):_g(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return PA(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Fi(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Fi(a,s):(s=br(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?$f(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Bf,i}return s=t.child,t=s.sibling,i=Fi(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function _g(t,e){return e=ih({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Kl(t,e,n,i){return i!==null&&rg(i),Ms(e,t.child,null,n),t=_g(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function PA(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=Cd(Error(U(422))),Kl(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=ih({mode:"visible",children:i.children},r,0,null),s=br(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Ms(e,t.child,null,o),e.child.memoizedState=$f(o),e.memoizedState=Bf,s);if(!(e.mode&1))return Kl(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(U(419)),i=Cd(s,i,void 0),Kl(t,e,o,i)}if(a=(o&t.childLanes)!==0,Rt||a){if(i=Ye,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,ti(t,r),pn(i,t,r,-1))}return Ig(),i=Cd(Error(U(421))),Kl(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=$A.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,jt=Mi(r.nextSibling),zt=e,Ie=!0,hn=null,t!==null&&(Kt[Gt++]=Wn,Kt[Gt++]=Hn,Kt[Gt++]=Rr,Wn=t.id,Hn=t.overflow,Rr=e),e=_g(e,i.children),e.flags|=4096,e)}function G_(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Lf(t.return,e,n)}function Pd(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function H1(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(xt(t,e,i.children,n),i=ke.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&G_(t,n,e);else if(t.tag===19)G_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ve(ke,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&ou(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Pd(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&ou(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Pd(e,!0,n,null,s);break;case"together":Pd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function kc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ni(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Nr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Fi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function RA(t,e,n){switch(e.tag){case 3:$1(e),Ns();break;case 5:y1(e);break;case 1:Nt(e.type)&&eu(e);break;case 4:ug(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;ve(iu,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ve(ke,ke.current&1),e.flags|=128,null):n&e.child.childLanes?W1(t,e,n):(ve(ke,ke.current&1),t=ni(t,e,n),t!==null?t.sibling:null);ve(ke,ke.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return H1(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ve(ke,ke.current),i)break;return null;case 22:case 23:return e.lanes=0,z1(t,e,n)}return ni(t,e,n)}var q1,Wf,K1,G1;q1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wf=function(){};K1=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,wr(kn.current);var s=null;switch(n){case"input":r=df(t,r),i=df(t,i),s=[];break;case"select":r=Pe({},r,{value:void 0}),i=Pe({},i,{value:void 0}),s=[];break;case"textarea":r=gf(t,r),i=gf(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Jc)}yf(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ya.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ya.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ee("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};G1=function(t,e,n,i){n!==i&&(e.flags|=4)};function Po(t,e){if(!Ie)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function DA(t,e,n){var i=e.pendingProps;switch(ig(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(e),null;case 1:return Nt(e.type)&&Zc(),ht(e),null;case 3:return i=e.stateNode,Os(),xe(Dt),xe(yt),dg(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Hl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hn!==null&&(Jf(hn),hn=null))),Wf(t,e),ht(e),null;case 5:hg(e);var r=wr(Ca.current);if(n=e.type,t!==null&&e.stateNode!=null)K1(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(U(166));return ht(e),null}if(t=wr(kn.current),Hl(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Sn]=e,i[ka]=s,t=(e.mode&1)!==0,n){case"dialog":Ee("cancel",i),Ee("close",i);break;case"iframe":case"object":case"embed":Ee("load",i);break;case"video":case"audio":for(r=0;r<zo.length;r++)Ee(zo[r],i);break;case"source":Ee("error",i);break;case"img":case"image":case"link":Ee("error",i),Ee("load",i);break;case"details":Ee("toggle",i);break;case"input":i_(i,s),Ee("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Ee("invalid",i);break;case"textarea":s_(i,s),Ee("invalid",i)}yf(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Wl(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Wl(i.textContent,a,t),r=["children",""+a]):ya.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ee("scroll",i)}switch(n){case"input":Ll(i),r_(i,s,!0);break;case"textarea":Ll(i),o_(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Jc)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=TE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Sn]=e,t[ka]=i,q1(t,e,!1,!1),e.stateNode=t;e:{switch(o=_f(n,i),n){case"dialog":Ee("cancel",t),Ee("close",t),r=i;break;case"iframe":case"object":case"embed":Ee("load",t),r=i;break;case"video":case"audio":for(r=0;r<zo.length;r++)Ee(zo[r],t);r=i;break;case"source":Ee("error",t),r=i;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),r=i;break;case"details":Ee("toggle",t),r=i;break;case"input":i_(t,i),r=df(t,i),Ee("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Pe({},i,{value:void 0}),Ee("invalid",t);break;case"textarea":s_(t,i),r=gf(t,i),Ee("invalid",t);break;default:r=i}yf(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?SE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&xE(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&_a(t,l):typeof l=="number"&&_a(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ya.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ee("scroll",t):l!=null&&Bp(t,s,l,o))}switch(n){case"input":Ll(t),r_(t,i,!1);break;case"textarea":Ll(t),o_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Hi(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?vs(t,!!i.multiple,s,!1):i.defaultValue!=null&&vs(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Jc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ht(e),null;case 6:if(t&&e.stateNode!=null)G1(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(U(166));if(n=wr(Ca.current),wr(kn.current),Hl(e)){if(i=e.stateNode,n=e.memoizedProps,i[Sn]=e,(s=i.nodeValue!==n)&&(t=zt,t!==null))switch(t.tag){case 3:Wl(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wl(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Sn]=e,e.stateNode=i}return ht(e),null;case 13:if(xe(ke),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ie&&jt!==null&&e.mode&1&&!(e.flags&128))d1(),Ns(),e.flags|=98560,s=!1;else if(s=Hl(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[Sn]=e}else Ns(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ht(e),s=!1}else hn!==null&&(Jf(hn),hn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||ke.current&1?He===0&&(He=3):Ig())),e.updateQueue!==null&&(e.flags|=4),ht(e),null);case 4:return Os(),Wf(t,e),t===null&&Sa(e.stateNode.containerInfo),ht(e),null;case 10:return ag(e.type._context),ht(e),null;case 17:return Nt(e.type)&&Zc(),ht(e),null;case 19:if(xe(ke),s=e.memoizedState,s===null)return ht(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Po(s,!1);else{if(He!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ou(t),o!==null){for(e.flags|=128,Po(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ve(ke,ke.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ve()>Vs&&(e.flags|=128,i=!0,Po(s,!1),e.lanes=4194304)}else{if(!i)if(t=ou(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Po(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ie)return ht(e),null}else 2*Ve()-s.renderingStartTime>Vs&&n!==1073741824&&(e.flags|=128,i=!0,Po(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ve(),e.sibling=null,n=ke.current,ve(ke,i?n&1|2:n&1),e):(ht(e),null);case 22:case 23:return xg(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Ft&1073741824&&(ht(e),e.subtreeFlags&6&&(e.flags|=8192)):ht(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function NA(t,e){switch(ig(e),e.tag){case 1:return Nt(e.type)&&Zc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Os(),xe(Dt),xe(yt),dg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hg(e),null;case 13:if(xe(ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Ns()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xe(ke),null;case 4:return Os(),null;case 10:return ag(e.type._context),null;case 22:case 23:return xg(),null;case 24:return null;default:return null}}var Gl=!1,gt=!1,MA=typeof WeakSet=="function"?WeakSet:Set,$=null;function ys(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Me(t,e,i)}else n.current=null}function Hf(t,e,n){try{n()}catch(i){Me(t,e,i)}}var Q_=!1;function OA(t,e){if(Af=Qc,t=ZE(),tg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,p=null;t:for(;;){for(var m;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===t)break t;if(p===n&&++c===r&&(a=o),p===s&&++h===i&&(l=o),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cf={focusedElem:t,selectionRange:n},Qc=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var E=y.memoizedProps,T=y.memoizedState,_=e.stateNode,v=_.getSnapshotBeforeUpdate(e.elementType===e.type?E:ln(e.type,E),T);_.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(D){Me(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return y=Q_,Q_=!1,y}function na(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Hf(e,n,s)}r=r.next}while(r!==i)}}function th(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function qf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Q1(t){var e=t.alternate;e!==null&&(t.alternate=null,Q1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Sn],delete e[ka],delete e[Df],delete e[yA],delete e[_A])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Y1(t){return t.tag===5||t.tag===3||t.tag===4}function Y_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Y1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Kf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Jc));else if(i!==4&&(t=t.child,t!==null))for(Kf(t,e,n),t=t.sibling;t!==null;)Kf(t,e,n),t=t.sibling}function Gf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Gf(t,e,n),t=t.sibling;t!==null;)Gf(t,e,n),t=t.sibling}var et=null,cn=!1;function fi(t,e,n){for(n=n.child;n!==null;)X1(t,e,n),n=n.sibling}function X1(t,e,n){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(Ku,n)}catch{}switch(n.tag){case 5:gt||ys(n,e);case 6:var i=et,r=cn;et=null,fi(t,e,n),et=i,cn=r,et!==null&&(cn?(t=et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):et.removeChild(n.stateNode));break;case 18:et!==null&&(cn?(t=et,n=n.stateNode,t.nodeType===8?xd(t.parentNode,n):t.nodeType===1&&xd(t,n),Ta(t)):xd(et,n.stateNode));break;case 4:i=et,r=cn,et=n.stateNode.containerInfo,cn=!0,fi(t,e,n),et=i,cn=r;break;case 0:case 11:case 14:case 15:if(!gt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Hf(n,e,o),r=r.next}while(r!==i)}fi(t,e,n);break;case 1:if(!gt&&(ys(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Me(n,e,a)}fi(t,e,n);break;case 21:fi(t,e,n);break;case 22:n.mode&1?(gt=(i=gt)||n.memoizedState!==null,fi(t,e,n),gt=i):fi(t,e,n);break;default:fi(t,e,n)}}function X_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new MA),e.forEach(function(i){var r=WA.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function an(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:et=a.stateNode,cn=!1;break e;case 3:et=a.stateNode.containerInfo,cn=!0;break e;case 4:et=a.stateNode.containerInfo,cn=!0;break e}a=a.return}if(et===null)throw Error(U(160));X1(s,o,r),et=null,cn=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Me(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)J1(e,t),e=e.sibling}function J1(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(an(e,t),En(t),i&4){try{na(3,t,t.return),th(3,t)}catch(E){Me(t,t.return,E)}try{na(5,t,t.return)}catch(E){Me(t,t.return,E)}}break;case 1:an(e,t),En(t),i&512&&n!==null&&ys(n,n.return);break;case 5:if(an(e,t),En(t),i&512&&n!==null&&ys(n,n.return),t.flags&32){var r=t.stateNode;try{_a(r,"")}catch(E){Me(t,t.return,E)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&wE(r,s),_f(a,o);var c=_f(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?SE(r,d):h==="dangerouslySetInnerHTML"?xE(r,d):h==="children"?_a(r,d):Bp(r,h,d,c)}switch(a){case"input":ff(r,s);break;case"textarea":EE(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?vs(r,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?vs(r,!!s.multiple,s.defaultValue,!0):vs(r,!!s.multiple,s.multiple?[]:"",!1))}r[ka]=s}catch(E){Me(t,t.return,E)}}break;case 6:if(an(e,t),En(t),i&4){if(t.stateNode===null)throw Error(U(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(E){Me(t,t.return,E)}}break;case 3:if(an(e,t),En(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ta(e.containerInfo)}catch(E){Me(t,t.return,E)}break;case 4:an(e,t),En(t);break;case 13:an(e,t),En(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Eg=Ve())),i&4&&X_(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(gt=(c=gt)||h,an(e,t),gt=c):an(e,t),En(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for($=t,h=t.child;h!==null;){for(d=$=h;$!==null;){switch(p=$,m=p.child,p.tag){case 0:case 11:case 14:case 15:na(4,p,p.return);break;case 1:ys(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){i=p,n=p.return;try{e=i,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(E){Me(i,n,E)}}break;case 5:ys(p,p.return);break;case 22:if(p.memoizedState!==null){Z_(d);continue}}m!==null?(m.return=p,$=m):Z_(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=IE("display",o))}catch(E){Me(t,t.return,E)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(E){Me(t,t.return,E)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:an(e,t),En(t),i&4&&X_(t);break;case 21:break;default:an(e,t),En(t)}}function En(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Y1(n)){var i=n;break e}n=n.return}throw Error(U(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(_a(r,""),i.flags&=-33);var s=Y_(t);Gf(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=Y_(t);Kf(t,a,o);break;default:throw Error(U(161))}}catch(l){Me(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function LA(t,e,n){$=t,Z1(t)}function Z1(t,e,n){for(var i=(t.mode&1)!==0;$!==null;){var r=$,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Gl;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||gt;a=Gl;var c=gt;if(Gl=o,(gt=l)&&!c)for($=r;$!==null;)o=$,l=o.child,o.tag===22&&o.memoizedState!==null?e0(r):l!==null?(l.return=o,$=l):e0(r);for(;s!==null;)$=s,Z1(s),s=s.sibling;$=r,Gl=a,gt=c}J_(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,$=s):J_(t)}}function J_(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:gt||th(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!gt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ln(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&L_(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}L_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Ta(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}gt||e.flags&512&&qf(e)}catch(p){Me(e,e.return,p)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function Z_(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function e0(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{th(4,e)}catch(l){Me(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Me(e,r,l)}}var s=e.return;try{qf(e)}catch(l){Me(e,s,l)}break;case 5:var o=e.return;try{qf(e)}catch(l){Me(e,o,l)}}}catch(l){Me(e,e.return,l)}if(e===t){$=null;break}var a=e.sibling;if(a!==null){a.return=e.return,$=a;break}$=e.return}}var VA=Math.ceil,cu=ci.ReactCurrentDispatcher,vg=ci.ReactCurrentOwner,Zt=ci.ReactCurrentBatchConfig,oe=0,Ye=null,Ue=null,it=0,Ft=0,_s=Zi(0),He=0,Na=null,Nr=0,nh=0,wg=0,ia=null,Ct=null,Eg=0,Vs=1/0,Un=null,uu=!1,Qf=null,Li=null,Ql=!1,Ii=null,hu=0,ra=0,Yf=null,Ac=-1,Cc=0;function It(){return oe&6?Ve():Ac!==-1?Ac:Ac=Ve()}function Vi(t){return t.mode&1?oe&2&&it!==0?it&-it:wA.transition!==null?(Cc===0&&(Cc=VE()),Cc):(t=fe,t!==0||(t=window.event,t=t===void 0?16:WE(t.type)),t):1}function pn(t,e,n,i){if(50<ra)throw ra=0,Yf=null,Error(U(185));tl(t,n,i),(!(oe&2)||t!==Ye)&&(t===Ye&&(!(oe&2)&&(nh|=n),He===4&&vi(t,it)),Mt(t,i),n===1&&oe===0&&!(e.mode&1)&&(Vs=Ve()+500,Ju&&er()))}function Mt(t,e){var n=t.callbackNode;wk(t,e);var i=Gc(t,t===Ye?it:0);if(i===0)n!==null&&c_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&c_(n),e===1)t.tag===0?vA(t0.bind(null,t)):c1(t0.bind(null,t)),gA(function(){!(oe&6)&&er()}),n=null;else{switch(FE(i)){case 1:n=Kp;break;case 4:n=OE;break;case 16:n=Kc;break;case 536870912:n=LE;break;default:n=Kc}n=aT(n,eT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function eT(t,e){if(Ac=-1,Cc=0,oe&6)throw Error(U(327));var n=t.callbackNode;if(Is()&&t.callbackNode!==n)return null;var i=Gc(t,t===Ye?it:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=du(t,i);else{e=i;var r=oe;oe|=2;var s=nT();(Ye!==t||it!==e)&&(Un=null,Vs=Ve()+500,Sr(t,e));do try{UA();break}catch(a){tT(t,a)}while(1);og(),cu.current=s,oe=r,Ue!==null?e=0:(Ye=null,it=0,e=He)}if(e!==0){if(e===2&&(r=xf(t),r!==0&&(i=r,e=Xf(t,r))),e===1)throw n=Na,Sr(t,0),vi(t,i),Mt(t,Ve()),n;if(e===6)vi(t,i);else{if(r=t.current.alternate,!(i&30)&&!FA(r)&&(e=du(t,i),e===2&&(s=xf(t),s!==0&&(i=s,e=Xf(t,s))),e===1))throw n=Na,Sr(t,0),vi(t,i),Mt(t,Ve()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(U(345));case 2:pr(t,Ct,Un);break;case 3:if(vi(t,i),(i&130023424)===i&&(e=Eg+500-Ve(),10<e)){if(Gc(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){It(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Rf(pr.bind(null,t,Ct,Un),e);break}pr(t,Ct,Un);break;case 4:if(vi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-fn(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Ve()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*VA(i/1960))-i,10<i){t.timeoutHandle=Rf(pr.bind(null,t,Ct,Un),i);break}pr(t,Ct,Un);break;case 5:pr(t,Ct,Un);break;default:throw Error(U(329))}}}return Mt(t,Ve()),t.callbackNode===n?eT.bind(null,t):null}function Xf(t,e){var n=ia;return t.current.memoizedState.isDehydrated&&(Sr(t,e).flags|=256),t=du(t,e),t!==2&&(e=Ct,Ct=n,e!==null&&Jf(e)),t}function Jf(t){Ct===null?Ct=t:Ct.push.apply(Ct,t)}function FA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!mn(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function vi(t,e){for(e&=~wg,e&=~nh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-fn(e),i=1<<n;t[n]=-1,e&=~i}}function t0(t){if(oe&6)throw Error(U(327));Is();var e=Gc(t,0);if(!(e&1))return Mt(t,Ve()),null;var n=du(t,e);if(t.tag!==0&&n===2){var i=xf(t);i!==0&&(e=i,n=Xf(t,i))}if(n===1)throw n=Na,Sr(t,0),vi(t,e),Mt(t,Ve()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,pr(t,Ct,Un),Mt(t,Ve()),null}function Tg(t,e){var n=oe;oe|=1;try{return t(e)}finally{oe=n,oe===0&&(Vs=Ve()+500,Ju&&er())}}function Mr(t){Ii!==null&&Ii.tag===0&&!(oe&6)&&Is();var e=oe;oe|=1;var n=Zt.transition,i=fe;try{if(Zt.transition=null,fe=1,t)return t()}finally{fe=i,Zt.transition=n,oe=e,!(oe&6)&&er()}}function xg(){Ft=_s.current,xe(_s)}function Sr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,pA(n)),Ue!==null)for(n=Ue.return;n!==null;){var i=n;switch(ig(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Zc();break;case 3:Os(),xe(Dt),xe(yt),dg();break;case 5:hg(i);break;case 4:Os();break;case 13:xe(ke);break;case 19:xe(ke);break;case 10:ag(i.type._context);break;case 22:case 23:xg()}n=n.return}if(Ye=t,Ue=t=Fi(t.current,null),it=Ft=e,He=0,Na=null,wg=nh=Nr=0,Ct=ia=null,vr!==null){for(e=0;e<vr.length;e++)if(n=vr[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}vr=null}return t}function tT(t,e){do{var n=Ue;try{if(og(),Sc.current=lu,au){for(var i=Ce.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}au=!1}if(Dr=0,Ge=We=Ce=null,ta=!1,Pa=0,vg.current=null,n===null||n.return===null){He=1,Na=e,Ue=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=it,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=B_(o);if(m!==null){m.flags&=-257,$_(m,o,a,s,e),m.mode&1&&z_(s,c,e),e=m,l=c;var y=e.updateQueue;if(y===null){var E=new Set;E.add(l),e.updateQueue=E}else y.add(l);break e}else{if(!(e&1)){z_(s,c,e),Ig();break e}l=Error(U(426))}}else if(Ie&&a.mode&1){var T=B_(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),$_(T,o,a,s,e),rg(Ls(l,a));break e}}s=l=Ls(l,a),He!==4&&(He=2),ia===null?ia=[s]:ia.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=F1(s,l,e);O_(s,_);break e;case 1:a=l;var v=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Li===null||!Li.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=j1(s,a,e);O_(s,D);break e}}s=s.return}while(s!==null)}rT(n)}catch(M){e=M,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(1)}function nT(){var t=cu.current;return cu.current=lu,t===null?lu:t}function Ig(){(He===0||He===3||He===2)&&(He=4),Ye===null||!(Nr&268435455)&&!(nh&268435455)||vi(Ye,it)}function du(t,e){var n=oe;oe|=2;var i=nT();(Ye!==t||it!==e)&&(Un=null,Sr(t,e));do try{jA();break}catch(r){tT(t,r)}while(1);if(og(),oe=n,cu.current=i,Ue!==null)throw Error(U(261));return Ye=null,it=0,He}function jA(){for(;Ue!==null;)iT(Ue)}function UA(){for(;Ue!==null&&!hk();)iT(Ue)}function iT(t){var e=oT(t.alternate,t,Ft);t.memoizedProps=t.pendingProps,e===null?rT(t):Ue=e,vg.current=null}function rT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=NA(n,e),n!==null){n.flags&=32767,Ue=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{He=6,Ue=null;return}}else if(n=DA(n,e,Ft),n!==null){Ue=n;return}if(e=e.sibling,e!==null){Ue=e;return}Ue=e=t}while(e!==null);He===0&&(He=5)}function pr(t,e,n){var i=fe,r=Zt.transition;try{Zt.transition=null,fe=1,zA(t,e,n,i)}finally{Zt.transition=r,fe=i}return null}function zA(t,e,n,i){do Is();while(Ii!==null);if(oe&6)throw Error(U(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Ek(t,s),t===Ye&&(Ue=Ye=null,it=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ql||(Ql=!0,aT(Kc,function(){return Is(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Zt.transition,Zt.transition=null;var o=fe;fe=1;var a=oe;oe|=4,vg.current=null,OA(t,n),J1(n,t),aA(Cf),Qc=!!Af,Cf=Af=null,t.current=n,LA(n),dk(),oe=a,fe=o,Zt.transition=s}else t.current=n;if(Ql&&(Ql=!1,Ii=t,hu=r),s=t.pendingLanes,s===0&&(Li=null),gk(n.stateNode),Mt(t,Ve()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(uu)throw uu=!1,t=Qf,Qf=null,t;return hu&1&&t.tag!==0&&Is(),s=t.pendingLanes,s&1?t===Yf?ra++:(ra=0,Yf=t):ra=0,er(),null}function Is(){if(Ii!==null){var t=FE(hu),e=Zt.transition,n=fe;try{if(Zt.transition=null,fe=16>t?16:t,Ii===null)var i=!1;else{if(t=Ii,Ii=null,hu=0,oe&6)throw Error(U(331));var r=oe;for(oe|=4,$=t.current;$!==null;){var s=$,o=s.child;if($.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for($=c;$!==null;){var h=$;switch(h.tag){case 0:case 11:case 15:na(8,h,s)}var d=h.child;if(d!==null)d.return=h,$=d;else for(;$!==null;){h=$;var p=h.sibling,m=h.return;if(Q1(h),h===c){$=null;break}if(p!==null){p.return=m,$=p;break}$=m}}}var y=s.alternate;if(y!==null){var E=y.child;if(E!==null){y.child=null;do{var T=E.sibling;E.sibling=null,E=T}while(E!==null)}}$=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,$=o;else e:for(;$!==null;){if(s=$,s.flags&2048)switch(s.tag){case 0:case 11:case 15:na(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,$=_;break e}$=s.return}}var v=t.current;for($=v;$!==null;){o=$;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,$=S;else e:for(o=v;$!==null;){if(a=$,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:th(9,a)}}catch(M){Me(a,a.return,M)}if(a===o){$=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,$=D;break e}$=a.return}}if(oe=r,er(),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(Ku,t)}catch{}i=!0}return i}finally{fe=n,Zt.transition=e}}return!1}function n0(t,e,n){e=Ls(n,e),e=F1(t,e,1),t=Oi(t,e,1),e=It(),t!==null&&(tl(t,1,e),Mt(t,e))}function Me(t,e,n){if(t.tag===3)n0(t,t,n);else for(;e!==null;){if(e.tag===3){n0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Li===null||!Li.has(i))){t=Ls(n,t),t=j1(e,t,1),e=Oi(e,t,1),t=It(),e!==null&&(tl(e,1,t),Mt(e,t));break}}e=e.return}}function BA(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=It(),t.pingedLanes|=t.suspendedLanes&n,Ye===t&&(it&n)===n&&(He===4||He===3&&(it&130023424)===it&&500>Ve()-Eg?Sr(t,0):wg|=n),Mt(t,e)}function sT(t,e){e===0&&(t.mode&1?(e=jl,jl<<=1,!(jl&130023424)&&(jl=4194304)):e=1);var n=It();t=ti(t,e),t!==null&&(tl(t,e,n),Mt(t,n))}function $A(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),sT(t,n)}function WA(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(U(314))}i!==null&&i.delete(e),sT(t,n)}var oT;oT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Dt.current)Rt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Rt=!1,RA(t,e,n);Rt=!!(t.flags&131072)}else Rt=!1,Ie&&e.flags&1048576&&u1(e,nu,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;kc(t,e),t=e.pendingProps;var r=Ds(e,yt.current);xs(e,n),r=pg(null,e,i,t,r,n);var s=gg();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nt(i)?(s=!0,eu(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,cg(e),r.updater=eh,e.stateNode=r,r._reactInternals=e,Ff(e,i,t,n),e=zf(null,e,i,!0,s,n)):(e.tag=0,Ie&&s&&ng(e),xt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(kc(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=qA(i),t=ln(i,t),r){case 0:e=Uf(null,e,i,t,n);break e;case 1:e=q_(null,e,i,t,n);break e;case 11:e=W_(null,e,i,t,n);break e;case 14:e=H_(null,e,i,ln(i.type,t),n);break e}throw Error(U(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ln(i,r),Uf(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ln(i,r),q_(t,e,i,r,n);case 3:e:{if($1(e),t===null)throw Error(U(387));i=e.pendingProps,s=e.memoizedState,r=s.element,m1(t,e),su(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Ls(Error(U(423)),e),e=K_(t,e,i,n,r);break e}else if(i!==r){r=Ls(Error(U(424)),e),e=K_(t,e,i,n,r);break e}else for(jt=Mi(e.stateNode.containerInfo.firstChild),zt=e,Ie=!0,hn=null,n=p1(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ns(),i===r){e=ni(t,e,n);break e}xt(t,e,i,n)}e=e.child}return e;case 5:return y1(e),t===null&&Of(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Pf(i,r)?o=null:s!==null&&Pf(i,s)&&(e.flags|=32),B1(t,e),xt(t,e,o,n),e.child;case 6:return t===null&&Of(e),null;case 13:return W1(t,e,n);case 4:return ug(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ms(e,null,i,n):xt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ln(i,r),W_(t,e,i,r,n);case 7:return xt(t,e,e.pendingProps,n),e.child;case 8:return xt(t,e,e.pendingProps.children,n),e.child;case 12:return xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,ve(iu,i._currentValue),i._currentValue=o,s!==null)if(mn(s.value,o)){if(s.children===r.children&&!Dt.current){e=ni(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Xn(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Lf(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Lf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}xt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,xs(e,n),r=rn(r),i=i(r),e.flags|=1,xt(t,e,i,n),e.child;case 14:return i=e.type,r=ln(i,e.pendingProps),r=ln(i.type,r),H_(t,e,i,r,n);case 15:return U1(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ln(i,r),kc(t,e),e.tag=1,Nt(i)?(t=!0,eu(e)):t=!1,xs(e,n),V1(e,i,r),Ff(e,i,r,n),zf(null,e,i,!0,t,n);case 19:return H1(t,e,n);case 22:return z1(t,e,n)}throw Error(U(156,e.tag))};function aT(t,e){return ME(t,e)}function HA(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(t,e,n,i){return new HA(t,e,n,i)}function Sg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qA(t){if(typeof t=="function")return Sg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Wp)return 11;if(t===Hp)return 14}return 2}function Fi(t,e){var n=t.alternate;return n===null?(n=Yt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Pc(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")Sg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ls:return br(n.children,r,s,e);case $p:o=8,r|=8;break;case lf:return t=Yt(12,n,e,r|2),t.elementType=lf,t.lanes=s,t;case cf:return t=Yt(13,n,e,r),t.elementType=cf,t.lanes=s,t;case uf:return t=Yt(19,n,e,r),t.elementType=uf,t.lanes=s,t;case yE:return ih(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case gE:o=10;break e;case mE:o=9;break e;case Wp:o=11;break e;case Hp:o=14;break e;case mi:o=16,i=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Yt(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function br(t,e,n,i){return t=Yt(7,t,i,e),t.lanes=n,t}function ih(t,e,n,i){return t=Yt(22,t,i,e),t.elementType=yE,t.lanes=n,t.stateNode={isHidden:!1},t}function Rd(t,e,n){return t=Yt(6,t,null,e),t.lanes=n,t}function Dd(t,e,n){return e=Yt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function KA(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dd(0),this.expirationTimes=dd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dd(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function bg(t,e,n,i,r,s,o,a,l){return t=new KA(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Yt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},cg(s),t}function GA(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:as,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function lT(t){if(!t)return qi;t=t._reactInternals;e:{if($r(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Nt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Nt(n))return l1(t,n,e)}return e}function cT(t,e,n,i,r,s,o,a,l){return t=bg(n,i,!0,t,r,s,o,a,l),t.context=lT(null),n=t.current,i=It(),r=Vi(n),s=Xn(i,r),s.callback=e??null,Oi(n,s,r),t.current.lanes=r,tl(t,r,i),Mt(t,i),t}function rh(t,e,n,i){var r=e.current,s=It(),o=Vi(r);return n=lT(n),e.context===null?e.context=n:e.pendingContext=n,e=Xn(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Oi(r,e,o),t!==null&&(pn(t,r,o,s),Ic(t,r,o)),o}function fu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function i0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function kg(t,e){i0(t,e),(t=t.alternate)&&i0(t,e)}function QA(){return null}var uT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ag(t){this._internalRoot=t}sh.prototype.render=Ag.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));rh(t,e,null,null)};sh.prototype.unmount=Ag.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Mr(function(){rh(null,t,null,null)}),e[ei]=null}};function sh(t){this._internalRoot=t}sh.prototype.unstable_scheduleHydration=function(t){if(t){var e=zE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_i.length&&e!==0&&e<_i[n].priority;n++);_i.splice(n,0,t),n===0&&$E(t)}};function Cg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function oh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function r0(){}function YA(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=fu(o);s.call(c)}}var o=cT(e,i,t,0,null,!1,!1,"",r0);return t._reactRootContainer=o,t[ei]=o.current,Sa(t.nodeType===8?t.parentNode:t),Mr(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=fu(l);a.call(c)}}var l=bg(t,0,!1,null,null,!1,!1,"",r0);return t._reactRootContainer=l,t[ei]=l.current,Sa(t.nodeType===8?t.parentNode:t),Mr(function(){rh(e,l,n,i)}),l}function ah(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=fu(o);a.call(l)}}rh(e,o,t,r)}else o=YA(n,e,t,r,i);return fu(o)}jE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Uo(e.pendingLanes);n!==0&&(Gp(e,n|1),Mt(e,Ve()),!(oe&6)&&(Vs=Ve()+500,er()))}break;case 13:Mr(function(){var i=ti(t,1);if(i!==null){var r=It();pn(i,t,1,r)}}),kg(t,1)}};Qp=function(t){if(t.tag===13){var e=ti(t,134217728);if(e!==null){var n=It();pn(e,t,134217728,n)}kg(t,134217728)}};UE=function(t){if(t.tag===13){var e=Vi(t),n=ti(t,e);if(n!==null){var i=It();pn(n,t,e,i)}kg(t,e)}};zE=function(){return fe};BE=function(t,e){var n=fe;try{return fe=t,e()}finally{fe=n}};wf=function(t,e,n){switch(e){case"input":if(ff(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Xu(i);if(!r)throw Error(U(90));vE(i),ff(i,r)}}}break;case"textarea":EE(t,n);break;case"select":e=n.value,e!=null&&vs(t,!!n.multiple,e,!1)}};AE=Tg;CE=Mr;var XA={usingClientEntryPoint:!1,Events:[il,ds,Xu,bE,kE,Tg]},Ro={findFiberByHostInstance:_r,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},JA={bundleType:Ro.bundleType,version:Ro.version,rendererPackageName:Ro.rendererPackageName,rendererConfig:Ro.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ci.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=DE(t),t===null?null:t.stateNode},findFiberByHostInstance:Ro.findFiberByHostInstance||QA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yl.isDisabled&&Yl.supportsFiber)try{Ku=Yl.inject(JA),bn=Yl}catch{}}Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XA;Wt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cg(e))throw Error(U(200));return GA(t,e,null,n)};Wt.createRoot=function(t,e){if(!Cg(t))throw Error(U(299));var n=!1,i="",r=uT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=bg(t,1,!1,null,null,n,!1,i,r),t[ei]=e.current,Sa(t.nodeType===8?t.parentNode:t),new Ag(e)};Wt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=DE(e),t=t===null?null:t.stateNode,t};Wt.flushSync=function(t){return Mr(t)};Wt.hydrate=function(t,e,n){if(!oh(e))throw Error(U(200));return ah(null,t,e,!0,n)};Wt.hydrateRoot=function(t,e,n){if(!Cg(t))throw Error(U(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=uT;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=cT(e,null,t,1,n??null,r,!1,s,o),t[ei]=e.current,Sa(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new sh(e)};Wt.render=function(t,e,n){if(!oh(e))throw Error(U(200));return ah(null,t,e,!1,n)};Wt.unmountComponentAtNode=function(t){if(!oh(t))throw Error(U(40));return t._reactRootContainer?(Mr(function(){ah(null,null,t,!1,function(){t._reactRootContainer=null,t[ei]=null})}),!0):!1};Wt.unstable_batchedUpdates=Tg;Wt.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!oh(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return ah(t,e,n,!1,i)};Wt.version="18.3.1-next-f1338f8080-20240426";function hT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hT)}catch(t){console.error(t)}}hT(),hE.exports=Wt;var ZA=hE.exports,s0=ZA;of.createRoot=s0.createRoot,of.hydrateRoot=s0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ma(){return Ma=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ma.apply(this,arguments)}var Si;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Si||(Si={}));const o0="popstate";function eC(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return Zf("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:pu(r)}return nC(e,n,null,t)}function Fe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function dT(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function tC(){return Math.random().toString(36).substr(2,8)}function a0(t,e){return{usr:t.state,key:t.key,idx:e}}function Zf(t,e,n,i){return n===void 0&&(n=null),Ma({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Zs(e):e,{state:n,key:e&&e.key||i||tC()})}function pu(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Zs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function nC(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Si.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Ma({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Si.Pop;let T=h(),_=T==null?null:T-c;c=T,l&&l({action:a,location:E.location,delta:_})}function p(T,_){a=Si.Push;let v=Zf(E.location,T,_);n&&n(v,T),c=h()+1;let S=a0(v,c),D=E.createHref(v);try{o.pushState(S,"",D)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;r.location.assign(D)}s&&l&&l({action:a,location:E.location,delta:1})}function m(T,_){a=Si.Replace;let v=Zf(E.location,T,_);n&&n(v,T),c=h();let S=a0(v,c),D=E.createHref(v);o.replaceState(S,"",D),s&&l&&l({action:a,location:E.location,delta:0})}function y(T){let _=r.location.origin!=="null"?r.location.origin:r.location.href,v=typeof T=="string"?T:pu(T);return v=v.replace(/ $/,"%20"),Fe(_,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,_)}let E={get action(){return a},get location(){return t(r,o)},listen(T){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(o0,d),l=T,()=>{r.removeEventListener(o0,d),l=null}},createHref(T){return e(r,T)},createURL:y,encodeLocation(T){let _=y(T);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:p,replace:m,go(T){return o.go(T)}};return E}var l0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(l0||(l0={}));function iC(t,e,n){return n===void 0&&(n="/"),rC(t,e,n,!1)}function rC(t,e,n,i){let r=typeof e=="string"?Zs(e):e,s=Pg(r.pathname||"/",n);if(s==null)return null;let o=fT(t);sC(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=mC(s);a=pC(o[l],c,i)}return a}function fT(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Fe(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=ji([i,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(Fe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),fT(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:dC(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of pT(s.path))r(s,o,l)}),e}function pT(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=pT(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function sC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:fC(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const oC=/^:[\w-]+$/,aC=3,lC=2,cC=1,uC=10,hC=-2,c0=t=>t==="*";function dC(t,e){let n=t.split("/"),i=n.length;return n.some(c0)&&(i+=hC),e&&(i+=lC),n.filter(r=>!c0(r)).reduce((r,s)=>r+(oC.test(s)?aC:s===""?cC:uC),i)}function fC(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function pC(t,e,n){n===void 0&&(n=!1);let{routesMeta:i}=t,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=u0({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!d&&c&&n&&!i[i.length-1].route.index&&(d=u0({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(r,d.params),o.push({params:r,pathname:ji([s,d.pathname]),pathnameBase:wC(ji([s,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(s=ji([s,d.pathnameBase]))}return o}function u0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=gC(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,h,d)=>{let{paramName:p,isOptional:m}=h;if(p==="*"){let E=a[d]||"";o=s.slice(0,s.length-E.length).replace(/(.)\/+$/,"$1")}const y=a[d];return m&&!y?c[p]=void 0:c[p]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function gC(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),dT(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function mC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return dT(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Pg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function yC(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Zs(t):t;return{pathname:n?n.startsWith("/")?n:_C(n,e):e,search:EC(i),hash:TC(r)}}function _C(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Nd(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function vC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Rg(t,e){let n=vC(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Dg(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Zs(t):(r=Ma({},t),Fe(!r.pathname||!r.pathname.includes("?"),Nd("?","pathname","search",r)),Fe(!r.pathname||!r.pathname.includes("#"),Nd("#","pathname","hash",r)),Fe(!r.search||!r.search.includes("#"),Nd("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!i&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;r.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=yC(r,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const ji=t=>t.join("/").replace(/\/\/+/g,"/"),wC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),EC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,TC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function xC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const gT=["post","put","patch","delete"];new Set(gT);const IC=["get",...gT];new Set(IC);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oa(){return Oa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Oa.apply(this,arguments)}const Ng=j.createContext(null),SC=j.createContext(null),tr=j.createContext(null),lh=j.createContext(null),nr=j.createContext({outlet:null,matches:[],isDataRoute:!1}),mT=j.createContext(null);function bC(t,e){let{relative:n}=e===void 0?{}:e;eo()||Fe(!1);let{basename:i,navigator:r}=j.useContext(tr),{hash:s,pathname:o,search:a}=_T(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:ji([i,o])),r.createHref({pathname:l,search:a,hash:s})}function eo(){return j.useContext(lh)!=null}function to(){return eo()||Fe(!1),j.useContext(lh).location}function yT(t){j.useContext(tr).static||j.useLayoutEffect(t)}function Wr(){let{isDataRoute:t}=j.useContext(nr);return t?jC():kC()}function kC(){eo()||Fe(!1);let t=j.useContext(Ng),{basename:e,future:n,navigator:i}=j.useContext(tr),{matches:r}=j.useContext(nr),{pathname:s}=to(),o=JSON.stringify(Rg(r,n.v7_relativeSplatPath)),a=j.useRef(!1);return yT(()=>{a.current=!0}),j.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let d=Dg(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:ji([e,d.pathname])),(h.replace?i.replace:i.push)(d,h.state,h)},[e,i,o,s,t])}function _T(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=j.useContext(tr),{matches:r}=j.useContext(nr),{pathname:s}=to(),o=JSON.stringify(Rg(r,i.v7_relativeSplatPath));return j.useMemo(()=>Dg(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function AC(t,e){return CC(t,e)}function CC(t,e,n,i){eo()||Fe(!1);let{navigator:r,static:s}=j.useContext(tr),{matches:o}=j.useContext(nr),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let h=to(),d;if(e){var p;let _=typeof e=="string"?Zs(e):e;c==="/"||(p=_.pathname)!=null&&p.startsWith(c)||Fe(!1),d=_}else d=h;let m=d.pathname||"/",y=m;if(c!=="/"){let _=c.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(_.length).join("/")}let E=!s&&n&&n.matches&&n.matches.length>0?n.matches:iC(t,{pathname:y}),T=MC(E&&E.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:ji([c,r.encodeLocation?r.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:ji([c,r.encodeLocation?r.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),o,n,i);return e&&T?j.createElement(lh.Provider,{value:{location:Oa({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Si.Pop}},T):T}function PC(){let t=FC(),e=xC(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:r},n):null,s)}const RC=j.createElement(PC,null);class DC extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement(nr.Provider,{value:this.props.routeContext},j.createElement(mT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function NC(t){let{routeContext:e,match:n,children:i}=t,r=j.useContext(Ng);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(nr.Provider,{value:e},i)}function MC(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Fe(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&i&&i.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:p,errors:m}=n,y=d.route.loader&&p[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,p)=>{let m,y=!1,E=null,T=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,E=d.route.errorElement||RC,l&&(c<0&&p===0?(UC("route-fallback",!1),y=!0,T=null):c===p&&(y=!0,T=d.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,p+1)),v=()=>{let S;return m?S=E:y?S=T:d.route.Component?S=j.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=h,j.createElement(NC,{match:d,routeContext:{outlet:h,matches:_,isDataRoute:n!=null},children:S})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?j.createElement(DC,{location:n.location,revalidation:n.revalidation,component:E,error:m,children:v(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):v()},null)}var vT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(vT||{}),gu=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(gu||{});function OC(t){let e=j.useContext(Ng);return e||Fe(!1),e}function LC(t){let e=j.useContext(SC);return e||Fe(!1),e}function VC(t){let e=j.useContext(nr);return e||Fe(!1),e}function wT(t){let e=VC(),n=e.matches[e.matches.length-1];return n.route.id||Fe(!1),n.route.id}function FC(){var t;let e=j.useContext(mT),n=LC(gu.UseRouteError),i=wT(gu.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function jC(){let{router:t}=OC(vT.UseNavigateStable),e=wT(gu.UseNavigateStable),n=j.useRef(!1);return yT(()=>{n.current=!0}),j.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Oa({fromRouteId:e},s)))},[t,e])}const h0={};function UC(t,e,n){!e&&!h0[t]&&(h0[t]=!0)}function zC(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function ET(t){let{to:e,replace:n,state:i,relative:r}=t;eo()||Fe(!1);let{future:s,static:o}=j.useContext(tr),{matches:a}=j.useContext(nr),{pathname:l}=to(),c=Wr(),h=Dg(e,Rg(a,s.v7_relativeSplatPath),l,r==="path"),d=JSON.stringify(h);return j.useEffect(()=>c(JSON.parse(d),{replace:n,state:i,relative:r}),[c,d,r,n,i]),null}function Vn(t){Fe(!1)}function BC(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Si.Pop,navigator:s,static:o=!1,future:a}=t;eo()&&Fe(!1);let l=e.replace(/^\/*/,"/"),c=j.useMemo(()=>({basename:l,navigator:s,static:o,future:Oa({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=Zs(i));let{pathname:h="/",search:d="",hash:p="",state:m=null,key:y="default"}=i,E=j.useMemo(()=>{let T=Pg(h,l);return T==null?null:{location:{pathname:T,search:d,hash:p,state:m,key:y},navigationType:r}},[l,h,d,p,m,y,r]);return E==null?null:j.createElement(tr.Provider,{value:c},j.createElement(lh.Provider,{children:n,value:E}))}function $C(t){let{children:e,location:n}=t;return AC(ep(e),n)}new Promise(()=>{});function ep(t,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(t,(i,r)=>{if(!j.isValidElement(i))return;let s=[...e,r];if(i.type===j.Fragment){n.push.apply(n,ep(i.props.children,s));return}i.type!==Vn&&Fe(!1),!i.props.index||!i.props.children||Fe(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=ep(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tp(){return tp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},tp.apply(this,arguments)}function WC(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function HC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function qC(t,e){return t.button===0&&(!e||e==="_self")&&!HC(t)}const KC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],GC="6";try{window.__reactRouterVersion=GC}catch{}const QC="startTransition",d0=Bb[QC];function YC(t){let{basename:e,children:n,future:i,window:r}=t,s=j.useRef();s.current==null&&(s.current=eC({window:r,v5Compat:!0}));let o=s.current,[a,l]=j.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},h=j.useCallback(d=>{c&&d0?d0(()=>l(d)):l(d)},[l,c]);return j.useLayoutEffect(()=>o.listen(h),[o,h]),j.useEffect(()=>zC(i),[i]),j.createElement(BC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:i})}const XC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",JC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xl=j.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:d}=e,p=WC(e,KC),{basename:m}=j.useContext(tr),y,E=!1;if(typeof c=="string"&&JC.test(c)&&(y=c,XC))try{let S=new URL(window.location.href),D=c.startsWith("//")?new URL(S.protocol+c):new URL(c),M=Pg(D.pathname,m);D.origin===S.origin&&M!=null?c=M+D.search+D.hash:E=!0}catch{}let T=bC(c,{relative:r}),_=ZC(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:r,viewTransition:d});function v(S){i&&i(S),S.defaultPrevented||_(S)}return j.createElement("a",tp({},p,{href:y||T,onClick:E||s?i:v,ref:n,target:l}))});var f0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(f0||(f0={}));var p0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(p0||(p0={}));function ZC(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Wr(),c=to(),h=_T(t,{relative:o});return j.useCallback(d=>{if(qC(d,n)){d.preventDefault();let p=i!==void 0?i:pu(c)===pu(h);l(t,{replace:p,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,i,r,n,t,s,o,a])}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},eP=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},xT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),i.push(n[h],n[d],n[p],n[m])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(TT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):eP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||c==null||d==null)throw new tP;const p=s<<2|a>>4;if(i.push(p),c!==64){const m=a<<4&240|c>>2;if(i.push(m),d!==64){const y=c<<6&192|d;i.push(y)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class tP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nP=function(t){const e=TT(t);return xT.encodeByteArray(e,!0)},mu=function(t){return nP(t).replace(/\./g,"")},IT=function(t){try{return xT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP=()=>iP().__FIREBASE_DEFAULTS__,sP=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},oP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&IT(t[1]);return e&&JSON.parse(e)},ch=()=>{try{return rP()||sP()||oP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ST=t=>{var e,n;return(n=(e=ch())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},aP=t=>{const e=ST(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},bT=()=>{var t;return(t=ch())===null||t===void 0?void 0:t.config},kT=t=>{var e;return(e=ch())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[mu(JSON.stringify(n)),mu(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}function hP(){var t;const e=(t=ch())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function AT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function fP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pP(){const t=_t();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function gP(){return!hP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function CT(){try{return typeof indexedDB=="object"}catch{return!1}}function PT(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function mP(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP="FirebaseError";class vn extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=yP,Object.setPrototypeOf(this,vn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hr.prototype.create)}}class Hr{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?_P(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new vn(r,a,i)}}function _P(t,e){return t.replace(vP,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const vP=/\{\$([^}]+)}/g;function wP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function La(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(g0(s)&&g0(o)){if(!La(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function g0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function EP(t,e){const n=new TP(t,e);return n.subscribe.bind(n)}class TP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");xP(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Md),r.error===void 0&&(r.error=Md),r.complete===void 0&&(r.complete=Md);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Md(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP=1e3,SP=2,bP=4*60*60*1e3,kP=.5;function m0(t,e=IP,n=SP){const i=e*Math.pow(n,t),r=Math.round(kP*i*(Math.random()-.5)*2);return Math.min(bP,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(t){return t&&t._delegate?t._delegate:t}class yn{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new lP;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PP(e))try{this.getOrInitializeService({instanceIdentifier:gr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=gr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gr){return this.instances.has(e)}getOptions(e=gr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:CP(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=gr){return this.component?this.component.multipleInstances?e:gr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function CP(t){return t===gr?void 0:t}function PP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new AP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ne||(ne={}));const DP={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},NP=ne.INFO,MP={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},OP=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=MP[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class uh{constructor(e){this.name=e,this._logLevel=NP,this._logHandler=OP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?DP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const LP=(t,e)=>e.some(n=>t instanceof n);let y0,_0;function VP(){return y0||(y0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FP(){return _0||(_0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const RT=new WeakMap,np=new WeakMap,DT=new WeakMap,Od=new WeakMap,Mg=new WeakMap;function jP(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ui(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&RT.set(n,t)}).catch(()=>{}),Mg.set(e,t),e}function UP(t){if(np.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});np.set(t,e)}let ip={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return np.get(t);if(e==="objectStoreNames")return t.objectStoreNames||DT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ui(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function zP(t){ip=t(ip)}function BP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Ld(this),e,...n);return DT.set(i,e.sort?e.sort():[e]),Ui(i)}:FP().includes(t)?function(...e){return t.apply(Ld(this),e),Ui(RT.get(this))}:function(...e){return Ui(t.apply(Ld(this),e))}}function $P(t){return typeof t=="function"?BP(t):(t instanceof IDBTransaction&&UP(t),LP(t,VP())?new Proxy(t,ip):t)}function Ui(t){if(t instanceof IDBRequest)return jP(t);if(Od.has(t))return Od.get(t);const e=$P(t);return e!==t&&(Od.set(t,e),Mg.set(e,t)),e}const Ld=t=>Mg.get(t);function NT(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=Ui(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Ui(o.result),l.oldVersion,l.newVersion,Ui(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const WP=["get","getKey","getAll","getAllKeys","count"],HP=["put","add","delete","clear"],Vd=new Map;function v0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Vd.get(e))return Vd.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=HP.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||WP.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return Vd.set(e,s),s}zP(t=>({...t,get:(e,n,i)=>v0(e,n)||t.get(e,n,i),has:(e,n)=>!!v0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(KP(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function KP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rp="@firebase/app",w0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii=new uh("@firebase/app"),GP="@firebase/app-compat",QP="@firebase/analytics-compat",YP="@firebase/analytics",XP="@firebase/app-check-compat",JP="@firebase/app-check",ZP="@firebase/auth",eR="@firebase/auth-compat",tR="@firebase/database",nR="@firebase/data-connect",iR="@firebase/database-compat",rR="@firebase/functions",sR="@firebase/functions-compat",oR="@firebase/installations",aR="@firebase/installations-compat",lR="@firebase/messaging",cR="@firebase/messaging-compat",uR="@firebase/performance",hR="@firebase/performance-compat",dR="@firebase/remote-config",fR="@firebase/remote-config-compat",pR="@firebase/storage",gR="@firebase/storage-compat",mR="@firebase/firestore",yR="@firebase/vertexai-preview",_R="@firebase/firestore-compat",vR="firebase",wR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="[DEFAULT]",ER={[rp]:"fire-core",[GP]:"fire-core-compat",[YP]:"fire-analytics",[QP]:"fire-analytics-compat",[JP]:"fire-app-check",[XP]:"fire-app-check-compat",[ZP]:"fire-auth",[eR]:"fire-auth-compat",[tR]:"fire-rtdb",[nR]:"fire-data-connect",[iR]:"fire-rtdb-compat",[rR]:"fire-fn",[sR]:"fire-fn-compat",[oR]:"fire-iid",[aR]:"fire-iid-compat",[lR]:"fire-fcm",[cR]:"fire-fcm-compat",[uR]:"fire-perf",[hR]:"fire-perf-compat",[dR]:"fire-rc",[fR]:"fire-rc-compat",[pR]:"fire-gcs",[gR]:"fire-gcs-compat",[mR]:"fire-fst",[_R]:"fire-fst-compat",[yR]:"fire-vertex","fire-js":"fire-js",[vR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yu=new Map,TR=new Map,op=new Map;function E0(t,e){try{t.container.addComponent(e)}catch(n){ii.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Rn(t){const e=t.name;if(op.has(e))return ii.debug(`There were multiple attempts to register component ${e}.`),!1;op.set(e,t);for(const n of yu.values())E0(n,t);for(const n of TR.values())E0(n,t);return!0}function qr(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function qn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zi=new Hr("app","Firebase",xR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new yn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=wR;function MT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:sp,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw zi.create("bad-app-name",{appName:String(r)});if(n||(n=bT()),!n)throw zi.create("no-options");const s=yu.get(r);if(s){if(La(n,s.options)&&La(i,s.config))return s;throw zi.create("duplicate-app",{appName:r})}const o=new RP(r);for(const l of op.values())o.addComponent(l);const a=new IR(n,i,o);return yu.set(r,a),a}function Og(t=sp){const e=yu.get(t);if(!e&&t===sp&&bT())return MT();if(!e)throw zi.create("no-app",{appName:t});return e}function en(t,e,n){var i;let r=(i=ER[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ii.warn(a.join(" "));return}Rn(new yn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR="firebase-heartbeat-database",bR=1,Va="firebase-heartbeat-store";let Fd=null;function OT(){return Fd||(Fd=NT(SR,bR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Va)}catch(n){console.warn(n)}}}}).catch(t=>{throw zi.create("idb-open",{originalErrorMessage:t.message})})),Fd}async function kR(t){try{const n=(await OT()).transaction(Va),i=await n.objectStore(Va).get(LT(t));return await n.done,i}catch(e){if(e instanceof vn)ii.warn(e.message);else{const n=zi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ii.warn(n.message)}}}async function T0(t,e){try{const i=(await OT()).transaction(Va,"readwrite");await i.objectStore(Va).put(e,LT(t)),await i.done}catch(n){if(n instanceof vn)ii.warn(n.message);else{const i=zi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ii.warn(i.message)}}}function LT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR=1024,CR=30*24*60*60*1e3;class PR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new DR(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=x0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=CR}),this._storage.overwrite(this._heartbeatsCache))}catch(i){ii.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=x0(),{heartbeatsToSend:i,unsentEntries:r}=RR(this._heartbeatsCache.heartbeats),s=mu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ii.warn(n),""}}}function x0(){return new Date().toISOString().substring(0,10)}function RR(t,e=AR){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),I0(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),I0(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class DR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return CT()?PT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await kR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return T0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return T0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function I0(t){return mu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(t){Rn(new yn("platform-logger",e=>new qP(e),"PRIVATE")),Rn(new yn("heartbeat",e=>new PR(e),"PRIVATE")),en(rp,w0,t),en(rp,w0,"esm2017"),en("fire-js","")}NR("");function Lg(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function VT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const MR=VT,FT=new Hr("auth","Firebase",VT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=new uh("@firebase/auth");function OR(t,...e){_u.logLevel<=ne.WARN&&_u.warn(`Auth (${no}): ${t}`,...e)}function Rc(t,...e){_u.logLevel<=ne.ERROR&&_u.error(`Auth (${no}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t,...e){throw Fg(t,...e)}function gn(t,...e){return Fg(t,...e)}function Vg(t,e,n){const i=Object.assign(Object.assign({},MR()),{[e]:n});return new Hr("auth","Firebase",i).create(e,{appName:t.name})}function kr(t){return Vg(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function LR(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Dn(t,"argument-error"),Vg(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Fg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return FT.create(t,...e)}function Q(t,e,...n){if(!t)throw Fg(e,...n)}function Kn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Rc(e),new Error(e)}function ri(t,e){t||Kn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function VR(){return S0()==="http:"||S0()==="https:"}function S0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VR()||AT()||"connection"in navigator)?navigator.onLine:!0}function jR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,n){this.shortDelay=e,this.longDelay=n,ri(n>e,"Short delay should be less than long delay!"),this.isMobile=uP()||fP()}get(){return FR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(t,e){ri(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=new ol(3e4,6e4);function Ug(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function io(t,e,n,i,r={}){return UT(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=sl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return dP()||(c.referrerPolicy="no-referrer"),jT.fetch()(zT(t,t.config.apiHost,n,a),c)})}async function UT(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},UR),e);try{const r=new $R(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Jl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jl(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Jl(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Jl(t,"user-disabled",o);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Vg(t,h,c);Dn(t,h)}}catch(r){if(r instanceof vn)throw r;Dn(t,"network-request-failed",{message:String(r)})}}async function BR(t,e,n,i,r={}){const s=await io(t,e,n,i,r);return"mfaPendingCredential"in s&&Dn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function zT(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?jg(t.config,r):`${t.config.apiScheme}://${r}`}class $R{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(gn(this.auth,"network-request-failed")),zR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Jl(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=gn(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WR(t,e){return io(t,"POST","/v1/accounts:delete",e)}async function BT(t,e){return io(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function HR(t,e=!1){const n=St(t),i=await n.getIdToken(e),r=zg(i);Q(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:sa(jd(r.auth_time)),issuedAtTime:sa(jd(r.iat)),expirationTime:sa(jd(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function jd(t){return Number(t)*1e3}function zg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Rc("JWT malformed, contained fewer than 3 sections"),null;try{const r=IT(n);return r?JSON.parse(r):(Rc("Failed to decode base64 JWT payload"),null)}catch(r){return Rc("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function b0(t){const e=zg(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fa(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof vn&&qR(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function qR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=sa(this.lastLoginAt),this.creationTime=sa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vu(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Fa(t,BT(n,{idToken:i}));Q(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?$T(s.providerUserInfo):[],a=QR(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new lp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function GR(t){const e=St(t);await vu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function QR(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function $T(t){return t.map(e=>{var{providerId:n}=e,i=Lg(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YR(t,e){const n=await UT(t,{},async()=>{const i=sl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=zT(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",jT.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function XR(t,e){return io(t,"POST","/v2/accounts:revokeToken",Ug(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):b0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");const n=b0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await YR(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new Ss;return i&&(Q(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(Q(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(Q(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ss,this.toJSON())}_performRefresh(){return Kn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Gn{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=Lg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new KR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new lp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Fa(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return HR(this,e)}reload(){return GR(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Gn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await vu(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qn(this.auth.app))return Promise.reject(kr(this.auth));const e=await this.getIdToken();return await Fa(this,WR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,c,h;const d=(i=n.displayName)!==null&&i!==void 0?i:void 0,p=(r=n.email)!==null&&r!==void 0?r:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,E=(a=n.tenantId)!==null&&a!==void 0?a:void 0,T=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:S,emailVerified:D,isAnonymous:M,providerData:L,stsTokenManager:I}=n;Q(S&&I,e,"internal-error");const w=Ss.fromJSON(this.name,I);Q(typeof S=="string",e,"internal-error"),pi(d,e.name),pi(p,e.name),Q(typeof D=="boolean",e,"internal-error"),Q(typeof M=="boolean",e,"internal-error"),pi(m,e.name),pi(y,e.name),pi(E,e.name),pi(T,e.name),pi(_,e.name),pi(v,e.name);const b=new Gn({uid:S,auth:e,email:p,emailVerified:D,displayName:d,isAnonymous:M,photoURL:y,phoneNumber:m,tenantId:E,stsTokenManager:w,createdAt:_,lastLoginAt:v});return L&&Array.isArray(L)&&(b.providerData=L.map(k=>Object.assign({},k))),T&&(b._redirectEventId=T),b}static async _fromIdTokenResponse(e,n,i=!1){const r=new Ss;r.updateFromServerResponse(n);const s=new Gn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await vu(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];Q(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?$T(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),a=new Ss;a.updateFromIdToken(i);const l=new Gn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new lp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0=new Map;function Qn(t){ri(t instanceof Function,"Expected a class definition");let e=k0.get(t);return e?(ri(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,k0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}WT.type="NONE";const A0=WT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(t,e,n){return`firebase:${t}:${e}:${n}`}class bs{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Dc(this.userKey,r.apiKey,s),this.fullPersistenceKey=Dc("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Gn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new bs(Qn(A0),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||Qn(A0);const o=Dc(i,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=Gn._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new bs(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new bs(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(GT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(YT(e))return"Blackberry";if(XT(e))return"Webos";if(qT(e))return"Safari";if((e.includes("chrome/")||KT(e))&&!e.includes("edge/"))return"Chrome";if(QT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function HT(t=_t()){return/firefox\//i.test(t)}function qT(t=_t()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function KT(t=_t()){return/crios\//i.test(t)}function GT(t=_t()){return/iemobile/i.test(t)}function QT(t=_t()){return/android/i.test(t)}function YT(t=_t()){return/blackberry/i.test(t)}function XT(t=_t()){return/webos/i.test(t)}function Bg(t=_t()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function JR(t=_t()){var e;return Bg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ZR(){return pP()&&document.documentMode===10}function JT(t=_t()){return Bg(t)||QT(t)||XT(t)||YT(t)||/windows phone/i.test(t)||GT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(t,e=[]){let n;switch(t){case"Browser":n=C0(_t());break;case"Worker":n=`${C0(_t())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${no}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t2(t,e={}){return io(t,"GET","/v2/passwordPolicy",Ug(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=6;class i2{constructor(e){var n,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:n2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new P0(this),this.idTokenSubscription=new P0(this),this.beforeStateQueue=new e2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=FT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Qn(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await bs.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await BT(this,{idToken:e}),i=await Gn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(qn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await vu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qn(this.app))return Promise.reject(kr(this));const n=e?St(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qn(this.app)?Promise.reject(kr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qn(this.app)?Promise.reject(kr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await t2(this),n=new i2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Hr("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await XR(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Qn(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await bs.create(this,[Qn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ZT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&OR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function hh(t){return St(t)}class P0{constructor(e){this.auth=e,this.observer=null,this.addObserver=EP(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $g={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function s2(t){$g=t}function o2(t){return $g.loadJS(t)}function a2(){return $g.gapiScript}function l2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(t,e){const n=qr(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(La(s,e??{}))return r;Dn(r,"already-initialized")}return n.initialize({options:e})}function u2(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Qn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function h2(t,e,n){const i=hh(t);Q(i._canInitEmulator,i,"emulator-config-failed"),Q(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),s=ex(e),{host:o,port:a}=d2(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||f2()}function ex(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function d2(t){const e=ex(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:R0(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:R0(o)}}}function R0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function f2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Kn("not implemented")}_getIdTokenResponse(e){return Kn("not implemented")}_linkToIdToken(e,n){return Kn("not implemented")}_getReauthenticationResolver(e){return Kn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ks(t,e){return BR(t,"POST","/v1/accounts:signInWithIdp",Ug(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2="http://localhost";class si extends tx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new si(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Dn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=Lg(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new si(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ks(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,ks(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ks(e,n)}buildRequest(){const e={requestUri:p2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=sl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro extends Wg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class oa extends ro{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return Q("providerId"in n&&"signInMethod"in n,"argument-error"),si._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Q(e.idToken||e.accessToken,"argument-error"),si._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return oa.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return oa.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i,oauthTokenSecret:r,pendingToken:s,nonce:o,providerId:a}=e;if(!i&&!r&&!n&&!s||!a)return null;try{return new oa(a)._credential({idToken:n,accessToken:i,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends ro{constructor(){super("facebook.com")}static credential(e){return si._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wi.credential(e.oauthAccessToken)}catch{return null}}}wi.FACEBOOK_SIGN_IN_METHOD="facebook.com";wi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n extends ro{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return si._fromParams({providerId:$n.PROVIDER_ID,signInMethod:$n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return $n.credentialFromTaggedObject(e)}static credentialFromError(e){return $n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return $n.credential(n,i)}catch{return null}}}$n.GOOGLE_SIGN_IN_METHOD="google.com";$n.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends ro{constructor(){super("github.com")}static credential(e){return si._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ei.credential(e.oauthAccessToken)}catch{return null}}}Ei.GITHUB_SIGN_IN_METHOD="github.com";Ei.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti extends ro{constructor(){super("twitter.com")}static credential(e,n){return si._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Ti.credential(n,i)}catch{return null}}}Ti.TWITTER_SIGN_IN_METHOD="twitter.com";Ti.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await Gn._fromIdTokenResponse(e,i,r),o=D0(i);return new Fs({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=D0(i);return new Fs({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function D0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu extends vn{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,wu.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new wu(e,n,i,r)}}function nx(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?wu._fromErrorAndOperation(t,s,e,i):s})}async function g2(t,e,n=!1){const i=await Fa(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Fs._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m2(t,e,n=!1){const{auth:i}=t;if(qn(i.app))return Promise.reject(kr(i));const r="reauthenticate";try{const s=await Fa(t,nx(i,r,e,t),n);Q(s.idToken,i,"internal-error");const o=zg(s.idToken);Q(o,i,"internal-error");const{sub:a}=o;return Q(t.uid===a,i,"user-mismatch"),Fs._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Dn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y2(t,e,n=!1){if(qn(t.app))return Promise.reject(kr(t));const i="signIn",r=await nx(t,i,e),s=await Fs._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}function _2(t,e,n,i){return St(t).onIdTokenChanged(e,n,i)}function v2(t,e,n){return St(t).beforeAuthStateChanged(e,n)}function w2(t,e,n,i){return St(t).onAuthStateChanged(e,n,i)}const Eu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Eu,"1"),this.storage.removeItem(Eu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2=1e3,T2=10;class rx extends ix{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=JT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);ZR()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,T2):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},E2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}rx.type="LOCAL";const x2=rx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx extends ix{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}sx.type="SESSION";const ox=sx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new dh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await I2(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Hg("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(){return window}function b2(t){An().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(){return typeof An().WorkerGlobalScope<"u"&&typeof An().importScripts=="function"}async function k2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function A2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function C2(){return ax()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx="firebaseLocalStorageDb",P2=1,Tu="firebaseLocalStorage",cx="fbase_key";class al{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function fh(t,e){return t.transaction([Tu],e?"readwrite":"readonly").objectStore(Tu)}function R2(){const t=indexedDB.deleteDatabase(lx);return new al(t).toPromise()}function cp(){const t=indexedDB.open(lx,P2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Tu,{keyPath:cx})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Tu)?e(i):(i.close(),await R2(),e(await cp()))})})}async function N0(t,e,n){const i=fh(t,!0).put({[cx]:e,value:n});return new al(i).toPromise()}async function D2(t,e){const n=fh(t,!1).get(e),i=await new al(n).toPromise();return i===void 0?null:i.value}function M0(t,e){const n=fh(t,!0).delete(e);return new al(n).toPromise()}const N2=800,M2=3;class ux{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>M2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ax()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dh._getInstance(C2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await k2(),!this.activeServiceWorker)return;this.sender=new S2(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||A2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cp();return await N0(e,Eu,"1"),await M0(e,Eu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>N0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>D2(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>M0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=fh(r,!1).getAll();return new al(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),N2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ux.type="LOCAL";const O2=ux;new ol(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(t,e){return e?Qn(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg extends tx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ks(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ks(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ks(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function L2(t){return y2(t.auth,new qg(t),t.bypassAuthState)}function V2(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),m2(n,new qg(t),t.bypassAuthState)}async function F2(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),g2(n,new qg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return L2;case"linkViaPopup":case"linkViaRedirect":return F2;case"reauthViaPopup":case"reauthViaRedirect":return V2;default:Dn(this.auth,"internal-error")}}resolve(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2=new ol(2e3,1e4);async function fx(t,e,n){if(qn(t.app))return Promise.reject(gn(t,"operation-not-supported-in-this-environment"));const i=hh(t);LR(t,e,Wg);const r=hx(i,n);return new Er(i,"signInViaPopup",e,r).executeNotNull()}class Er extends dx{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Er.currentPopupAction&&Er.currentPopupAction.cancel(),Er.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){ri(this.filter.length===1,"Popup operations only handle one event");const e=Hg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(gn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(gn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Er.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,j2.get())};e()}}Er.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2="pendingRedirect",Nc=new Map;class z2 extends dx{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Nc.get(this.auth._key());if(!e){try{const i=await B2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Nc.set(this.auth._key(),e)}return this.bypassAuthState||Nc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function B2(t,e){const n=H2(e),i=W2(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function $2(t,e){Nc.set(t._key(),e)}function W2(t){return Qn(t._redirectPersistence)}function H2(t){return Dc(U2,t.config.apiKey,t.name)}async function q2(t,e,n=!1){if(qn(t.app))return Promise.reject(kr(t));const i=hh(t),r=hx(i,e),o=await new z2(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2=10*60*1e3;class G2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Q2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!px(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(gn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=K2&&this.cachedEventUids.clear(),this.cachedEventUids.has(O0(e))}saveEventToCache(e){this.cachedEventUids.add(O0(e)),this.lastProcessedEventTime=Date.now()}}function O0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function px({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Q2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return px(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y2(t,e={}){return io(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,J2=/^https?/;async function Z2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Y2(t);for(const n of e)try{if(eD(n))return}catch{}Dn(t,"unauthorized-domain")}function eD(t){const e=ap(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!J2.test(n))return!1;if(X2.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=new ol(3e4,6e4);function L0(){const t=An().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function nD(t){return new Promise((e,n)=>{var i,r,s;function o(){L0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{L0(),n(gn(t,"network-request-failed"))},timeout:tD.get()})}if(!((r=(i=An().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=An().gapi)===null||s===void 0)&&s.load)o();else{const a=l2("iframefcb");return An()[a]=()=>{gapi.load?o():n(gn(t,"network-request-failed"))},o2(`${a2()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Mc=null,e})}let Mc=null;function iD(t){return Mc=Mc||nD(t),Mc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=new ol(5e3,15e3),sD="__/auth/iframe",oD="emulator/auth/iframe",aD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cD(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?jg(e,oD):`https://${t.config.authDomain}/${sD}`,i={apiKey:e.apiKey,appName:t.name,v:no},r=lD.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${sl(i).slice(1)}`}async function uD(t){const e=await iD(t),n=An().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:cD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aD,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=gn(t,"network-request-failed"),a=An().setTimeout(()=>{s(o)},rD.get());function l(){An().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dD=500,fD=600,pD="_blank",gD="http://localhost";class V0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mD(t,e,n,i=dD,r=fD){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},hD),{width:i.toString(),height:r.toString(),top:s,left:o}),c=_t().toLowerCase();n&&(a=KT(c)?pD:n),HT(c)&&(e=e||gD,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[m,y])=>`${p}${m}=${y},`,"");if(JR(c)&&a!=="_self")return yD(e||"",a),new V0(null);const d=window.open(e||"",a,h);Q(d,t,"popup-blocked");try{d.focus()}catch{}return new V0(d)}function yD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D="__/auth/handler",vD="emulator/auth/handler",wD=encodeURIComponent("fac");async function F0(t,e,n,i,r,s){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:no,eventId:r};if(e instanceof Wg){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",wP(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries(s||{}))o[h]=d}if(e instanceof ro){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${wD}=${encodeURIComponent(l)}`:"";return`${ED(t)}?${sl(a).slice(1)}${c}`}function ED({config:t}){return t.emulator?jg(t,vD):`https://${t.authDomain}/${_D}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud="webStorageSupport";class TD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ox,this._completeRedirectFn=q2,this._overrideRedirectResult=$2}async _openPopup(e,n,i,r){var s;ri((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await F0(e,n,i,ap(),r);return mD(e,o,Hg())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await F0(e,n,i,ap(),r);return b2(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(ri(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await uD(e),i=new G2(e);return n.register("authEvent",r=>(Q(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ud,{type:Ud},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[Ud];o!==void 0&&n(!!o),Dn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Z2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return JT()||qT()||Bg()}}const xD=TD;var j0="@firebase/auth",U0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bD(t){Rn(new yn("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;Q(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ZT(t)},c=new r2(i,r,s,l);return u2(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Rn(new yn("auth-internal",e=>{const n=hh(e.getProvider("auth").getImmediate());return(i=>new ID(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),en(j0,U0,SD(t)),en(j0,U0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=5*60,AD=kT("authIdTokenMaxAge")||kD;let z0=null;const CD=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>AD)return;const r=n==null?void 0:n.token;z0!==r&&(z0=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function PD(t=Og()){const e=qr(t,"auth");if(e.isInitialized())return e.getImmediate();const n=c2(t,{popupRedirectResolver:xD,persistence:[O2,x2,ox]}),i=kT("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=CD(s.toString());v2(n,o,()=>o(n.currentUser)),_2(n,a=>o(a))}}const r=ST("auth");return r&&h2(n,`http://${r}`),n}function RD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}s2({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=gn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",RD().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bD("Browser");var DD="firebase",ND="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */en(DD,ND,"app");const gx="@firebase/installations",Kg="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx=1e4,yx=`w:${Kg}`,_x="FIS_v2",MD="https://firebaseinstallations.googleapis.com/v1",OD=60*60*1e3,LD="installations",VD="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Or=new Hr(LD,VD,FD);function vx(t){return t instanceof vn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx({projectId:t}){return`${MD}/projects/${t}/installations`}function Ex(t){return{token:t.token,requestStatus:2,expiresIn:UD(t.expiresIn),creationTime:Date.now()}}async function Tx(t,e){const i=(await e.json()).error;return Or.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function xx({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function jD(t,{refreshToken:e}){const n=xx(t);return n.append("Authorization",zD(e)),n}async function Ix(t){const e=await t();return e.status>=500&&e.status<600?t():e}function UD(t){return Number(t.replace("s","000"))}function zD(t){return`${_x} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BD({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=wx(t),r=xx(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const o={fid:n,authVersion:_x,appId:t.appId,sdkVersion:yx},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await Ix(()=>fetch(i,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:Ex(c.authToken)}}else throw await Tx("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD=/^[cdef][\w-]{21}$/,up="";function HD(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=qD(t);return WD.test(n)?n:up}catch{return up}}function qD(t){return $D(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx=new Map;function kx(t,e){const n=ph(t);Ax(n,e),KD(n,e)}function Ax(t,e){const n=bx.get(t);if(n)for(const i of n)i(e)}function KD(t,e){const n=GD();n&&n.postMessage({key:t,fid:e}),QD()}let Tr=null;function GD(){return!Tr&&"BroadcastChannel"in self&&(Tr=new BroadcastChannel("[Firebase] FID Change"),Tr.onmessage=t=>{Ax(t.data.key,t.data.fid)}),Tr}function QD(){bx.size===0&&Tr&&(Tr.close(),Tr=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD="firebase-installations-database",XD=1,Lr="firebase-installations-store";let zd=null;function Gg(){return zd||(zd=NT(YD,XD,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Lr)}}})),zd}async function xu(t,e){const n=ph(t),r=(await Gg()).transaction(Lr,"readwrite"),s=r.objectStore(Lr),o=await s.get(n);return await s.put(e,n),await r.done,(!o||o.fid!==e.fid)&&kx(t,e.fid),e}async function Cx(t){const e=ph(t),i=(await Gg()).transaction(Lr,"readwrite");await i.objectStore(Lr).delete(e),await i.done}async function gh(t,e){const n=ph(t),r=(await Gg()).transaction(Lr,"readwrite"),s=r.objectStore(Lr),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await r.done,a&&(!o||o.fid!==a.fid)&&kx(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qg(t){let e;const n=await gh(t.appConfig,i=>{const r=JD(i),s=ZD(t,r);return e=s.registrationPromise,s.installationEntry});return n.fid===up?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function JD(t){const e=t||{fid:HD(),registrationStatus:0};return Px(e)}function ZD(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(Or.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=eN(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:tN(t)}:{installationEntry:e}}async function eN(t,e){try{const n=await BD(t,e);return xu(t.appConfig,n)}catch(n){throw vx(n)&&n.customData.serverCode===409?await Cx(t.appConfig):await xu(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function tN(t){let e=await B0(t.appConfig);for(;e.registrationStatus===1;)await Sx(100),e=await B0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await Qg(t);return i||n}return e}function B0(t){return gh(t,e=>{if(!e)throw Or.create("installation-not-found");return Px(e)})}function Px(t){return nN(t)?{fid:t.fid,registrationStatus:0}:t}function nN(t){return t.registrationStatus===1&&t.registrationTime+mx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iN({appConfig:t,heartbeatServiceProvider:e},n){const i=rN(t,n),r=jD(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&r.append("x-firebase-client",c)}const o={installation:{sdkVersion:yx,appId:t.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await Ix(()=>fetch(i,a));if(l.ok){const c=await l.json();return Ex(c)}else throw await Tx("Generate Auth Token",l)}function rN(t,{fid:e}){return`${wx(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yg(t,e=!1){let n;const i=await gh(t.appConfig,s=>{if(!Rx(s))throw Or.create("not-registered");const o=s.authToken;if(!e&&aN(o))return s;if(o.requestStatus===1)return n=sN(t,e),s;{if(!navigator.onLine)throw Or.create("app-offline");const a=cN(s);return n=oN(t,a),a}});return n?await n:i.authToken}async function sN(t,e){let n=await $0(t.appConfig);for(;n.authToken.requestStatus===1;)await Sx(100),n=await $0(t.appConfig);const i=n.authToken;return i.requestStatus===0?Yg(t,e):i}function $0(t){return gh(t,e=>{if(!Rx(e))throw Or.create("not-registered");const n=e.authToken;return uN(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function oN(t,e){try{const n=await iN(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await xu(t.appConfig,i),n}catch(n){if(vx(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Cx(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await xu(t.appConfig,i)}throw n}}function Rx(t){return t!==void 0&&t.registrationStatus===2}function aN(t){return t.requestStatus===2&&!lN(t)}function lN(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+OD}function cN(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function uN(t){return t.requestStatus===1&&t.requestTime+mx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hN(t){const e=t,{installationEntry:n,registrationPromise:i}=await Qg(e);return i?i.catch(console.error):Yg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(t,e=!1){const n=t;return await fN(n),(await Yg(n,e)).token}async function fN(t){const{registrationPromise:e}=await Qg(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(t){if(!t||!t.options)throw Bd("App Configuration");if(!t.name)throw Bd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Bd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Bd(t){return Or.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx="installations",gN="installations-internal",mN=t=>{const e=t.getProvider("app").getImmediate(),n=pN(e),i=qr(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},yN=t=>{const e=t.getProvider("app").getImmediate(),n=qr(e,Dx).getImmediate();return{getId:()=>hN(n),getToken:r=>dN(n,r)}};function _N(){Rn(new yn(Dx,mN,"PUBLIC")),Rn(new yn(gN,yN,"PRIVATE"))}_N();en(gx,Kg);en(gx,Kg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu="analytics",vN="firebase_id",wN="origin",EN=60*1e3,TN="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Xg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot=new uh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Bt=new Hr("analytics","Analytics",xN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(t){if(!t.startsWith(Xg)){const e=Bt.create("invalid-gtag-resource",{gtagURL:t});return Ot.warn(e.message),""}return t}function Nx(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function SN(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function bN(t,e){const n=SN("firebase-js-sdk-policy",{createScriptURL:IN}),i=document.createElement("script"),r=`${Xg}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function kN(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function AN(t,e,n,i,r,s){const o=i[r];try{if(o)await e[o];else{const l=(await Nx(n)).find(c=>c.measurementId===r);l&&await e[l.appId]}}catch(a){Ot.error(a)}t("config",r,s)}async function CN(t,e,n,i,r){try{let s=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const a=await Nx(n);for(const l of o){const c=a.find(d=>d.measurementId===l),h=c&&e[c.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",i,r||{})}catch(s){Ot.error(s)}}function PN(t,e,n,i){async function r(s,...o){try{if(s==="event"){const[a,l]=o;await CN(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await AN(t,e,n,i,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){Ot.error(a)}}return r}function RN(t,e,n,i,r){let s=function(...o){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(s=window[r]),window[r]=PN(s,t,e,n),{gtagCore:s,wrappedGtag:window[r]}}function DN(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Xg)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=30,MN=1e3;class ON{constructor(e={},n=MN){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Mx=new ON;function LN(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function VN(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:LN(i)},s=TN.replace("{app-id}",n),o=await fetch(s,r);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Bt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function FN(t,e=Mx,n){const{appId:i,apiKey:r,measurementId:s}=t.options;if(!i)throw Bt.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw Bt.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new zN;return setTimeout(async()=>{a.abort()},n!==void 0?n:EN),Ox({appId:i,apiKey:r,measurementId:s},o,a,e)}async function Ox(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=Mx){var s;const{appId:o,measurementId:a}=t;try{await jN(i,e)}catch(l){if(a)return Ot.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await VN(t);return r.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!UN(c)){if(r.deleteThrottleMetadata(o),a)return Ot.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const h=Number((s=c==null?void 0:c.customData)===null||s===void 0?void 0:s.httpStatus)===503?m0(n,r.intervalMillis,NN):m0(n,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return r.setThrottleMetadata(o,d),Ot.debug(`Calling attemptFetch again in ${h} millis`),Ox(t,d,i,r)}}function jN(t,e){return new Promise((n,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(s),i(Bt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function UN(t){if(!(t instanceof vn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class zN{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function BN(t,e,n,i,r){if(r&&r.global){t("event",n,i);return}else{const s=await e,o=Object.assign(Object.assign({},i),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $N(){if(CT())try{await PT()}catch(t){return Ot.warn(Bt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ot.warn(Bt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function WN(t,e,n,i,r,s,o){var a;const l=FN(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&Ot.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Ot.error(m)),e.push(l);const c=$N().then(m=>{if(m)return i.getId()}),[h,d]=await Promise.all([l,c]);DN(s)||bN(s,h.measurementId),r("js",new Date);const p=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return p[wN]="firebase",p.update=!0,d!=null&&(p[vN]=d),r("config",h.measurementId,p),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e){this.app=e}_delete(){return delete aa[this.app.options.appId],Promise.resolve()}}let aa={},W0=[];const H0={};let $d="dataLayer",qN="gtag",q0,Lx,K0=!1;function KN(){const t=[];if(AT()&&t.push("This is a browser extension environment."),mP()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=Bt.create("invalid-analytics-context",{errorInfo:e});Ot.warn(n.message)}}function GN(t,e,n){KN();const i=t.options.appId;if(!i)throw Bt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ot.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Bt.create("no-api-key");if(aa[i]!=null)throw Bt.create("already-exists",{id:i});if(!K0){kN($d);const{wrappedGtag:s,gtagCore:o}=RN(aa,W0,H0,$d,qN);Lx=s,q0=o,K0=!0}return aa[i]=WN(t,W0,H0,e,q0,$d,n),new HN(t)}function QN(t=Og()){t=St(t);const e=qr(t,Iu);return e.isInitialized()?e.getImmediate():YN(t)}function YN(t,e={}){const n=qr(t,Iu);if(n.isInitialized()){const r=n.getImmediate();if(La(e,n.getOptions()))return r;throw Bt.create("already-initialized")}return n.initialize({options:e})}function XN(t,e,n,i){t=St(t),BN(Lx,aa[t.app.options.appId],e,n,i).catch(r=>Ot.error(r))}const G0="@firebase/analytics",Q0="0.10.8";function JN(){Rn(new yn(Iu,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return GN(i,r,n)},"PUBLIC")),Rn(new yn("analytics-internal",t,"PRIVATE")),en(G0,Q0),en(G0,Q0,"esm2017");function t(e){try{const n=e.getProvider(Iu).getImmediate();return{logEvent:(i,r,s)=>XN(n,i,r,s)}}catch(n){throw Bt.create("interop-component-reg-failed",{reason:n})}}}JN();var Y0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ar,Vx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,w){function b(){}b.prototype=w.prototype,I.D=w.prototype,I.prototype=new b,I.prototype.constructor=I,I.C=function(k,P,R){for(var A=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)A[Se-2]=arguments[Se];return w.prototype[P].apply(k,A)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,w,b){b||(b=0);var k=Array(16);if(typeof w=="string")for(var P=0;16>P;++P)k[P]=w.charCodeAt(b++)|w.charCodeAt(b++)<<8|w.charCodeAt(b++)<<16|w.charCodeAt(b++)<<24;else for(P=0;16>P;++P)k[P]=w[b++]|w[b++]<<8|w[b++]<<16|w[b++]<<24;w=I.g[0],b=I.g[1],P=I.g[2];var R=I.g[3],A=w+(R^b&(P^R))+k[0]+3614090360&4294967295;w=b+(A<<7&4294967295|A>>>25),A=R+(P^w&(b^P))+k[1]+3905402710&4294967295,R=w+(A<<12&4294967295|A>>>20),A=P+(b^R&(w^b))+k[2]+606105819&4294967295,P=R+(A<<17&4294967295|A>>>15),A=b+(w^P&(R^w))+k[3]+3250441966&4294967295,b=P+(A<<22&4294967295|A>>>10),A=w+(R^b&(P^R))+k[4]+4118548399&4294967295,w=b+(A<<7&4294967295|A>>>25),A=R+(P^w&(b^P))+k[5]+1200080426&4294967295,R=w+(A<<12&4294967295|A>>>20),A=P+(b^R&(w^b))+k[6]+2821735955&4294967295,P=R+(A<<17&4294967295|A>>>15),A=b+(w^P&(R^w))+k[7]+4249261313&4294967295,b=P+(A<<22&4294967295|A>>>10),A=w+(R^b&(P^R))+k[8]+1770035416&4294967295,w=b+(A<<7&4294967295|A>>>25),A=R+(P^w&(b^P))+k[9]+2336552879&4294967295,R=w+(A<<12&4294967295|A>>>20),A=P+(b^R&(w^b))+k[10]+4294925233&4294967295,P=R+(A<<17&4294967295|A>>>15),A=b+(w^P&(R^w))+k[11]+2304563134&4294967295,b=P+(A<<22&4294967295|A>>>10),A=w+(R^b&(P^R))+k[12]+1804603682&4294967295,w=b+(A<<7&4294967295|A>>>25),A=R+(P^w&(b^P))+k[13]+4254626195&4294967295,R=w+(A<<12&4294967295|A>>>20),A=P+(b^R&(w^b))+k[14]+2792965006&4294967295,P=R+(A<<17&4294967295|A>>>15),A=b+(w^P&(R^w))+k[15]+1236535329&4294967295,b=P+(A<<22&4294967295|A>>>10),A=w+(P^R&(b^P))+k[1]+4129170786&4294967295,w=b+(A<<5&4294967295|A>>>27),A=R+(b^P&(w^b))+k[6]+3225465664&4294967295,R=w+(A<<9&4294967295|A>>>23),A=P+(w^b&(R^w))+k[11]+643717713&4294967295,P=R+(A<<14&4294967295|A>>>18),A=b+(R^w&(P^R))+k[0]+3921069994&4294967295,b=P+(A<<20&4294967295|A>>>12),A=w+(P^R&(b^P))+k[5]+3593408605&4294967295,w=b+(A<<5&4294967295|A>>>27),A=R+(b^P&(w^b))+k[10]+38016083&4294967295,R=w+(A<<9&4294967295|A>>>23),A=P+(w^b&(R^w))+k[15]+3634488961&4294967295,P=R+(A<<14&4294967295|A>>>18),A=b+(R^w&(P^R))+k[4]+3889429448&4294967295,b=P+(A<<20&4294967295|A>>>12),A=w+(P^R&(b^P))+k[9]+568446438&4294967295,w=b+(A<<5&4294967295|A>>>27),A=R+(b^P&(w^b))+k[14]+3275163606&4294967295,R=w+(A<<9&4294967295|A>>>23),A=P+(w^b&(R^w))+k[3]+4107603335&4294967295,P=R+(A<<14&4294967295|A>>>18),A=b+(R^w&(P^R))+k[8]+1163531501&4294967295,b=P+(A<<20&4294967295|A>>>12),A=w+(P^R&(b^P))+k[13]+2850285829&4294967295,w=b+(A<<5&4294967295|A>>>27),A=R+(b^P&(w^b))+k[2]+4243563512&4294967295,R=w+(A<<9&4294967295|A>>>23),A=P+(w^b&(R^w))+k[7]+1735328473&4294967295,P=R+(A<<14&4294967295|A>>>18),A=b+(R^w&(P^R))+k[12]+2368359562&4294967295,b=P+(A<<20&4294967295|A>>>12),A=w+(b^P^R)+k[5]+4294588738&4294967295,w=b+(A<<4&4294967295|A>>>28),A=R+(w^b^P)+k[8]+2272392833&4294967295,R=w+(A<<11&4294967295|A>>>21),A=P+(R^w^b)+k[11]+1839030562&4294967295,P=R+(A<<16&4294967295|A>>>16),A=b+(P^R^w)+k[14]+4259657740&4294967295,b=P+(A<<23&4294967295|A>>>9),A=w+(b^P^R)+k[1]+2763975236&4294967295,w=b+(A<<4&4294967295|A>>>28),A=R+(w^b^P)+k[4]+1272893353&4294967295,R=w+(A<<11&4294967295|A>>>21),A=P+(R^w^b)+k[7]+4139469664&4294967295,P=R+(A<<16&4294967295|A>>>16),A=b+(P^R^w)+k[10]+3200236656&4294967295,b=P+(A<<23&4294967295|A>>>9),A=w+(b^P^R)+k[13]+681279174&4294967295,w=b+(A<<4&4294967295|A>>>28),A=R+(w^b^P)+k[0]+3936430074&4294967295,R=w+(A<<11&4294967295|A>>>21),A=P+(R^w^b)+k[3]+3572445317&4294967295,P=R+(A<<16&4294967295|A>>>16),A=b+(P^R^w)+k[6]+76029189&4294967295,b=P+(A<<23&4294967295|A>>>9),A=w+(b^P^R)+k[9]+3654602809&4294967295,w=b+(A<<4&4294967295|A>>>28),A=R+(w^b^P)+k[12]+3873151461&4294967295,R=w+(A<<11&4294967295|A>>>21),A=P+(R^w^b)+k[15]+530742520&4294967295,P=R+(A<<16&4294967295|A>>>16),A=b+(P^R^w)+k[2]+3299628645&4294967295,b=P+(A<<23&4294967295|A>>>9),A=w+(P^(b|~R))+k[0]+4096336452&4294967295,w=b+(A<<6&4294967295|A>>>26),A=R+(b^(w|~P))+k[7]+1126891415&4294967295,R=w+(A<<10&4294967295|A>>>22),A=P+(w^(R|~b))+k[14]+2878612391&4294967295,P=R+(A<<15&4294967295|A>>>17),A=b+(R^(P|~w))+k[5]+4237533241&4294967295,b=P+(A<<21&4294967295|A>>>11),A=w+(P^(b|~R))+k[12]+1700485571&4294967295,w=b+(A<<6&4294967295|A>>>26),A=R+(b^(w|~P))+k[3]+2399980690&4294967295,R=w+(A<<10&4294967295|A>>>22),A=P+(w^(R|~b))+k[10]+4293915773&4294967295,P=R+(A<<15&4294967295|A>>>17),A=b+(R^(P|~w))+k[1]+2240044497&4294967295,b=P+(A<<21&4294967295|A>>>11),A=w+(P^(b|~R))+k[8]+1873313359&4294967295,w=b+(A<<6&4294967295|A>>>26),A=R+(b^(w|~P))+k[15]+4264355552&4294967295,R=w+(A<<10&4294967295|A>>>22),A=P+(w^(R|~b))+k[6]+2734768916&4294967295,P=R+(A<<15&4294967295|A>>>17),A=b+(R^(P|~w))+k[13]+1309151649&4294967295,b=P+(A<<21&4294967295|A>>>11),A=w+(P^(b|~R))+k[4]+4149444226&4294967295,w=b+(A<<6&4294967295|A>>>26),A=R+(b^(w|~P))+k[11]+3174756917&4294967295,R=w+(A<<10&4294967295|A>>>22),A=P+(w^(R|~b))+k[2]+718787259&4294967295,P=R+(A<<15&4294967295|A>>>17),A=b+(R^(P|~w))+k[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(P+(A<<21&4294967295|A>>>11))&4294967295,I.g[2]=I.g[2]+P&4294967295,I.g[3]=I.g[3]+R&4294967295}i.prototype.u=function(I,w){w===void 0&&(w=I.length);for(var b=w-this.blockSize,k=this.B,P=this.h,R=0;R<w;){if(P==0)for(;R<=b;)r(this,I,R),R+=this.blockSize;if(typeof I=="string"){for(;R<w;)if(k[P++]=I.charCodeAt(R++),P==this.blockSize){r(this,k),P=0;break}}else for(;R<w;)if(k[P++]=I[R++],P==this.blockSize){r(this,k),P=0;break}}this.h=P,this.o+=w},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;var b=8*this.o;for(w=I.length-8;w<I.length;++w)I[w]=b&255,b/=256;for(this.u(I),I=Array(16),w=b=0;4>w;++w)for(var k=0;32>k;k+=8)I[b++]=this.g[w]>>>k&255;return I};function s(I,w){var b=a;return Object.prototype.hasOwnProperty.call(b,I)?b[I]:b[I]=w(I)}function o(I,w){this.h=w;for(var b=[],k=!0,P=I.length-1;0<=P;P--){var R=I[P]|0;k&&R==w||(b[P]=R,k=!1)}this.g=b}var a={};function l(I){return-128<=I&&128>I?s(I,function(w){return new o([w|0],0>w?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return T(c(-I));for(var w=[],b=1,k=0;I>=b;k++)w[k]=I/b|0,b*=4294967296;return new o(w,0)}function h(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return T(h(I.substring(1),w));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=c(Math.pow(w,8)),k=d,P=0;P<I.length;P+=8){var R=Math.min(8,I.length-P),A=parseInt(I.substring(P,P+R),w);8>R?(R=c(Math.pow(w,R)),k=k.j(R).add(c(A))):(k=k.j(b),k=k.add(c(A)))}return k}var d=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(E(this))return-T(this).m();for(var I=0,w=1,b=0;b<this.g.length;b++){var k=this.i(b);I+=(0<=k?k:4294967296+k)*w,w*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(y(this))return"0";if(E(this))return"-"+T(this).toString(I);for(var w=c(Math.pow(I,6)),b=this,k="";;){var P=D(b,w).g;b=_(b,P.j(w));var R=((0<b.g.length?b.g[0]:b.h)>>>0).toString(I);if(b=P,y(b))return R+k;for(;6>R.length;)R="0"+R;k=R+k}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function y(I){if(I.h!=0)return!1;for(var w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function E(I){return I.h==-1}t.l=function(I){return I=_(this,I),E(I)?-1:y(I)?0:1};function T(I){for(var w=I.g.length,b=[],k=0;k<w;k++)b[k]=~I.g[k];return new o(b,~I.h).add(p)}t.abs=function(){return E(this)?T(this):this},t.add=function(I){for(var w=Math.max(this.g.length,I.g.length),b=[],k=0,P=0;P<=w;P++){var R=k+(this.i(P)&65535)+(I.i(P)&65535),A=(R>>>16)+(this.i(P)>>>16)+(I.i(P)>>>16);k=A>>>16,R&=65535,A&=65535,b[P]=A<<16|R}return new o(b,b[b.length-1]&-2147483648?-1:0)};function _(I,w){return I.add(T(w))}t.j=function(I){if(y(this)||y(I))return d;if(E(this))return E(I)?T(this).j(T(I)):T(T(this).j(I));if(E(I))return T(this.j(T(I)));if(0>this.l(m)&&0>I.l(m))return c(this.m()*I.m());for(var w=this.g.length+I.g.length,b=[],k=0;k<2*w;k++)b[k]=0;for(k=0;k<this.g.length;k++)for(var P=0;P<I.g.length;P++){var R=this.i(k)>>>16,A=this.i(k)&65535,Se=I.i(P)>>>16,ue=I.i(P)&65535;b[2*k+2*P]+=A*ue,v(b,2*k+2*P),b[2*k+2*P+1]+=R*ue,v(b,2*k+2*P+1),b[2*k+2*P+1]+=A*Se,v(b,2*k+2*P+1),b[2*k+2*P+2]+=R*Se,v(b,2*k+2*P+2)}for(k=0;k<w;k++)b[k]=b[2*k+1]<<16|b[2*k];for(k=w;k<2*w;k++)b[k]=0;return new o(b,0)};function v(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function S(I,w){this.g=I,this.h=w}function D(I,w){if(y(w))throw Error("division by zero");if(y(I))return new S(d,d);if(E(I))return w=D(T(I),w),new S(T(w.g),T(w.h));if(E(w))return w=D(I,T(w)),new S(T(w.g),w.h);if(30<I.g.length){if(E(I)||E(w))throw Error("slowDivide_ only works with positive integers.");for(var b=p,k=w;0>=k.l(I);)b=M(b),k=M(k);var P=L(b,1),R=L(k,1);for(k=L(k,2),b=L(b,2);!y(k);){var A=R.add(k);0>=A.l(I)&&(P=P.add(b),R=A),k=L(k,1),b=L(b,1)}return w=_(I,P.j(w)),new S(P,w)}for(P=d;0<=I.l(w);){for(b=Math.max(1,Math.floor(I.m()/w.m())),k=Math.ceil(Math.log(b)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),R=c(b),A=R.j(w);E(A)||0<A.l(I);)b-=k,R=c(b),A=R.j(w);y(R)&&(R=p),P=P.add(R),I=_(I,A)}return new S(P,I)}t.A=function(I){return D(this,I).h},t.and=function(I){for(var w=Math.max(this.g.length,I.g.length),b=[],k=0;k<w;k++)b[k]=this.i(k)&I.i(k);return new o(b,this.h&I.h)},t.or=function(I){for(var w=Math.max(this.g.length,I.g.length),b=[],k=0;k<w;k++)b[k]=this.i(k)|I.i(k);return new o(b,this.h|I.h)},t.xor=function(I){for(var w=Math.max(this.g.length,I.g.length),b=[],k=0;k<w;k++)b[k]=this.i(k)^I.i(k);return new o(b,this.h^I.h)};function M(I){for(var w=I.g.length+1,b=[],k=0;k<w;k++)b[k]=I.i(k)<<1|I.i(k-1)>>>31;return new o(b,I.h)}function L(I,w){var b=w>>5;w%=32;for(var k=I.g.length-b,P=[],R=0;R<k;R++)P[R]=0<w?I.i(R+b)>>>w|I.i(R+b+1)<<32-w:I.i(R+b);return new o(P,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Vx=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Ar=o}).apply(typeof Y0<"u"?Y0:typeof self<"u"?self:typeof window<"u"?window:{});var Zl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fx,Bo,jx,Oc,hp,Ux,zx,Bx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,g){return u==Array.prototype||u==Object.prototype||(u[f]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zl=="object"&&Zl];for(var f=0;f<u.length;++f){var g=u[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var i=n(this);function r(u,f){if(f)e:{var g=i;u=u.split(".");for(var x=0;x<u.length-1;x++){var N=u[x];if(!(N in g))break e;g=g[N]}u=u[u.length-1],x=g[u],f=f(x),f!=x&&f!=null&&e(g,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var g=0,x=!1,N={next:function(){if(!x&&g<u.length){var O=g++;return{value:f(O,u[O]),done:!1}}return x=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}r("Array.prototype.values",function(u){return u||function(){return s(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,g){return u.call.apply(u.bind,arguments)}function d(u,f,g){if(!u)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,x),u.apply(f,N)}}return function(){return u.apply(f,arguments)}}function p(u,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function m(u,f){var g=Array.prototype.slice.call(arguments,1);return function(){var x=g.slice();return x.push.apply(x,arguments),u.apply(this,x)}}function y(u,f){function g(){}g.prototype=f.prototype,u.aa=f.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(x,N,O){for(var z=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)z[ye-2]=arguments[ye];return f.prototype[N].apply(x,z)}}function E(u){const f=u.length;if(0<f){const g=Array(f);for(let x=0;x<f;x++)g[x]=u[x];return g}return[]}function T(u,f){for(let g=1;g<arguments.length;g++){const x=arguments[g];if(l(x)){const N=u.length||0,O=x.length||0;u.length=N+O;for(let z=0;z<O;z++)u[N+z]=x[z]}else u.push(x)}}class _{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function v(u){return/^[\s\xa0]*$/.test(u)}function S(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function D(u){return D[" "](u),u}D[" "]=function(){};var M=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function L(u,f,g){for(const x in u)f.call(g,u[x],x,u)}function I(u,f){for(const g in u)f.call(void 0,u[g],g,u)}function w(u){const f={};for(const g in u)f[g]=u[g];return f}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,f){let g,x;for(let N=1;N<arguments.length;N++){x=arguments[N];for(g in x)u[g]=x[g];for(let O=0;O<b.length;O++)g=b[O],Object.prototype.hasOwnProperty.call(x,g)&&(u[g]=x[g])}}function P(u){var f=1;u=u.split(":");const g=[];for(;0<f&&u.length;)g.push(u.shift()),f--;return u.length&&g.push(u.join(":")),g}function R(u){a.setTimeout(()=>{throw u},0)}function A(){var u=K;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class Se{constructor(){this.h=this.g=null}add(f,g){const x=ue.get();x.set(f,g),this.h?this.h.next=x:this.g=x,this.h=x}}var ue=new _(()=>new be,u=>u.reset());class be{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let De,B=!1,K=new Se,G=()=>{const u=a.Promise.resolve(void 0);De=()=>{u.then(ge)}};var ge=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(g){R(g)}var f=ue;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}B=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var Xe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return u}();function wt(u,f){if(me.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,x=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(M){e:{try{D(f.nodeName);var N=!0;break e}catch{}N=!1}N||(f=null)}}else g=="mouseover"?f=u.fromElement:g=="mouseout"&&(f=u.toElement);this.relatedTarget=f,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Je[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&wt.aa.h.call(this)}}y(wt,me);var Je={2:"touch",3:"pen",4:"mouse"};wt.prototype.h=function(){wt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var wn="closure_listenable_"+(1e6*Math.random()|0),GS=0;function QS(u,f,g,x,N){this.listener=u,this.proxy=null,this.src=f,this.type=g,this.capture=!!x,this.ha=N,this.key=++GS,this.da=this.fa=!1}function ml(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function yl(u){this.src=u,this.g={},this.h=0}yl.prototype.add=function(u,f,g,x,N){var O=u.toString();u=this.g[O],u||(u=this.g[O]=[],this.h++);var z=Fh(u,f,x,N);return-1<z?(f=u[z],g||(f.fa=!1)):(f=new QS(f,this.src,O,!!x,N),f.fa=g,u.push(f)),f};function Vh(u,f){var g=f.type;if(g in u.g){var x=u.g[g],N=Array.prototype.indexOf.call(x,f,void 0),O;(O=0<=N)&&Array.prototype.splice.call(x,N,1),O&&(ml(f),u.g[g].length==0&&(delete u.g[g],u.h--))}}function Fh(u,f,g,x){for(var N=0;N<u.length;++N){var O=u[N];if(!O.da&&O.listener==f&&O.capture==!!g&&O.ha==x)return N}return-1}var jh="closure_lm_"+(1e6*Math.random()|0),Uh={};function Xm(u,f,g,x,N){if(x&&x.once)return Zm(u,f,g,x,N);if(Array.isArray(f)){for(var O=0;O<f.length;O++)Xm(u,f[O],g,x,N);return null}return g=Wh(g),u&&u[wn]?u.K(f,g,c(x)?!!x.capture:!!x,N):Jm(u,f,g,!1,x,N)}function Jm(u,f,g,x,N,O){if(!f)throw Error("Invalid event type");var z=c(N)?!!N.capture:!!N,ye=Bh(u);if(ye||(u[jh]=ye=new yl(u)),g=ye.add(f,g,x,z,O),g.proxy)return g;if(x=YS(),g.proxy=x,x.src=u,x.listener=g,u.addEventListener)Xe||(N=z),N===void 0&&(N=!1),u.addEventListener(f.toString(),x,N);else if(u.attachEvent)u.attachEvent(ty(f.toString()),x);else if(u.addListener&&u.removeListener)u.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return g}function YS(){function u(g){return f.call(u.src,u.listener,g)}const f=XS;return u}function Zm(u,f,g,x,N){if(Array.isArray(f)){for(var O=0;O<f.length;O++)Zm(u,f[O],g,x,N);return null}return g=Wh(g),u&&u[wn]?u.L(f,g,c(x)?!!x.capture:!!x,N):Jm(u,f,g,!0,x,N)}function ey(u,f,g,x,N){if(Array.isArray(f))for(var O=0;O<f.length;O++)ey(u,f[O],g,x,N);else x=c(x)?!!x.capture:!!x,g=Wh(g),u&&u[wn]?(u=u.i,f=String(f).toString(),f in u.g&&(O=u.g[f],g=Fh(O,g,x,N),-1<g&&(ml(O[g]),Array.prototype.splice.call(O,g,1),O.length==0&&(delete u.g[f],u.h--)))):u&&(u=Bh(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Fh(f,g,x,N)),(g=-1<u?f[u]:null)&&zh(g))}function zh(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[wn])Vh(f.i,u);else{var g=u.type,x=u.proxy;f.removeEventListener?f.removeEventListener(g,x,u.capture):f.detachEvent?f.detachEvent(ty(g),x):f.addListener&&f.removeListener&&f.removeListener(x),(g=Bh(f))?(Vh(g,u),g.h==0&&(g.src=null,f[jh]=null)):ml(u)}}}function ty(u){return u in Uh?Uh[u]:Uh[u]="on"+u}function XS(u,f){if(u.da)u=!0;else{f=new wt(f,this);var g=u.listener,x=u.ha||u.src;u.fa&&zh(u),u=g.call(x,f)}return u}function Bh(u){return u=u[jh],u instanceof yl?u:null}var $h="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wh(u){return typeof u=="function"?u:(u[$h]||(u[$h]=function(f){return u.handleEvent(f)}),u[$h])}function at(){re.call(this),this.i=new yl(this),this.M=this,this.F=null}y(at,re),at.prototype[wn]=!0,at.prototype.removeEventListener=function(u,f,g,x){ey(this,u,f,g,x)};function Et(u,f){var g,x=u.F;if(x)for(g=[];x;x=x.F)g.push(x);if(u=u.M,x=f.type||f,typeof f=="string")f=new me(f,u);else if(f instanceof me)f.target=f.target||u;else{var N=f;f=new me(x,u),k(f,N)}if(N=!0,g)for(var O=g.length-1;0<=O;O--){var z=f.g=g[O];N=_l(z,x,!0,f)&&N}if(z=f.g=u,N=_l(z,x,!0,f)&&N,N=_l(z,x,!1,f)&&N,g)for(O=0;O<g.length;O++)z=f.g=g[O],N=_l(z,x,!1,f)&&N}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var g=u.g[f],x=0;x<g.length;x++)ml(g[x]);delete u.g[f],u.h--}}this.F=null},at.prototype.K=function(u,f,g,x){return this.i.add(String(u),f,!1,g,x)},at.prototype.L=function(u,f,g,x){return this.i.add(String(u),f,!0,g,x)};function _l(u,f,g,x){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var N=!0,O=0;O<f.length;++O){var z=f[O];if(z&&!z.da&&z.capture==g){var ye=z.listener,Ze=z.ha||z.src;z.fa&&Vh(u.i,z),N=ye.call(Ze,x)!==!1&&N}}return N&&!x.defaultPrevented}function ny(u,f,g){if(typeof u=="function")g&&(u=p(u,g));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function iy(u){u.g=ny(()=>{u.g=null,u.i&&(u.i=!1,iy(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class JS extends re{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:iy(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function uo(u){re.call(this),this.h=u,this.g={}}y(uo,re);var ry=[];function sy(u){L(u.g,function(f,g){this.g.hasOwnProperty(g)&&zh(f)},u),u.g={}}uo.prototype.N=function(){uo.aa.N.call(this),sy(this)},uo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hh=a.JSON.stringify,ZS=a.JSON.parse,eb=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function qh(){}qh.prototype.h=null;function oy(u){return u.h||(u.h=u.i())}function ay(){}var ho={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kh(){me.call(this,"d")}y(Kh,me);function Gh(){me.call(this,"c")}y(Gh,me);var sr={},ly=null;function vl(){return ly=ly||new at}sr.La="serverreachability";function cy(u){me.call(this,sr.La,u)}y(cy,me);function fo(u){const f=vl();Et(f,new cy(f))}sr.STAT_EVENT="statevent";function uy(u,f){me.call(this,sr.STAT_EVENT,u),this.stat=f}y(uy,me);function Tt(u){const f=vl();Et(f,new uy(f,u))}sr.Ma="timingevent";function hy(u,f){me.call(this,sr.Ma,u),this.size=f}y(hy,me);function po(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function go(){this.g=!0}go.prototype.xa=function(){this.g=!1};function tb(u,f,g,x,N,O){u.info(function(){if(u.g)if(O)for(var z="",ye=O.split("&"),Ze=0;Ze<ye.length;Ze++){var ae=ye[Ze].split("=");if(1<ae.length){var lt=ae[0];ae=ae[1];var ct=lt.split("_");z=2<=ct.length&&ct[1]=="type"?z+(lt+"="+ae+"&"):z+(lt+"=redacted&")}}else z=null;else z=O;return"XMLHTTP REQ ("+x+") [attempt "+N+"]: "+f+`
`+g+`
`+z})}function nb(u,f,g,x,N,O,z){u.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+N+"]: "+f+`
`+g+`
`+O+" "+z})}function Xr(u,f,g,x){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+rb(u,g)+(x?" "+x:"")})}function ib(u,f){u.info(function(){return"TIMEOUT: "+f})}go.prototype.info=function(){};function rb(u,f){if(!u.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var x=g[u];if(!(2>x.length)){var N=x[1];if(Array.isArray(N)&&!(1>N.length)){var O=N[0];if(O!="noop"&&O!="stop"&&O!="close")for(var z=1;z<N.length;z++)N[z]=""}}}}return Hh(g)}catch{return f}}var wl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dy={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qh;function El(){}y(El,qh),El.prototype.g=function(){return new XMLHttpRequest},El.prototype.i=function(){return{}},Qh=new El;function ui(u,f,g,x){this.j=u,this.i=f,this.l=g,this.R=x||1,this.U=new uo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fy}function fy(){this.i=null,this.g="",this.h=!1}var py={},Yh={};function Xh(u,f,g){u.L=1,u.v=Sl(Mn(f)),u.m=g,u.P=!0,gy(u,null)}function gy(u,f){u.F=Date.now(),Tl(u),u.A=Mn(u.v);var g=u.A,x=u.R;Array.isArray(x)||(x=[String(x)]),Cy(g.i,"t",x),u.C=0,g=u.j.J,u.h=new fy,u.g=Ky(u.j,g?f:null,!u.m),0<u.O&&(u.M=new JS(p(u.Y,u,u.g),u.O)),f=u.U,g=u.g,x=u.ca;var N="readystatechange";Array.isArray(N)||(N&&(ry[0]=N.toString()),N=ry);for(var O=0;O<N.length;O++){var z=Xm(g,N[O],x||f.handleEvent,!1,f.h||f);if(!z)break;f.g[z.key]=z}f=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),fo(),tb(u.i,u.u,u.A,u.l,u.R,u.m)}ui.prototype.ca=function(u){u=u.target;const f=this.M;f&&On(u)==3?f.j():this.Y(u)},ui.prototype.Y=function(u){try{if(u==this.g)e:{const ct=On(this.g);var f=this.g.Ba();const es=this.g.Z();if(!(3>ct)&&(ct!=3||this.g&&(this.h.h||this.g.oa()||Ly(this.g)))){this.J||ct!=4||f==7||(f==8||0>=es?fo(3):fo(2)),Jh(this);var g=this.g.Z();this.X=g;t:if(my(this)){var x=Ly(this.g);u="";var N=x.length,O=On(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){or(this),mo(this);var z="";break t}this.h.i=new a.TextDecoder}for(f=0;f<N;f++)this.h.h=!0,u+=this.h.i.decode(x[f],{stream:!(O&&f==N-1)});x.length=0,this.h.g+=u,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=g==200,nb(this.i,this.u,this.A,this.l,this.R,ct,g),this.o){if(this.T&&!this.K){t:{if(this.g){var ye,Ze=this.g;if((ye=Ze.g?Ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(ye)){var ae=ye;break t}}ae=null}if(g=ae)Xr(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zh(this,g);else{this.o=!1,this.s=3,Tt(12),or(this),mo(this);break e}}if(this.P){g=!0;let on;for(;!this.J&&this.C<z.length;)if(on=sb(this,z),on==Yh){ct==4&&(this.s=4,Tt(14),g=!1),Xr(this.i,this.l,null,"[Incomplete Response]");break}else if(on==py){this.s=4,Tt(15),Xr(this.i,this.l,z,"[Invalid Chunk]"),g=!1;break}else Xr(this.i,this.l,on,null),Zh(this,on);if(my(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||z.length!=0||this.h.h||(this.s=1,Tt(16),g=!1),this.o=this.o&&g,!g)Xr(this.i,this.l,z,"[Invalid Chunked Response]"),or(this),mo(this);else if(0<z.length&&!this.W){this.W=!0;var lt=this.j;lt.g==this&&lt.ba&&!lt.M&&(lt.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),sd(lt),lt.M=!0,Tt(11))}}else Xr(this.i,this.l,z,null),Zh(this,z);ct==4&&or(this),this.o&&!this.J&&(ct==4?$y(this.j,this):(this.o=!1,Tl(this)))}else Tb(this.g),g==400&&0<z.indexOf("Unknown SID")?(this.s=3,Tt(12)):(this.s=0,Tt(13)),or(this),mo(this)}}}catch{}finally{}};function my(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function sb(u,f){var g=u.C,x=f.indexOf(`
`,g);return x==-1?Yh:(g=Number(f.substring(g,x)),isNaN(g)?py:(x+=1,x+g>f.length?Yh:(f=f.slice(x,x+g),u.C=x+g,f)))}ui.prototype.cancel=function(){this.J=!0,or(this)};function Tl(u){u.S=Date.now()+u.I,yy(u,u.I)}function yy(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=po(p(u.ba,u),f)}function Jh(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ui.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ib(this.i,this.A),this.L!=2&&(fo(),Tt(17)),or(this),this.s=2,mo(this)):yy(this,this.S-u)};function mo(u){u.j.G==0||u.J||$y(u.j,u)}function or(u){Jh(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,sy(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Zh(u,f){try{var g=u.j;if(g.G!=0&&(g.g==u||ed(g.h,u))){if(!u.K&&ed(g.h,u)&&g.G==3){try{var x=g.Da.g.parse(f)}catch{x=null}if(Array.isArray(x)&&x.length==3){var N=x;if(N[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)Rl(g),Cl(g);else break e;rd(g),Tt(18)}}else g.za=N[1],0<g.za-g.T&&37500>N[2]&&g.F&&g.v==0&&!g.C&&(g.C=po(p(g.Za,g),6e3));if(1>=wy(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else lr(g,11)}else if((u.K||g.g==u)&&Rl(g),!v(f))for(N=g.Da.g.parse(f),f=0;f<N.length;f++){let ae=N[f];if(g.T=ae[0],ae=ae[1],g.G==2)if(ae[0]=="c"){g.K=ae[1],g.ia=ae[2];const lt=ae[3];lt!=null&&(g.la=lt,g.j.info("VER="+g.la));const ct=ae[4];ct!=null&&(g.Aa=ct,g.j.info("SVER="+g.Aa));const es=ae[5];es!=null&&typeof es=="number"&&0<es&&(x=1.5*es,g.L=x,g.j.info("backChannelRequestTimeoutMs_="+x)),x=g;const on=u.g;if(on){const Nl=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nl){var O=x.h;O.g||Nl.indexOf("spdy")==-1&&Nl.indexOf("quic")==-1&&Nl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(td(O,O.h),O.h=null))}if(x.D){const od=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;od&&(x.ya=od,we(x.I,x.D,od))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),x=g;var z=u;if(x.qa=qy(x,x.J?x.ia:null,x.W),z.K){Ey(x.h,z);var ye=z,Ze=x.L;Ze&&(ye.I=Ze),ye.B&&(Jh(ye),Tl(ye)),x.g=z}else zy(x);0<g.i.length&&Pl(g)}else ae[0]!="stop"&&ae[0]!="close"||lr(g,7);else g.G==3&&(ae[0]=="stop"||ae[0]=="close"?ae[0]=="stop"?lr(g,7):id(g):ae[0]!="noop"&&g.l&&g.l.ta(ae),g.v=0)}}fo(4)}catch{}}var ob=class{constructor(u,f){this.g=u,this.map=f}};function _y(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function vy(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function wy(u){return u.h?1:u.g?u.g.size:0}function ed(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function td(u,f){u.g?u.g.add(f):u.h=f}function Ey(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}_y.prototype.cancel=function(){if(this.i=Ty(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ty(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const g of u.g.values())f=f.concat(g.D);return f}return E(u.i)}function ab(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],g=u.length,x=0;x<g;x++)f.push(u[x]);return f}f=[],g=0;for(x in u)f[g++]=u[x];return f}function lb(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var g=0;g<u;g++)f.push(g);return f}f=[],g=0;for(const x in u)f[g++]=x;return f}}}function xy(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var g=lb(u),x=ab(u),N=x.length,O=0;O<N;O++)f.call(void 0,x[O],g&&g[O],u)}var Iy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cb(u,f){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var x=u[g].indexOf("="),N=null;if(0<=x){var O=u[g].substring(0,x);N=u[g].substring(x+1)}else O=u[g];f(O,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function ar(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ar){this.h=u.h,xl(this,u.j),this.o=u.o,this.g=u.g,Il(this,u.s),this.l=u.l;var f=u.i,g=new vo;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Sy(this,g),this.m=u.m}else u&&(f=String(u).match(Iy))?(this.h=!1,xl(this,f[1]||"",!0),this.o=yo(f[2]||""),this.g=yo(f[3]||"",!0),Il(this,f[4]),this.l=yo(f[5]||"",!0),Sy(this,f[6]||"",!0),this.m=yo(f[7]||"")):(this.h=!1,this.i=new vo(null,this.h))}ar.prototype.toString=function(){var u=[],f=this.j;f&&u.push(_o(f,by,!0),":");var g=this.g;return(g||f=="file")&&(u.push("//"),(f=this.o)&&u.push(_o(f,by,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(_o(g,g.charAt(0)=="/"?db:hb,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",_o(g,pb)),u.join("")};function Mn(u){return new ar(u)}function xl(u,f,g){u.j=g?yo(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Il(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Sy(u,f,g){f instanceof vo?(u.i=f,gb(u.i,u.h)):(g||(f=_o(f,fb)),u.i=new vo(f,u.h))}function we(u,f,g){u.i.set(f,g)}function Sl(u){return we(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function yo(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function _o(u,f,g){return typeof u=="string"?(u=encodeURI(u).replace(f,ub),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ub(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var by=/[#\/\?@]/g,hb=/[#\?:]/g,db=/[#\?]/g,fb=/[#\?@]/g,pb=/#/g;function vo(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function hi(u){u.g||(u.g=new Map,u.h=0,u.i&&cb(u.i,function(f,g){u.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=vo.prototype,t.add=function(u,f){hi(this),this.i=null,u=Jr(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(f),this.h+=1,this};function ky(u,f){hi(u),f=Jr(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Ay(u,f){return hi(u),f=Jr(u,f),u.g.has(f)}t.forEach=function(u,f){hi(this),this.g.forEach(function(g,x){g.forEach(function(N){u.call(f,N,x,this)},this)},this)},t.na=function(){hi(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let x=0;x<f.length;x++){const N=u[x];for(let O=0;O<N.length;O++)g.push(f[x])}return g},t.V=function(u){hi(this);let f=[];if(typeof u=="string")Ay(this,u)&&(f=f.concat(this.g.get(Jr(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)f=f.concat(u[g])}return f},t.set=function(u,f){return hi(this),this.i=null,u=Jr(this,u),Ay(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function Cy(u,f,g){ky(u,f),0<g.length&&(u.i=null,u.g.set(Jr(u,f),E(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var x=f[g];const O=encodeURIComponent(String(x)),z=this.V(x);for(x=0;x<z.length;x++){var N=O;z[x]!==""&&(N+="="+encodeURIComponent(String(z[x]))),u.push(N)}}return this.i=u.join("&")};function Jr(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function gb(u,f){f&&!u.j&&(hi(u),u.i=null,u.g.forEach(function(g,x){var N=x.toLowerCase();x!=N&&(ky(this,x),Cy(this,N,g))},u)),u.j=f}function mb(u,f){const g=new go;if(a.Image){const x=new Image;x.onload=m(di,g,"TestLoadImage: loaded",!0,f,x),x.onerror=m(di,g,"TestLoadImage: error",!1,f,x),x.onabort=m(di,g,"TestLoadImage: abort",!1,f,x),x.ontimeout=m(di,g,"TestLoadImage: timeout",!1,f,x),a.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=u}else f(!1)}function yb(u,f){const g=new go,x=new AbortController,N=setTimeout(()=>{x.abort(),di(g,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:x.signal}).then(O=>{clearTimeout(N),O.ok?di(g,"TestPingServer: ok",!0,f):di(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(N),di(g,"TestPingServer: error",!1,f)})}function di(u,f,g,x,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),x(g)}catch{}}function _b(){this.g=new eb}function vb(u,f,g){const x=g||"";try{xy(u,function(N,O){let z=N;c(N)&&(z=Hh(N)),f.push(x+O+"="+encodeURIComponent(z))})}catch(N){throw f.push(x+"type="+encodeURIComponent("_badmap")),N}}function bl(u){this.l=u.Ub||null,this.j=u.eb||!1}y(bl,qh),bl.prototype.g=function(){return new kl(this.l,this.j)},bl.prototype.i=function(u){return function(){return u}}({});function kl(u,f){at.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(kl,at),t=kl.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Eo(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wo(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Eo(this)),this.g&&(this.readyState=3,Eo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Py(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Py(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?wo(this):Eo(this),this.readyState==3&&Py(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,wo(this))},t.Qa=function(u){this.g&&(this.response=u,wo(this))},t.ga=function(){this.g&&wo(this)};function wo(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Eo(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=f.next();return u.join(`\r
`)};function Eo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(kl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ry(u){let f="";return L(u,function(g,x){f+=x,f+=":",f+=g,f+=`\r
`}),f}function nd(u,f,g){e:{for(x in g){var x=!1;break e}x=!0}x||(g=Ry(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):we(u,f,g))}function Ne(u){at.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Ne,at);var wb=/^https?$/i,Eb=["POST","PUT"];t=Ne.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,g,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qh.g(),this.v=this.o?oy(this.o):oy(Qh),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(O){Dy(this,O);return}if(u=g||"",g=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var N in x)g.set(N,x[N]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const O of x.keys())g.set(O,x.get(O));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(g.keys()).find(O=>O.toLowerCase()=="content-type"),N=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Eb,f,void 0))||x||N||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,z]of g)this.g.setRequestHeader(O,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Oy(this),this.u=!0,this.g.send(u),this.u=!1}catch(O){Dy(this,O)}};function Dy(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,Ny(u),Al(u)}function Ny(u){u.A||(u.A=!0,Et(u,"complete"),Et(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Et(this,"complete"),Et(this,"abort"),Al(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Al(this,!0)),Ne.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?My(this):this.bb())},t.bb=function(){My(this)};function My(u){if(u.h&&typeof o<"u"&&(!u.v[1]||On(u)!=4||u.Z()!=2)){if(u.u&&On(u)==4)ny(u.Ea,0,u);else if(Et(u,"readystatechange"),On(u)==4){u.h=!1;try{const z=u.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var x;if(x=z===0){var N=String(u.D).match(Iy)[1]||null;!N&&a.self&&a.self.location&&(N=a.self.location.protocol.slice(0,-1)),x=!wb.test(N?N.toLowerCase():"")}g=x}if(g)Et(u,"complete"),Et(u,"success");else{u.m=6;try{var O=2<On(u)?u.g.statusText:""}catch{O=""}u.l=O+" ["+u.Z()+"]",Ny(u)}}finally{Al(u)}}}}function Al(u,f){if(u.g){Oy(u);const g=u.g,x=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||Et(u,"ready");try{g.onreadystatechange=x}catch{}}}function Oy(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function On(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<On(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),ZS(f)}};function Ly(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Tb(u){const f={};u=(u.g&&2<=On(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<u.length;x++){if(v(u[x]))continue;var g=P(u[x]);const N=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const O=f[N]||[];f[N]=O,O.push(g)}I(f,function(x){return x.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function To(u,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||f}function Vy(u){this.Aa=0,this.i=[],this.j=new go,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=To("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=To("baseRetryDelayMs",5e3,u),this.cb=To("retryDelaySeedMs",1e4,u),this.Wa=To("forwardChannelMaxRetries",2,u),this.wa=To("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new _y(u&&u.concurrentRequestLimit),this.Da=new _b,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Vy.prototype,t.la=8,t.G=1,t.connect=function(u,f,g,x){Tt(0),this.W=u,this.H=f||{},g&&x!==void 0&&(this.H.OSID=g,this.H.OAID=x),this.F=this.X,this.I=qy(this,null,this.W),Pl(this)};function id(u){if(Fy(u),u.G==3){var f=u.U++,g=Mn(u.I);if(we(g,"SID",u.K),we(g,"RID",f),we(g,"TYPE","terminate"),xo(u,g),f=new ui(u,u.j,f),f.L=2,f.v=Sl(Mn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=Ky(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Tl(f)}Hy(u)}function Cl(u){u.g&&(sd(u),u.g.cancel(),u.g=null)}function Fy(u){Cl(u),u.u&&(a.clearTimeout(u.u),u.u=null),Rl(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Pl(u){if(!vy(u.h)&&!u.s){u.s=!0;var f=u.Ga;De||G(),B||(De(),B=!0),K.add(f,u),u.B=0}}function xb(u,f){return wy(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=po(p(u.Ga,u,f),Wy(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const N=new ui(this,this.j,u);let O=this.o;if(this.S&&(O?(O=w(O),k(O,this.S)):O=this.S),this.m!==null||this.O||(N.H=O,O=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var x=this.i[g];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(f+=x,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Uy(this,N,f),g=Mn(this.I),we(g,"RID",u),we(g,"CVER",22),this.D&&we(g,"X-HTTP-Session-Id",this.D),xo(this,g),O&&(this.O?f="headers="+encodeURIComponent(String(Ry(O)))+"&"+f:this.m&&nd(g,this.m,O)),td(this.h,N),this.Ua&&we(g,"TYPE","init"),this.P?(we(g,"$req",f),we(g,"SID","null"),N.T=!0,Xh(N,g,null)):Xh(N,g,f),this.G=2}}else this.G==3&&(u?jy(this,u):this.i.length==0||vy(this.h)||jy(this))};function jy(u,f){var g;f?g=f.l:g=u.U++;const x=Mn(u.I);we(x,"SID",u.K),we(x,"RID",g),we(x,"AID",u.T),xo(u,x),u.m&&u.o&&nd(x,u.m,u.o),g=new ui(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),f&&(u.i=f.D.concat(u.i)),f=Uy(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),td(u.h,g),Xh(g,x,f)}function xo(u,f){u.H&&L(u.H,function(g,x){we(f,x,g)}),u.l&&xy({},function(g,x){we(f,x,g)})}function Uy(u,f,g){g=Math.min(u.i.length,g);var x=u.l?p(u.l.Na,u.l,u):null;e:{var N=u.i;let O=-1;for(;;){const z=["count="+g];O==-1?0<g?(O=N[0].g,z.push("ofs="+O)):O=0:z.push("ofs="+O);let ye=!0;for(let Ze=0;Ze<g;Ze++){let ae=N[Ze].g;const lt=N[Ze].map;if(ae-=O,0>ae)O=Math.max(0,N[Ze].g-100),ye=!1;else try{vb(lt,z,"req"+ae+"_")}catch{x&&x(lt)}}if(ye){x=z.join("&");break e}}}return u=u.i.splice(0,g),f.D=u,x}function zy(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;De||G(),B||(De(),B=!0),K.add(f,u),u.v=0}}function rd(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=po(p(u.Fa,u),Wy(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,By(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=po(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Tt(10),Cl(this),By(this))};function sd(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function By(u){u.g=new ui(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=Mn(u.qa);we(f,"RID","rpc"),we(f,"SID",u.K),we(f,"AID",u.T),we(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&we(f,"TO",u.ja),we(f,"TYPE","xmlhttp"),xo(u,f),u.m&&u.o&&nd(f,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=Sl(Mn(f)),g.m=null,g.P=!0,gy(g,u)}t.Za=function(){this.C!=null&&(this.C=null,Cl(this),rd(this),Tt(19))};function Rl(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function $y(u,f){var g=null;if(u.g==f){Rl(u),sd(u),u.g=null;var x=2}else if(ed(u.h,f))g=f.D,Ey(u.h,f),x=1;else return;if(u.G!=0){if(f.o)if(x==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var N=u.B;x=vl(),Et(x,new hy(x,g)),Pl(u)}else zy(u);else if(N=f.s,N==3||N==0&&0<f.X||!(x==1&&xb(u,f)||x==2&&rd(u)))switch(g&&0<g.length&&(f=u.h,f.i=f.i.concat(g)),N){case 1:lr(u,5);break;case 4:lr(u,10);break;case 3:lr(u,6);break;default:lr(u,2)}}}function Wy(u,f){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*f}function lr(u,f){if(u.j.info("Error code "+f),f==2){var g=p(u.fb,u),x=u.Xa;const N=!x;x=new ar(x||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||xl(x,"https"),Sl(x),N?mb(x.toString(),g):yb(x.toString(),g)}else Tt(2);u.G=0,u.l&&u.l.sa(f),Hy(u),Fy(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function Hy(u){if(u.G=0,u.ka=[],u.l){const f=Ty(u.h);(f.length!=0||u.i.length!=0)&&(T(u.ka,f),T(u.ka,u.i),u.h.i.length=0,E(u.i),u.i.length=0),u.l.ra()}}function qy(u,f,g){var x=g instanceof ar?Mn(g):new ar(g);if(x.g!="")f&&(x.g=f+"."+x.g),Il(x,x.s);else{var N=a.location;x=N.protocol,f=f?f+"."+N.hostname:N.hostname,N=+N.port;var O=new ar(null);x&&xl(O,x),f&&(O.g=f),N&&Il(O,N),g&&(O.l=g),x=O}return g=u.D,f=u.ya,g&&f&&we(x,g,f),we(x,"VER",u.la),xo(u,x),x}function Ky(u,f,g){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Ne(new bl({eb:g})):new Ne(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gy(){}t=Gy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Dl(){}Dl.prototype.g=function(u,f){return new Lt(u,f)};function Lt(u,f){at.call(this),this.g=new Vy(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!v(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!v(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new Zr(this)}y(Lt,at),Lt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){id(this.g)},Lt.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=Hh(u),u=g);f.i.push(new ob(f.Ya++,u)),f.G==3&&Pl(f)},Lt.prototype.N=function(){this.g.l=null,delete this.j,id(this.g),delete this.g,Lt.aa.N.call(this)};function Qy(u){Kh.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const g in f){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}y(Qy,Kh);function Yy(){Gh.call(this),this.status=1}y(Yy,Gh);function Zr(u){this.g=u}y(Zr,Gy),Zr.prototype.ua=function(){Et(this.g,"a")},Zr.prototype.ta=function(u){Et(this.g,new Qy(u))},Zr.prototype.sa=function(u){Et(this.g,new Yy)},Zr.prototype.ra=function(){Et(this.g,"b")},Dl.prototype.createWebChannel=Dl.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,Bx=function(){return new Dl},zx=function(){return vl()},Ux=sr,hp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wl.NO_ERROR=0,wl.TIMEOUT=8,wl.HTTP_ERROR=6,Oc=wl,dy.COMPLETE="complete",jx=dy,ay.EventType=ho,ho.OPEN="a",ho.CLOSE="b",ho.ERROR="c",ho.MESSAGE="d",at.prototype.listen=at.prototype.K,Bo=ay,Ne.prototype.listenOnce=Ne.prototype.L,Ne.prototype.getLastError=Ne.prototype.Ka,Ne.prototype.getLastErrorCode=Ne.prototype.Ba,Ne.prototype.getStatus=Ne.prototype.Z,Ne.prototype.getResponseJson=Ne.prototype.Oa,Ne.prototype.getResponseText=Ne.prototype.oa,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Ha,Fx=Ne}).apply(typeof Zl<"u"?Zl:typeof self<"u"?self:typeof window<"u"?window:{});const X0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let so="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=new uh("@firebase/firestore");function Do(){return Vr.logLevel}function H(t,...e){if(Vr.logLevel<=ne.DEBUG){const n=e.map(Jg);Vr.debug(`Firestore (${so}): ${t}`,...n)}}function oi(t,...e){if(Vr.logLevel<=ne.ERROR){const n=e.map(Jg);Vr.error(`Firestore (${so}): ${t}`,...n)}}function js(t,...e){if(Vr.logLevel<=ne.WARN){const n=e.map(Jg);Vr.warn(`Firestore (${so}): ${t}`,...n)}}function Jg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t="Unexpected state"){const e=`FIRESTORE (${so}) INTERNAL ASSERTION FAILED: `+t;throw oi(e),new Error(e)}function pe(t,e){t||X()}function Z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends vn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(pt.UNAUTHENTICATED))}shutdown(){}}class eM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class tM{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){pe(this.o===void 0);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new Bi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Bi,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Bi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(pe(typeof i.accessToken=="string"),new $x(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string"),new pt(e)}}class nM{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class iM{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new nM(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){pe(this.o===void 0);const i=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(pe(typeof n.token=="string"),this.R=n.token,new rM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=oM(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function le(t,e){return t<e?-1:t>e?1:0}function Us(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new W(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Be.fromMillis(Date.now())}static fromDate(e){return Be.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Be(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.timestamp=e}static fromTimestamp(e){return new J(e)}static min(){return new J(new Be(0,0))}static max(){return new J(new Be(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,n,i){n===void 0?n=0:n>e.length&&X(),i===void 0?i=e.length-n:i>e.length-n&&X(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ja.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ja?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Te extends ja{construct(e,n,i){return new Te(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new W(V.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Te(n)}static emptyPath(){return new Te([])}}const aM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nt extends ja{construct(e,n,i){return new nt(e,n,i)}static isValidIdentifier(e){return aM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new nt(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new W(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new W(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new W(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new W(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nt(n)}static emptyPath(){return new nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.path=e}static fromPath(e){return new q(Te.fromString(e))}static fromName(e){return new q(Te.fromString(e).popFirst(5))}static empty(){return new q(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new Te(e.slice()))}}function lM(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=J.fromTimestamp(i===1e9?new Be(n+1,0):new Be(n,i));return new Ki(r,q.empty(),e)}function cM(t){return new Ki(t.readTime,t.key,-1)}class Ki{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ki(J.min(),q.empty(),-1)}static max(){return new Ki(J.max(),q.empty(),-1)}}function uM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ll(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==hM)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,i)=>{n(e)})}static reject(e){return new F((n,i)=>{i(e)})}static waitFor(e){return new F((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=F.resolve(!1);for(const i of e)n=n.next(r=>r?F.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new F((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&i(o)},h=>r(h))}})}static doWhile(e,n){return new F((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function fM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function cl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Zg.oe=-1;function mh(t){return t==null}function Su(t){return t===0&&1/t==-1/0}function pM(t){return typeof t=="number"&&Number.isInteger(t)&&!Su(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function oo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Hx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e,n){this.comparator=e,this.root=n||tt.EMPTY}insert(e,n){return new Re(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tt.BLACK,null,null))}remove(e){return new Re(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ec(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ec(this.root,e,this.comparator,!1)}getReverseIterator(){return new ec(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ec(this.root,e,this.comparator,!0)}}class ec{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??tt.RED,this.left=r??tt.EMPTY,this.right=s??tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new tt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return tt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();const e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}}tt.EMPTY=null,tt.RED=!0,tt.BLACK=!1;tt.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,n,i,r,s){return this}insert(e,n,i){return new tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Z0(this.data.getIterator())}getIteratorFrom(e){return new Z0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new rt(this.comparator);return n.data=e,n}}class Z0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.fields=e,e.sort(nt.comparator)}static empty(){return new dn([])}unionWith(e){let n=new rt(nt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new dn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Us(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new qx("Invalid base64 string: "+s):s}}(e);return new ot(n)}static fromUint8Array(e){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ot.EMPTY_BYTE_STRING=new ot("");const gM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gi(t){if(pe(!!t),typeof t=="string"){let e=0;const n=gM.exec(t);if(pe(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Le(t.seconds),nanos:Le(t.nanos)}}function Le(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Fr(t){return typeof t=="string"?ot.fromBase64String(t):ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function tm(t){const e=t.mapValue.fields.__previous_value__;return em(e)?tm(e):e}function Ua(t){const e=Gi(t.mapValue.fields.__local_write_time__.timestampValue);return new Be(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e,n,i,r,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class za{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new za("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof za&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function jr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?em(t)?4:_M(t)?9007199254740991:yM(t)?10:11:X()}function Nn(t,e){if(t===e)return!0;const n=jr(t);if(n!==jr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ua(t).isEqual(Ua(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Gi(r.timestampValue),a=Gi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Fr(r.bytesValue).isEqual(Fr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Le(r.geoPointValue.latitude)===Le(s.geoPointValue.latitude)&&Le(r.geoPointValue.longitude)===Le(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Le(r.integerValue)===Le(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Le(r.doubleValue),a=Le(s.doubleValue);return o===a?Su(o)===Su(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Us(t.arrayValue.values||[],e.arrayValue.values||[],Nn);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(J0(o)!==J0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Nn(o[l],a[l])))return!1;return!0}(t,e);default:return X()}}function Ba(t,e){return(t.values||[]).find(n=>Nn(n,e))!==void 0}function zs(t,e){if(t===e)return 0;const n=jr(t),i=jr(e);if(n!==i)return le(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return le(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Le(s.integerValue||s.doubleValue),l=Le(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return ev(t.timestampValue,e.timestampValue);case 4:return ev(Ua(t),Ua(e));case 5:return le(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Fr(s),l=Fr(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=le(a[c],l[c]);if(h!==0)return h}return le(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=le(Le(s.latitude),Le(o.latitude));return a!==0?a:le(Le(s.longitude),Le(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return tv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const d=s.fields||{},p=o.fields||{},m=(a=d.value)===null||a===void 0?void 0:a.arrayValue,y=(l=p.value)===null||l===void 0?void 0:l.arrayValue,E=le(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((h=y==null?void 0:y.values)===null||h===void 0?void 0:h.length)||0);return E!==0?E:tv(m,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===tc.mapValue&&o===tc.mapValue)return 0;if(s===tc.mapValue)return 1;if(o===tc.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=le(l[d],h[d]);if(p!==0)return p;const m=zs(a[l[d]],c[h[d]]);if(m!==0)return m}return le(l.length,h.length)}(t.mapValue,e.mapValue);default:throw X()}}function ev(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return le(t,e);const n=Gi(t),i=Gi(e),r=le(n.seconds,i.seconds);return r!==0?r:le(n.nanos,i.nanos)}function tv(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=zs(n[r],i[r]);if(s)return s}return le(n.length,i.length)}function Bs(t){return dp(t)}function dp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Gi(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Fr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=dp(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${dp(n.fields[o])}`;return r+"}"}(t.mapValue):X()}function nv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function fp(t){return!!t&&"integerValue"in t}function nm(t){return!!t&&"arrayValue"in t}function iv(t){return!!t&&"nullValue"in t}function rv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Lc(t){return!!t&&"mapValue"in t}function yM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function la(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return oo(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=la(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=la(t.arrayValue.values[n]);return e}return Object.assign({},t)}function _M(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.value=e}static empty(){return new Qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Lc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=la(n)}setAll(e){let n=nt.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=la(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());Lc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Nn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Lc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){oo(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Qt(la(this.value))}}function Kx(t){const e=[];return oo(t.fields,(n,i)=>{const r=new nt([n]);if(Lc(i)){const s=Kx(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new mt(e,0,J.min(),J.min(),J.min(),Qt.empty(),0)}static newFoundDocument(e,n,i,r){return new mt(e,1,n,J.min(),i,r,0)}static newNoDocument(e,n){return new mt(e,2,n,J.min(),J.min(),Qt.empty(),0)}static newUnknownDocument(e,n){return new mt(e,3,n,J.min(),J.min(),Qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n){this.position=e,this.inclusive=n}}function sv(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=q.comparator(q.fromName(o.referenceValue),n.key):i=zs(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function ov(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Nn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e,n="asc"){this.field=e,this.dir=n}}function vM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{}class ze extends Gx{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new EM(e,n,i):n==="array-contains"?new IM(e,i):n==="in"?new SM(e,i):n==="not-in"?new bM(e,i):n==="array-contains-any"?new kM(e,i):new ze(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new TM(e,i):new xM(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(zs(n,this.value)):n!==null&&jr(this.value)===jr(n)&&this.matchesComparison(zs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _n extends Gx{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new _n(e,n)}matches(e){return Qx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Qx(t){return t.op==="and"}function Yx(t){return wM(t)&&Qx(t)}function wM(t){for(const e of t.filters)if(e instanceof _n)return!1;return!0}function pp(t){if(t instanceof ze)return t.field.canonicalString()+t.op.toString()+Bs(t.value);if(Yx(t))return t.filters.map(e=>pp(e)).join(",");{const e=t.filters.map(n=>pp(n)).join(",");return`${t.op}(${e})`}}function Xx(t,e){return t instanceof ze?function(i,r){return r instanceof ze&&i.op===r.op&&i.field.isEqual(r.field)&&Nn(i.value,r.value)}(t,e):t instanceof _n?function(i,r){return r instanceof _n&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&Xx(o,r.filters[a]),!0):!1}(t,e):void X()}function Jx(t){return t instanceof ze?function(n){return`${n.field.canonicalString()} ${n.op} ${Bs(n.value)}`}(t):t instanceof _n?function(n){return n.op.toString()+" {"+n.getFilters().map(Jx).join(" ,")+"}"}(t):"Filter"}class EM extends ze{constructor(e,n,i){super(e,n,i),this.key=q.fromName(i.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class TM extends ze{constructor(e,n){super(e,"in",n),this.keys=Zx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class xM extends ze{constructor(e,n){super(e,"not-in",n),this.keys=Zx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Zx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>q.fromName(i.referenceValue))}class IM extends ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return nm(n)&&Ba(n.arrayValue,this.value)}}class SM extends ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ba(this.value.arrayValue,n)}}class bM extends ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ba(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ba(this.value.arrayValue,n)}}class kM extends ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!nm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Ba(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function av(t,e=null,n=[],i=[],r=null,s=null,o=null){return new AM(t,e,n,i,r,s,o)}function im(t){const e=Z(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>pp(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),mh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Bs(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Bs(i)).join(",")),e.ue=n}return e.ue}function rm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Xx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ov(t.startAt,e.startAt)&&ov(t.endAt,e.endAt)}function gp(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function CM(t,e,n,i,r,s,o,a){return new ao(t,e,n,i,r,s,o,a)}function eI(t){return new ao(t)}function lv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function tI(t){return t.collectionGroup!==null}function ca(t){const e=Z(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new rt(nt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new $a(s,i))}),n.has(nt.keyField().canonicalString())||e.ce.push(new $a(nt.keyField(),i))}return e.ce}function Cn(t){const e=Z(t);return e.le||(e.le=PM(e,ca(t))),e.le}function PM(t,e){if(t.limitType==="F")return av(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new $a(r.field,s)});const n=t.endAt?new bu(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new bu(t.startAt.position,t.startAt.inclusive):null;return av(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function mp(t,e){const n=t.filters.concat([e]);return new ao(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ku(t,e,n){return new ao(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yh(t,e){return rm(Cn(t),Cn(e))&&t.limitType===e.limitType}function nI(t){return`${im(Cn(t))}|lt:${t.limitType}`}function rs(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>Jx(r)).join(", ")}]`),mh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Bs(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Bs(r)).join(",")),`Target(${i})`}(Cn(t))}; limitType=${t.limitType})`}function _h(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):q.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of ca(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){const c=sv(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,ca(i),r)||i.endAt&&!function(o,a,l){const c=sv(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,ca(i),r))}(t,e)}function RM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function iI(t){return(e,n)=>{let i=!1;for(const r of ca(t)){const s=DM(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function DM(t,e,n){const i=t.field.isKeyField()?q.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?zs(l,c):X()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return X()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){oo(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return Hx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM=new Re(q.comparator);function ai(){return NM}const rI=new Re(q.comparator);function $o(...t){let e=rI;for(const n of t)e=e.insert(n.key,n);return e}function sI(t){let e=rI;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function xr(){return ua()}function oI(){return ua()}function ua(){return new lo(t=>t.toString(),(t,e)=>t.isEqual(e))}const MM=new Re(q.comparator),OM=new rt(q.comparator);function te(...t){let e=OM;for(const n of t)e=e.add(n);return e}const LM=new rt(le);function VM(){return LM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Su(e)?"-0":e}}function aI(t){return{integerValue:""+t}}function FM(t,e){return pM(e)?aI(e):sm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(){this._=void 0}}function jM(t,e,n){return t instanceof Au?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&em(s)&&(s=tm(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Wa?cI(t,e):t instanceof Ha?uI(t,e):function(r,s){const o=lI(r,s),a=cv(o)+cv(r.Pe);return fp(o)&&fp(r.Pe)?aI(a):sm(r.serializer,a)}(t,e)}function UM(t,e,n){return t instanceof Wa?cI(t,e):t instanceof Ha?uI(t,e):n}function lI(t,e){return t instanceof Cu?function(i){return fp(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class Au extends vh{}class Wa extends vh{constructor(e){super(),this.elements=e}}function cI(t,e){const n=hI(e);for(const i of t.elements)n.some(r=>Nn(r,i))||n.push(i);return{arrayValue:{values:n}}}class Ha extends vh{constructor(e){super(),this.elements=e}}function uI(t,e){let n=hI(e);for(const i of t.elements)n=n.filter(r=>!Nn(r,i));return{arrayValue:{values:n}}}class Cu extends vh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function cv(t){return Le(t.integerValue||t.doubleValue)}function hI(t){return nm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function zM(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Wa&&r instanceof Wa||i instanceof Ha&&r instanceof Ha?Us(i.elements,r.elements,Nn):i instanceof Cu&&r instanceof Cu?Nn(i.Pe,r.Pe):i instanceof Au&&r instanceof Au}(t.transform,e.transform)}class BM{constructor(e,n){this.version=e,this.transformResults=n}}class Jn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class wh{}function dI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new pI(t.key,Jn.none()):new ul(t.key,t.data,Jn.none());{const n=t.data,i=Qt.empty();let r=new rt(nt.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Kr(t.key,i,new dn(r.toArray()),Jn.none())}}function $M(t,e,n){t instanceof ul?function(r,s,o){const a=r.value.clone(),l=hv(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Kr?function(r,s,o){if(!Vc(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=hv(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(fI(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ha(t,e,n,i){return t instanceof ul?function(s,o,a,l){if(!Vc(s.precondition,o))return a;const c=s.value.clone(),h=dv(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,i):t instanceof Kr?function(s,o,a,l){if(!Vc(s.precondition,o))return a;const c=dv(s.fieldTransforms,l,o),h=o.data;return h.setAll(fI(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,o,a){return Vc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function WM(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=lI(i.transform,r||null);s!=null&&(n===null&&(n=Qt.empty()),n.set(i.field,s))}return n||null}function uv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Us(i,r,(s,o)=>zM(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ul extends wh{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Kr extends wh{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function fI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function hv(t,e,n){const i=new Map;pe(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,UM(o,a,n[r]))}return i}function dv(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,jM(s,o,e))}return i}class pI extends wh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class HM extends wh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&$M(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=ha(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=ha(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=oI();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=dI(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(J.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),te())}isEqual(e){return this.batchId===e.batchId&&Us(this.mutations,e.mutations,(n,i)=>uv(n,i))&&Us(this.baseMutations,e.baseMutations,(n,i)=>uv(n,i))}}class om{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){pe(e.mutations.length===i.length);let r=function(){return MM}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new om(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je,se;function QM(t){switch(t){default:return X();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function gI(t){if(t===void 0)return oi("GRPC error has no .code"),V.UNKNOWN;switch(t){case je.OK:return V.OK;case je.CANCELLED:return V.CANCELLED;case je.UNKNOWN:return V.UNKNOWN;case je.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case je.INTERNAL:return V.INTERNAL;case je.UNAVAILABLE:return V.UNAVAILABLE;case je.UNAUTHENTICATED:return V.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case je.NOT_FOUND:return V.NOT_FOUND;case je.ALREADY_EXISTS:return V.ALREADY_EXISTS;case je.PERMISSION_DENIED:return V.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case je.ABORTED:return V.ABORTED;case je.OUT_OF_RANGE:return V.OUT_OF_RANGE;case je.UNIMPLEMENTED:return V.UNIMPLEMENTED;case je.DATA_LOSS:return V.DATA_LOSS;default:return X()}}(se=je||(je={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM=new Ar([4294967295,4294967295],0);function fv(t){const e=YM().encode(t),n=new Vx;return n.update(e),new Uint8Array(n.digest())}function pv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ar([n,i],0),new Ar([r,s],0)]}class am{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Wo(`Invalid padding: ${n}`);if(i<0)throw new Wo(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Wo(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Wo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ar.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(Ar.fromNumber(i)));return r.compare(XM)===1&&(r=new Ar([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=fv(e),[i,r]=pv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new am(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=fv(e),[i,r]=pv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Wo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,hl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Eh(J.min(),r,new Re(le),ai(),te())}}class hl{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new hl(i,n,te(),te(),te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class mI{constructor(e,n){this.targetId=e,this.me=n}}class yI{constructor(e,n,i=ot.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class gv{constructor(){this.fe=0,this.ge=yv(),this.pe=ot.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=te(),n=te(),i=te();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:X()}}),new hl(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=yv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,pe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class JM{constructor(e){this.Le=e,this.Be=new Map,this.ke=ai(),this.qe=mv(),this.Qe=new Re(le)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:X()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const s=r.target;if(gp(s))if(i===0){const o=new q(s.path);this.Ue(n,o,mt.newNoDocument(o,J.min()))}else pe(i===1);else{const o=this.Ye(n);if(o!==i){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=Fr(i).toUint8Array()}catch(l){if(l instanceof qx)return js("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new am(o,r,s)}catch(l){return js(l instanceof Wo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&gp(a.target)){const l=new q(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,mt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let i=te();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const r=new Eh(e,n,this.Qe,this.ke,i);return this.ke=ai(),this.qe=mv(),this.Qe=new Re(le),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new gv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new rt(le),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new gv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function mv(){return new Re(q.comparator)}function yv(){return new Re(q.comparator)}const ZM=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),eO=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),tO=(()=>({and:"AND",or:"OR"}))();class nO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function yp(t,e){return t.useProto3Json||mh(e)?e:{value:e}}function Pu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _I(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function iO(t,e){return Pu(t,e.toTimestamp())}function Pn(t){return pe(!!t),J.fromTimestamp(function(n){const i=Gi(n);return new Be(i.seconds,i.nanos)}(t))}function lm(t,e){return _p(t,e).canonicalString()}function _p(t,e){const n=function(r){return new Te(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function vI(t){const e=Te.fromString(t);return pe(II(e)),e}function vp(t,e){return lm(t.databaseId,e.path)}function Wd(t,e){const n=vI(e);if(n.get(1)!==t.databaseId.projectId)throw new W(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(EI(n))}function wI(t,e){return lm(t.databaseId,e)}function rO(t){const e=vI(t);return e.length===4?Te.emptyPath():EI(e)}function wp(t){return new Te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function EI(t){return pe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function _v(t,e,n){return{name:vp(t,e),fields:n.value.mapValue.fields}}function sO(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(pe(h===void 0||typeof h=="string"),ot.fromBase64String(h||"")):(pe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),ot.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?V.UNKNOWN:gI(c.code);return new W(h,c.message||"")}(o);n=new yI(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Wd(t,i.document.name),s=Pn(i.document.updateTime),o=i.document.createTime?Pn(i.document.createTime):J.min(),a=new Qt({mapValue:{fields:i.document.fields}}),l=mt.newFoundDocument(r,s,o,a),c=i.targetIds||[],h=i.removedTargetIds||[];n=new Fc(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Wd(t,i.document),s=i.readTime?Pn(i.readTime):J.min(),o=mt.newNoDocument(r,s),a=i.removedTargetIds||[];n=new Fc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Wd(t,i.document),s=i.removedTargetIds||[];n=new Fc([],s,r,null)}else{if(!("filter"in e))return X();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new GM(r,s),a=i.targetId;n=new mI(a,o)}}return n}function oO(t,e){let n;if(e instanceof ul)n={update:_v(t,e.key,e.value)};else if(e instanceof pI)n={delete:vp(t,e.key)};else if(e instanceof Kr)n={update:_v(t,e.key,e.data),updateMask:gO(e.fieldMask)};else{if(!(e instanceof HM))return X();n={verify:vp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof Au)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Wa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ha)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Cu)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw X()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:iO(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:X()}(t,e.precondition)),n}function aO(t,e){return t&&t.length>0?(pe(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?Pn(r.updateTime):Pn(s);return o.isEqual(J.min())&&(o=Pn(s)),new BM(o,r.transformResults||[])}(n,e))):[]}function lO(t,e){return{documents:[wI(t,e.path)]}}function cO(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=wI(t,r);const s=function(c){if(c.length!==0)return xI(_n.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:ss(p.field),direction:dO(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=yp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:r}}function uO(t){let e=rO(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){pe(i===1);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const p=TI(d);return p instanceof _n&&Yx(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(y){return new $a(os(y.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,mh(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(d){const p=!!d.before,m=d.values||[];return new bu(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const p=!d.before,m=d.values||[];return new bu(m,p)}(n.endAt)),CM(e,r,o,s,a,"F",l,c)}function hO(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function TI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=os(n.unaryFilter.field);return ze.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=os(n.unaryFilter.field);return ze.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=os(n.unaryFilter.field);return ze.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=os(n.unaryFilter.field);return ze.create(o,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(t):t.fieldFilter!==void 0?function(n){return ze.create(os(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return _n.create(n.compositeFilter.filters.map(i=>TI(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return X()}}(n.compositeFilter.op))}(t):X()}function dO(t){return ZM[t]}function fO(t){return eO[t]}function pO(t){return tO[t]}function ss(t){return{fieldPath:t.canonicalString()}}function os(t){return nt.fromServerFormat(t.fieldPath)}function xI(t){return t instanceof ze?function(n){if(n.op==="=="){if(rv(n.value))return{unaryFilter:{field:ss(n.field),op:"IS_NAN"}};if(iv(n.value))return{unaryFilter:{field:ss(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(rv(n.value))return{unaryFilter:{field:ss(n.field),op:"IS_NOT_NAN"}};if(iv(n.value))return{unaryFilter:{field:ss(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ss(n.field),op:fO(n.op),value:n.value}}}(t):t instanceof _n?function(n){const i=n.getFilters().map(r=>xI(r));return i.length===1?i[0]:{compositeFilter:{op:pO(n.op),filters:i}}}(t):X()}function gO(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function II(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n,i,r,s=J.min(),o=J.min(),a=ot.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new bi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e){this.ct=e}}function yO(t){const e=uO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ku(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(){this.un=new vO}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Ki.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Ki.min())}updateCollectionGroup(e,n,i){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class vO{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new rt(Te.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new rt(Te.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new $s(0)}static kn(){return new $s(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(){this.changes=new lo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?F.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&ha(i.mutation,r,dn.empty(),Be.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,te()).next(()=>i))}getLocalViewOfDocuments(e,n,i=te()){const r=xr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=$o();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=xr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,te()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=ai();const o=ua(),a=function(){return ua()}();return n.forEach((l,c)=>{const h=i.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof Kr)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),ha(h.mutation,c,h.mutation.getFieldMask(),Be.now())):o.set(c.key,dn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new EO(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const i=ua();let r=new Re((o,a)=>o-a),s=te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=i.get(l)||dn.empty();h=a.applyToLocalView(c,h),i.set(l,h);const d=(r.get(a.batchId)||te()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=oI();h.forEach(p=>{if(!s.has(p)){const m=dI(n.get(p),i.get(p));m!==null&&d.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return F.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):tI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):F.resolve(xr());let a=-1,l=s;return o.next(c=>F.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,te())).next(h=>({batchId:a,changes:sI(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(i=>{let r=$o();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let o=$o();return this.indexManager.getCollectionParents(e,s).next(a=>F.forEach(a,l=>{const c=function(d,p){return new ao(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,mt.newInvalidDocument(h)))});let a=$o();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&ha(h.mutation,c,dn.empty(),Be.now()),_h(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Pn(r.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:yO(r.bundledQuery),readTime:Pn(r.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(){this.overlays=new Re(q.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const i=xr();return F.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),F.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),F.resolve()}getOverlaysForCollection(e,n,i){const r=xr(),s=n.length+1,o=new q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return F.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Re((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let h=s.get(c.largestBatchId);h===null&&(h=xr(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=xr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=r)););return F.resolve(a)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new KM(n,i));let s=this.Ir.get(n);s===void 0&&(s=te(),this.Ir.set(n,s)),this.Ir.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(){this.sessionToken=ot.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(){this.Tr=new rt(Ke.Er),this.dr=new rt(Ke.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new Ke(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new Ke(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new q(new Te([])),i=new Ke(n,e),r=new Ke(n,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new q(new Te([])),i=new Ke(n,e),r=new Ke(n,e+1);let s=te();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ke(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Ke{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return q.comparator(e.key,n.key)||le(e.wr,n.wr)}static Ar(e,n){return le(e.wr,n.wr)||q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new rt(Ke.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new qM(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.br=this.br.add(new Ke(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),s=r<0?0:r;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Ke(n,0),r=new Ke(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{const a=this.Dr(o.wr);s.push(a)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new rt(le);return n.forEach(r=>{const s=new Ke(r,0),o=new Ke(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{i=i.add(a.wr)})}),F.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;q.isDocumentKey(s)||(s=s.child(""));const o=new Ke(new q(s),0);let a=new rt(le);return this.br.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.wr)),!0)},o),F.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){pe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return F.forEach(n.mutations,r=>{const s=new Ke(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new Ke(n,0),r=this.br.firstAfterOrEqual(i);return F.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e){this.Mr=e,this.docs=function(){return new Re(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return F.resolve(i?i.document.mutableCopy():mt.newInvalidDocument(n))}getEntries(e,n){let i=ai();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():mt.newInvalidDocument(r))}),F.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=ai();const o=n.path,a=new q(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||uM(cM(h),i)<=0||(r.has(h.key)||_h(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,n,i,r){X()}Or(e,n){return F.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new AO(this)}getSize(e){return F.resolve(this.size)}}class AO extends wO{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e){this.persistence=e,this.Nr=new lo(n=>im(n),rm),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Lr=0,this.Br=new cm,this.targetCount=0,this.kr=$s.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new $s(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),F.waitFor(s).next(()=>r)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return F.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),F.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return F.resolve(i)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Zg(0),this.Kr=!1,this.Kr=!0,this.$r=new SO,this.referenceDelegate=e(this),this.Ur=new CO(this),this.indexManager=new _O,this.remoteDocumentCache=function(r){return new kO(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new mO(n),this.Gr=new xO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new IO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new bO(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){H("MemoryPersistence","Starting transaction:",e);const r=new RO(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,n){return F.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class RO extends dM{constructor(e){super(),this.currentSequenceNumber=e}}class um{constructor(e){this.persistence=e,this.Jr=new cm,this.Yr=null}static Zr(e){return new um(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),F.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,i=>{const r=q.fromPath(i);return this.ei(e,r).next(s=>{s||n.removeEntry(r,J.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=te(),r=te();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new hm(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return gP()?8:fM(_t())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new DO;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(Do()<=ne.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",rs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(Do()<=ne.DEBUG&&H("QueryEngine","Query:",rs(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(Do()<=ne.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",rs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cn(n))):F.resolve())}Yi(e,n){if(lv(n))return F.resolve(null);let i=Cn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=ku(n,null,"F"),i=Cn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=te(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,ku(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,i,r){return lv(n)||r.isEqual(J.min())?F.resolve(null):this.Ji.getDocuments(e,i).next(s=>{const o=this.ts(n,s);return this.ns(n,o,i,r)?F.resolve(null):(Do()<=ne.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),rs(n)),this.rs(e,o,n,lM(r,-1)).next(a=>a))})}ts(e,n){let i=new rt(iI(e));return n.forEach((r,s)=>{_h(e,s)&&(i=i.add(s))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,n,i){return Do()<=ne.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",rs(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ki.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new Re(le),this._s=new lo(s=>im(s),rm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TO(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function OO(t,e,n,i){return new MO(t,e,n,i)}async function SI(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=te();for(const c of r){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(i,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function LO(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,p=d.keys();let m=F.resolve();return p.forEach(y=>{m=m.next(()=>h.getEntry(l,y)).next(E=>{const T=c.docVersions.get(y);pe(T!==null),E.version.compareTo(T)<0&&(d.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),h.addEntry(E)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=te();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function bI(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function VO(t,e){const n=Z(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const p=r.get(d);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(ot.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,i)),r=r.insert(d,m),function(E,T,_){return E.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,m,h)&&a.push(n.Ur.updateTargetData(s,m))});let l=ai(),c=te();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(FO(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!i.isEqual(J.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(h)}return F.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=r,s))}function FO(t,e,n){let i=te(),r=te();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=ai();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(J.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):H("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function jO(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function UO(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(s=>s?(r=s,F.resolve(r)):n.Ur.allocateTargetId(i).next(o=>(r=new bi(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function Ep(t,e,n){const i=Z(t),r=i.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!cl(o))throw o;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function vv(t,e,n){const i=Z(t);let r=J.min(),s=te();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=Z(l),p=d._s.get(h);return p!==void 0?F.resolve(d.os.get(p)):d.Ur.getTargetData(c,h)}(i,o,Cn(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,n?r:J.min(),n?s:te())).next(a=>(zO(i,RM(e),a),{documents:a,Ts:s})))}function zO(t,e,n){let i=t.us.get(e)||J.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.us.set(e,i)}class wv{constructor(){this.activeTargetIds=VM()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class BO{constructor(){this.so=new wv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new wv,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nc=null;function Hd(){return nc===null?nc=function(){return 268435456+Math.round(2147483648*Math.random())}():nc++,"0x"+nc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt="WebChannelConnection";class qO extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(n,i,r,s,o){const a=Hd(),l=this.xo(n,i.toUriEncodedString());H("RestConnection",`Sending RPC '${n}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,r).then(h=>(H("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw js("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",r),h})}Lo(n,i,r,s,o,a){return this.Mo(n,i,r,s,o)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+so}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}xo(n,i){const r=WO[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const s=Hd();return new Promise((o,a)=>{const l=new Fx;l.setWithCredentials(!0),l.listenOnce(jx.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Oc.NO_ERROR:const h=l.getResponseJson();H(dt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Oc.TIMEOUT:H(dt,`RPC '${e}' ${s} timed out`),a(new W(V.DEADLINE_EXCEEDED,"Request time out"));break;case Oc.HTTP_ERROR:const d=l.getStatus();if(H(dt,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const y=function(T){const _=T.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(_)>=0?_:V.UNKNOWN}(m.status);a(new W(y,m.message))}else a(new W(V.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new W(V.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{H(dt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(r);H(dt,`RPC '${e}' ${s} sending request:`,r),l.send(n,"POST",c,i,15)})}Bo(e,n,i){const r=Hd(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Bx(),a=zx(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const h=s.join("");H(dt,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=o.createWebChannel(h,l);let p=!1,m=!1;const y=new HO({Io:T=>{m?H(dt,`Not sending because RPC '${e}' stream ${r} is closed:`,T):(p||(H(dt,`Opening RPC '${e}' stream ${r} transport.`),d.open(),p=!0),H(dt,`RPC '${e}' stream ${r} sending:`,T),d.send(T))},To:()=>d.close()}),E=(T,_,v)=>{T.listen(_,S=>{try{v(S)}catch(D){setTimeout(()=>{throw D},0)}})};return E(d,Bo.EventType.OPEN,()=>{m||(H(dt,`RPC '${e}' stream ${r} transport opened.`),y.yo())}),E(d,Bo.EventType.CLOSE,()=>{m||(m=!0,H(dt,`RPC '${e}' stream ${r} transport closed`),y.So())}),E(d,Bo.EventType.ERROR,T=>{m||(m=!0,js(dt,`RPC '${e}' stream ${r} transport errored:`,T),y.So(new W(V.UNAVAILABLE,"The operation could not be completed")))}),E(d,Bo.EventType.MESSAGE,T=>{var _;if(!m){const v=T.data[0];pe(!!v);const S=v,D=S.error||((_=S[0])===null||_===void 0?void 0:_.error);if(D){H(dt,`RPC '${e}' stream ${r} received error:`,D);const M=D.status;let L=function(b){const k=je[b];if(k!==void 0)return gI(k)}(M),I=D.message;L===void 0&&(L=V.INTERNAL,I="Unknown error status: "+M+" with message "+D.message),m=!0,y.So(new W(L,I)),d.close()}else H(dt,`RPC '${e}' stream ${r} received:`,v),y.bo(v)}}),E(a,Ux.STAT_EVENT,T=>{T.stat===hp.PROXY?H(dt,`RPC '${e}' stream ${r} detected buffering proxy`):T.stat===hp.NOPROXY&&H(dt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}function qd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(t){return new nO(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,n,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&H("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,n,i,r,s,o,a,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new kI(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(oi(n.toString()),oi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new W(V.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class KO extends AI{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=sO(this.serializer,e),i=function(s){if(!("targetChange"in s))return J.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?J.min():o.readTime?Pn(o.readTime):J.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=wp(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=gp(l)?{documents:lO(s,l)}:{query:cO(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=_I(s,o.resumeToken);const c=yp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(J.min())>0){a.readTime=Pu(s,o.snapshotVersion.toTimestamp());const c=yp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const i=hO(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=wp(this.serializer),n.removeTarget=e,this.a_(n)}}class GO extends AI{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return pe(!!e.streamToken),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=aO(e.writeResults,e.commitTime),i=Pn(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=wp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>oO(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new W(V.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,_p(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(V.UNKNOWN,s.toString())})}Lo(e,n,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,_p(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(V.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class YO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(oi(n),this.D_=!1):H("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(async()=>{Gr(this)&&(H("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Z(l);c.L_.add(4),await dl(c),c.q_.set("Unknown"),c.L_.delete(4),await xh(c)}(this))})}),this.q_=new YO(i,r)}}async function xh(t){if(Gr(t))for(const e of t.B_)await e(!0)}async function dl(t){for(const e of t.B_)await e(!1)}function CI(t,e){const n=Z(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),gm(n)?pm(n):co(n).r_()&&fm(n,e))}function dm(t,e){const n=Z(t),i=co(n);n.N_.delete(e),i.r_()&&PI(n,e),n.N_.size===0&&(i.r_()?i.o_():Gr(n)&&n.q_.set("Unknown"))}function fm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}co(t).A_(e)}function PI(t,e){t.Q_.xe(e),co(t).R_(e)}function pm(t){t.Q_=new JM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),co(t).start(),t.q_.v_()}function gm(t){return Gr(t)&&!co(t).n_()&&t.N_.size>0}function Gr(t){return Z(t).L_.size===0}function RI(t){t.Q_=void 0}async function JO(t){t.q_.set("Online")}async function ZO(t){t.N_.forEach((e,n)=>{fm(t,e)})}async function eL(t,e){RI(t),gm(t)?(t.q_.M_(e),pm(t)):t.q_.set("Unknown")}async function tL(t,e,n){if(t.q_.set("Online"),e instanceof yI&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.N_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.N_.delete(a),r.Q_.removeTarget(a))}(t,e)}catch(i){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ru(t,i)}else if(e instanceof Fc?t.Q_.Ke(e):e instanceof mI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(J.min()))try{const i=await bI(t.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(ot.EMPTY_BYTE_STRING,h.snapshotVersion)),PI(s,l);const d=new bi(h.target,l,c,h.sequenceNumber);fm(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){H("RemoteStore","Failed to raise snapshot:",i),await Ru(t,i)}}async function Ru(t,e,n){if(!cl(e))throw e;t.L_.add(1),await dl(t),t.q_.set("Offline"),n||(n=()=>bI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await xh(t)})}function DI(t,e){return e().catch(n=>Ru(t,n,e))}async function Ih(t){const e=Z(t),n=Qi(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;nL(e);)try{const r=await jO(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,iL(e,r)}catch(r){await Ru(e,r)}NI(e)&&MI(e)}function nL(t){return Gr(t)&&t.O_.length<10}function iL(t,e){t.O_.push(e);const n=Qi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function NI(t){return Gr(t)&&!Qi(t).n_()&&t.O_.length>0}function MI(t){Qi(t).start()}async function rL(t){Qi(t).p_()}async function sL(t){const e=Qi(t);for(const n of t.O_)e.m_(n.mutations)}async function oL(t,e,n){const i=t.O_.shift(),r=om.from(i,e,n);await DI(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Ih(t)}async function aL(t,e){e&&Qi(t).V_&&await async function(i,r){if(function(o){return QM(o)&&o!==V.ABORTED}(r.code)){const s=i.O_.shift();Qi(i).s_(),await DI(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Ih(i)}}(t,e),NI(t)&&MI(t)}async function Tv(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");const i=Gr(n);n.L_.add(3),await dl(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await xh(n)}async function lL(t,e){const n=Z(t);e?(n.L_.delete(2),await xh(n)):e||(n.L_.add(2),await dl(n),n.q_.set("Unknown"))}function co(t){return t.K_||(t.K_=function(n,i,r){const s=Z(n);return s.w_(),new KO(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:JO.bind(null,t),Ro:ZO.bind(null,t),mo:eL.bind(null,t),d_:tL.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),gm(t)?pm(t):t.q_.set("Unknown")):(await t.K_.stop(),RI(t))})),t.K_}function Qi(t){return t.U_||(t.U_=function(n,i,r){const s=Z(n);return s.w_(),new GO(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:rL.bind(null,t),mo:aL.bind(null,t),f_:sL.bind(null,t),g_:oL.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Ih(t)):(await t.U_.stop(),t.O_.length>0&&(H("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new mm(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ym(t,e){if(oi("AsyncQueue",`${e}: ${t}`),cl(t))return new W(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e){this.comparator=e?(n,i)=>e(n,i)||q.comparator(n.key,i.key):(n,i)=>q.comparator(n.key,i.key),this.keyedMap=$o(),this.sortedSet=new Re(this.comparator)}static emptySet(e){return new As(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof As)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new As;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(){this.W_=new Re(q.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Ws{constructor(e,n,i,r,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ws(e,n,As.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class uL{constructor(){this.queries=Iv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=Z(n),s=r.queries;r.queries=Iv(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(i)})})(this,new W(V.ABORTED,"Firestore shutting down"))}}function Iv(){return new lo(t=>nI(t),yh)}async function hL(t,e){const n=Z(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new cL,i=e.J_()?0:1);try{switch(i){case 0:s.z_=await n.onListen(r,!0);break;case 1:s.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=ym(o,`Initialization of query '${rs(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&_m(n)}async function dL(t,e){const n=Z(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function fL(t,e){const n=Z(t);let i=!1;for(const r of e){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(r)&&(i=!0);o.z_=r}}i&&_m(n)}function pL(t,e,n){const i=Z(t),r=i.queries.get(e);if(r)for(const s of r.j_)s.onError(n);i.queries.delete(e)}function _m(t){t.Y_.forEach(e=>{e.next()})}var Tp,Sv;(Sv=Tp||(Tp={})).ea="default",Sv.Cache="cache";class gL{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Ws(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ws.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Tp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){this.key=e}}class LI{constructor(e){this.key=e}}class mL{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=te(),this.mutatedKeys=te(),this.Aa=iI(e),this.Ra=new As(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new xv,r=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const p=r.get(h),m=_h(this.query,d)?d:null,y=!!p&&this.mutatedKeys.has(p.key),E=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let T=!1;p&&m?p.data.isEqual(m.data)?y!==E&&(i.track({type:3,doc:m}),T=!0):this.ga(p,m)||(i.track({type:2,doc:m}),T=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(a=!0)):!p&&m?(i.track({type:0,doc:m}),T=!0):p&&!m&&(i.track({type:1,doc:p}),T=!0,(l||c)&&(a=!0)),T&&(m?(o=o.add(m),s=E?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{Ra:o,fa:i,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(m,y){const E=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return E(m)-E(y)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(i),r=r!=null&&r;const a=n&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Ws(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new xv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=te(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new LI(i))}),this.da.forEach(i=>{e.has(i)||n.push(new OI(i))}),n}ba(e){this.Ta=e.Ts,this.da=te();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ws.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class yL{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class _L{constructor(e){this.key=e,this.va=!1}}class vL{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new lo(a=>nI(a),yh),this.Ma=new Map,this.xa=new Set,this.Oa=new Re(q.comparator),this.Na=new Map,this.La=new cm,this.Ba={},this.ka=new Map,this.qa=$s.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function wL(t,e,n=!0){const i=BI(t);let r;const s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=await VI(i,e,n,!0),r}async function EL(t,e){const n=BI(t);await VI(n,e,!0,!1)}async function VI(t,e,n,i){const r=await UO(t.localStore,Cn(e)),s=r.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await TL(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&CI(t.remoteStore,r),a}async function TL(t,e,n,i,r){t.Ka=(d,p,m)=>async function(E,T,_,v){let S=T.view.ma(_);S.ns&&(S=await vv(E.localStore,T.query,!1).then(({documents:I})=>T.view.ma(I,S)));const D=v&&v.targetChanges.get(T.targetId),M=v&&v.targetMismatches.get(T.targetId)!=null,L=T.view.applyChanges(S,E.isPrimaryClient,D,M);return kv(E,T.targetId,L.wa),L.snapshot}(t,d,p,m);const s=await vv(t.localStore,e,!0),o=new mL(e,s.Ts),a=o.ma(s.documents),l=hl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),c=o.applyChanges(a,t.isPrimaryClient,l);kv(t,n,c.wa);const h=new yL(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function xL(t,e,n){const i=Z(t),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!yh(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Ep(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&dm(i.remoteStore,r.targetId),xp(i,r.targetId)}).catch(ll)):(xp(i,r.targetId),await Ep(i.localStore,r.targetId,!0))}async function IL(t,e){const n=Z(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),dm(n.remoteStore,i.targetId))}async function SL(t,e,n){const i=DL(t);try{const r=await function(o,a){const l=Z(o),c=Be.now(),h=a.reduce((m,y)=>m.add(y.key),te());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=ai(),E=te();return l.cs.getEntries(m,h).next(T=>{y=T,y.forEach((_,v)=>{v.isValidDocument()||(E=E.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,y)).next(T=>{d=T;const _=[];for(const v of a){const S=WM(v,d.get(v.key).overlayedDocument);S!=null&&_.push(new Kr(v.key,S,Kx(S.value.mapValue),Jn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,_,a)}).next(T=>{p=T;const _=T.applyToLocalDocumentSet(d,E);return l.documentOverlayCache.saveOverlays(m,T.batchId,_)})}).then(()=>({batchId:p.batchId,changes:sI(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Re(le)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(i,r.batchId,n),await fl(i,r.changes),await Ih(i.remoteStore)}catch(r){const s=ym(r,"Failed to persist write");n.reject(s)}}async function FI(t,e){const n=Z(t);try{const i=await VO(n.localStore,e);e.targetChanges.forEach((r,s)=>{const o=n.Na.get(s);o&&(pe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?pe(o.va):r.removedDocuments.size>0&&(pe(o.va),o.va=!1))}),await fl(n,i,e)}catch(i){await ll(i)}}function bv(t,e,n){const i=Z(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=Z(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const p of d.j_)p.Z_(a)&&(c=!0)}),c&&_m(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function bL(t,e,n){const i=Z(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),s=r&&r.key;if(s){let o=new Re(q.comparator);o=o.insert(s,mt.newNoDocument(s,J.min()));const a=te().add(s),l=new Eh(J.min(),new Map,new Re(le),o,a);await FI(i,l),i.Oa=i.Oa.remove(s),i.Na.delete(e),vm(i)}else await Ep(i.localStore,e,!1).then(()=>xp(i,e,n)).catch(ll)}async function kL(t,e){const n=Z(t),i=e.batch.batchId;try{const r=await LO(n.localStore,e);UI(n,i,null),jI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await fl(n,r)}catch(r){await ll(r)}}async function AL(t,e,n){const i=Z(t);try{const r=await function(o,a){const l=Z(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(pe(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(i.localStore,e);UI(i,e,n),jI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await fl(i,r)}catch(r){await ll(r)}}function jI(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function UI(t,e,n){const i=Z(t);let r=i.Ba[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function xp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||zI(t,i)})}function zI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(dm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),vm(t))}function kv(t,e,n){for(const i of n)i instanceof OI?(t.La.addReference(i.key,e),CL(t,i)):i instanceof LI?(H("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||zI(t,i.key)):X()}function CL(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(H("SyncEngine","New document in limbo: "+n),t.xa.add(i),vm(t))}function vm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new q(Te.fromString(e)),i=t.qa.next();t.Na.set(i,new _L(n)),t.Oa=t.Oa.insert(n,i),CI(t.remoteStore,new bi(Cn(eI(n.path)),i,"TargetPurposeLimboResolution",Zg.oe))}}async function fl(t,e,n){const i=Z(t),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{o.push(i.Ka(l,e,n).then(c=>{var h;if((c||n)&&i.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){r.push(c);const d=hm.Wi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),i.Ca.d_(r),await async function(l,c){const h=Z(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>F.forEach(c,p=>F.forEach(p.$i,m=>h.persistence.referenceDelegate.addReference(d,p.targetId,m)).next(()=>F.forEach(p.Ui,m=>h.persistence.referenceDelegate.removeReference(d,p.targetId,m)))))}catch(d){if(!cl(d))throw d;H("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const m=h.os.get(p),y=m.snapshotVersion,E=m.withLastLimboFreeSnapshotVersion(y);h.os=h.os.insert(p,E)}}}(i.localStore,s))}async function PL(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());const i=await SI(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new W(V.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await fl(n,i.hs)}}function RL(t,e){const n=Z(t),i=n.Na.get(e);if(i&&i.va)return te().add(i.key);{let r=te();const s=n.Ma.get(e);if(!s)return r;for(const o of s){const a=n.Fa.get(o);r=r.unionWith(a.view.Va)}return r}}function BI(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=FI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bL.bind(null,e),e.Ca.d_=fL.bind(null,e.eventManager),e.Ca.$a=pL.bind(null,e.eventManager),e}function DL(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AL.bind(null,e),e}class Du{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Th(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return OO(this.persistence,new NO,e.initialUser,this.serializer)}Ga(e){return new PO(um.Zr,this.serializer)}Wa(e){return new BO}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Du.provider={build:()=>new Du};class Ip{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>bv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=PL.bind(null,this.syncEngine),await lL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new uL}()}createDatastore(e){const n=Th(e.databaseInfo.databaseId),i=function(s){return new qO(s)}(e.databaseInfo);return function(s,o,a,l){return new QO(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new XO(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>bv(this.syncEngine,n,0),function(){return Ev.D()?new Ev:new $O}())}createSyncEngine(e,n){return function(r,s,o,a,l,c,h){const d=new vL(r,s,o,a,l,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=Z(r);H("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await dl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ip.provider={build:()=>new Ip};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):oi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=pt.UNAUTHENTICATED,this.clientId=Wx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{H("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(H("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=ym(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Kd(t,e){t.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await SI(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Av(t,e){t.asyncQueue.verifyOperationInProgress();const n=await OL(t);H("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Tv(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>Tv(e.remoteStore,r)),t._onlineComponents=e}async function OL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{await Kd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===V.FAILED_PRECONDITION||r.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;js("Error using user provided cache. Falling back to memory cache: "+n),await Kd(t,new Du)}}else H("FirestoreClient","Using default OfflineComponentProvider"),await Kd(t,new Du);return t._offlineComponents}async function $I(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),await Av(t,t._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),await Av(t,new Ip))),t._onlineComponents}function LL(t){return $I(t).then(e=>e.syncEngine)}async function VL(t){const e=await $I(t),n=e.eventManager;return n.onListen=wL.bind(null,e.syncEngine),n.onUnlisten=xL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=EL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=IL.bind(null,e.syncEngine),n}function FL(t,e,n={}){const i=new Bi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new NL({next:p=>{h.Za(),o.enqueueAndForget(()=>dL(s,d)),p.fromCache&&l.source==="server"?c.reject(new W(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new gL(a,h,{includeMetadataChanges:!0,_a:!0});return hL(s,d)}(await VL(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(t,e,n){if(!n)throw new W(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function jL(t,e,n,i){if(e===!0&&i===!0)throw new W(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Pv(t){if(!q.isDocumentKey(t))throw new W(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Rv(t){if(q.isDocumentKey(t))throw new W(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Sh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X()}function Nu(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sh(t);throw new W(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function UL(t,e){if(e<=0)throw new W(V.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new W(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new W(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WI((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new W(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new W(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new W(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bh{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dv(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new ZN;switch(i.type){case"firstParty":return new iM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new W(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Cv.get(n);i&&(H("ComponentProvider","Removing Datastore"),Cv.delete(n),i.terminate())}(this),Promise.resolve()}}function zL(t,e,n,i={}){var r;const s=(t=Nu(t,bh))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&js("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=pt.MOCK_USER;else{a=cP(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new W(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new pt(c)}t._authCredentials=new eM(new $x(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ir(this.firestore,e,this._query)}}class tn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $i(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tn(this.firestore,e,this._key)}}class $i extends ir{constructor(e,n,i){super(e,n,eI(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tn(this.firestore,null,new q(e))}withConverter(e){return new $i(this.firestore,e,this._path)}}function kh(t,e,...n){if(t=St(t),HI("collection","path",e),t instanceof bh){const i=Te.fromString(e,...n);return Rv(i),new $i(t,null,i)}{if(!(t instanceof tn||t instanceof $i))throw new W(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Te.fromString(e,...n));return Rv(i),new $i(t.firestore,null,i)}}function BL(t,e,...n){if(t=St(t),arguments.length===1&&(e=Wx.newId()),HI("doc","path",e),t instanceof bh){const i=Te.fromString(e,...n);return Pv(i),new tn(t,null,new q(i))}{if(!(t instanceof tn||t instanceof $i))throw new W(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Te.fromString(e,...n));return Pv(i),new tn(t.firestore,t instanceof $i?t.converter:null,new q(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new kI(this,"async_queue_retry"),this.Vu=()=>{const i=qd();i&&H("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=qd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=qd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Bi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!cl(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw oi("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=mm.createAndSchedule(this,e,n,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&X()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class wm extends bh{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new Nv,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Nv(e),this._firestoreClient=void 0,await e}}}function $L(t,e){const n=typeof t=="object"?t:Og(),i=typeof t=="string"?t:e||"(default)",r=qr(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=aP("firestore");s&&zL(r,...s)}return r}function qI(t){if(t._terminated)throw new W(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||WL(t),t._firestoreClient}function WL(t){var e,n,i;const r=t._freezeSettings(),s=function(a,l,c,h){return new mM(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,WI(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new ML(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hs(ot.fromBase64String(e))}catch(n){throw new W(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Hs(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL=/^__.*__$/;class qL{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Kr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ul(e,this.data,n,this.fieldTransforms)}}function GI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}class Im{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Im(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Mu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(GI(this.Cu)&&HL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class KL{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Th(e)}Qu(e,n,i,r=!1){return new Im({Cu:e,methodName:n,qu:i,path:nt.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function QI(t){const e=t._freezeSettings(),n=Th(t._databaseId);return new KL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function GL(t,e,n,i,r,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,r);JI("Data must be an object, but it was:",o,i);const a=YI(i,o);let l,c;if(s.merge)l=new dn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=YL(e,d,n);if(!o.contains(p))throw new W(V.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);JL(h,p)||h.push(p)}l=new dn(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new qL(new Qt(a),l,c)}function QL(t,e,n,i=!1){return Sm(n,t.Qu(i?4:3,e))}function Sm(t,e){if(XI(t=St(t)))return JI("Unsupported field value:",e,t),YI(t,e);if(t instanceof KI)return function(i,r){if(!GI(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=Sm(a,r.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=St(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return FM(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Be.fromDate(i);return{timestampValue:Pu(r.serializer,s)}}if(i instanceof Be){const s=new Be(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Pu(r.serializer,s)}}if(i instanceof Tm)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Hs)return{bytesValue:_I(r.serializer,i._byteString)};if(i instanceof tn){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:lm(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof xm)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return sm(a.serializer,l)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${Sh(i)}`)}(t,e)}function YI(t,e){const n={};return Hx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):oo(t,(i,r)=>{const s=Sm(r,e.Mu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function XI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Be||t instanceof Tm||t instanceof Hs||t instanceof tn||t instanceof KI||t instanceof xm)}function JI(t,e,n){if(!XI(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=Sh(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function YL(t,e,n){if((e=St(e))instanceof Em)return e._internalPath;if(typeof e=="string")return ZI(t,e);throw Mu("Field path arguments must be of type string or ",t,!1,void 0,n)}const XL=new RegExp("[~\\*/\\[\\]]");function ZI(t,e,n){if(e.search(XL)>=0)throw Mu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Em(...e.split("."))._internalPath}catch{throw Mu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Mu(t,e,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new W(V.INVALID_ARGUMENT,a+t+l)}function JL(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ZL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ah("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ZL extends eS{data(){return super.data()}}function Ah(t,e){return typeof e=="string"?ZI(t,e):e instanceof Em?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bm{}class km extends bm{}function Am(t,e,...n){let i=[];e instanceof bm&&i.push(e),i=i.concat(n),function(s){const o=s.filter(l=>l instanceof Cm).length,a=s.filter(l=>l instanceof Ch).length;if(o>1||o>0&&a>0)throw new W(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class Ch extends km{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Ch(e,n,i)}_apply(e){const n=this._parse(e);return nS(e._query,n),new ir(e.firestore,e.converter,mp(e._query,n))}_parse(e){const n=QI(e.firestore);return function(s,o,a,l,c,h,d){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new W(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Ov(d,h);const m=[];for(const y of d)m.push(Mv(l,s,y));p={arrayValue:{values:m}}}else p=Mv(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Ov(d,h),p=QL(a,o,d,h==="in"||h==="not-in");return ze.create(c,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function qa(t,e,n){const i=e,r=Ah("where",t);return Ch._create(r,i,n)}class Cm extends bm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Cm(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:_n.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let o=r;const a=s.getFlattenedFilters();for(const l of a)nS(o,l),o=mp(o,l)}(e._query,n),new ir(e.firestore,e.converter,mp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Pm extends km{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Pm(e,n)}_apply(e){const n=function(r,s,o){if(r.startAt!==null)throw new W(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new W(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $a(s,o)}(e._query,this._field,this._direction);return new ir(e.firestore,e.converter,function(r,s){const o=r.explicitOrderBy.concat([s]);return new ao(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function tS(t,e="asc"){const n=e,i=Ah("orderBy",t);return Pm._create(i,n)}class Rm extends km{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Rm(e,n,i)}_apply(e){return new ir(e.firestore,e.converter,ku(e._query,this._limit,this._limitType))}}function tV(t){return UL("limit",t),Rm._create("limit",t,"F")}function Mv(t,e,n){if(typeof(n=St(n))=="string"){if(n==="")throw new W(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tI(e)&&n.indexOf("/")!==-1)throw new W(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Te.fromString(n));if(!q.isDocumentKey(i))throw new W(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return nv(t,new q(i))}if(n instanceof tn)return nv(t,n._key);throw new W(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sh(n)}.`)}function Ov(t,e){if(!Array.isArray(t)||t.length===0)throw new W(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nS(t,e){const n=function(r,s){for(const o of r)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class nV{convertValue(e,n="none"){switch(jr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Fr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return oo(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,r;const s=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Le(o.doubleValue));return new xm(s)}convertGeoPoint(e){return new Tm(Le(e.latitude),Le(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=tm(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Ua(e));default:return null}}convertTimestamp(e){const n=Gi(e);return new Be(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Te.fromString(e);pe(II(i));const r=new za(i.get(1),i.get(3)),s=new q(i.popFirst(5));return r.isEqual(n)||oi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iV(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rV extends eS{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Ah("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class jc extends rV{data(e={}){return super.data(e)}}class sV{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new ic(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new jc(this._firestore,this._userDataWriter,i.key,i,new ic(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new jc(r._firestore,r._userDataWriter,a.doc.key,a.doc,new ic(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new jc(r._firestore,r._userDataWriter,a.doc.key,a.doc,new ic(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:oV(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function oV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}class aV extends nV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new tn(this.firestore,null,n)}}function Dm(t){t=Nu(t,ir);const e=Nu(t.firestore,wm),n=qI(e),i=new aV(e);return eV(t._query),FL(n,t._query).then(r=>new sV(e,i,t,r))}function lV(t,e){const n=Nu(t.firestore,wm),i=BL(t),r=iV(t.converter,e);return cV(n,[GL(QI(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Jn.exists(!1))]).then(()=>i)}function cV(t,e){return function(i,r){const s=new Bi;return i.asyncQueue.enqueueAndForget(async()=>SL(await LL(i),r,s)),s.promise}(qI(t),e)}(function(e,n=!0){(function(r){so=r})(no),Rn(new yn("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new wm(new tM(i.getProvider("auth-internal")),new sM(i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new W(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new za(c.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),en(X0,"4.7.3",e),en(X0,"4.7.3","esm2017")})();const uV={apiKey:"AIzaSyAVTueD8Zu_yWoSH4FLMx-Sd5KZpqzu-dk",authDomain:"corevia-fitness-tracking.firebaseapp.com",projectId:"corevia-fitness-tracking",storageBucket:"corevia-fitness-tracking.firebasestorage.app",messagingSenderId:"118613268034",appId:"1:118613268034:web:eb0c8db85ee52b60f8ffdb",measurementId:"G-3HT5SN1CDP"},Nm=MT(uV);QN(Nm);const Ph=$L(Nm),Rh=PD(Nm),Lv=t=>{let e;const n=new Set,i=(h,d)=>{const p=typeof h=="function"?h(e):h;if(!Object.is(p,e)){const m=e;e=d??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(y=>y(e,m))}},r=()=>e,l={setState:i,getState:r,getInitialState:()=>c,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{n.clear()}},c=e=t(i,r,l);return l},hV=t=>t?Lv(t):Lv;var iS={exports:{}},rS={},sS={exports:{}},oS={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qs=j;function dV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fV=typeof Object.is=="function"?Object.is:dV,pV=qs.useState,gV=qs.useEffect,mV=qs.useLayoutEffect,yV=qs.useDebugValue;function _V(t,e){var n=e(),i=pV({inst:{value:n,getSnapshot:e}}),r=i[0].inst,s=i[1];return mV(function(){r.value=n,r.getSnapshot=e,Gd(r)&&s({inst:r})},[t,n,e]),gV(function(){return Gd(r)&&s({inst:r}),t(function(){Gd(r)&&s({inst:r})})},[t]),yV(n),n}function Gd(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fV(t,n)}catch{return!0}}function vV(t,e){return e()}var wV=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?vV:_V;oS.useSyncExternalStore=qs.useSyncExternalStore!==void 0?qs.useSyncExternalStore:wV;sS.exports=oS;var EV=sS.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dh=j,TV=EV;function xV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var IV=typeof Object.is=="function"?Object.is:xV,SV=TV.useSyncExternalStore,bV=Dh.useRef,kV=Dh.useEffect,AV=Dh.useMemo,CV=Dh.useDebugValue;rS.useSyncExternalStoreWithSelector=function(t,e,n,i,r){var s=bV(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=AV(function(){function l(m){if(!c){if(c=!0,h=m,m=i(m),r!==void 0&&o.hasValue){var y=o.value;if(r(y,m))return d=y}return d=m}if(y=d,IV(h,m))return y;var E=i(m);return r!==void 0&&r(y,E)?(h=m,y):(h=m,d=E)}var c=!1,h,d,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,i,r]);var a=SV(t,s[0],s[1]);return kV(function(){o.hasValue=!0,o.value=a},[a]),CV(a),a};iS.exports=rS;var PV=iS.exports;const RV=Zw(PV),{useDebugValue:DV}=el,{useSyncExternalStoreWithSelector:NV}=RV;const MV=t=>t;function OV(t,e=MV,n){const i=NV(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return DV(i),i}const Vv=t=>{const e=typeof t=="function"?hV(t):t,n=(i,r)=>OV(e,i,r);return Object.assign(n,e),n},aS=t=>t?Vv(t):Vv;function LV(t,e){let n;try{n=t()}catch{return}return{getItem:r=>{var s;const o=l=>l===null?null:JSON.parse(l,e==null?void 0:e.reviver),a=(s=n.getItem(r))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(r,s)=>n.setItem(r,JSON.stringify(s,e==null?void 0:e.replacer)),removeItem:r=>n.removeItem(r)}}const Ka=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(i){return Ka(i)(n)},catch(i){return this}}}catch(n){return{then(i){return this},catch(i){return Ka(i)(n)}}}},VV=(t,e)=>(n,i,r)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:T=>T,version:0,merge:(T,_)=>({..._,...T}),...e},o=!1;const a=new Set,l=new Set;let c;try{c=s.getStorage()}catch{}if(!c)return t((...T)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...T)},i,r);const h=Ka(s.serialize),d=()=>{const T=s.partialize({...i()});let _;const v=h({state:T,version:s.version}).then(S=>c.setItem(s.name,S)).catch(S=>{_=S});if(_)throw _;return v},p=r.setState;r.setState=(T,_)=>{p(T,_),d()};const m=t((...T)=>{n(...T),d()},i,r);let y;const E=()=>{var T;if(!c)return;o=!1,a.forEach(v=>v(i()));const _=((T=s.onRehydrateStorage)==null?void 0:T.call(s,i()))||void 0;return Ka(c.getItem.bind(c))(s.name).then(v=>{if(v)return s.deserialize(v)}).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==s.version){if(s.migrate)return s.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var S;return y=s.merge(v,(S=i())!=null?S:m),n(y,!0),d()}).then(()=>{_==null||_(y,void 0),o=!0,l.forEach(v=>v(y))}).catch(v=>{_==null||_(void 0,v)})};return r.persist={setOptions:T=>{s={...s,...T},T.getStorage&&(c=T.getStorage())},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>E(),hasHydrated:()=>o,onHydrate:T=>(a.add(T),()=>{a.delete(T)}),onFinishHydration:T=>(l.add(T),()=>{l.delete(T)})},E(),y||m},FV=(t,e)=>(n,i,r)=>{let s={storage:LV(()=>localStorage),partialize:E=>E,version:0,merge:(E,T)=>({...T,...E}),...e},o=!1;const a=new Set,l=new Set;let c=s.storage;if(!c)return t((...E)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...E)},i,r);const h=()=>{const E=s.partialize({...i()});return c.setItem(s.name,{state:E,version:s.version})},d=r.setState;r.setState=(E,T)=>{d(E,T),h()};const p=t((...E)=>{n(...E),h()},i,r);r.getInitialState=()=>p;let m;const y=()=>{var E,T;if(!c)return;o=!1,a.forEach(v=>{var S;return v((S=i())!=null?S:p)});const _=((T=s.onRehydrateStorage)==null?void 0:T.call(s,(E=i())!=null?E:p))||void 0;return Ka(c.getItem.bind(c))(s.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==s.version){if(s.migrate)return[!0,s.migrate(v.state,v.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var S;const[D,M]=v;if(m=s.merge(M,(S=i())!=null?S:p),n(m,!0),D)return h()}).then(()=>{_==null||_(m,void 0),m=i(),o=!0,l.forEach(v=>v(m))}).catch(v=>{_==null||_(void 0,v)})};return r.persist={setOptions:E=>{s={...s,...E},E.storage&&(c=E.storage)},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:E=>(a.add(E),()=>{a.delete(E)}),onFinishHydration:E=>(l.add(E),()=>{l.delete(E)})},s.skipHydration||y(),m||p},jV=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?VV(t,e):FV(t,e),UV=jV,Qr=aS()(UV(t=>({user:null,isAuthenticated:!1,setUser:e=>t({user:e,isAuthenticated:!!e}),logout:()=>t({user:null,isAuthenticated:!1})}),{name:"auth-storage"})),ns=({children:t})=>{const{isAuthenticated:e}=Qr();return e?C.jsx(C.Fragment,{children:t}):C.jsx(ET,{to:"/login",replace:!0})},zV=async()=>{try{const t=new $n,n=(await fx(Rh,t)).user;return{uid:n.uid,displayName:n.displayName||"사용자",email:n.email||"",photoURL:n.photoURL||void 0}}catch(t){return console.error("Google 로그인 에러:",t),null}},BV=async()=>{try{const t=new oa("oidc.kakao"),n=(await fx(Rh,t)).user;return{uid:n.uid,displayName:n.displayName||"사용자",email:n.email||"",photoURL:n.photoURL||void 0}}catch(t){return console.error("Kakao 로그인 에러:",t),null}},$V=async()=>{try{await Rh.signOut()}catch(t){console.error("로그아웃 에러:",t)}},WV=async t=>{try{const e={...t,date:Be.fromDate(new Date(t.date))};return(await lV(kh(Ph,"sessions"),e)).id}catch(e){return console.error("세션 저장 에러:",e),null}},HV=async(t,e)=>{try{const n=Am(kh(Ph,"sessions"),qa("userId","==",t),qa("part","==",e),tS("date","desc"),tV(1)),i=await Dm(n);if(i.empty)return null;const r=i.docs[0],s=r.data();return{...s,id:r.id,date:s.date.toDate()}}catch(n){return console.error("최근 세션 조회 에러:",n),null}},qV=async(t,e)=>{try{const n=Am(kh(Ph,"sessions"),qa("userId","==",t),qa("part","==",e),tS("date","asc"));return(await Dm(n)).docs.map(r=>{const s=r.data(),o=s.mainExercise.sets.filter(a=>a.isSuccess).length;return{date:s.date.toDate(),weight:s.mainExercise.weight,successSets:o}})}catch(n){return console.error("진행 상황 데이터 조회 에러:",n),[]}},KV=async t=>{try{const e=Am(kh(Ph,"faqs"),qa("part","==",t));return(await Dm(e)).docs.map(i=>{const r=i.data();return{id:i.id,...r}})}catch(e){return console.error("FAQ 조회 에러:",e),[]}},GV=()=>{const t=to(),e=n=>t.pathname===n?"text-blue-500":"text-gray-500";return C.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 py-3",children:C.jsxs("div",{className:"container mx-auto flex justify-around items-center",children:[C.jsxs(Xl,{to:"/",className:`flex flex-col items-center ${e("/")}`,children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),C.jsx("span",{className:"text-xs mt-1",children:"홈"})]}),C.jsxs(Xl,{to:"/graph",className:`flex flex-col items-center ${e("/graph")}`,children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),C.jsx("span",{className:"text-xs mt-1",children:"그래프"})]}),C.jsxs(Xl,{to:"/qna",className:`flex flex-col items-center ${e("/qna")}`,children:[C.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),C.jsx("span",{className:"text-xs mt-1",children:"Q&A"})]}),C.jsxs(Xl,{to:"/settings",className:`flex flex-col items-center ${e("/settings")}`,children:[C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),C.jsx("span",{className:"text-xs mt-1",children:"설정"})]})]})})},Yi=({children:t,hideNav:e=!1})=>C.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900",children:[C.jsx("main",{className:"container mx-auto px-4 py-6 pb-20",children:t}),!e&&C.jsx(GV,{})]}),QV=()=>{const{isAuthenticated:t,setUser:e}=Qr(),n=Wr();j.useEffect(()=>{t&&n("/")},[t,n]);const i=async()=>{const s=await zV();s&&(e(s),n("/"))},r=async()=>{const s=await BV();s&&(e(s),n("/"))};return C.jsx(Yi,{hideNav:!0,children:C.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen",children:C.jsxs("div",{className:"w-full max-w-md",children:[C.jsxs("div",{className:"text-center mb-10",children:[C.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-2",children:"Corevia Training Tracker"}),C.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"효율적인 운동 관리를 위한 앱"})]}),C.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[C.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-6 text-center",children:"로그인"}),C.jsxs("div",{className:"space-y-4",children:[C.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center bg-white text-gray-800 border border-gray-300 rounded-md px-4 py-2 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:[C.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[C.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),C.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),C.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),C.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google로 로그인"]}),C.jsxs("button",{onClick:r,className:"w-full flex items-center justify-center bg-yellow-400 text-gray-900 rounded-md px-4 py-2 hover:bg-yellow-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500",children:[C.jsx("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",fill:"none",children:C.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2.1875C6.47812 2.1875 2 5.6875 2 10C2 12.7344 3.65625 15.0938 6.1875 16.4844C5.84375 17.6719 5.14062 20.0625 5.03125 20.5312C4.90625 21.0938 5.28125 21.0938 5.53125 20.9219C5.71875 20.7969 8.58125 18.8906 9.78125 18.1094C10.5 18.2031 11.2344 18.25 12 18.25C17.5219 18.25 22 14.75 22 10C22 5.6875 17.5219 2.1875 12 2.1875Z",fill:"currentColor"})}),"카카오로 로그인"]})]})]})]})})})},ki=aS((t,e)=>({part:null,mainExercise:null,accessoryExercises:[],notes:"",setPart:n=>t({part:n}),setMainExercise:n=>t({mainExercise:n}),updateReps:(n,i)=>t(r=>{if(!r.mainExercise)return r;const s=[...r.mainExercise.sets];return s[n]={...s[n],reps:i,isSuccess:i>=10},{mainExercise:{...r.mainExercise,sets:s}}}),toggleSuccess:n=>t(i=>{if(!i.mainExercise)return i;const r=[...i.mainExercise.sets];return r[n]={...r[n],isSuccess:!r[n].isSuccess},{mainExercise:{...i.mainExercise,sets:r}}}),addAccessoryExercise:n=>t(i=>({accessoryExercises:[...i.accessoryExercises,n]})),removeAccessoryExercise:n=>t(i=>({accessoryExercises:i.accessoryExercises.filter((r,s)=>s!==n)})),setNotes:n=>t({notes:n}),getSuccessSets:()=>{const{mainExercise:n}=e();return n?n.sets.filter(i=>i.isSuccess).length:0},resetSession:()=>t({part:null,mainExercise:null,accessoryExercises:[],notes:""})})),YV=[{value:"chest",label:"가슴",icon:"💪"},{value:"back",label:"등",icon:"🔙"},{value:"shoulder",label:"어깨",icon:"🏋️"},{value:"leg",label:"하체",icon:"🦵"}],XV=()=>{const{user:t}=Qr(),{setPart:e,resetSession:n}=ki(),i=Wr();j.useEffect(()=>{n()},[n]);const r=o=>{e(o),i("/record")},s=new Date().toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"long"});return C.jsxs(Yi,{children:[C.jsxs("div",{className:"mb-8",children:[C.jsxs("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:["안녕하세요, ",(t==null?void 0:t.displayName)||"회원","님!"]}),C.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s})]}),C.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-8",children:[C.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-6",children:"오늘은 어떤 운동을 하시나요?"}),C.jsx("div",{className:"grid grid-cols-2 gap-4",children:YV.map(o=>C.jsxs("button",{onClick:()=>r(o.value),className:"flex flex-col items-center justify-center p-6 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-blue-50 dark:hover:bg-gray-600 transition-colors",children:[C.jsx("span",{className:"text-4xl mb-3",children:o.icon}),C.jsx("span",{className:"text-lg font-medium text-gray-800 dark:text-white",children:o.label})]},o.value))})]})]})},JV=({initialWeight:t=20})=>{const{mainExercise:e,updateReps:n,toggleSuccess:i}=ki(),[r,s]=j.useState(t);j.useEffect(()=>{!e&&r&&ki.setState({mainExercise:{part:ki.getState().part,weight:r,sets:[{reps:0,isSuccess:!1},{reps:0,isSuccess:!1},{reps:0,isSuccess:!1},{reps:0,isSuccess:!1},{reps:0,isSuccess:!1}]}})},[e,r]);const o=l=>{const c=Number(l.target.value);s(c),e&&ki.setState({mainExercise:{...e,weight:c}})},a=(l,c)=>{const h=Number(c.target.value);n(l,h)};return e?C.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-6",children:[C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-gray-700 dark:text-gray-300 font-medium mb-2",children:"무게 (kg)"}),C.jsx("input",{type:"number",value:r,onChange:o,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",min:"0",step:"2.5"})]}),C.jsxs("div",{className:"space-y-4",children:[C.jsx("h3",{className:"text-lg font-medium text-gray-800 dark:text-gray-200",children:"세트"}),e.sets.map((l,c)=>C.jsxs("div",{className:"flex items-center space-x-4",children:[C.jsx("div",{className:"flex-shrink-0 w-8",children:C.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:c+1})}),C.jsx("div",{className:"flex-grow",children:C.jsx("input",{type:"number",value:l.reps||"",onChange:h=>a(c,h),placeholder:"반복 횟수",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",min:"0"})}),C.jsx("div",{className:"flex-shrink-0",children:C.jsx("button",{type:"button",onClick:()=>i(c),className:`px-4 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 ${l.isSuccess?"bg-green-500 text-white focus:ring-green-500":"bg-gray-200 text-gray-700 dark:bg-gray-600 dark:text-gray-200 focus:ring-gray-500"}`,children:l.isSuccess?"성공":"실패"})})]},c))]})]}):null},Qd={chest:["인클라인 덤벨 프레스","케이블 플라이","푸시업","펙덱 플라이"],back:["턱걸이","시티드 로우","랫풀다운","페이스풀"],shoulder:["사이드 레터럴 레이즈","프론트 레이즈","리버스 플라이","오버헤드 프레스"],leg:["레그 익스텐션","레그 컬","카프 레이즈","불가리안 스플릿 스쿼트"]},ZV=({part:t})=>{var l;const{accessoryExercises:e,addAccessoryExercise:n,removeAccessoryExercise:i}=ki(),[r,s]=j.useState({name:Qd[t][0]||"",weight:10,reps:12,sets:3}),o=c=>{const{name:h,value:d}=c.target;s({...r,[h]:h==="name"?d:Number(d)})},a=c=>{c.preventDefault(),n(r),s({...r,name:Qd[t][0]||""})};return C.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-6",children:[C.jsx("h3",{className:"text-lg font-medium text-gray-800 dark:text-gray-200 mb-4",children:"보조 운동"}),e.length>0&&C.jsxs("div",{className:"mb-6",children:[C.jsx("h4",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2",children:"추가된 보조 운동"}),C.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.map((c,h)=>C.jsxs("li",{className:"py-3 flex justify-between items-center",children:[C.jsxs("div",{children:[C.jsx("span",{className:"font-medium",children:c.name}),C.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[c.weight,"kg x ",c.reps,"회 x ",c.sets,"세트"]})]}),C.jsx("button",{type:"button",onClick:()=>i(h),className:"text-red-500 hover:text-red-700",children:"삭제"})]},h))})]}),C.jsxs("form",{onSubmit:a,className:"space-y-4",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-gray-700 dark:text-gray-300 font-medium mb-2",children:"운동 선택"}),C.jsx("select",{name:"name",value:r.name,onChange:o,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:(l=Qd[t])==null?void 0:l.map(c=>C.jsx("option",{value:c,children:c},c))})]}),C.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-gray-700 dark:text-gray-300 font-medium mb-2",children:"무게 (kg)"}),C.jsx("input",{type:"number",name:"weight",value:r.weight,onChange:o,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",min:"0",step:"2.5"})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-gray-700 dark:text-gray-300 font-medium mb-2",children:"반복"}),C.jsx("input",{type:"number",name:"reps",value:r.reps,onChange:o,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",min:"0"})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-gray-700 dark:text-gray-300 font-medium mb-2",children:"세트"}),C.jsx("input",{type:"number",name:"sets",value:r.sets,onChange:o,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",min:"1"})]})]}),C.jsx("div",{children:C.jsx("button",{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"추가하기"})})]})]})},eF={chest:"가슴",back:"등",shoulder:"어깨",leg:"하체"},tF=()=>{const{user:t}=Qr(),{part:e,mainExercise:n,accessoryExercises:i,notes:r,setNotes:s,setMainExercise:o}=ki(),[a,l]=j.useState(null),[c,h]=j.useState(!0),d=Wr();j.useEffect(()=>{if(!e){d("/");return}(async()=>{if(t&&e){h(!0);const y=await HV(t.uid,e);if(l(y),y&&y.mainExercise){const T=y.mainExercise.sets.every(_=>_.isSuccess)?y.mainExercise.weight+2.5:y.mainExercise.weight;o({part:e,weight:T,sets:[{reps:0,isSuccess:!1},{reps:0,isSuccess:!1},{reps:0,isSuccess:!1},{reps:0,isSuccess:!1},{reps:0,isSuccess:!1}]})}h(!1)}})()},[t,e,d,o]);const p=async()=>{if(!t||!e||!n)return;const m={userId:t.uid,date:new Date,part:e,mainExercise:n,accessoryExercises:i,notes:r,isAllSuccess:n.sets.every(E=>E.isSuccess)};await WV(m)&&d("/feedback")};return c?C.jsx(Yi,{children:C.jsx("div",{className:"flex justify-center items-center h-64",children:C.jsx("div",{className:"spinner"})})}):C.jsxs(Yi,{children:[C.jsxs("div",{className:"mb-6",children:[C.jsxs("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:[eF[e]||"운동"," 기록하기"]}),C.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:new Date().toLocaleDateString("ko-KR")})]}),a&&C.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900 rounded-lg p-4 mb-6",children:[C.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2",children:"이전 세션 정보"}),C.jsxs("p",{className:"text-blue-700 dark:text-blue-300",children:["일자: ",new Date(a.date).toLocaleDateString("ko-KR")]}),C.jsxs("p",{className:"text-blue-700 dark:text-blue-300",children:["무게: ",a.mainExercise.weight,"kg"]}),C.jsxs("p",{className:"text-blue-700 dark:text-blue-300",children:["성공 세트: ",a.mainExercise.sets.filter(m=>m.isSuccess).length,"/",a.mainExercise.sets.length]})]}),C.jsx(JV,{initialWeight:a!=null&&a.mainExercise.weight?a.mainExercise.sets.every(m=>m.isSuccess)?a.mainExercise.weight+2.5:a.mainExercise.weight:20}),e&&C.jsx(ZV,{part:e}),C.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-6",children:[C.jsx("h3",{className:"text-lg font-medium text-gray-800 dark:text-gray-200 mb-4",children:"메모"}),C.jsx("textarea",{value:r,onChange:m=>s(m.target.value),placeholder:"오늘의 컨디션이나 특이사항을 기록해보세요.",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",rows:3})]}),C.jsx("div",{className:"fixed bottom-20 left-0 right-0 p-4 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:C.jsx("button",{onClick:p,disabled:!n||n.sets.every(m=>m.reps===0),className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-medium py-3 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"저장하기"})})]})},Fv={chest:"가슴",back:"등",shoulder:"어깨",leg:"하체"},nF=()=>{const{part:t,mainExercise:e,getSuccessSets:n,resetSession:i}=ki(),r=Wr();if(!t||!e)return r("/"),null;const s=n(),o=s===e.sets.length,a=o?e.weight+2.5:e.weight,l=()=>o?"축하합니다! 모든 세트를 성공적으로 완료했습니다. 다음 세션에는 무게를 증가시켜보세요.":s>=3?"좋은 퍼포먼스입니다! 대부분의 세트를 성공했습니다. 다음 세션에서도 같은 무게로 도전해보세요.":s>=1?"몇 세트를 성공했습니다. 다음 세션에서도 같은 무게로 도전하고 더 많은 세트를 성공해보세요.":"이번 세션에서는 모든 세트를 완료하지 못했습니다. 다음 세션에서는 무게를 줄이는 것을 고려해보세요.",c=()=>{i(),r("/")};return C.jsxs(Yi,{children:[C.jsxs("div",{className:"mb-6",children:[C.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"피드백"}),C.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:new Date().toLocaleDateString("ko-KR")})]}),C.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 mb-6",children:[C.jsxs("div",{className:`p-4 mb-6 rounded-lg ${o?"bg-green-100 dark:bg-green-900":"bg-yellow-100 dark:bg-yellow-900"}`,children:[C.jsx("h2",{className:`text-xl font-semibold mb-2 ${o?"text-green-800 dark:text-green-200":"text-yellow-800 dark:text-yellow-200"}`,children:o?"🎉 완벽한 세션!":"🔥 노력하는 중!"}),C.jsx("p",{className:o?"text-green-700 dark:text-green-300":"text-yellow-700 dark:text-yellow-300",children:l()})]}),C.jsxs("div",{className:"mb-6",children:[C.jsx("h3",{className:"text-lg font-medium text-gray-800 dark:text-gray-200 mb-4",children:"세션 요약"}),C.jsxs("div",{className:"space-y-3",children:[C.jsxs("div",{className:"flex justify-between",children:[C.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"운동 부위"}),C.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:Fv[t]})]}),C.jsxs("div",{className:"flex justify-between",children:[C.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"무게"}),C.jsxs("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:[e.weight," kg"]})]}),C.jsxs("div",{className:"flex justify-between",children:[C.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"성공 세트"}),C.jsxs("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:[s," / ",e.sets.length]})]})]})]}),C.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[C.jsx("h3",{className:"text-lg font-medium text-gray-800 dark:text-gray-200 mb-4",children:"다음 목표"}),C.jsx("div",{className:"bg-blue-50 dark:bg-blue-900 rounded-lg p-4",children:C.jsxs("p",{className:"text-blue-700 dark:text-blue-300",children:["다음 ",Fv[t]," 운동 세션에서는 ",C.jsxs("strong",{children:[a," kg"]}),"으로 도전해보세요!"]})})]})]}),C.jsx("div",{className:"fixed bottom-20 left-0 right-0 p-4 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:C.jsx("button",{onClick:c,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-medium py-3 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"완료"})})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function pl(t){return t+.5|0}const Ai=(t,e,n)=>Math.max(Math.min(t,n),e);function Ho(t){return Ai(pl(t*2.55),0,255)}function Wi(t){return Ai(pl(t*255),0,255)}function Bn(t){return Ai(pl(t/2.55)/100,0,1)}function jv(t){return Ai(pl(t*100),0,100)}const qt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Sp=[..."0123456789ABCDEF"],iF=t=>Sp[t&15],rF=t=>Sp[(t&240)>>4]+Sp[t&15],rc=t=>(t&240)>>4===(t&15),sF=t=>rc(t.r)&&rc(t.g)&&rc(t.b)&&rc(t.a);function oF(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&qt[t[1]]*17,g:255&qt[t[2]]*17,b:255&qt[t[3]]*17,a:e===5?qt[t[4]]*17:255}:(e===7||e===9)&&(n={r:qt[t[1]]<<4|qt[t[2]],g:qt[t[3]]<<4|qt[t[4]],b:qt[t[5]]<<4|qt[t[6]],a:e===9?qt[t[7]]<<4|qt[t[8]]:255})),n}const aF=(t,e)=>t<255?e(t):"";function lF(t){var e=sF(t)?iF:rF;return t?"#"+e(t.r)+e(t.g)+e(t.b)+aF(t.a,e):void 0}const cF=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function lS(t,e,n){const i=e*Math.min(n,1-n),r=(s,o=(s+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function uF(t,e,n){const i=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function hF(t,e,n){const i=lS(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function dF(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function Mm(t){const n=t.r/255,i=t.g/255,r=t.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;let l,c,h;return s!==o&&(h=s-o,c=a>.5?h/(2-s-o):h/(s+o),l=dF(n,i,r,h,s),l=l*60+.5),[l|0,c||0,a]}function Om(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Wi)}function Lm(t,e,n){return Om(lS,t,e,n)}function fF(t,e,n){return Om(hF,t,e,n)}function pF(t,e,n){return Om(uF,t,e,n)}function cS(t){return(t%360+360)%360}function gF(t){const e=cF.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?Ho(+e[5]):Wi(+e[5]));const r=cS(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=fF(r,s,o):e[1]==="hsv"?i=pF(r,s,o):i=Lm(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}function mF(t,e){var n=Mm(t);n[0]=cS(n[0]+e),n=Lm(n),t.r=n[0],t.g=n[1],t.b=n[2]}function yF(t){if(!t)return;const e=Mm(t),n=e[0],i=jv(e[1]),r=jv(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${Bn(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const Uv={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},zv={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function _F(){const t={},e=Object.keys(zv),n=Object.keys(Uv);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,Uv[s]);s=parseInt(zv[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let sc;function vF(t){sc||(sc=_F(),sc.transparent=[0,0,0,0]);const e=sc[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const wF=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function EF(t){const e=wF.exec(t);let n=255,i,r,s;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?Ho(o):Ai(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?Ho(i):Ai(i,0,255)),r=255&(e[4]?Ho(r):Ai(r,0,255)),s=255&(e[6]?Ho(s):Ai(s,0,255)),{r:i,g:r,b:s,a:n}}}function TF(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Bn(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Yd=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,is=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function xF(t,e,n){const i=is(Bn(t.r)),r=is(Bn(t.g)),s=is(Bn(t.b));return{r:Wi(Yd(i+n*(is(Bn(e.r))-i))),g:Wi(Yd(r+n*(is(Bn(e.g))-r))),b:Wi(Yd(s+n*(is(Bn(e.b))-s))),a:t.a+n*(e.a-t.a)}}function oc(t,e,n){if(t){let i=Mm(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=Lm(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function uS(t,e){return t&&Object.assign(e||{},t)}function Bv(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Wi(t[3]))):(e=uS(t,{r:0,g:0,b:0,a:1}),e.a=Wi(e.a)),e}function IF(t){return t.charAt(0)==="r"?EF(t):gF(t)}class Ga{constructor(e){if(e instanceof Ga)return e;const n=typeof e;let i;n==="object"?i=Bv(e):n==="string"&&(i=oF(e)||vF(e)||IF(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=uS(this._rgb);return e&&(e.a=Bn(e.a)),e}set rgb(e){this._rgb=Bv(e)}rgbString(){return this._valid?TF(this._rgb):void 0}hexString(){return this._valid?lF(this._rgb):void 0}hslString(){return this._valid?yF(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=xF(this._rgb,e._rgb,n)),this}clone(){return new Ga(this.rgb)}alpha(e){return this._rgb.a=Wi(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=pl(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return oc(this._rgb,2,e),this}darken(e){return oc(this._rgb,2,-e),this}saturate(e){return oc(this._rgb,1,e),this}desaturate(e){return oc(this._rgb,1,-e),this}rotate(e){return mF(this._rgb,e),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ln(){}const SF=(()=>{let t=0;return()=>t++})();function de(t){return t==null}function Ae(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ce(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Qe(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Vt(t,e){return Qe(t)?t:e}function ie(t,e){return typeof t>"u"?e:t}const bF=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function _e(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function he(t,e,n,i){let r,s,o;if(Ae(t))if(s=t.length,i)for(r=s-1;r>=0;r--)e.call(n,t[r],r);else for(r=0;r<s;r++)e.call(n,t[r],r);else if(ce(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function Ou(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Lu(t){if(Ae(t))return t.map(Lu);if(ce(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=Lu(t[n[r]]);return e}return t}function hS(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function kF(t,e,n,i){if(!hS(t))return;const r=e[t],s=n[t];ce(r)&&ce(s)?Qa(r,s,i):e[t]=Lu(s)}function Qa(t,e,n){const i=Ae(e)?e:[e],r=i.length;if(!ce(t))return t;n=n||{};const s=n.merger||kF;let o;for(let a=0;a<r;++a){if(o=i[a],!ce(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)s(l[c],t,o,n)}return t}function da(t,e){return Qa(t,e,{merger:AF})}function AF(t,e,n){if(!hS(t))return;const i=e[t],r=n[t];ce(i)&&ce(r)?da(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Lu(r))}const $v={"":t=>t,x:t=>t.x,y:t=>t.y};function CF(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function PF(t){const e=CF(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function Vu(t,e){return($v[e]||($v[e]=PF(e)))(t)}function Vm(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Fu=t=>typeof t<"u",Xi=t=>typeof t=="function",Wv=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function RF(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const $e=Math.PI,nn=2*$e,DF=nn+$e,ju=Number.POSITIVE_INFINITY,NF=$e/180,Ut=$e/2,cr=$e/4,Hv=$e*2/3,Ci=Math.log10,Ks=Math.sign;function fa(t,e,n){return Math.abs(t-e)<n}function qv(t){const e=Math.round(t);t=fa(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Ci(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function MF(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}function OF(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Ya(t){return!OF(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function LF(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function dS(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Pi(t){return t*($e/180)}function Fm(t){return t*(180/$e)}function Kv(t){if(!Qe(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function VF(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*$e&&(s+=nn),{angle:s,distance:r}}function bp(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function FF(t,e){return(t-e+DF)%nn-$e}function un(t){return(t%nn+nn)%nn}function fS(t,e,n,i){const r=un(t),s=un(e),o=un(n),a=un(s-r),l=un(o-r),c=un(r-s),h=un(r-o);return r===s||r===o||i&&s===o||a>l&&c<h}function Xt(t,e,n){return Math.max(e,Math.min(n,t))}function jF(t){return Xt(t,-32768,32767)}function qo(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function jm(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const Ir=(t,e,n,i)=>jm(t,n,i?r=>{const s=t[r][e];return s<n||s===n&&t[r+1][e]===n}:r=>t[r][e]<n),UF=(t,e,n)=>jm(t,n,i=>t[i][e]>=n);function zF(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const pS=["push","pop","shift","splice","unshift"];function BF(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),pS.forEach(n=>{const i="_onData"+Vm(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function Gv(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(pS.forEach(s=>{delete t[s]}),delete t._chartjs)}function $F(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const gS=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function mS(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,gS.call(window,()=>{i=!1,t.apply(e,n)}))}}function WF(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const Um=t=>t==="start"?"left":t==="end"?"right":"center",ft=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,HF=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function qF(t,e,n){const i=e.length;let r=0,s=i;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=o.axis,{min:d,max:p,minDefined:m,maxDefined:y}=o.getUserBounds();if(m){if(r=Math.min(Ir(l,h,d).lo,n?i:Ir(e,h,o.getPixelForValue(d)).lo),c){const E=l.slice(0,r+1).reverse().findIndex(T=>!de(T[a.axis]));r-=Math.max(0,E)}r=Xt(r,0,i-1)}if(y){let E=Math.max(Ir(l,o.axis,p,!0).hi+1,n?0:Ir(e,h,o.getPixelForValue(p),!0).hi+1);if(c){const T=l.slice(E-1).findIndex(_=>!de(_[a.axis]));E+=Math.max(0,T)}s=Xt(E,r,i)-r}else s=i-r}return{start:r,count:s}}function KF(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const ac=t=>t===0||t===1,Qv=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*nn/n)),Yv=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*nn/n)+1,pa={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Ut)+1,easeOutSine:t=>Math.sin(t*Ut),easeInOutSine:t=>-.5*(Math.cos($e*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>ac(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>ac(t)?t:Qv(t,.075,.3),easeOutElastic:t=>ac(t)?t:Yv(t,.075,.3),easeInOutElastic(t){return ac(t)?t:t<.5?.5*Qv(t*2,.1125,.45):.5+.5*Yv(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-pa.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?pa.easeInBounce(t*2)*.5:pa.easeOutBounce(t*2-1)*.5+.5};function zm(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Xv(t){return zm(t)?t:new Ga(t)}function Xd(t){return zm(t)?t:new Ga(t).saturate(.5).darken(.1).hexString()}const GF=["x","y","borderWidth","radius","tension"],QF=["color","borderColor","backgroundColor"];function YF(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:QF},numbers:{type:"number",properties:GF}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function XF(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Jv=new Map;function JF(t,e){e=e||{};const n=t+JSON.stringify(e);let i=Jv.get(n);return i||(i=new Intl.NumberFormat(t,e),Jv.set(n,i)),i}function Bm(t,e,n){return JF(e,n).format(t)}const yS={values(t){return Ae(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=ZF(t,n)}const o=Ci(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Bm(t,i,l)},logarithmic(t,e,n){if(t===0)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(Ci(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?yS.numeric.call(this,t,e,n):""}};function ZF(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Nh={formatters:yS};function e4(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Nh.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ur=Object.create(null),kp=Object.create(null);function ga(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function Jd(t,e,n){return typeof e=="string"?Qa(ga(t,e),n):Qa(ga(t,""),e)}class t4{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>Xd(r.backgroundColor),this.hoverBorderColor=(i,r)=>Xd(r.borderColor),this.hoverColor=(i,r)=>Xd(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Jd(this,e,n)}get(e){return ga(this,e)}describe(e,n){return Jd(kp,e,n)}override(e,n){return Jd(Ur,e,n)}route(e,n,i,r){const s=ga(this,e),o=ga(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return ce(l)?Object.assign({},c,l):ie(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Oe=new t4({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[YF,XF,e4]);function n4(t){return!t||de(t.size)||de(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Uu(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function i4(t,e,n,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,h,d,p;for(l=0;l<a;l++)if(d=n[l],d!=null&&!Ae(d))o=Uu(t,r,s,o,d);else if(Ae(d))for(c=0,h=d.length;c<h;c++)p=d[c],p!=null&&!Ae(p)&&(o=Uu(t,r,s,o,p));t.restore();const m=s.length/2;if(m>n.length){for(l=0;l<m;l++)delete r[s[l]];s.splice(0,m)}return o}function ur(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function Zv(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Ap(t,e,n,i){_S(t,e,n,i,null)}function _S(t,e,n,i,r){let s,o,a,l,c,h,d,p;const m=e.pointStyle,y=e.rotation,E=e.radius;let T=(y||0)*NF;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(T),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(E)||E<=0)){switch(t.beginPath(),m){default:r?t.ellipse(n,i,r/2,E,0,0,nn):t.arc(n,i,E,0,nn),t.closePath();break;case"triangle":h=r?r/2:E,t.moveTo(n+Math.sin(T)*h,i-Math.cos(T)*E),T+=Hv,t.lineTo(n+Math.sin(T)*h,i-Math.cos(T)*E),T+=Hv,t.lineTo(n+Math.sin(T)*h,i-Math.cos(T)*E),t.closePath();break;case"rectRounded":c=E*.516,l=E-c,o=Math.cos(T+cr)*l,d=Math.cos(T+cr)*(r?r/2-c:l),a=Math.sin(T+cr)*l,p=Math.sin(T+cr)*(r?r/2-c:l),t.arc(n-d,i-a,c,T-$e,T-Ut),t.arc(n+p,i-o,c,T-Ut,T),t.arc(n+d,i+a,c,T,T+Ut),t.arc(n-p,i+o,c,T+Ut,T+$e),t.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*E,h=r?r/2:l,t.rect(n-h,i-l,2*h,2*l);break}T+=cr;case"rectRot":d=Math.cos(T)*(r?r/2:E),o=Math.cos(T)*E,a=Math.sin(T)*E,p=Math.sin(T)*(r?r/2:E),t.moveTo(n-d,i-a),t.lineTo(n+p,i-o),t.lineTo(n+d,i+a),t.lineTo(n-p,i+o),t.closePath();break;case"crossRot":T+=cr;case"cross":d=Math.cos(T)*(r?r/2:E),o=Math.cos(T)*E,a=Math.sin(T)*E,p=Math.sin(T)*(r?r/2:E),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+p,i-o),t.lineTo(n-p,i+o);break;case"star":d=Math.cos(T)*(r?r/2:E),o=Math.cos(T)*E,a=Math.sin(T)*E,p=Math.sin(T)*(r?r/2:E),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+p,i-o),t.lineTo(n-p,i+o),T+=cr,d=Math.cos(T)*(r?r/2:E),o=Math.cos(T)*E,a=Math.sin(T)*E,p=Math.sin(T)*(r?r/2:E),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+p,i-o),t.lineTo(n-p,i+o);break;case"line":o=r?r/2:Math.cos(T)*E,a=Math.sin(T)*E,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(T)*(r?r/2:E),i+Math.sin(T)*E);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Yn(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function $m(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Wm(t){t.restore()}function r4(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else r==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function s4(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function o4(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),de(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function a4(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,h=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function l4(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function zr(t,e,n,i,r,s={}){const o=Ae(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=r.string,o4(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&l4(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),de(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,i,s.maxWidth)),t.fillText(c,n,i,s.maxWidth),a4(t,n,i,c,s),i+=Number(r.lineHeight);t.restore()}function zu(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*$e,$e,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,$e,Ut,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Ut,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-Ut,!0),t.lineTo(n+o.topLeft,i)}const c4=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,u4=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function h4(t,e){const n=(""+t).match(c4);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const d4=t=>+t||0;function vS(t,e){const n={},i=ce(e),r=i?Object.keys(e):e,s=ce(t)?i?o=>ie(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=d4(s(o));return n}function f4(t){return vS(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Cs(t){return vS(t,["topLeft","topRight","bottomLeft","bottomRight"])}function vt(t){const e=f4(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function qe(t,e){t=t||{},e=e||Oe.font;let n=ie(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=ie(t.style,e.style);i&&!(""+i).match(u4)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:ie(t.family,e.family),lineHeight:h4(ie(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:ie(t.weight,e.weight),string:""};return r.string=n4(r),r}function lc(t,e,n,i){let r=!0,s,o,a;for(s=0,o=t.length;s<o;++s)if(a=t[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),r=!1),n!==void 0&&Ae(a)&&(a=a[n%a.length],r=!1),a!==void 0))return i&&!r&&(i.cacheable=!1),a}function p4(t,e,n){const{min:i,max:r}=t,s=bF(e,(r-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function rr(t,e){return Object.assign(Object.create(t),e)}function Hm(t,e=[""],n,i,r=()=>t[0]){const s=n||t;typeof i>"u"&&(i=xS("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>Hm([a,...t],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return ES(a,l,()=>T4(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return tw(a).includes(l)},ownKeys(a){return tw(a)},set(a,l,c){const h=a._storage||(a._storage=r());return a[l]=h[l]=c,delete a._keys,!0}})}function Gs(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:wS(t,i),setContext:s=>Gs(t,s,n,i),override:s=>Gs(t.override(s),e,n,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return ES(s,o,()=>m4(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function wS(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:Xi(n)?n:()=>n,isIndexable:Xi(i)?i:()=>i}}const g4=(t,e)=>t?t+Vm(e):e,qm=(t,e)=>ce(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function ES(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function m4(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];return Xi(a)&&o.isScriptable(e)&&(a=y4(e,a,t,n)),Ae(a)&&a.length&&(a=_4(e,a,t,o.isIndexable)),qm(e,a)&&(a=Gs(a,r,s&&s[e],o)),a}function y4(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||i);return a.delete(t),qm(t,l)&&(l=Km(r._scopes,r,t,l)),l}function _4(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&i(t))return e[s.index%e.length];if(ce(e[0])){const l=e,c=r._scopes.filter(h=>h!==l);e=[];for(const h of l){const d=Km(c,r,t,h);e.push(Gs(d,s,o&&o[t],a))}}return e}function TS(t,e,n){return Xi(t)?t(e,n):t}const v4=(t,e)=>t===!0?e:typeof t=="string"?Vu(e,t):void 0;function w4(t,e,n,i,r){for(const s of e){const o=v4(n,s);if(o){t.add(o);const a=TS(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function Km(t,e,n,i){const r=e._rootScopes,s=TS(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=ew(a,o,n,s||n,i);return l===null||typeof s<"u"&&s!==n&&(l=ew(a,o,s,l,i),l===null)?!1:Hm(Array.from(a),[""],r,s,()=>E4(e,n,i))}function ew(t,e,n,i,r){for(;n;)n=w4(t,e,n,i,r);return n}function E4(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return Ae(r)&&ce(n)?n:r||{}}function T4(t,e,n,i){let r;for(const s of e)if(r=xS(g4(s,t),n),typeof r<"u")return qm(t,r)?Km(n,i,t,r):r}function xS(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function tw(t){let e=t._keys;return e||(e=t._keys=x4(t._scopes)),e}function x4(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}const I4=Number.EPSILON||1e-14,Qs=(t,e)=>e<t.length&&!t[e].skip&&t[e],IS=t=>t==="x"?"y":"x";function S4(t,e,n,i){const r=t.skip?e:t,s=e,o=n.skip?e:n,a=bp(s,r),l=bp(o,s);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const d=i*c,p=i*h;return{previous:{x:s.x-d*(o.x-r.x),y:s.y-d*(o.y-r.y)},next:{x:s.x+p*(o.x-r.x),y:s.y+p*(o.y-r.y)}}}function b4(t,e,n){const i=t.length;let r,s,o,a,l,c=Qs(t,0);for(let h=0;h<i-1;++h)if(l=c,c=Qs(t,h+1),!(!l||!c)){if(fa(e[h],0,I4)){n[h]=n[h+1]=0;continue}r=n[h]/e[h],s=n[h+1]/e[h],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=r*o*e[h],n[h+1]=s*o*e[h])}}function k4(t,e,n="x"){const i=IS(n),r=t.length;let s,o,a,l=Qs(t,0);for(let c=0;c<r;++c){if(o=a,a=l,l=Qs(t,c+1),!a)continue;const h=a[n],d=a[i];o&&(s=(h-o[n])/3,a[`cp1${n}`]=h-s,a[`cp1${i}`]=d-s*e[c]),l&&(s=(l[n]-h)/3,a[`cp2${n}`]=h+s,a[`cp2${i}`]=d+s*e[c])}}function A4(t,e="x"){const n=IS(e),i=t.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=Qs(t,0);for(o=0;o<i;++o)if(a=l,l=c,c=Qs(t,o+1),!!l){if(c){const h=c[e]-l[e];r[o]=h!==0?(c[n]-l[n])/h:0}s[o]=a?c?Ks(r[o-1])!==Ks(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}b4(t,r,s),k4(t,s,e)}function cc(t,e,n){return Math.max(Math.min(t,n),e)}function C4(t,e){let n,i,r,s,o,a=Yn(t[0],e);for(n=0,i=t.length;n<i;++n)o=s,s=a,a=n<i-1&&Yn(t[n+1],e),s&&(r=t[n],o&&(r.cp1x=cc(r.cp1x,e.left,e.right),r.cp1y=cc(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=cc(r.cp2x,e.left,e.right),r.cp2y=cc(r.cp2y,e.top,e.bottom)))}function P4(t,e,n,i,r){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")A4(t,r);else{let c=i?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=S4(c,a,t[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&C4(t,n)}function Gm(){return typeof window<"u"&&typeof document<"u"}function Qm(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Bu(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const Mh=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function R4(t,e){return Mh(t).getPropertyValue(e)}const D4=["top","right","bottom","left"];function Cr(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=D4[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const N4=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function M4(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(N4(r,s,t.target))a=r,l=s;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function mr(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=Mh(n),s=r.boxSizing==="border-box",o=Cr(r,"padding"),a=Cr(r,"border","width"),{x:l,y:c,box:h}=M4(t,n),d=o.left+(h&&a.left),p=o.top+(h&&a.top);let{width:m,height:y}=e;return s&&(m-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-d)/m*n.width/i),y:Math.round((c-p)/y*n.height/i)}}function O4(t,e,n){let i,r;if(e===void 0||n===void 0){const s=t&&Qm(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Mh(s),l=Cr(a,"border","width"),c=Cr(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=Bu(a.maxWidth,s,"clientWidth"),r=Bu(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:i||ju,maxHeight:r||ju}}const uc=t=>Math.round(t*10)/10;function L4(t,e,n,i){const r=Mh(t),s=Cr(r,"margin"),o=Bu(r.maxWidth,t,"clientWidth")||ju,a=Bu(r.maxHeight,t,"clientHeight")||ju,l=O4(t,e,n);let{width:c,height:h}=l;if(r.boxSizing==="content-box"){const p=Cr(r,"border","width"),m=Cr(r,"padding");c-=m.width+p.width,h-=m.height+p.height}return c=Math.max(0,c-s.width),h=Math.max(0,i?c/i:h-s.height),c=uc(Math.min(c,o,l.maxWidth)),h=uc(Math.min(h,a,l.maxHeight)),c&&!h&&(h=uc(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,c=uc(Math.floor(h*i))),{width:c,height:h}}function nw(t,e,n){const i=e||1,r=Math.floor(t.height*i),s=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const V4=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Gm()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function iw(t,e){const n=R4(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function yr(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function F4(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function j4(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=yr(t,r,n),a=yr(r,s,n),l=yr(s,e,n),c=yr(o,a,n),h=yr(a,l,n);return yr(c,h,n)}const U4=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},z4=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Ps(t,e,n){return t?U4(e,n):z4()}function SS(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function bS(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function kS(t){return t==="angle"?{between:fS,compare:FF,normalize:un}:{between:qo,compare:(e,n)=>e-n,normalize:e=>e}}function rw({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:r}}function B4(t,e,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=kS(i),l=e.length;let{start:c,end:h,loop:d}=t,p,m;if(d){for(c+=l,h+=l,p=0,m=l;p<m&&o(a(e[c%l][i]),r,s);++p)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:d,style:t.style}}function $4(t,e,n){if(!n)return[t];const{property:i,start:r,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=kS(i),{start:h,end:d,loop:p,style:m}=B4(t,e,n),y=[];let E=!1,T=null,_,v,S;const D=()=>l(r,S,_)&&a(r,S)!==0,M=()=>a(s,_)===0||l(s,S,_),L=()=>E||D(),I=()=>!E||M();for(let w=h,b=h;w<=d;++w)v=e[w%o],!v.skip&&(_=c(v[i]),_!==S&&(E=l(_,r,s),T===null&&L()&&(T=a(_,r)===0?w:b),T!==null&&I()&&(y.push(rw({start:T,end:w,loop:p,count:o,style:m})),T=null),b=w,S=_));return T!==null&&y.push(rw({start:T,end:d,loop:p,count:o,style:m})),y}function W4(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const s=$4(i[r],t.points,e);s.length&&n.push(...s)}return n}function H4(t,e,n,i){let r=0,s=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(s+=r);s>r&&t[s%e].skip;)s--;return s%=e,{start:r,end:s}}function q4(t,e,n,i){const r=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%r];c.skip||c.stop?a.skip||(i=!1,s.push({start:e%r,end:(l-1)%r,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function K4(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:o,end:a}=H4(n,r,s,i);if(i===!0)return sw(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+r:a,c=!!t._fullLoop&&o===0&&a===r-1;return sw(t,q4(n,o,l,c),n,e)}function sw(t,e,n,i){return!i||!i.setContext||!n?e:G4(t,e,n,i)}function G4(t,e,n,i){const r=t._chart.getContext(),s=ow(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let h=s,d=e[0].start,p=d;function m(y,E,T,_){const v=a?-1:1;if(y!==E){for(y+=l;n[y%l].skip;)y-=v;for(;n[E%l].skip;)E+=v;y%l!==E%l&&(c.push({start:y%l,end:E%l,loop:T,style:_}),h=_,d=E%l)}}for(const y of e){d=a?d:y.start;let E=n[d%l],T;for(p=d+1;p<=y.end;p++){const _=n[p%l];T=ow(i.setContext(rr(r,{type:"segment",p0:E,p1:_,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:o}))),Q4(T,h)&&m(d,p-1,y.loop,h),E=_,h=T}d<p-1&&m(d,p-1,y.loop,h)}return c}function ow(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Q4(t,e){if(!e)return!1;const n=[],i=function(r,s){return zm(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function hc(t,e,n){return t.options.clip?t[n]:e[n]}function Y4(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:hc(n,e,"left"),right:hc(n,e,"right"),top:hc(i,e,"top"),bottom:hc(i,e,"bottom")}:e}function X4(t,e){const n=e._clip;if(n.disabled)return!1;const i=Y4(e,t.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class J4{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const s=n.listeners[r],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=gS.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Fn=new J4;const aw="transparent",Z4={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=Xv(t||aw),r=i.valid&&Xv(e||aw);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class ej{constructor(e,n,i,r){const s=n[i];r=lc([e.to,r,s,e.from]);const o=lc([e.from,s,r]);this._active=!0,this._fn=e.fn||Z4[e.type||typeof o],this._easing=pa[e.easing]||pa.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=lc([e.to,n,r,e.from]),this._from=lc([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=s;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class AS{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ce(e))return;const n=Object.keys(Oe.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!ce(s))return;const o={};for(const a of n)o[a]=s[a];(Ae(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,r=nj(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&tj(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,n));continue}const h=n[c];let d=s[c];const p=i.get(c);if(d)if(p&&d.active()){d.update(p,h,a);continue}else d.cancel();if(!p||!p.duration){e[c]=h;continue}s[c]=d=new ej(p,e,c,h),r.push(d)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return Fn.add(this._chart,i),!0}}function tj(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=t[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function nj(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function lw(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function ij(t,e,n){if(n===!1)return!1;const i=lw(t,n),r=lw(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function rj(t){let e,n,i,r;return ce(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function CS(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function cw(t,e,n,i={}){const r=t.keys,s=i.mode==="single";let o,a,l,c;if(e===null)return;let h=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(h=!0,i.all)continue;break}c=t.values[l],Qe(c)&&(s||e===0||Ks(e)===Ks(c))&&(e+=c)}return!h&&!i.all?0:e}function sj(t,e){const{iScale:n,vScale:i}=e,r=n.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[r]:h,[s]:t[h]};return a}function Zd(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function oj(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function aj(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function lj(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function uw(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function hw(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,h=oj(s,o,i),d=e.length;let p;for(let m=0;m<d;++m){const y=e[m],{[l]:E,[c]:T}=y,_=y._stacks||(y._stacks={});p=_[c]=lj(r,h,E),p[a]=T,p._top=uw(p,o,!0,i.type),p._bottom=uw(p,o,!1,i.type);const v=p._visualValues||(p._visualValues={});v[a]=T}}function ef(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function cj(t,e){return rr(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function uj(t,e,n){return rr(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function No(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const tf=t=>t==="reset"||t==="none",dw=(t,e)=>e?t:Object.assign({},t),hj=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:CS(n,!0),values:null};class ma{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Zd(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&No(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(d,p,m,y)=>d==="x"?p:d==="r"?y:m,s=n.xAxisID=ie(i.xAxisID,ef(e,"x")),o=n.yAxisID=ie(i.yAxisID,ef(e,"y")),a=n.rAxisID=ie(i.rAxisID,ef(e,"r")),l=n.indexAxis,c=n.iAxisID=r(l,s,o,a),h=n.vAxisID=r(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Gv(this._data,this),e._stacked&&No(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(ce(n)){const r=this._cachedMeta;this._data=sj(n,r)}else if(i!==n){if(i){Gv(i,this);const r=this._cachedMeta;No(r),r._parsed=[]}n&&Object.isExtensible(n)&&BF(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=Zd(n.vScale,n),n.stack!==i.stack&&(r=!0,No(n),n.stack=i.stack),this._resyncElements(e),(r||s!==n._stacked)&&(hw(this,n._parsed),n._stacked=Zd(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=e===0&&n===r.length?!0:i._sorted,c=e>0&&i._parsed[e-1],h,d,p;if(this._parsing===!1)i._parsed=r,i._sorted=!0,p=r;else{Ae(r[e])?p=this.parseArrayData(i,r,e,n):ce(r[e])?p=this.parseObjectData(i,r,e,n):p=this.parsePrimitiveData(i,r,e,n);const m=()=>d[a]===null||c&&d[a]<c[a];for(h=0;h<n;++h)i._parsed[h+e]=d=p[h],l&&(m()&&(l=!1),c=d);i._sorted=l}o&&hw(this,p)}parsePrimitiveData(e,n,i,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),h=s===o,d=new Array(r);let p,m,y;for(p=0,m=r;p<m;++p)y=p+i,d[p]={[a]:h||s.parse(c[y],y),[l]:o.parse(n[y],y)};return d}parseArrayData(e,n,i,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,c,h,d;for(l=0,c=r;l<c;++l)h=l+i,d=n[h],a[l]={x:s.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(e,n,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let h,d,p,m;for(h=0,d=r;h<d;++h)p=h+i,m=n[p],c[h]={x:s.parse(Vu(m,a),p),y:o.parse(Vu(m,l),p)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:CS(r,!0),values:n._stacks[e.axis]._visualValues};return cw(a,o,s.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const s=i[n.axis];let o=s===null?NaN:s;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,o=cw(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,a=this._getOtherScale(e),l=hj(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=aj(a);let p,m;function y(){m=r[p];const E=m[a.axis];return!Qe(m[e.axis])||h>E||d<E}for(p=0;p<o&&!(!y()&&(this.updateRangeFromParsed(c,e,m,l),s));++p);if(s){for(p=o-1;p>=0;--p)if(!y()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=n.length;r<s;++r)o=n[r][e.axis],Qe(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=rj(ie(this.options.clip,ij(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const d=r[h];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=uj(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=cj(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&Fu(i);if(a)return dw(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],p=c.getOptionScopes(this.getDataset(),h),m=Object.keys(Oe.elements[e]),y=()=>this.getContext(i,r,n),E=c.resolveNamedOptions(p,m,y,d);return E.$shared&&(E.$shared=l,s[o]=Object.freeze(dw(E,l))),E}_resolveAnimations(e,n,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),p=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(p,this.getContext(e,i,n))}const c=new AS(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||tf(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:o}}updateElement(e,n,i,r){tf(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!tf(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=i.length,s=n.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,n,i=!0){const r=this._cachedMeta,s=r.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),i&&this.updateElements(s,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&No(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Y(ma,"defaults",{}),Y(ma,"datasetElementType",null),Y(ma,"dataElementType",null);class Uc extends ma{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=qF(n,r,o);this._drawStart=a,this._drawCount=l,KF(n)&&(a=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(r,a,l,e)}updateElements(e,n,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,r),p=o.axis,m=a.axis,{spanGaps:y,segment:E}=this.options,T=Ya(y)?y:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||s||r==="none",v=n+i,S=e.length;let D=n>0&&this.getParsed(n-1);for(let M=0;M<S;++M){const L=e[M],I=_?L:{};if(M<n||M>=v){I.skip=!0;continue}const w=this.getParsed(M),b=de(w[m]),k=I[p]=o.getPixelForValue(w[p],M),P=I[m]=s||b?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,w,l):w[m],M);I.skip=isNaN(k)||isNaN(P)||b,I.stop=M>0&&Math.abs(w[p]-D[p])>T,E&&(I.parsed=w,I.raw=c.data[M]),d&&(I.options=h||this.resolveDataElementOptions(M,L.active?"active":r)),_||this.updateElement(L,M,I,r),D=w}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Y(Uc,"id","line"),Y(Uc,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Y(Uc,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function hr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ym{constructor(e){Y(this,"options");this.options=e||{}}static override(e){Object.assign(Ym.prototype,e)}init(){}formats(){return hr()}parse(){return hr()}format(){return hr()}add(){return hr()}diff(){return hr()}startOf(){return hr()}endOf(){return hr()}}var dj={_date:Ym};function fj(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?UF:Ir;if(i){if(r._sharedOptions){const h=s[0],d=typeof h.getRange=="function"&&h.getRange(e);if(d){const p=c(s,e,n-d),m=c(s,e,n+d);return{lo:p.lo,hi:m.hi}}}}else{const h=c(s,e,n);if(l){const{vScale:d}=r._cachedMeta,{_parsed:p}=t,m=p.slice(0,h.lo+1).reverse().findIndex(E=>!de(E[d.axis]));h.lo-=Math.max(0,m);const y=p.slice(h.hi).findIndex(E=>!de(E[d.axis]));h.hi+=Math.max(0,y)}return h}}return{lo:0,hi:s.length-1}}function gl(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:h}=s[a],{lo:d,hi:p}=fj(s[a],e,o,r);for(let m=d;m<=p;++m){const y=h[m];y.skip||i(y,c,m)}}}function pj(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function nf(t,e,n,i,r){const s=[];return!r&&!t.isPointInArea(e)||gl(t,n,e,function(a,l,c){!r&&!Yn(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function gj(t,e,n,i){let r=[];function s(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:d}=VF(o,{x:e.x,y:e.y});fS(d,c,h)&&r.push({element:o,datasetIndex:a,index:l})}return gl(t,n,e,s),r}function mj(t,e,n,i,r,s){let o=[];const a=pj(n);let l=Number.POSITIVE_INFINITY;function c(h,d,p){const m=h.inRange(e.x,e.y,r);if(i&&!m)return;const y=h.getCenterPoint(r);if(!(!!s||t.isPointInArea(y))&&!m)return;const T=a(e,y);T<l?(o=[{element:h,datasetIndex:d,index:p}],l=T):T===l&&o.push({element:h,datasetIndex:d,index:p})}return gl(t,n,e,c),o}function rf(t,e,n,i,r,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!i?gj(t,e,n,r):mj(t,e,n,i,r,s)}function fw(t,e,n,i,r){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return gl(t,n,e,(l,c,h)=>{l[o]&&l[o](e[n],r)&&(s.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var yj={evaluateInteractionItems:gl,modes:{index(t,e,n,i){const r=mr(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?nf(t,r,s,i,o):rf(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,d=c.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:h})}),l):[]},dataset(t,e,n,i){const r=mr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?nf(t,r,s,i,o):rf(t,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(t,e,n,i){const r=mr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return nf(t,r,s,i,o)},nearest(t,e,n,i){const r=mr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return rf(t,r,s,n.intersect,i,o)},x(t,e,n,i){const r=mr(e,t);return fw(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=mr(e,t);return fw(t,r,"y",n.intersect,i)}}};const PS=["left","top","right","bottom"];function Mo(t,e){return t.filter(n=>n.pos===e)}function pw(t,e){return t.filter(n=>PS.indexOf(n.pos)===-1&&n.box.axis===e)}function Oo(t,e){return t.sort((n,i)=>{const r=e?i:n,s=e?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function _j(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function vj(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!PS.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function wj(t,e){const n=vj(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=h?h*r:l&&e.availableHeight)}return n}function Ej(t){const e=_j(t),n=Oo(e.filter(c=>c.box.fullSize),!0),i=Oo(Mo(e,"left"),!0),r=Oo(Mo(e,"right")),s=Oo(Mo(e,"top"),!0),o=Oo(Mo(e,"bottom")),a=pw(e,"x"),l=pw(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:Mo(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function gw(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function RS(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Tj(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!ce(r)){n.size&&(t[r]-=n.size);const d=i[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[r]+=n.size}s.getPadding&&RS(o,s.getPadding());const a=Math.max(0,e.outerWidth-gw(o,t,"left","right")),l=Math.max(0,e.outerHeight-gw(o,t,"top","bottom")),c=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function xj(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function Ij(t,e){const n=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return i(t?["left","right"]:["top","bottom"])}function Ko(t,e,n,i){const r=[];let s,o,a,l,c,h;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,Ij(a.horizontal,e));const{same:d,other:p}=Tj(e,n,a,i);c|=d&&r.length,h=h||p,l.fullSize||r.push(a)}return c&&Ko(r,e,n,i)||h}function dc(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function mw(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*h,p=c.size||l.height;Fu(c.start)&&(o=c.start),l.fullSize?dc(l,r.left,o,n.outerWidth-r.right-r.left,p):dc(l,e.left+c.placed,o,d,p),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*h,p=c.size||l.width;Fu(c.start)&&(s=c.start),l.fullSize?dc(l,s,r.top,p,n.outerHeight-r.bottom-r.top):dc(l,s,e.top+c.placed,p,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var Jt={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=vt(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=Ej(t.boxes),l=a.vertical,c=a.horizontal;he(t.boxes,E=>{typeof E.beforeLayout=="function"&&E.beforeLayout()});const h=l.reduce((E,T)=>T.box.options&&T.box.options.display===!1?E:E+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),p=Object.assign({},r);RS(p,vt(i));const m=Object.assign({maxPadding:p,w:s,h:o,x:r.left,y:r.top},r),y=wj(l.concat(c),d);Ko(a.fullSize,m,d,y),Ko(l,m,d,y),Ko(c,m,d,y)&&Ko(l,m,d,y),xj(m),mw(a.leftAndTop,m,d,y),m.x+=m.w,m.y+=m.h,mw(a.rightAndBottom,m,d,y),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},he(a.chartArea,E=>{const T=E.box;Object.assign(T,t.chartArea),T.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class DS{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class Sj extends DS{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const zc="$chartjs",bj={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},yw=t=>t===null||t==="";function kj(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[zc]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",yw(r)){const s=iw(t,"width");s!==void 0&&(t.width=s)}if(yw(i))if(t.style.height==="")t.height=t.width/(e||2);else{const s=iw(t,"height");s!==void 0&&(t.height=s)}return t}const NS=V4?{passive:!0}:!1;function Aj(t,e,n){t&&t.addEventListener(e,n,NS)}function Cj(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,NS)}function Pj(t,e){const n=bj[t.type]||t.type,{x:i,y:r}=mr(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function $u(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Rj(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||$u(a.addedNodes,i),o=o&&!$u(a.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function Dj(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||$u(a.removedNodes,i),o=o&&!$u(a.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const Xa=new Map;let _w=0;function MS(){const t=window.devicePixelRatio;t!==_w&&(_w=t,Xa.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function Nj(t,e){Xa.size||window.addEventListener("resize",MS),Xa.set(t,e)}function Mj(t){Xa.delete(t),Xa.size||window.removeEventListener("resize",MS)}function Oj(t,e,n){const i=t.canvas,r=i&&Qm(i);if(!r)return;const s=mS((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||s(c,h)});return o.observe(r),Nj(t,s),o}function sf(t,e,n){n&&n.disconnect(),e==="resize"&&Mj(t)}function Lj(t,e,n){const i=t.canvas,r=mS(s=>{t.ctx!==null&&n(Pj(s,t))},t);return Aj(i,e,r),r}class Vj extends DS{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(kj(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[zc])return!1;const i=n[zc].initial;["height","width"].forEach(s=>{const o=i[s];de(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[zc],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:Rj,detach:Dj,resize:Oj}[n]||Lj;r[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:sf,detach:sf,resize:sf}[n]||Cj)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return L4(e,n,i,r)}isAttached(e){const n=e&&Qm(e);return!!(n&&n.isConnected)}}function Fj(t){return!Gm()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?Sj:Vj}class li{constructor(){Y(this,"x");Y(this,"y");Y(this,"active",!1);Y(this,"options");Y(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return Ya(this.x)&&Ya(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}Y(li,"defaults",{}),Y(li,"defaultRoutes");function jj(t,e){const n=t.options.ticks,i=Uj(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?Bj(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return $j(e,c,s,o/r),c;const h=zj(s,e,r);if(o>0){let d,p;const m=o>1?Math.round((l-a)/(o-1)):null;for(fc(e,c,h,de(m)?0:a-m,a),d=0,p=o-1;d<p;d++)fc(e,c,h,s[d],s[d+1]);return fc(e,c,h,l,de(m)?e.length:l+m),c}return fc(e,c,h),c}function Uj(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function zj(t,e,n){const i=Wj(t),r=e.length/n;if(!i)return Math.max(r,1);const s=MF(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function Bj(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function $j(t,e,n,i){let r=0,s=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*i])}function fc(t,e,n,i,r){const s=ie(i,0),o=Math.min(ie(r,t.length),t.length);let a=0,l,c,h;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),h=s;h<0;)a++,h=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===h&&(e.push(t[c]),a++,h=Math.round(s+a*n))}function Wj(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const Hj=t=>t==="left"?"right":t==="right"?"left":t,vw=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,ww=(t,e)=>Math.min(e||t,t);function Ew(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function qj(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),c;if(!(n&&(i===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-a||l>o+a)))return l}function Kj(t,e){he(t,n=>{const i=n.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function Lo(t){return t.drawTicks?t.tickLength:0}function Tw(t,e){if(!t.display)return 0;const n=qe(t.font,e),i=vt(t.padding);return(Ae(t.text)?t.text.length:1)*n.lineHeight+i.height}function Gj(t,e){return rr(t,{scale:e,type:"scale"})}function Qj(t,e,n){return rr(t,{tick:n,index:e,type:"tick"})}function Yj(t,e,n){let i=Um(t);return(n&&e!=="right"||!n&&e==="right")&&(i=Hj(i)),i}function Xj(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:h}=l;let d=0,p,m,y;const E=o-r,T=a-s;if(t.isHorizontal()){if(m=ft(i,s,a),ce(n)){const _=Object.keys(n)[0],v=n[_];y=h[_].getPixelForValue(v)+E-e}else n==="center"?y=(c.bottom+c.top)/2+E-e:y=vw(t,n,e);p=a-s}else{if(ce(n)){const _=Object.keys(n)[0],v=n[_];m=h[_].getPixelForValue(v)-T+e}else n==="center"?m=(c.left+c.right)/2-T+e:m=vw(t,n,e);y=ft(i,o,r),d=n==="left"?-Ut:Ut}return{titleX:m,titleY:y,maxWidth:p,rotation:d}}class Yr extends li{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=Vt(e,Number.POSITIVE_INFINITY),n=Vt(n,Number.NEGATIVE_INFINITY),i=Vt(i,Number.POSITIVE_INFINITY),r=Vt(r,Number.NEGATIVE_INFINITY),{min:Vt(e,i),max:Vt(n,r),minDefined:Qe(e),maxDefined:Qe(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:Vt(n,Vt(i,n)),max:Vt(i,Vt(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){_e(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=p4(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Ew(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=jj(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){_e(this.options.afterUpdate,[this])}beforeSetDimensions(){_e(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){_e(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),_e(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){_e(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=_e(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){_e(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){_e(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=ww(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const h=this._getLabelSizes(),d=h.widest.width,p=h.highest.height,m=Xt(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:m/(i-1),d+6>a&&(a=m/(i-(e.offset?.5:1)),l=this.maxHeight-Lo(e.grid)-n.padding-Tw(e.title,this.chart.options.font),c=Math.sqrt(d*d+p*p),o=Fm(Math.min(Math.asin(Xt((h.highest.height+6)/a,-1,1)),Math.asin(Xt(l/c,-1,1))-Math.asin(Xt(p/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){_e(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){_e(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Tw(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=Lo(s)+l):(e.height=this.maxHeight,e.width=Lo(s)+l),i.display&&this.ticks.length){const{first:c,last:h,widest:d,highest:p}=this._getLabelSizes(),m=i.padding*2,y=Pi(this.labelRotation),E=Math.cos(y),T=Math.sin(y);if(a){const _=i.mirror?0:T*d.width+E*p.height;e.height=Math.min(this.maxHeight,e.height+_+m)}else{const _=i.mirror?0:E*d.width+T*p.height;e.width=Math.min(this.maxWidth,e.width+_+m)}this._calculatePadding(c,h,T,E)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,m=0;l?c?(p=r*e.width,m=i*n.height):(p=i*e.height,m=r*n.width):s==="start"?m=n.width:s==="end"?p=e.width:s!=="inner"&&(p=e.width/2,m=n.width/2),this.paddingLeft=Math.max((p-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((m-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=e.height/2;s==="start"?(h=0,d=e.height):s==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){_e(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)de(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=Ew(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/ww(n,i));let c=0,h=0,d,p,m,y,E,T,_,v,S,D,M;for(d=0;d<n;d+=l){if(y=e[d].label,E=this._resolveTickFontOptions(d),r.font=T=E.string,_=s[T]=s[T]||{data:{},gc:[]},v=E.lineHeight,S=D=0,!de(y)&&!Ae(y))S=Uu(r,_.data,_.gc,S,y),D=v;else if(Ae(y))for(p=0,m=y.length;p<m;++p)M=y[p],!de(M)&&!Ae(M)&&(S=Uu(r,_.data,_.gc,S,M),D+=v);o.push(S),a.push(D),c=Math.max(S,c),h=Math.max(D,h)}Kj(s,n);const L=o.indexOf(c),I=a.indexOf(h),w=b=>({width:o[b]||0,height:a[b]||0});return{first:w(0),last:w(n-1),widest:w(L),highest:w(I),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return jF(this._alignToPixels?ur(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=Qj(this.getContext(),e,i))}return this.$context||(this.$context=Gj(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Pi(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),p=Lo(s),m=[],y=a.setContext(this.getContext()),E=y.display?y.width:0,T=E/2,_=function(be){return ur(i,be,E)};let v,S,D,M,L,I,w,b,k,P,R,A;if(o==="top")v=_(this.bottom),I=this.bottom-p,b=v-T,P=_(e.top)+T,A=e.bottom;else if(o==="bottom")v=_(this.top),P=e.top,A=_(e.bottom)-T,I=v+T,b=this.top+p;else if(o==="left")v=_(this.right),L=this.right-p,w=v-T,k=_(e.left)+T,R=e.right;else if(o==="right")v=_(this.left),k=e.left,R=_(e.right)-T,L=v+T,w=this.left+p;else if(n==="x"){if(o==="center")v=_((e.top+e.bottom)/2+.5);else if(ce(o)){const be=Object.keys(o)[0],De=o[be];v=_(this.chart.scales[be].getPixelForValue(De))}P=e.top,A=e.bottom,I=v+T,b=I+p}else if(n==="y"){if(o==="center")v=_((e.left+e.right)/2);else if(ce(o)){const be=Object.keys(o)[0],De=o[be];v=_(this.chart.scales[be].getPixelForValue(De))}L=v-T,w=L-p,k=e.left,R=e.right}const Se=ie(r.ticks.maxTicksLimit,d),ue=Math.max(1,Math.ceil(d/Se));for(S=0;S<d;S+=ue){const be=this.getContext(S),De=s.setContext(be),B=a.setContext(be),K=De.lineWidth,G=De.color,ge=B.dash||[],re=B.dashOffset,me=De.tickWidth,Xe=De.tickColor,wt=De.tickBorderDash||[],Je=De.tickBorderDashOffset;D=qj(this,S,l),D!==void 0&&(M=ur(i,D,K),c?L=w=k=R=M:I=b=P=A=M,m.push({tx1:L,ty1:I,tx2:w,ty2:b,x1:k,y1:P,x2:R,y2:A,width:K,color:G,borderDash:ge,borderDashOffset:re,tickWidth:me,tickColor:Xe,tickBorderDash:wt,tickBorderDashOffset:Je}))}return this._ticksLength=d,this._borderValue=v,m}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=s,p=Lo(i.grid),m=p+h,y=d?-h:m,E=-Pi(this.labelRotation),T=[];let _,v,S,D,M,L,I,w,b,k,P,R,A="middle";if(r==="top")L=this.bottom-y,I=this._getXAxisLabelAlignment();else if(r==="bottom")L=this.top+y,I=this._getXAxisLabelAlignment();else if(r==="left"){const ue=this._getYAxisLabelAlignment(p);I=ue.textAlign,M=ue.x}else if(r==="right"){const ue=this._getYAxisLabelAlignment(p);I=ue.textAlign,M=ue.x}else if(n==="x"){if(r==="center")L=(e.top+e.bottom)/2+m;else if(ce(r)){const ue=Object.keys(r)[0],be=r[ue];L=this.chart.scales[ue].getPixelForValue(be)+m}I=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")M=(e.left+e.right)/2-m;else if(ce(r)){const ue=Object.keys(r)[0],be=r[ue];M=this.chart.scales[ue].getPixelForValue(be)}I=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(l==="start"?A="top":l==="end"&&(A="bottom"));const Se=this._getLabelSizes();for(_=0,v=a.length;_<v;++_){S=a[_],D=S.label;const ue=s.setContext(this.getContext(_));w=this.getPixelForTick(_)+s.labelOffset,b=this._resolveTickFontOptions(_),k=b.lineHeight,P=Ae(D)?D.length:1;const be=P/2,De=ue.color,B=ue.textStrokeColor,K=ue.textStrokeWidth;let G=I;o?(M=w,I==="inner"&&(_===v-1?G=this.options.reverse?"left":"right":_===0?G=this.options.reverse?"right":"left":G="center"),r==="top"?c==="near"||E!==0?R=-P*k+k/2:c==="center"?R=-Se.highest.height/2-be*k+k:R=-Se.highest.height+k/2:c==="near"||E!==0?R=k/2:c==="center"?R=Se.highest.height/2-be*k:R=Se.highest.height-P*k,d&&(R*=-1),E!==0&&!ue.showLabelBackdrop&&(M+=k/2*Math.sin(E))):(L=w,R=(1-P)*k/2);let ge;if(ue.showLabelBackdrop){const re=vt(ue.backdropPadding),me=Se.heights[_],Xe=Se.widths[_];let wt=R-re.top,Je=0-re.left;switch(A){case"middle":wt-=me/2;break;case"bottom":wt-=me;break}switch(I){case"center":Je-=Xe/2;break;case"right":Je-=Xe;break;case"inner":_===v-1?Je-=Xe:_>0&&(Je-=Xe/2);break}ge={left:Je,top:wt,width:Xe+re.width,height:me+re.height,color:ue.backdropColor}}T.push({label:D,font:b,textOffset:R,options:{rotation:E,color:De,strokeColor:B,strokeWidth:K,textAlign:G,textBaseline:A,translation:[M,L],backdrop:ge}})}return T}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Pi(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,h;return n==="left"?r?(h=this.right+s,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?r?(h=this.left+s,i==="near"?c="right":i==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,i==="near"?c="left":i==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const l=r[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,d,p;this.isHorizontal()?(c=ur(e,this.left,o)-o/2,h=ur(e,this.right,a)+a/2,d=p=l):(d=ur(e,this.top,o)-o/2,p=ur(e,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,d),n.lineTo(h,p),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&$m(i,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,h=o.textOffset;zr(i,c,0,h,l,a)}r&&Wm(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=qe(i.font),o=vt(i.padding),a=i.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||ce(n)?(l+=o.bottom,Ae(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:d,rotation:p}=Xj(this,l,n,a);zr(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:p,textAlign:Yj(a,n,r),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=ie(e.grid&&e.grid.z,-1),r=ie(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Yr.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return qe(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class pc{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;e5(n)&&(i=this.register(n));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,Jj(e,o,i),this.override&&Oe.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in Oe[r]&&(delete Oe[r][i],this.override&&delete Ur[i])}}function Jj(t,e,n){const i=Qa(Object.create(null),[n?Oe.get(n):{},Oe.get(e),t.defaults]);Oe.set(e,i),t.defaultRoutes&&Zj(e,t.defaultRoutes),t.descriptors&&Oe.describe(e,t.descriptors)}function Zj(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Oe.route(s,r,l,a)})}function e5(t){return"id"in t&&"defaults"in t}class t5{constructor(){this.controllers=new pc(ma,"datasets",!0),this.elements=new pc(li,"elements"),this.plugins=new pc(Object,"plugins"),this.scales=new pc(Yr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):he(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const r=Vm(e);_e(i["before"+r],[],i),n[e](i),_e(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var In=new t5;class n5{constructor(){this._init=[]}notify(e,n,i,r){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,n,i);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,i,r){r=r||{};for(const s of e){const o=s.plugin,a=o[i],l=[n,r,s.options];if(_e(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){de(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=ie(i.options&&i.options.plugins,{}),s=i5(i);return r===!1&&!n?[]:s5(e,s,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function i5(t){const e={},n=[],i=Object.keys(In.plugins.items);for(let s=0;s<i.length;s++)n.push(In.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function r5(t,e){return!e&&t===!1?null:t===!0?{}:t}function s5(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=r5(i[l],r);c!==null&&s.push({plugin:a,options:o5(t.config,{plugin:a,local:n[l]},c,o)})}return s}function o5(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Cp(t,e){const n=Oe.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function a5(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function l5(t,e){return t===e?"_index_":"_value_"}function xw(t){if(t==="x"||t==="y"||t==="r")return t}function c5(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Pp(t,...e){if(xw(t))return t;for(const n of e){const i=n.axis||c5(n.position)||t.length>1&&xw(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Iw(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function u5(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return Iw(t,"x",n[0])||Iw(t,"y",n[0])}return{}}function h5(t,e){const n=Ur[t.type]||{scales:{}},i=e.scales||{},r=Cp(t.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!ce(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Pp(o,a,u5(o,t),Oe.scales[a.type]),c=l5(l,r),h=n.scales||{};s[o]=da(Object.create(null),[{axis:l},a,h[l],h[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Cp(a,e),h=(Ur[a]||{}).scales||{};Object.keys(h).forEach(d=>{const p=a5(d,l),m=o[p+"AxisID"]||p;s[m]=s[m]||Object.create(null),da(s[m],[{axis:p},i[m],h[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];da(a,[Oe.scales[a.type],Oe.scale])}),s}function OS(t){const e=t.options||(t.options={});e.plugins=ie(e.plugins,{}),e.scales=h5(t,e)}function LS(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function d5(t){return t=t||{},t.data=LS(t.data),OS(t),t}const Sw=new Map,VS=new Set;function gc(t,e){let n=Sw.get(t);return n||(n=e(),Sw.set(t,n),VS.add(n)),n}const Vo=(t,e,n)=>{const i=Vu(e,n);i!==void 0&&t.add(i)};class f5{constructor(e){this._config=d5(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=LS(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),OS(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return gc(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return gc(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return gc(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return gc(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(d=>Vo(l,e,d))),h.forEach(d=>Vo(l,r,d)),h.forEach(d=>Vo(l,Ur[s]||{},d)),h.forEach(d=>Vo(l,Oe,d)),h.forEach(d=>Vo(l,kp,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),VS.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Ur[n]||{},Oe.datasets[n]||{},{type:n},Oe,kp]}resolveNamedOptions(e,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=bw(this._resolverCache,e,r);let l=o;if(g5(o,n)){s.$shared=!1,i=Xi(i)?i():i;const c=this.createResolver(e,i,a);l=Gs(o,i,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,i=[""],r){const{resolver:s}=bw(this._resolverCache,e,i);return ce(n)?Gs(s,n,void 0,r):s}}function bw(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:Hm(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const p5=t=>ce(t)&&Object.getOwnPropertyNames(t).some(e=>Xi(t[e]));function g5(t,e){const{isScriptable:n,isIndexable:i}=wS(t);for(const r of e){const s=n(r),o=i(r),a=(o||s)&&t[r];if(s&&(Xi(a)||p5(a))||o&&Ae(a))return!0}return!1}var m5="4.4.9";const y5=["top","bottom","left","right","chartArea"];function kw(t,e){return t==="top"||t==="bottom"||y5.indexOf(t)===-1&&e==="x"}function Aw(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function Cw(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),_e(n&&n.onComplete,[t],e)}function _5(t){const e=t.chart,n=e.options.animation;_e(n&&n.onProgress,[t],e)}function FS(t){return Gm()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Bc={},Pw=t=>{const e=FS(t);return Object.values(Bc).filter(n=>n.canvas===e).pop()};function v5(t,e,n){const i=Object.keys(t);for(const r of i){const s=+r;if(s>=e){const o=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=o)}}}function w5(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}var gi;let Oh=(gi=class{static register(...e){In.add(...e),Rw()}static unregister(...e){In.remove(...e),Rw()}constructor(e,n){const i=this.config=new f5(n),r=FS(e),s=Pw(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||Fj(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=SF(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new n5,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=WF(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Bc[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Fn.listen(this,"complete",Cw),Fn.listen(this,"progress",_5),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return de(e)?n&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return In}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():nw(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Zv(this.canvas,this.ctx),this}stop(){return Fn.stop(this),this}resize(e,n){Fn.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,nw(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),_e(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};he(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Pp(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),he(s,o=>{const a=o.options,l=a.id,c=Pp(l,a),h=ie(a.type,o.dtype);(a.position===void 0||kw(a.position,c)!==kw(o.dposition))&&(a.position=o.dposition),r[l]=!0;let d=null;if(l in i&&i[l].type===h)d=i[l];else{const p=In.getScale(h);d=new p({id:l,type:h,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,e)}),he(r,(o,a)=>{o||delete i[a]}),he(i,o=>{Jt.configure(this,o,o.options),Jt.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(Aw("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||Cp(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=In.getController(a),{datasetElementType:c,dataElementType:h}=Oe.datasets[a];Object.assign(l,{dataElementType:In.getElement(h),datasetElementType:c&&In.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){he(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:d}=this.getDatasetMeta(c),p=!r&&s.indexOf(d)===-1;d.buildOrUpdateElements(p),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||he(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Aw("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){he(this.scales,e=>{Jt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!Wv(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const o=i==="_removeElements"?-s:s;v5(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!Wv(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Jt.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],he(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Xi(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Fn.has(this)?this.attached&&!Fn.running(this)&&Fn.start(this):(this.draw(),Cw({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i={meta:e,index:e.index,cancelable:!0},r=X4(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&$m(n,r),e.controller.draw(),r&&Wm(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return Yn(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const s=yj.modes[n];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=rr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);Fu(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Fn.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Zv(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Bc[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};he(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){he(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},he(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Ou(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,s=(l,c)=>l.filter(h=>!c.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=s(n,e),a=i?e:s(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:s}=this,o=n,a=this._getActiveElements(e,r,i,o),l=RF(e),c=w5(e,this._lastEvent,i,l);i&&(this._lastEvent=null,_e(s.onHover,[e,a,this],this),l&&_e(s.onClick,[e,a,this],this));const h=!Ou(a,r);return(h||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,h}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}},Y(gi,"defaults",Oe),Y(gi,"instances",Bc),Y(gi,"overrides",Ur),Y(gi,"registry",In),Y(gi,"version",m5),Y(gi,"getChart",Pw),gi);function Rw(){return he(Oh.instances,t=>t._plugins.invalidate())}function jS(t,e,n=e){t.lineCap=ie(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ie(n.borderDash,e.borderDash)),t.lineDashOffset=ie(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ie(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ie(n.borderWidth,e.borderWidth),t.strokeStyle=ie(n.borderColor,e.borderColor)}function E5(t,e,n){t.lineTo(n.x,n.y)}function T5(t){return t.stepped?r4:t.tension||t.cubicInterpolationMode==="monotone"?s4:E5}function US(t,e,n={}){const i=t.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(s,a),h=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!h?i+c-l:c-l}}function x5(t,e,n,i){const{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:c}=US(r,n,i),h=T5(s);let{move:d=!0,reverse:p}=i||{},m,y,E;for(m=0;m<=c;++m)y=r[(a+(p?c-m:m))%o],!y.skip&&(d?(t.moveTo(y.x,y.y),d=!1):h(t,E,y,p,s.stepped),E=y);return l&&(y=r[(a+(p?c:0))%o],h(t,E,y,p,s.stepped)),!!l}function I5(t,e,n,i){const r=e.points,{count:s,start:o,ilen:a}=US(r,n,i),{move:l=!0,reverse:c}=i||{};let h=0,d=0,p,m,y,E,T,_;const v=D=>(o+(c?a-D:D))%s,S=()=>{E!==T&&(t.lineTo(h,T),t.lineTo(h,E),t.lineTo(h,_))};for(l&&(m=r[v(0)],t.moveTo(m.x,m.y)),p=0;p<=a;++p){if(m=r[v(p)],m.skip)continue;const D=m.x,M=m.y,L=D|0;L===y?(M<E?E=M:M>T&&(T=M),h=(d*h+D)/++d):(S(),t.lineTo(D,M),y=L,d=0,E=T=M),_=M}S()}function Rp(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?I5:x5}function S5(t){return t.stepped?F4:t.tension||t.cubicInterpolationMode==="monotone"?j4:yr}function b5(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),jS(t,e.options),t.stroke(r)}function k5(t,e,n,i){const{segments:r,options:s}=e,o=Rp(e);for(const a of r)jS(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const A5=typeof Path2D=="function";function C5(t,e,n,i){A5&&!e.options.segment?b5(t,e,n,i):k5(t,e,n,i)}class Go extends li{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;P4(this._points,i,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=K4(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,r=e[n],s=this.points,o=W4(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=S5(i);let c,h;for(c=0,h=o.length;c<h;++c){const{start:d,end:p}=o[c],m=s[d],y=s[p];if(m===y){a.push(m);continue}const E=Math.abs((r-m[n])/(y[n]-m[n])),T=l(m,y,E,i.stepped);T[n]=e[n],a.push(T)}return a.length===1?a[0]:a}pathSegment(e,n,i){return Rp(this)(e,this,n,i)}path(e,n,i){const r=this.segments,s=Rp(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of r)o&=s(e,this,a,{start:n,end:n+i-1});return!!o}draw(e,n,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),C5(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Y(Go,"id","line"),Y(Go,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Y(Go,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Y(Go,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Dw(t,e,n,i){const r=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<r.radius+r.hitRadius}class $c extends li{constructor(n){super();Y(this,"parsed");Y(this,"skip");Y(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,i){return Dw(this,n,"x",i)}inYRange(n,i){return Dw(this,n,"y",i)}getCenterPoint(n){const{x:i,y:r}=this.getProps(["x","y"],n);return{x:i,y:r}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const r=i&&n.borderWidth||0;return(i+r)*2}draw(n,i){const r=this.options;this.skip||r.radius<.1||!Yn(this,i,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,Ap(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Y($c,"id","point"),Y($c,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Y($c,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Nw=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},P5=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Mw extends li{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=_e(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=qe(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Nw(i,s);let c,h;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=r+a;let d=e;s.textAlign="left",s.textBaseline="middle";let p=-1,m=-h;return this.legendItems.forEach((y,E)=>{const T=i+n/2+s.measureText(y.text).width;(E===0||c[c.length-1]+T+2*a>o)&&(d+=h,c[c.length-(E>0?0:1)]=0,m+=h,p++),l[E]={left:0,top:m,row:p,width:T,height:r},c[c.length-1]+=T+a}),d}_fitCols(e,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-e;let d=a,p=0,m=0,y=0,E=0;return this.legendItems.forEach((T,_)=>{const{itemWidth:v,itemHeight:S}=R5(i,n,s,T,r);_>0&&m+S+2*a>h&&(d+=p+a,c.push({width:p,height:m}),y+=p+a,E++,p=m=0),l[_]={left:y,top:m,col:E,width:v,height:S},p=Math.max(p,v),m+=S+a}),d+=p,c.push({width:p,height:m}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=Ps(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=ft(i,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=ft(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=ft(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=ft(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;$m(e,this),this._draw(),Wm(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=Oe.color,l=Ps(e.rtl,this.left,this.width),c=qe(o.font),{padding:h}=o,d=c.size,p=d/2;let m;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:y,boxHeight:E,itemHeight:T}=Nw(o,d),_=function(L,I,w){if(isNaN(y)||y<=0||isNaN(E)||E<0)return;r.save();const b=ie(w.lineWidth,1);if(r.fillStyle=ie(w.fillStyle,a),r.lineCap=ie(w.lineCap,"butt"),r.lineDashOffset=ie(w.lineDashOffset,0),r.lineJoin=ie(w.lineJoin,"miter"),r.lineWidth=b,r.strokeStyle=ie(w.strokeStyle,a),r.setLineDash(ie(w.lineDash,[])),o.usePointStyle){const k={radius:E*Math.SQRT2/2,pointStyle:w.pointStyle,rotation:w.rotation,borderWidth:b},P=l.xPlus(L,y/2),R=I+p;_S(r,k,P,R,o.pointStyleWidth&&y)}else{const k=I+Math.max((d-E)/2,0),P=l.leftForLtr(L,y),R=Cs(w.borderRadius);r.beginPath(),Object.values(R).some(A=>A!==0)?zu(r,{x:P,y:k,w:y,h:E,radius:R}):r.rect(P,k,y,E),r.fill(),b!==0&&r.stroke()}r.restore()},v=function(L,I,w){zr(r,w.text,L,I+T/2,c,{strikethrough:w.hidden,textAlign:l.textAlign(w.textAlign)})},S=this.isHorizontal(),D=this._computeTitleHeight();S?m={x:ft(s,this.left+h,this.right-i[0]),y:this.top+h+D,line:0}:m={x:this.left+h,y:ft(s,this.top+D+h,this.bottom-n[0].height),line:0},SS(this.ctx,e.textDirection);const M=T+h;this.legendItems.forEach((L,I)=>{r.strokeStyle=L.fontColor,r.fillStyle=L.fontColor;const w=r.measureText(L.text).width,b=l.textAlign(L.textAlign||(L.textAlign=o.textAlign)),k=y+p+w;let P=m.x,R=m.y;l.setWidth(this.width),S?I>0&&P+k+h>this.right&&(R=m.y+=M,m.line++,P=m.x=ft(s,this.left+h,this.right-i[m.line])):I>0&&R+M>this.bottom&&(P=m.x=P+n[m.line].width+h,m.line++,R=m.y=ft(s,this.top+D+h,this.bottom-n[m.line].height));const A=l.x(P);if(_(A,R,L),P=HF(b,P+y+p,S?P+k:this.right,e.rtl),v(l.x(P),R,L),S)m.x+=k+h;else if(typeof L.text!="string"){const Se=c.lineHeight;m.y+=zS(L,Se)+h}else m.y+=M}),bS(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=qe(n.font),r=vt(n.padding);if(!n.display)return;const s=Ps(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=r.top+l;let h,d=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),h=this.top+c,d=ft(e.align,d,this.right-p);else{const y=this.columnSizes.reduce((E,T)=>Math.max(E,T.height),0);h=c+ft(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const m=ft(a,d,d+p);o.textAlign=s.textAlign(Um(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,zr(o,n.text,m,h,i)}_computeTitleHeight(){const e=this.options.title,n=qe(e.font),i=vt(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,s;if(qo(e,this.left,this.right)&&qo(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],qo(e,r.left,r.left+r.width)&&qo(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!M5(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=P5(r,i);r&&!s&&_e(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&_e(n.onHover,[e,i,this],this)}else i&&_e(n.onClick,[e,i,this],this)}}function R5(t,e,n,i,r){const s=D5(i,t,e,n),o=N5(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function D5(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+i.measureText(r).width}function N5(t,e,n){let i=t;return typeof e.text!="string"&&(i=zS(e,n)),i}function zS(t,e){const n=t.text?t.text.length:0;return e*n}function M5(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var O5={id:"legend",_element:Mw,start(t,e,n){const i=t.legend=new Mw({ctx:t.ctx,options:n,chart:t});Jt.configure(t,i,n),Jt.addBox(t,i)},stop(t){Jt.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Jt.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=vt(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class BS extends li{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=Ae(i.text)?i.text.length:1;this._padding=vt(i.padding);const s=r*qe(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:r,right:s,options:o}=this,a=o.align;let l=0,c,h,d;return this.isHorizontal()?(h=ft(a,i,s),d=n+e,c=s-i):(o.position==="left"?(h=i+e,d=ft(a,r,n),l=$e*-.5):(h=s-e,d=ft(a,n,r),l=$e*.5),c=r-n),{titleX:h,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=qe(n.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);zr(e,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:Um(n.align),textBaseline:"middle",translation:[o,a]})}}function L5(t,e){const n=new BS({ctx:t.ctx,options:e,chart:t});Jt.configure(t,n,e),Jt.addBox(t,n),t.titleBlock=n}var V5={id:"title",_element:BS,start(t,e,n){L5(t,n)},stop(t){const e=t.titleBlock;Jt.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Jt.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Qo={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=bp(e,c);h<r&&(r=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function Tn(t,e){return e&&(Ae(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function jn(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function F5(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function Ow(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=qe(e.bodyFont),c=qe(e.titleFont),h=qe(e.footerFont),d=s.length,p=r.length,m=i.length,y=vt(e.padding);let E=y.height,T=0,_=i.reduce((D,M)=>D+M.before.length+M.lines.length+M.after.length,0);if(_+=t.beforeBody.length+t.afterBody.length,d&&(E+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),_){const D=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;E+=m*D+(_-m)*l.lineHeight+(_-1)*e.bodySpacing}p&&(E+=e.footerMarginTop+p*h.lineHeight+(p-1)*e.footerSpacing);let v=0;const S=function(D){T=Math.max(T,n.measureText(D).width+v)};return n.save(),n.font=c.string,he(t.title,S),n.font=l.string,he(t.beforeBody.concat(t.afterBody),S),v=e.displayColors?o+2+e.boxPadding:0,he(i,D=>{he(D.before,S),he(D.lines,S),he(D.after,S)}),v=0,n.font=h.string,he(t.footer,S),n.restore(),T+=y.width,{width:T,height:E}}function j5(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function U5(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&r+s+o>e.width||t==="right"&&r-s-o<0)return!0}function z5(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),U5(c,t,e,n)&&(c="center"),c}function Lw(t,e,n){const i=n.yAlign||e.yAlign||j5(t,n);return{xAlign:n.xAlign||e.xAlign||z5(t,e,n,i),yAlign:i}}function B5(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function $5(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function Vw(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:h,topRight:d,bottomLeft:p,bottomRight:m}=Cs(o);let y=B5(e,a);const E=$5(e,l,c);return l==="center"?a==="left"?y+=c:a==="right"&&(y-=c):a==="left"?y-=Math.max(h,p)+r:a==="right"&&(y+=Math.max(d,m)+r),{x:Xt(y,0,i.width-e.width),y:Xt(E,0,i.height-e.height)}}function mc(t,e,n){const i=vt(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function Fw(t){return Tn([],jn(t))}function W5(t,e,n){return rr(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function jw(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const $S={beforeTitle:Ln,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:Ln,beforeBody:Ln,beforeLabel:Ln,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return de(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Ln,afterBody:Ln,beforeFooter:Ln,footer:Ln,afterFooter:Ln};function At(t,e,n,i){const r=t[e].call(n,i);return typeof r>"u"?$S[e].call(n,i):r}class Dp extends li{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new AS(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=W5(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=At(i,"beforeTitle",this,e),s=At(i,"title",this,e),o=At(i,"afterTitle",this,e);let a=[];return a=Tn(a,jn(r)),a=Tn(a,jn(s)),a=Tn(a,jn(o)),a}getBeforeBody(e,n){return Fw(At(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return he(e,s=>{const o={before:[],lines:[],after:[]},a=jw(i,s);Tn(o.before,jn(At(a,"beforeLabel",this,s))),Tn(o.lines,At(a,"label",this,s)),Tn(o.after,jn(At(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,n){return Fw(At(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=At(i,"beforeFooter",this,e),s=At(i,"footer",this,e),o=At(i,"afterFooter",this,e);let a=[];return a=Tn(a,jn(r)),a=Tn(a,jn(s)),a=Tn(a,jn(o)),a}_createItems(e){const n=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(F5(this.chart,n[l]));return e.filter&&(a=a.filter((h,d,p)=>e.filter(h,d,p,i))),e.itemSort&&(a=a.sort((h,d)=>e.itemSort(h,d,i))),he(a,h=>{const d=jw(e.callbacks,h);r.push(At(d,"labelColor",this,h)),s.push(At(d,"labelPointStyle",this,h)),o.push(At(d,"labelTextColor",this,h))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=Qo[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=Ow(this,i),c=Object.assign({},a,l),h=Lw(this.chart,i,c),d=Vw(i,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const s=this.getCaretPosition(e,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:d}=Cs(a),{x:p,y:m}=e,{width:y,height:E}=n;let T,_,v,S,D,M;return s==="center"?(D=m+E/2,r==="left"?(T=p,_=T-o,S=D+o,M=D-o):(T=p+y,_=T+o,S=D-o,M=D+o),v=T):(r==="left"?_=p+Math.max(l,h)+o:r==="right"?_=p+y-Math.max(c,d)-o:_=this.caretX,s==="top"?(S=m,D=S-o,T=_-o,v=_+o):(S=m+E,D=S+o,T=_+o,v=_-o),M=S),{x1:T,x2:_,x3:v,y1:S,y2:D,y3:M}}drawTitle(e,n,i){const r=this.title,s=r.length;let o,a,l;if(s){const c=Ps(i.rtl,this.x,this.width);for(e.x=mc(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=qe(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=s,h=qe(s.bodyFont),d=mc(this,"left",s),p=r.x(d),m=l<h.lineHeight?(h.lineHeight-l)/2:0,y=n.y+m;if(s.usePointStyle){const E={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},T=r.leftForLtr(p,c)+c/2,_=y+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Ap(e,E,T,_),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Ap(e,E,T,_)}else{e.lineWidth=ce(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const E=r.leftForLtr(p,c),T=r.leftForLtr(r.xPlus(p,1),c-2),_=Cs(o.borderRadius);Object.values(_).some(v=>v!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,zu(e,{x:E,y,w:c,h:l,radius:_}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),zu(e,{x:T,y:y+1,w:c-2,h:l-2,radius:_}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(E,y,c,l),e.strokeRect(E,y,c,l),e.fillStyle=o.backgroundColor,e.fillRect(T,y+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=i,d=qe(i.bodyFont);let p=d.lineHeight,m=0;const y=Ps(i.rtl,this.x,this.width),E=function(w){n.fillText(w,y.x(e.x+m),e.y+p/2),e.y+=p+s},T=y.textAlign(o);let _,v,S,D,M,L,I;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=mc(this,T,i),n.fillStyle=i.bodyColor,he(this.beforeBody,E),m=a&&T!=="right"?o==="center"?c/2+h:c+2+h:0,D=0,L=r.length;D<L;++D){for(_=r[D],v=this.labelTextColors[D],n.fillStyle=v,he(_.before,E),S=_.lines,a&&S.length&&(this._drawColorBox(n,e,D,y,i),p=Math.max(d.lineHeight,l)),M=0,I=S.length;M<I;++M)E(S[M]),p=d.lineHeight;he(_.after,E)}m=0,p=d.lineHeight,he(this.afterBody,E),e.y-=s}drawFooter(e,n,i){const r=this.footer,s=r.length;let o,a;if(s){const l=Ps(i.rtl,this.x,this.width);for(e.x=mc(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=qe(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=i,{topLeft:d,topRight:p,bottomLeft:m,bottomRight:y}=Cs(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,i,r),n.lineTo(a+c-p,l),n.quadraticCurveTo(a+c,l,a+c,l+p),o==="center"&&s==="right"&&this.drawCaret(e,n,i,r),n.lineTo(a+c,l+h-y),n.quadraticCurveTo(a+c,l+h,a+c-y,l+h),o==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(a+m,l+h),n.quadraticCurveTo(a,l+h,a,l+h-m),o==="center"&&s==="left"&&this.drawCaret(e,n,i,r),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=Qo[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Ow(this,e),l=Object.assign({},o,this._size),c=Lw(n,e,l),h=Vw(e,l,c,n);(r._to!==h.x||s._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=vt(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,n),SS(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),bS(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!Ou(i,r),o=this._positionChanged(r,n);(s||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,i),a=this._positionChanged(o,e),l=n||!Ou(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:r,options:s}=this,o=Qo[s.position].call(this,e,n);return o!==!1&&(i!==o.x||r!==o.y)}}Y(Dp,"positioners",Qo);var H5={id:"tooltip",_element:Dp,positioners:Qo,afterInit(t,e,n){n&&(t.tooltip=new Dp({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:$S},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const q5=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function K5(t,e,n,i){const r=t.indexOf(e);if(r===-1)return q5(t,e,n,i);const s=t.lastIndexOf(e);return r!==s?n:r}const G5=(t,e)=>t===null?null:Xt(Math.round(t),0,e);function Uw(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Np extends Yr{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(de(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:K5(i,e,ie(n,e),this._addedLabels),G5(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return Uw.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Y(Np,"id","category"),Y(Np,"defaults",{ticks:{callback:Uw}});function Q5(t,e){const n=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:d,includeBounds:p}=t,m=s||1,y=h-1,{min:E,max:T}=e,_=!de(o),v=!de(a),S=!de(c),D=(T-E)/(d+1);let M=qv((T-E)/y/m)*m,L,I,w,b;if(M<1e-14&&!_&&!v)return[{value:E},{value:T}];b=Math.ceil(T/M)-Math.floor(E/M),b>y&&(M=qv(b*M/y/m)*m),de(l)||(L=Math.pow(10,l),M=Math.ceil(M*L)/L),r==="ticks"?(I=Math.floor(E/M)*M,w=Math.ceil(T/M)*M):(I=E,w=T),_&&v&&s&&LF((a-o)/s,M/1e3)?(b=Math.round(Math.min((a-o)/M,h)),M=(a-o)/b,I=o,w=a):S?(I=_?o:I,w=v?a:w,b=c-1,M=(w-I)/b):(b=(w-I)/M,fa(b,Math.round(b),M/1e3)?b=Math.round(b):b=Math.ceil(b));const k=Math.max(Kv(M),Kv(I));L=Math.pow(10,de(l)?k:l),I=Math.round(I*L)/L,w=Math.round(w*L)/L;let P=0;for(_&&(p&&I!==o?(n.push({value:o}),I<o&&P++,fa(Math.round((I+P*M)*L)/L,o,zw(o,D,t))&&P++):I<o&&P++);P<b;++P){const R=Math.round((I+P*M)*L)/L;if(v&&R>a)break;n.push({value:R})}return v&&p&&w!==a?n.length&&fa(n[n.length-1].value,a,zw(a,D,t))?n[n.length-1].value=a:n.push({value:a}):(!v||w===a)&&n.push({value:w}),n}function zw(t,e,{horizontal:n,minRotation:i}){const r=Pi(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class Wu extends Yr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return de(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=n?r:l,a=l=>s=i?s:l;if(e){const l=Ks(r),c=Ks(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=Q5(r,s);return e.bounds==="ticks"&&dS(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return Bm(e,this.chart.options.locale,this.options.ticks.format)}}class Mp extends Wu{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Qe(e)?e:0,this.max=Qe(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=Pi(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Y(Mp,"id","linear"),Y(Mp,"defaults",{ticks:{callback:Nh.formatters.numeric}});const Ja=t=>Math.floor(Ci(t)),dr=(t,e)=>Math.pow(10,Ja(t)+e);function Bw(t){return t/Math.pow(10,Ja(t))===1}function $w(t,e,n){const i=Math.pow(10,n),r=Math.floor(t/i);return Math.ceil(e/i)-r}function Y5(t,e){const n=e-t;let i=Ja(n);for(;$w(t,e,i)>10;)i++;for(;$w(t,e,i)<10;)i--;return Math.min(i,Ja(t))}function X5(t,{min:e,max:n}){e=Vt(t.min,e);const i=[],r=Ja(e);let s=Y5(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=r>s?Math.pow(10,r):0,c=Math.round((e-l)*o)/o,h=Math.floor((e-l)/a/10)*a*10;let d=Math.floor((c-h)/Math.pow(10,s)),p=Vt(t.min,Math.round((l+h+d*Math.pow(10,s))*o)/o);for(;p<n;)i.push({value:p,major:Bw(p),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),p=Math.round((l+h+d*Math.pow(10,s))*o)/o;const m=Vt(t.max,p);return i.push({value:m,major:Bw(m),significand:d}),i}class Ww extends Yr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const i=Wu.prototype.parse.apply(this,[e,n]);if(i===0){this._zero=!0;return}return Qe(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Qe(e)?Math.max(0,e):null,this.max=Qe(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Qe(this._userMin)&&(this.min=e===dr(this.min,0)?dr(this.min,-1):dr(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let i=this.min,r=this.max;const s=a=>i=e?i:a,o=a=>r=n?r:a;i===r&&(i<=0?(s(1),o(10)):(s(dr(i,-1)),o(dr(r,1)))),i<=0&&s(dr(r,-1)),r<=0&&o(dr(i,1)),this.min=i,this.max=r}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},i=X5(n,this);return e.bounds==="ticks"&&dS(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":Bm(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Ci(e),this._valueRange=Ci(this.max)-Ci(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Ci(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}Y(Ww,"id","logarithmic"),Y(Ww,"defaults",{ticks:{callback:Nh.formatters.logarithmic,major:{enabled:!0}}});function Op(t){const e=t.ticks;if(e.display&&t.display){const n=vt(e.backdropPadding);return ie(e.font&&e.font.size,Oe.font.size)+n.height}return 0}function J5(t,e,n){return n=Ae(n)?n:[n],{w:i4(t,e.string,n),h:n.length*e.lineHeight}}function Hw(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function Z5(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],r=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?$e/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));r[l]=c.padding;const h=t.getPointPosition(l,t.drawingArea+r[l],a),d=qe(c.font),p=J5(t.ctx,d,t._pointLabels[l]);i[l]=p;const m=un(t.getIndexAngle(l)+a),y=Math.round(Fm(m)),E=Hw(y,h.x,p.w,0,180),T=Hw(y,h.y,p.h,90,270);eU(n,e,m,E,T)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=iU(t,i,r)}function eU(t,e,n,i,r){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/s,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),r.start<e.t?(l=(e.t-r.start)/o,t.t=Math.min(t.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function tU(t,e,n){const i=t.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,i+r+o,s),c=Math.round(Fm(un(l.angle+Ut))),h=oU(l.y,a.h,c),d=rU(c),p=sU(l.x,a.w,d);return{visible:!0,x:l.x,y:h,textAlign:d,left:p,top:h,right:p+a.w,bottom:h+a.h}}function nU(t,e){if(!e)return!0;const{left:n,top:i,right:r,bottom:s}=t;return!(Yn({x:n,y:i},e)||Yn({x:n,y:s},e)||Yn({x:r,y:i},e)||Yn({x:r,y:s},e))}function iU(t,e,n){const i=[],r=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:Op(s)/2,additionalAngle:o?$e/r:0};let c;for(let h=0;h<r;h++){l.padding=n[h],l.size=e[h];const d=tU(t,h,l);i.push(d),a==="auto"&&(d.visible=nU(d,c),d.visible&&(c=d))}return i}function rU(t){return t===0||t===180?"center":t<180?"left":"right"}function sU(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function oU(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function aU(t,e,n){const{left:i,top:r,right:s,bottom:o}=n,{backdropColor:a}=e;if(!de(a)){const l=Cs(e.borderRadius),c=vt(e.backdropPadding);t.fillStyle=a;const h=i-c.left,d=r-c.top,p=s-i+c.width,m=o-r+c.height;Object.values(l).some(y=>y!==0)?(t.beginPath(),zu(t,{x:h,y:d,w:p,h:m,radius:l}),t.fill()):t.fillRect(h,d,p,m)}}function lU(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){const s=t._pointLabelItems[r];if(!s.visible)continue;const o=i.setContext(t.getPointLabelContext(r));aU(n,o,s);const a=qe(o.font),{x:l,y:c,textAlign:h}=s;zr(n,t._pointLabels[r],l,c+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}function WS(t,e,n,i){const{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,nn);else{let s=t.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=t.getPointPosition(o,e),r.lineTo(s.x,s.y)}}function cU(t,e,n,i,r){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),WS(t,n,o,i),s.closePath(),s.stroke(),s.restore())}function uU(t,e,n){return rr(t,{label:n,index:e,type:"pointLabel"})}class yc extends Wu{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=vt(Op(this.options)/2),n=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=Qe(e)&&!isNaN(e)?e:0,this.max=Qe(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Op(this.options))}generateTickLabels(e){Wu.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,i)=>{const r=_e(this.options.pointLabels.callback,[n,i],this);return r||r===0?r:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?Z5(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,i,r){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,i,r))}getIndexAngle(e){const n=nn/(this._pointLabels.length||1),i=this.options.startAngle||0;return un(e*n+Pi(i))}getDistanceFromCenterForValue(e){if(de(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(de(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const i=n[e];return uU(this.getContext(),e,i)}}getPointPosition(e,n,i=0){const r=this.getIndexAngle(e)-Ut+i;return{x:Math.cos(r)*n+this.xCenter,y:Math.sin(r)*n+this.yCenter,angle:r}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:i,right:r,bottom:s}=this._pointLabelItems[e];return{left:n,top:i,right:r,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),WS(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:i,grid:r,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&lU(this,o),r.display&&this.ticks.forEach((h,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(h.value);const p=this.getContext(d),m=r.setContext(p),y=s.setContext(p);cU(this,m,l,o,y)}}),i.display){for(e.save(),a=o-1;a>=0;a--){const h=i.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:p}=h;!p||!d||(e.lineWidth=p,e.strokeStyle=d,e.setLineDash(h.borderDash),e.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=i.setContext(this.getContext(l)),h=qe(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=h.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const d=vt(c.backdropPadding);e.fillRect(-o/2-d.left,-s-h.size/2-d.top,o+d.width,h.size+d.height)}zr(e,a.label,0,-s,h,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}Y(yc,"id","radialLinear"),Y(yc,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Nh.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),Y(yc,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Y(yc,"descriptors",{angleLines:{_fallback:"grid"}});const Lh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Pt=Object.keys(Lh);function qw(t,e){return t-e}function Kw(t,e){if(de(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),Qe(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(Ya(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,r)),+o)}function Gw(t,e,n,i){const r=Pt.length;for(let s=Pt.indexOf(t);s<r-1;++s){const o=Lh[Pt[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return Pt[s]}return Pt[r-1]}function hU(t,e,n,i,r){for(let s=Pt.length-1;s>=Pt.indexOf(n);s--){const o=Pt[s];if(Lh[o].common&&t._adapter.diff(r,i,o)>=e-1)return o}return Pt[n?Pt.indexOf(n):0]}function dU(t){for(let e=Pt.indexOf(t)+1,n=Pt.length;e<n;++e)if(Lh[Pt[e]].common)return Pt[e]}function Qw(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=jm(n,e),s=n[i]>=e?n[i]:n[r];t[s]=!0}}function fU(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function Yw(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!n?i:fU(t,i,r,n)}class Hu extends Yr{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new dj._date(e.adapters.date);r.init(n),da(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Kw(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=Qe(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=Qe(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=zF(r,s,o);return this._unit=n.unit||(i.autoSkip?Gw(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):hU(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:dU(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),Yw(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Xt(n,0,o),i=Xt(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||Gw(s.minUnit,n,i,this._getLabelCapacity(n)),a=ie(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Ya(l)||l===!0,h={};let d=n,p,m;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const y=r.ticks.source==="data"&&this.getDataTimestamps();for(p=d,m=0;p<i;p=+e.add(p,a,o),m++)Qw(h,p,y);return(p===i||r.bounds==="ticks"||m===1)&&Qw(h,p,y),Object.keys(h).sort(qw).map(E=>+E)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,s=this._unit,o=n||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,r){const s=this.options,o=s.ticks.callback;if(o)return _e(o,[e,n,i],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],d=c&&a[c],p=i[n],m=c&&d&&p&&p.major;return this._adapter.format(e,r||(m?d:h))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=Pi(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(e,0,Yw(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push(Kw(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return $F(e.sort(qw))}}Y(Hu,"id","time"),Y(Hu,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function _c(t,e,n){let i=0,r=t.length-1,s,o,a,l;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=Ir(t,"pos",e)),{pos:s,time:a}=t[i],{pos:o,time:l}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=Ir(t,"time",e)),{time:s,pos:a}=t[i],{time:o,pos:l}=t[r]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class Xw extends Hu{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=_c(n,this.min),this._tableRange=_c(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],s=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)h=r[o+1],l=r[o-1],c=r[o],Math.round((h+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(_c(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return _c(this._table,i*this._tableRange+this._minPos,!0)}}Y(Xw,"id","timeseries"),Y(Xw,"defaults",Hu.defaults);const HS="label";function Jw(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function pU(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function qS(t,e){t.labels=e}function KS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:HS;const i=[];t.datasets=e.map(r=>{const s=t.datasets.find(o=>o[n]===r[n]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function gU(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:HS;const n={labels:[],datasets:[]};return qS(n,t.labels),KS(n,t.datasets,e),n}function mU(t,e){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:h,updateMode:d,...p}=t,m=j.useRef(null),y=j.useRef(null),E=()=>{m.current&&(y.current=new Oh(m.current,{type:o,data:gU(a,s),options:l&&{...l},plugins:c}),Jw(e,y.current))},T=()=>{Jw(e,null),y.current&&(y.current.destroy(),y.current=null)};return j.useEffect(()=>{!r&&y.current&&l&&pU(y.current,l)},[r,l]),j.useEffect(()=>{!r&&y.current&&qS(y.current.config.data,a.labels)},[r,a.labels]),j.useEffect(()=>{!r&&y.current&&a.datasets&&KS(y.current.config.data,a.datasets,s)},[r,a.datasets]),j.useEffect(()=>{y.current&&(r?(T(),setTimeout(E)):y.current.update(d))},[r,l,a.labels,a.datasets,d]),j.useEffect(()=>{y.current&&(T(),setTimeout(E))},[o]),j.useEffect(()=>(E(),()=>T()),[]),el.createElement("canvas",{ref:m,role:"img",height:n,width:i,...p},h)}const yU=j.forwardRef(mU);function _U(t,e){return Oh.register(e),j.forwardRef((n,i)=>el.createElement(yU,{...n,ref:i,type:t}))}const vU=_U("line",Uc);Oh.register(Np,Mp,$c,Go,V5,H5,O5);const wU={chest:"가슴",back:"등",shoulder:"어깨",leg:"하체"},EU=()=>{const{user:t}=Qr(),[e,n]=j.useState("chest"),[i,r]=j.useState(null),[s,o]=j.useState(!0);j.useEffect(()=>{(async()=>{if(!t)return;o(!0);const c=await qV(t.uid,e);if(c.length>0){const h=c.map(m=>new Date(m.date).toLocaleDateString("ko-KR",{month:"short",day:"numeric"})),d=c.map(m=>m.weight),p=c.map(m=>m.successSets);r({labels:h,datasets:[{label:"무게 (kg)",data:d,borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)",yAxisID:"y"},{label:"성공 세트 수",data:p,borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)",yAxisID:"y1"}]})}else r(null);o(!1)})()},[t,e]);const a={responsive:!0,interaction:{mode:"index",intersect:!1},stacked:!1,scales:{y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"무게 (kg)"}},y1:{type:"linear",display:!0,position:"right",title:{display:!0,text:"성공 세트 수"},grid:{drawOnChartArea:!1},min:0,max:5}}};return C.jsxs(Yi,{children:[C.jsxs("div",{className:"mb-6",children:[C.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"진행 상황"}),C.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"나의 운동 성과를 확인하세요"})]}),C.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-6",children:[C.jsxs("div",{className:"mb-4",children:[C.jsx("label",{className:"block text-gray-700 dark:text-gray-300 font-medium mb-2",children:"부위 선택"}),C.jsx("select",{value:e,onChange:l=>n(l.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:Object.entries(wU).map(([l,c])=>C.jsx("option",{value:l,children:c},l))})]}),C.jsx("div",{className:"h-64 md:h-80",children:s?C.jsx("div",{className:"flex justify-center items-center h-full",children:C.jsx("div",{className:"spinner"})}):i?C.jsx(vU,{options:a,data:i}):C.jsx("div",{className:"flex justify-center items-center h-full",children:C.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"데이터가 없습니다. 운동을 기록해주세요."})})})]}),C.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[C.jsx("h2",{className:"text-lg font-medium text-gray-800 dark:text-gray-200 mb-4",children:"데이터 해석"}),C.jsxs("div",{className:"space-y-4 text-gray-600 dark:text-gray-400",children:[C.jsxs("p",{children:[C.jsx("span",{className:"inline-block w-3 h-3 bg-blue-500 rounded-full mr-2"}),C.jsx("strong",{children:"파란색 선"}),": 사용한 무게(kg)를 나타냅니다."]}),C.jsxs("p",{children:[C.jsx("span",{className:"inline-block w-3 h-3 bg-pink-500 rounded-full mr-2"}),C.jsx("strong",{children:"분홍색 선"}),": 각 세션에서 성공한 세트 수를 나타냅니다."]}),C.jsxs("p",{className:"mt-4",children:[C.jsx("strong",{children:"💡 팁:"})," 모든 세트를 성공적으로 완료한 후에 무게를 증가시키는 것이 이상적입니다. 그래프에서 분홍색 선이 5에 도달한 후 파란색 선이 상승하는 패턴이 보이면 올바른 진행 방향입니다."]})]})]})]})},TU={chest:"가슴",back:"등",shoulder:"어깨",leg:"하체"},xU=()=>{const[t,e]=j.useState("chest"),[n,i]=j.useState([]),[r,s]=j.useState(!0);return j.useEffect(()=>{(async()=>{s(!0);const a=await KV(t);i(a),s(!1)})()},[t]),C.jsxs(Yi,{children:[C.jsxs("div",{className:"mb-6",children:[C.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"자주 묻는 질문"}),C.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"올바른 운동 방법 정보"})]}),C.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-6",children:[C.jsxs("div",{className:"mb-6",children:[C.jsx("label",{className:"block text-gray-700 dark:text-gray-300 font-medium mb-2",children:"부위 선택"}),C.jsx("select",{value:t,onChange:o=>e(o.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:Object.entries(TU).map(([o,a])=>C.jsx("option",{value:o,children:a},o))})]}),r?C.jsx("div",{className:"flex justify-center items-center h-32",children:C.jsx("div",{className:"spinner"})}):n.length>0?C.jsx("div",{className:"space-y-6",children:n.map(o=>C.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-6 last:border-0 last:pb-0",children:[C.jsx("h3",{className:"text-lg font-medium text-gray-800 dark:text-gray-200 mb-2",children:o.question}),C.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:o.answer}),o.videoUrl&&C.jsxs("a",{href:o.videoUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-blue-500 hover:text-blue-700",children:[C.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"영상 보기"]})]},o.id))}):C.jsx("div",{className:"text-center py-10",children:C.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"이 부위에 대한 Q&A가 없습니다."})})]})]})},IU=()=>{var r;const{user:t,logout:e}=Qr(),n=Wr(),i=async()=>{await $V(),e(),n("/login")};return C.jsxs(Yi,{children:[C.jsx("div",{className:"mb-6",children:C.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"설정"})}),C.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden mb-6",children:[C.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:C.jsxs("div",{className:"flex items-center",children:[t!=null&&t.photoURL?C.jsx("img",{src:t.photoURL,alt:t.displayName||"사용자",className:"w-12 h-12 rounded-full mr-4"}):C.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500 flex items-center justify-center text-white text-lg font-bold mr-4",children:((r=t==null?void 0:t.displayName)==null?void 0:r[0])||"U"}),C.jsxs("div",{children:[C.jsx("h2",{className:"text-lg font-medium text-gray-800 dark:text-gray-200",children:(t==null?void 0:t.displayName)||"사용자"}),C.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:t==null?void 0:t.email})]})]})}),C.jsxs("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[C.jsx("button",{onClick:i,className:"w-full text-left px-6 py-4 text-red-500 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none",children:"로그아웃"}),C.jsx("a",{href:"https://corevia.com/privacy",target:"_blank",rel:"noopener noreferrer",className:"block px-6 py-4 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"개인정보 처리방침"}),C.jsx("a",{href:"https://corevia.com/terms",target:"_blank",rel:"noopener noreferrer",className:"block px-6 py-4 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"이용약관"})]})]}),C.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[C.jsx("h3",{className:"text-lg font-medium text-gray-800 dark:text-gray-200 mb-4",children:"앱 정보"}),C.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[C.jsx("p",{children:"Corevia Training Tracker"}),C.jsx("p",{children:"버전: 1.0.0"}),C.jsx("p",{children:"© 2025 Corevia. All rights reserved."})]})]})]})},SU=()=>{const{setUser:t}=Qr();return j.useEffect(()=>{const e=w2(Rh,n=>{t(n?{uid:n.uid,displayName:n.displayName||"사용자",email:n.email||"",photoURL:n.photoURL||void 0}:null)});return()=>e()},[t]),C.jsx(YC,{children:C.jsxs($C,{children:[C.jsx(Vn,{path:"/login",element:C.jsx(QV,{})}),C.jsx(Vn,{path:"/",element:C.jsx(ns,{children:C.jsx(XV,{})})}),C.jsx(Vn,{path:"/record",element:C.jsx(ns,{children:C.jsx(tF,{})})}),C.jsx(Vn,{path:"/feedback",element:C.jsx(ns,{children:C.jsx(nF,{})})}),C.jsx(Vn,{path:"/graph",element:C.jsx(ns,{children:C.jsx(EU,{})})}),C.jsx(Vn,{path:"/qna",element:C.jsx(ns,{children:C.jsx(xU,{})})}),C.jsx(Vn,{path:"/settings",element:C.jsx(ns,{children:C.jsx(IU,{})})}),C.jsx(Vn,{path:"*",element:C.jsx(ET,{to:"/",replace:!0})})]})})};of.createRoot(document.getElementById("root")).render(C.jsx(el.StrictMode,{children:C.jsx(SU,{})}));

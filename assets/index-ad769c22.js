var $b=Object.defineProperty;var Wb=(t,e,n)=>e in t?$b(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Q=(t,e,n)=>(Wb(t,typeof e!="symbol"?e+"":e,n),n);function Hb(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function vE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wE={exports:{}},lh={},EE={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sl=Symbol.for("react.element"),qb=Symbol.for("react.portal"),Kb=Symbol.for("react.fragment"),Gb=Symbol.for("react.strict_mode"),Qb=Symbol.for("react.profiler"),Yb=Symbol.for("react.provider"),Xb=Symbol.for("react.context"),Jb=Symbol.for("react.forward_ref"),Zb=Symbol.for("react.suspense"),ek=Symbol.for("react.memo"),tk=Symbol.for("react.lazy"),m_=Symbol.iterator;function nk(t){return t===null||typeof t!="object"?null:(t=m_&&t[m_]||t["@@iterator"],typeof t=="function"?t:null)}var TE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},IE=Object.assign,xE={};function io(t,e,n){this.props=t,this.context=e,this.refs=xE,this.updater=n||TE}io.prototype.isReactComponent={};io.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};io.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function SE(){}SE.prototype=io.prototype;function rg(t,e,n){this.props=t,this.context=e,this.refs=xE,this.updater=n||TE}var ig=rg.prototype=new SE;ig.constructor=rg;IE(ig,io.prototype);ig.isPureReactComponent=!0;var y_=Array.isArray,bE=Object.prototype.hasOwnProperty,sg={current:null},kE={key:!0,ref:!0,__self:!0,__source:!0};function AE(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)bE.call(e,r)&&!kE.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:sl,type:t,key:s,ref:o,props:i,_owner:sg.current}}function rk(t,e){return{$$typeof:sl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function og(t){return typeof t=="object"&&t!==null&&t.$$typeof===sl}function ik(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var __=/\/+/g;function Td(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ik(""+t.key):e.toString(36)}function Dc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case sl:case qb:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Td(o,0):r,y_(i)?(n="",t!=null&&(n=t.replace(__,"$&/")+"/"),Dc(i,e,n,"",function(c){return c})):i!=null&&(og(i)&&(i=rk(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(__,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",y_(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Td(s,a);o+=Dc(s,e,n,l,i)}else if(l=nk(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Td(s,a++),o+=Dc(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function $l(t,e,n){if(t==null)return t;var r=[],i=0;return Dc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function sk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xt={current:null},Nc={transition:null},ok={ReactCurrentDispatcher:xt,ReactCurrentBatchConfig:Nc,ReactCurrentOwner:sg};function PE(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:$l,forEach:function(t,e,n){$l(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $l(t,function(){e++}),e},toArray:function(t){return $l(t,function(e){return e})||[]},only:function(t){if(!og(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ee.Component=io;ee.Fragment=Kb;ee.Profiler=Qb;ee.PureComponent=rg;ee.StrictMode=Gb;ee.Suspense=Zb;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ok;ee.act=PE;ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=IE({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=sg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)bE.call(e,l)&&!kE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:sl,type:t.type,key:i,ref:s,props:r,_owner:o}};ee.createContext=function(t){return t={$$typeof:Xb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Yb,_context:t},t.Consumer=t};ee.createElement=AE;ee.createFactory=function(t){var e=AE.bind(null,t);return e.type=t,e};ee.createRef=function(){return{current:null}};ee.forwardRef=function(t){return{$$typeof:Jb,render:t}};ee.isValidElement=og;ee.lazy=function(t){return{$$typeof:tk,_payload:{_status:-1,_result:t},_init:sk}};ee.memo=function(t,e){return{$$typeof:ek,type:t,compare:e===void 0?null:e}};ee.startTransition=function(t){var e=Nc.transition;Nc.transition={};try{t()}finally{Nc.transition=e}};ee.unstable_act=PE;ee.useCallback=function(t,e){return xt.current.useCallback(t,e)};ee.useContext=function(t){return xt.current.useContext(t)};ee.useDebugValue=function(){};ee.useDeferredValue=function(t){return xt.current.useDeferredValue(t)};ee.useEffect=function(t,e){return xt.current.useEffect(t,e)};ee.useId=function(){return xt.current.useId()};ee.useImperativeHandle=function(t,e,n){return xt.current.useImperativeHandle(t,e,n)};ee.useInsertionEffect=function(t,e){return xt.current.useInsertionEffect(t,e)};ee.useLayoutEffect=function(t,e){return xt.current.useLayoutEffect(t,e)};ee.useMemo=function(t,e){return xt.current.useMemo(t,e)};ee.useReducer=function(t,e,n){return xt.current.useReducer(t,e,n)};ee.useRef=function(t){return xt.current.useRef(t)};ee.useState=function(t){return xt.current.useState(t)};ee.useSyncExternalStore=function(t,e,n){return xt.current.useSyncExternalStore(t,e,n)};ee.useTransition=function(){return xt.current.useTransition()};ee.version="18.3.1";EE.exports=ee;var V=EE.exports;const ol=vE(V),ak=Hb({__proto__:null,default:ol},[V]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lk=V,ck=Symbol.for("react.element"),uk=Symbol.for("react.fragment"),hk=Object.prototype.hasOwnProperty,dk=lk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fk={key:!0,ref:!0,__self:!0,__source:!0};function CE(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)hk.call(e,r)&&!fk.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:ck,type:t,key:s,ref:o,props:i,_owner:dk.current}}lh.Fragment=uk;lh.jsx=CE;lh.jsxs=CE;wE.exports=lh;var P=wE.exports,Tf={},RE={exports:{}},Wt={},DE={exports:{}},NE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,K){var G=B.length;B.push(K);e:for(;0<G;){var pe=G-1>>>1,re=B[pe];if(0<i(re,K))B[pe]=K,B[G]=re,G=pe;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var K=B[0],G=B.pop();if(G!==K){B[0]=G;e:for(var pe=0,re=B.length,me=re>>>1;pe<me;){var Ye=2*(pe+1)-1,yt=B[Ye],Xe=Ye+1,vn=B[Xe];if(0>i(yt,G))Xe<re&&0>i(vn,yt)?(B[pe]=vn,B[Xe]=G,pe=Xe):(B[pe]=yt,B[Ye]=G,pe=Ye);else if(Xe<re&&0>i(vn,G))B[pe]=vn,B[Xe]=G,pe=Xe;else break e}}return K}function i(B,K){var G=B.sortIndex-K.sortIndex;return G!==0?G:B.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,m=!1,y=!1,w=!1,I=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(B){for(var K=n(c);K!==null;){if(K.callback===null)r(c);else if(K.startTime<=B)r(c),K.sortIndex=K.expirationTime,e(l,K);else break;K=n(c)}}function R(B){if(w=!1,S(B),!y)if(n(l)!==null)y=!0,Se(N);else{var K=n(c);K!==null&&Ce(R,K.startTime-B)}}function N(B,K){y=!1,w&&(w=!1,_(v),v=-1),m=!0;var G=p;try{for(S(K),d=n(l);d!==null&&(!(d.expirationTime>K)||B&&!C());){var pe=d.callback;if(typeof pe=="function"){d.callback=null,p=d.priorityLevel;var re=pe(d.expirationTime<=K);K=t.unstable_now(),typeof re=="function"?d.callback=re:d===n(l)&&r(l),S(K)}else r(l);d=n(l)}if(d!==null)var me=!0;else{var Ye=n(c);Ye!==null&&Ce(R,Ye.startTime-K),me=!1}return me}finally{d=null,p=G,m=!1}}var M=!1,x=null,v=-1,b=5,k=-1;function C(){return!(t.unstable_now()-k<b)}function D(){if(x!==null){var B=t.unstable_now();k=B;var K=!0;try{K=x(!0,B)}finally{K?A():(M=!1,x=null)}}else M=!1}var A;if(typeof T=="function")A=function(){T(D)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,oe=we.port2;we.port1.onmessage=D,A=function(){oe.postMessage(null)}}else A=function(){I(D,0)};function Se(B){x=B,M||(M=!0,A())}function Ce(B,K){v=I(function(){B(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,Se(N))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(p){case 1:case 2:case 3:var K=3;break;default:K=p}var G=p;p=K;try{return B()}finally{p=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,K){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var G=p;p=B;try{return K()}finally{p=G}},t.unstable_scheduleCallback=function(B,K,G){var pe=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?pe+G:pe):G=pe,B){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=G+re,B={id:h++,callback:K,priorityLevel:B,startTime:G,expirationTime:re,sortIndex:-1},G>pe?(B.sortIndex=G,e(c,B),n(l)===null&&B===n(c)&&(w?(_(v),v=-1):w=!0,Ce(R,G-pe))):(B.sortIndex=re,e(l,B),y||m||(y=!0,Se(N))),B},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(B){var K=p;return function(){var G=p;p=K;try{return B.apply(this,arguments)}finally{p=G}}}})(NE);DE.exports=NE;var pk=DE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gk=V,$t=pk;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var OE=new Set,Ia={};function Qi(t,e){Fs(t,e),Fs(t+"Capture",e)}function Fs(t,e){for(Ia[t]=e,t=0;t<e.length;t++)OE.add(e[t])}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),If=Object.prototype.hasOwnProperty,mk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v_={},w_={};function yk(t){return If.call(w_,t)?!0:If.call(v_,t)?!1:mk.test(t)?w_[t]=!0:(v_[t]=!0,!1)}function _k(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function vk(t,e,n,r){if(e===null||typeof e>"u"||_k(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function St(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var it={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){it[t]=new St(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];it[e]=new St(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){it[t]=new St(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){it[t]=new St(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){it[t]=new St(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){it[t]=new St(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){it[t]=new St(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){it[t]=new St(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){it[t]=new St(t,5,!1,t.toLowerCase(),null,!1,!1)});var ag=/[\-:]([a-z])/g;function lg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ag,lg);it[e]=new St(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ag,lg);it[e]=new St(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ag,lg);it[e]=new St(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){it[t]=new St(t,1,!1,t.toLowerCase(),null,!1,!1)});it.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){it[t]=new St(t,1,!1,t.toLowerCase(),null,!0,!0)});function cg(t,e,n,r){var i=it.hasOwnProperty(e)?it[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(vk(e,n,i,r)&&(n=null),r||i===null?yk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var or=gk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wl=Symbol.for("react.element"),ps=Symbol.for("react.portal"),gs=Symbol.for("react.fragment"),ug=Symbol.for("react.strict_mode"),xf=Symbol.for("react.profiler"),ME=Symbol.for("react.provider"),LE=Symbol.for("react.context"),hg=Symbol.for("react.forward_ref"),Sf=Symbol.for("react.suspense"),bf=Symbol.for("react.suspense_list"),dg=Symbol.for("react.memo"),gr=Symbol.for("react.lazy"),VE=Symbol.for("react.offscreen"),E_=Symbol.iterator;function Ro(t){return t===null||typeof t!="object"?null:(t=E_&&t[E_]||t["@@iterator"],typeof t=="function"?t:null)}var Ae=Object.assign,Id;function Ho(t){if(Id===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Id=e&&e[1]||""}return`
`+Id+t}var xd=!1;function Sd(t,e){if(!t||xd)return"";xd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{xd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ho(t):""}function wk(t){switch(t.tag){case 5:return Ho(t.type);case 16:return Ho("Lazy");case 13:return Ho("Suspense");case 19:return Ho("SuspenseList");case 0:case 2:case 15:return t=Sd(t.type,!1),t;case 11:return t=Sd(t.type.render,!1),t;case 1:return t=Sd(t.type,!0),t;default:return""}}function kf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case gs:return"Fragment";case ps:return"Portal";case xf:return"Profiler";case ug:return"StrictMode";case Sf:return"Suspense";case bf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case LE:return(t.displayName||"Context")+".Consumer";case ME:return(t._context.displayName||"Context")+".Provider";case hg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case dg:return e=t.displayName||null,e!==null?e:kf(t.type)||"Memo";case gr:e=t._payload,t=t._init;try{return kf(t(e))}catch{}}return null}function Ek(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return kf(e);case 8:return e===ug?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Yr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function FE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Tk(t){var e=FE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Hl(t){t._valueTracker||(t._valueTracker=Tk(t))}function jE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=FE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function iu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Af(t,e){var n=e.checked;return Ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function T_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Yr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function UE(t,e){e=e.checked,e!=null&&cg(t,"checked",e,!1)}function Pf(t,e){UE(t,e);var n=Yr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Cf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Cf(t,e.type,Yr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function I_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Cf(t,e,n){(e!=="number"||iu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var qo=Array.isArray;function ks(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Yr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Rf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function x_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(qo(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Yr(n)}}function zE(t,e){var n=Yr(e.value),r=Yr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function S_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function BE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Df(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?BE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ql,$E=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ql=ql||document.createElement("div"),ql.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ql.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var na={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ik=["Webkit","ms","Moz","O"];Object.keys(na).forEach(function(t){Ik.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),na[e]=na[t]})});function WE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||na.hasOwnProperty(t)&&na[t]?(""+e).trim():e+"px"}function HE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=WE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var xk=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nf(t,e){if(e){if(xk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Of(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mf=null;function fg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Lf=null,As=null,Ps=null;function b_(t){if(t=cl(t)){if(typeof Lf!="function")throw Error(U(280));var e=t.stateNode;e&&(e=fh(e),Lf(t.stateNode,t.type,e))}}function qE(t){As?Ps?Ps.push(t):Ps=[t]:As=t}function KE(){if(As){var t=As,e=Ps;if(Ps=As=null,b_(t),e)for(t=0;t<e.length;t++)b_(e[t])}}function GE(t,e){return t(e)}function QE(){}var bd=!1;function YE(t,e,n){if(bd)return t(e,n);bd=!0;try{return GE(t,e,n)}finally{bd=!1,(As!==null||Ps!==null)&&(QE(),KE())}}function Sa(t,e){var n=t.stateNode;if(n===null)return null;var r=fh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Vf=!1;if(Yn)try{var Do={};Object.defineProperty(Do,"passive",{get:function(){Vf=!0}}),window.addEventListener("test",Do,Do),window.removeEventListener("test",Do,Do)}catch{Vf=!1}function Sk(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var ra=!1,su=null,ou=!1,Ff=null,bk={onError:function(t){ra=!0,su=t}};function kk(t,e,n,r,i,s,o,a,l){ra=!1,su=null,Sk.apply(bk,arguments)}function Ak(t,e,n,r,i,s,o,a,l){if(kk.apply(this,arguments),ra){if(ra){var c=su;ra=!1,su=null}else throw Error(U(198));ou||(ou=!0,Ff=c)}}function Yi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function XE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function k_(t){if(Yi(t)!==t)throw Error(U(188))}function Pk(t){var e=t.alternate;if(!e){if(e=Yi(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return k_(i),t;if(s===r)return k_(i),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function JE(t){return t=Pk(t),t!==null?ZE(t):null}function ZE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ZE(t);if(e!==null)return e;t=t.sibling}return null}var e1=$t.unstable_scheduleCallback,A_=$t.unstable_cancelCallback,Ck=$t.unstable_shouldYield,Rk=$t.unstable_requestPaint,Le=$t.unstable_now,Dk=$t.unstable_getCurrentPriorityLevel,pg=$t.unstable_ImmediatePriority,t1=$t.unstable_UserBlockingPriority,au=$t.unstable_NormalPriority,Nk=$t.unstable_LowPriority,n1=$t.unstable_IdlePriority,ch=null,Sn=null;function Ok(t){if(Sn&&typeof Sn.onCommitFiberRoot=="function")try{Sn.onCommitFiberRoot(ch,t,void 0,(t.current.flags&128)===128)}catch{}}var fn=Math.clz32?Math.clz32:Vk,Mk=Math.log,Lk=Math.LN2;function Vk(t){return t>>>=0,t===0?32:31-(Mk(t)/Lk|0)|0}var Kl=64,Gl=4194304;function Ko(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function lu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Ko(a):(s&=o,s!==0&&(r=Ko(s)))}else o=n&~i,o!==0?r=Ko(o):s!==0&&(r=Ko(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-fn(e),i=1<<n,r|=t[n],e&=~i;return r}function Fk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-fn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=Fk(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function jf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function r1(){var t=Kl;return Kl<<=1,!(Kl&4194240)&&(Kl=64),t}function kd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function al(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-fn(e),t[e]=n}function Uk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-fn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function gg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-fn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var de=0;function i1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var s1,mg,o1,a1,l1,Uf=!1,Ql=[],Lr=null,Vr=null,Fr=null,ba=new Map,ka=new Map,yr=[],zk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function P_(t,e){switch(t){case"focusin":case"focusout":Lr=null;break;case"dragenter":case"dragleave":Vr=null;break;case"mouseover":case"mouseout":Fr=null;break;case"pointerover":case"pointerout":ba.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ka.delete(e.pointerId)}}function No(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=cl(e),e!==null&&mg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Bk(t,e,n,r,i){switch(e){case"focusin":return Lr=No(Lr,t,e,n,r,i),!0;case"dragenter":return Vr=No(Vr,t,e,n,r,i),!0;case"mouseover":return Fr=No(Fr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ba.set(s,No(ba.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ka.set(s,No(ka.get(s)||null,t,e,n,r,i)),!0}return!1}function c1(t){var e=Ti(t.target);if(e!==null){var n=Yi(e);if(n!==null){if(e=n.tag,e===13){if(e=XE(n),e!==null){t.blockedOn=e,l1(t.priority,function(){o1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Oc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=zf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Mf=r,n.target.dispatchEvent(r),Mf=null}else return e=cl(n),e!==null&&mg(e),t.blockedOn=n,!1;e.shift()}return!0}function C_(t,e,n){Oc(t)&&n.delete(e)}function $k(){Uf=!1,Lr!==null&&Oc(Lr)&&(Lr=null),Vr!==null&&Oc(Vr)&&(Vr=null),Fr!==null&&Oc(Fr)&&(Fr=null),ba.forEach(C_),ka.forEach(C_)}function Oo(t,e){t.blockedOn===e&&(t.blockedOn=null,Uf||(Uf=!0,$t.unstable_scheduleCallback($t.unstable_NormalPriority,$k)))}function Aa(t){function e(i){return Oo(i,t)}if(0<Ql.length){Oo(Ql[0],t);for(var n=1;n<Ql.length;n++){var r=Ql[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Lr!==null&&Oo(Lr,t),Vr!==null&&Oo(Vr,t),Fr!==null&&Oo(Fr,t),ba.forEach(e),ka.forEach(e),n=0;n<yr.length;n++)r=yr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<yr.length&&(n=yr[0],n.blockedOn===null);)c1(n),n.blockedOn===null&&yr.shift()}var Cs=or.ReactCurrentBatchConfig,cu=!0;function Wk(t,e,n,r){var i=de,s=Cs.transition;Cs.transition=null;try{de=1,yg(t,e,n,r)}finally{de=i,Cs.transition=s}}function Hk(t,e,n,r){var i=de,s=Cs.transition;Cs.transition=null;try{de=4,yg(t,e,n,r)}finally{de=i,Cs.transition=s}}function yg(t,e,n,r){if(cu){var i=zf(t,e,n,r);if(i===null)Vd(t,e,r,uu,n),P_(t,r);else if(Bk(i,t,e,n,r))r.stopPropagation();else if(P_(t,r),e&4&&-1<zk.indexOf(t)){for(;i!==null;){var s=cl(i);if(s!==null&&s1(s),s=zf(t,e,n,r),s===null&&Vd(t,e,r,uu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Vd(t,e,r,null,n)}}var uu=null;function zf(t,e,n,r){if(uu=null,t=fg(r),t=Ti(t),t!==null)if(e=Yi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=XE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return uu=t,null}function u1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dk()){case pg:return 1;case t1:return 4;case au:case Nk:return 16;case n1:return 536870912;default:return 16}default:return 16}}var br=null,_g=null,Mc=null;function h1(){if(Mc)return Mc;var t,e=_g,n=e.length,r,i="value"in br?br.value:br.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Mc=i.slice(t,1<r?1-r:void 0)}function Lc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Yl(){return!0}function R_(){return!1}function Ht(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Yl:R_,this.isPropagationStopped=R_,this}return Ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Yl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Yl)},persist:function(){},isPersistent:Yl}),e}var so={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vg=Ht(so),ll=Ae({},so,{view:0,detail:0}),qk=Ht(ll),Ad,Pd,Mo,uh=Ae({},ll,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Mo&&(Mo&&t.type==="mousemove"?(Ad=t.screenX-Mo.screenX,Pd=t.screenY-Mo.screenY):Pd=Ad=0,Mo=t),Ad)},movementY:function(t){return"movementY"in t?t.movementY:Pd}}),D_=Ht(uh),Kk=Ae({},uh,{dataTransfer:0}),Gk=Ht(Kk),Qk=Ae({},ll,{relatedTarget:0}),Cd=Ht(Qk),Yk=Ae({},so,{animationName:0,elapsedTime:0,pseudoElement:0}),Xk=Ht(Yk),Jk=Ae({},so,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Zk=Ht(Jk),eA=Ae({},so,{data:0}),N_=Ht(eA),tA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=rA[t])?!!e[t]:!1}function wg(){return iA}var sA=Ae({},ll,{key:function(t){if(t.key){var e=tA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Lc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?nA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wg,charCode:function(t){return t.type==="keypress"?Lc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Lc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),oA=Ht(sA),aA=Ae({},uh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),O_=Ht(aA),lA=Ae({},ll,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wg}),cA=Ht(lA),uA=Ae({},so,{propertyName:0,elapsedTime:0,pseudoElement:0}),hA=Ht(uA),dA=Ae({},uh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),fA=Ht(dA),pA=[9,13,27,32],Eg=Yn&&"CompositionEvent"in window,ia=null;Yn&&"documentMode"in document&&(ia=document.documentMode);var gA=Yn&&"TextEvent"in window&&!ia,d1=Yn&&(!Eg||ia&&8<ia&&11>=ia),M_=String.fromCharCode(32),L_=!1;function f1(t,e){switch(t){case"keyup":return pA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function p1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ms=!1;function mA(t,e){switch(t){case"compositionend":return p1(e);case"keypress":return e.which!==32?null:(L_=!0,M_);case"textInput":return t=e.data,t===M_&&L_?null:t;default:return null}}function yA(t,e){if(ms)return t==="compositionend"||!Eg&&f1(t,e)?(t=h1(),Mc=_g=br=null,ms=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return d1&&e.locale!=="ko"?null:e.data;default:return null}}var _A={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function V_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!_A[t.type]:e==="textarea"}function g1(t,e,n,r){qE(r),e=hu(e,"onChange"),0<e.length&&(n=new vg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var sa=null,Pa=null;function vA(t){b1(t,0)}function hh(t){var e=vs(t);if(jE(e))return t}function wA(t,e){if(t==="change")return e}var m1=!1;if(Yn){var Rd;if(Yn){var Dd="oninput"in document;if(!Dd){var F_=document.createElement("div");F_.setAttribute("oninput","return;"),Dd=typeof F_.oninput=="function"}Rd=Dd}else Rd=!1;m1=Rd&&(!document.documentMode||9<document.documentMode)}function j_(){sa&&(sa.detachEvent("onpropertychange",y1),Pa=sa=null)}function y1(t){if(t.propertyName==="value"&&hh(Pa)){var e=[];g1(e,Pa,t,fg(t)),YE(vA,e)}}function EA(t,e,n){t==="focusin"?(j_(),sa=e,Pa=n,sa.attachEvent("onpropertychange",y1)):t==="focusout"&&j_()}function TA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hh(Pa)}function IA(t,e){if(t==="click")return hh(e)}function xA(t,e){if(t==="input"||t==="change")return hh(e)}function SA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gn=typeof Object.is=="function"?Object.is:SA;function Ca(t,e){if(gn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!If.call(e,i)||!gn(t[i],e[i]))return!1}return!0}function U_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function z_(t,e){var n=U_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=U_(n)}}function _1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?_1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function v1(){for(var t=window,e=iu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=iu(t.document)}return e}function Tg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function bA(t){var e=v1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&_1(n.ownerDocument.documentElement,n)){if(r!==null&&Tg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=z_(n,s);var o=z_(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var kA=Yn&&"documentMode"in document&&11>=document.documentMode,ys=null,Bf=null,oa=null,$f=!1;function B_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$f||ys==null||ys!==iu(r)||(r=ys,"selectionStart"in r&&Tg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),oa&&Ca(oa,r)||(oa=r,r=hu(Bf,"onSelect"),0<r.length&&(e=new vg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ys)))}function Xl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _s={animationend:Xl("Animation","AnimationEnd"),animationiteration:Xl("Animation","AnimationIteration"),animationstart:Xl("Animation","AnimationStart"),transitionend:Xl("Transition","TransitionEnd")},Nd={},w1={};Yn&&(w1=document.createElement("div").style,"AnimationEvent"in window||(delete _s.animationend.animation,delete _s.animationiteration.animation,delete _s.animationstart.animation),"TransitionEvent"in window||delete _s.transitionend.transition);function dh(t){if(Nd[t])return Nd[t];if(!_s[t])return t;var e=_s[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in w1)return Nd[t]=e[n];return t}var E1=dh("animationend"),T1=dh("animationiteration"),I1=dh("animationstart"),x1=dh("transitionend"),S1=new Map,$_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ni(t,e){S1.set(t,e),Qi(e,[t])}for(var Od=0;Od<$_.length;Od++){var Md=$_[Od],AA=Md.toLowerCase(),PA=Md[0].toUpperCase()+Md.slice(1);ni(AA,"on"+PA)}ni(E1,"onAnimationEnd");ni(T1,"onAnimationIteration");ni(I1,"onAnimationStart");ni("dblclick","onDoubleClick");ni("focusin","onFocus");ni("focusout","onBlur");ni(x1,"onTransitionEnd");Fs("onMouseEnter",["mouseout","mouseover"]);Fs("onMouseLeave",["mouseout","mouseover"]);Fs("onPointerEnter",["pointerout","pointerover"]);Fs("onPointerLeave",["pointerout","pointerover"]);Qi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Go));function W_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Ak(r,e,void 0,t),t.currentTarget=null}function b1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;W_(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;W_(i,a,c),s=l}}}if(ou)throw t=Ff,ou=!1,Ff=null,t}function Te(t,e){var n=e[Gf];n===void 0&&(n=e[Gf]=new Set);var r=t+"__bubble";n.has(r)||(k1(e,t,2,!1),n.add(r))}function Ld(t,e,n){var r=0;e&&(r|=4),k1(n,t,r,e)}var Jl="_reactListening"+Math.random().toString(36).slice(2);function Ra(t){if(!t[Jl]){t[Jl]=!0,OE.forEach(function(n){n!=="selectionchange"&&(CA.has(n)||Ld(n,!1,t),Ld(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Jl]||(e[Jl]=!0,Ld("selectionchange",!1,e))}}function k1(t,e,n,r){switch(u1(e)){case 1:var i=Wk;break;case 4:i=Hk;break;default:i=yg}n=i.bind(null,e,n,t),i=void 0,!Vf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Vd(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ti(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}YE(function(){var c=s,h=fg(n),d=[];e:{var p=S1.get(t);if(p!==void 0){var m=vg,y=t;switch(t){case"keypress":if(Lc(n)===0)break e;case"keydown":case"keyup":m=oA;break;case"focusin":y="focus",m=Cd;break;case"focusout":y="blur",m=Cd;break;case"beforeblur":case"afterblur":m=Cd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=D_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Gk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=cA;break;case E1:case T1:case I1:m=Xk;break;case x1:m=hA;break;case"scroll":m=qk;break;case"wheel":m=fA;break;case"copy":case"cut":case"paste":m=Zk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=O_}var w=(e&4)!==0,I=!w&&t==="scroll",_=w?p!==null?p+"Capture":null:p;w=[];for(var T=c,S;T!==null;){S=T;var R=S.stateNode;if(S.tag===5&&R!==null&&(S=R,_!==null&&(R=Sa(T,_),R!=null&&w.push(Da(T,R,S)))),I)break;T=T.return}0<w.length&&(p=new m(p,y,null,n,h),d.push({event:p,listeners:w}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==Mf&&(y=n.relatedTarget||n.fromElement)&&(Ti(y)||y[Xn]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=c,y=y?Ti(y):null,y!==null&&(I=Yi(y),y!==I||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(w=D_,R="onMouseLeave",_="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(w=O_,R="onPointerLeave",_="onPointerEnter",T="pointer"),I=m==null?p:vs(m),S=y==null?p:vs(y),p=new w(R,T+"leave",m,n,h),p.target=I,p.relatedTarget=S,R=null,Ti(h)===c&&(w=new w(_,T+"enter",y,n,h),w.target=S,w.relatedTarget=I,R=w),I=R,m&&y)t:{for(w=m,_=y,T=0,S=w;S;S=ls(S))T++;for(S=0,R=_;R;R=ls(R))S++;for(;0<T-S;)w=ls(w),T--;for(;0<S-T;)_=ls(_),S--;for(;T--;){if(w===_||_!==null&&w===_.alternate)break t;w=ls(w),_=ls(_)}w=null}else w=null;m!==null&&H_(d,p,m,w,!1),y!==null&&I!==null&&H_(d,I,y,w,!0)}}e:{if(p=c?vs(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var N=wA;else if(V_(p))if(m1)N=xA;else{N=TA;var M=EA}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(N=IA);if(N&&(N=N(t,c))){g1(d,N,n,h);break e}M&&M(t,p,c),t==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&Cf(p,"number",p.value)}switch(M=c?vs(c):window,t){case"focusin":(V_(M)||M.contentEditable==="true")&&(ys=M,Bf=c,oa=null);break;case"focusout":oa=Bf=ys=null;break;case"mousedown":$f=!0;break;case"contextmenu":case"mouseup":case"dragend":$f=!1,B_(d,n,h);break;case"selectionchange":if(kA)break;case"keydown":case"keyup":B_(d,n,h)}var x;if(Eg)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else ms?f1(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(d1&&n.locale!=="ko"&&(ms||v!=="onCompositionStart"?v==="onCompositionEnd"&&ms&&(x=h1()):(br=h,_g="value"in br?br.value:br.textContent,ms=!0)),M=hu(c,v),0<M.length&&(v=new N_(v,t,null,n,h),d.push({event:v,listeners:M}),x?v.data=x:(x=p1(n),x!==null&&(v.data=x)))),(x=gA?mA(t,n):yA(t,n))&&(c=hu(c,"onBeforeInput"),0<c.length&&(h=new N_("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=x))}b1(d,e)})}function Da(t,e,n){return{instance:t,listener:e,currentTarget:n}}function hu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Sa(t,n),s!=null&&r.unshift(Da(t,s,i)),s=Sa(t,e),s!=null&&r.push(Da(t,s,i))),t=t.return}return r}function ls(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function H_(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Sa(n,s),l!=null&&o.unshift(Da(n,l,a))):i||(l=Sa(n,s),l!=null&&o.push(Da(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var RA=/\r\n?/g,DA=/\u0000|\uFFFD/g;function q_(t){return(typeof t=="string"?t:""+t).replace(RA,`
`).replace(DA,"")}function Zl(t,e,n){if(e=q_(e),q_(t)!==e&&n)throw Error(U(425))}function du(){}var Wf=null,Hf=null;function qf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Kf=typeof setTimeout=="function"?setTimeout:void 0,NA=typeof clearTimeout=="function"?clearTimeout:void 0,K_=typeof Promise=="function"?Promise:void 0,OA=typeof queueMicrotask=="function"?queueMicrotask:typeof K_<"u"?function(t){return K_.resolve(null).then(t).catch(MA)}:Kf;function MA(t){setTimeout(function(){throw t})}function Fd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Aa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Aa(e)}function jr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function G_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var oo=Math.random().toString(36).slice(2),xn="__reactFiber$"+oo,Na="__reactProps$"+oo,Xn="__reactContainer$"+oo,Gf="__reactEvents$"+oo,LA="__reactListeners$"+oo,VA="__reactHandles$"+oo;function Ti(t){var e=t[xn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Xn]||n[xn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=G_(t);t!==null;){if(n=t[xn])return n;t=G_(t)}return e}t=n,n=t.parentNode}return null}function cl(t){return t=t[xn]||t[Xn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function fh(t){return t[Na]||null}var Qf=[],ws=-1;function ri(t){return{current:t}}function Ie(t){0>ws||(t.current=Qf[ws],Qf[ws]=null,ws--)}function ve(t,e){ws++,Qf[ws]=t.current,t.current=e}var Xr={},gt=ri(Xr),Ct=ri(!1),Mi=Xr;function js(t,e){var n=t.type.contextTypes;if(!n)return Xr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Rt(t){return t=t.childContextTypes,t!=null}function fu(){Ie(Ct),Ie(gt)}function Q_(t,e,n){if(gt.current!==Xr)throw Error(U(168));ve(gt,e),ve(Ct,n)}function A1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,Ek(t)||"Unknown",i));return Ae({},n,r)}function pu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xr,Mi=gt.current,ve(gt,t),ve(Ct,Ct.current),!0}function Y_(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=A1(t,e,Mi),r.__reactInternalMemoizedMergedChildContext=t,Ie(Ct),Ie(gt),ve(gt,t)):Ie(Ct),ve(Ct,n)}var Un=null,ph=!1,jd=!1;function P1(t){Un===null?Un=[t]:Un.push(t)}function FA(t){ph=!0,P1(t)}function ii(){if(!jd&&Un!==null){jd=!0;var t=0,e=de;try{var n=Un;for(de=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Un=null,ph=!1}catch(i){throw Un!==null&&(Un=Un.slice(t+1)),e1(pg,ii),i}finally{de=e,jd=!1}}return null}var Es=[],Ts=0,gu=null,mu=0,Kt=[],Gt=0,Li=null,Bn=1,$n="";function yi(t,e){Es[Ts++]=mu,Es[Ts++]=gu,gu=t,mu=e}function C1(t,e,n){Kt[Gt++]=Bn,Kt[Gt++]=$n,Kt[Gt++]=Li,Li=t;var r=Bn;t=$n;var i=32-fn(r)-1;r&=~(1<<i),n+=1;var s=32-fn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Bn=1<<32-fn(e)+i|n<<i|r,$n=s+t}else Bn=1<<s|n<<i|r,$n=t}function Ig(t){t.return!==null&&(yi(t,1),C1(t,1,0))}function xg(t){for(;t===gu;)gu=Es[--Ts],Es[Ts]=null,mu=Es[--Ts],Es[Ts]=null;for(;t===Li;)Li=Kt[--Gt],Kt[Gt]=null,$n=Kt[--Gt],Kt[Gt]=null,Bn=Kt[--Gt],Kt[Gt]=null}var Ut=null,Vt=null,xe=!1,hn=null;function R1(t,e){var n=Yt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function X_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ut=t,Vt=jr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ut=t,Vt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Li!==null?{id:Bn,overflow:$n}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ut=t,Vt=null,!0):!1;default:return!1}}function Yf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Xf(t){if(xe){var e=Vt;if(e){var n=e;if(!X_(t,e)){if(Yf(t))throw Error(U(418));e=jr(n.nextSibling);var r=Ut;e&&X_(t,e)?R1(r,n):(t.flags=t.flags&-4097|2,xe=!1,Ut=t)}}else{if(Yf(t))throw Error(U(418));t.flags=t.flags&-4097|2,xe=!1,Ut=t}}}function J_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ut=t}function ec(t){if(t!==Ut)return!1;if(!xe)return J_(t),xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!qf(t.type,t.memoizedProps)),e&&(e=Vt)){if(Yf(t))throw D1(),Error(U(418));for(;e;)R1(t,e),e=jr(e.nextSibling)}if(J_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Vt=jr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Vt=null}}else Vt=Ut?jr(t.stateNode.nextSibling):null;return!0}function D1(){for(var t=Vt;t;)t=jr(t.nextSibling)}function Us(){Vt=Ut=null,xe=!1}function Sg(t){hn===null?hn=[t]:hn.push(t)}var jA=or.ReactCurrentBatchConfig;function Lo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function tc(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Z_(t){var e=t._init;return e(t._payload)}function N1(t){function e(_,T){if(t){var S=_.deletions;S===null?(_.deletions=[T],_.flags|=16):S.push(T)}}function n(_,T){if(!t)return null;for(;T!==null;)e(_,T),T=T.sibling;return null}function r(_,T){for(_=new Map;T!==null;)T.key!==null?_.set(T.key,T):_.set(T.index,T),T=T.sibling;return _}function i(_,T){return _=$r(_,T),_.index=0,_.sibling=null,_}function s(_,T,S){return _.index=S,t?(S=_.alternate,S!==null?(S=S.index,S<T?(_.flags|=2,T):S):(_.flags|=2,T)):(_.flags|=1048576,T)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,T,S,R){return T===null||T.tag!==6?(T=qd(S,_.mode,R),T.return=_,T):(T=i(T,S),T.return=_,T)}function l(_,T,S,R){var N=S.type;return N===gs?h(_,T,S.props.children,R,S.key):T!==null&&(T.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===gr&&Z_(N)===T.type)?(R=i(T,S.props),R.ref=Lo(_,T,S),R.return=_,R):(R=$c(S.type,S.key,S.props,null,_.mode,R),R.ref=Lo(_,T,S),R.return=_,R)}function c(_,T,S,R){return T===null||T.tag!==4||T.stateNode.containerInfo!==S.containerInfo||T.stateNode.implementation!==S.implementation?(T=Kd(S,_.mode,R),T.return=_,T):(T=i(T,S.children||[]),T.return=_,T)}function h(_,T,S,R,N){return T===null||T.tag!==7?(T=Ri(S,_.mode,R,N),T.return=_,T):(T=i(T,S),T.return=_,T)}function d(_,T,S){if(typeof T=="string"&&T!==""||typeof T=="number")return T=qd(""+T,_.mode,S),T.return=_,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Wl:return S=$c(T.type,T.key,T.props,null,_.mode,S),S.ref=Lo(_,null,T),S.return=_,S;case ps:return T=Kd(T,_.mode,S),T.return=_,T;case gr:var R=T._init;return d(_,R(T._payload),S)}if(qo(T)||Ro(T))return T=Ri(T,_.mode,S,null),T.return=_,T;tc(_,T)}return null}function p(_,T,S,R){var N=T!==null?T.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return N!==null?null:a(_,T,""+S,R);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Wl:return S.key===N?l(_,T,S,R):null;case ps:return S.key===N?c(_,T,S,R):null;case gr:return N=S._init,p(_,T,N(S._payload),R)}if(qo(S)||Ro(S))return N!==null?null:h(_,T,S,R,null);tc(_,S)}return null}function m(_,T,S,R,N){if(typeof R=="string"&&R!==""||typeof R=="number")return _=_.get(S)||null,a(T,_,""+R,N);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Wl:return _=_.get(R.key===null?S:R.key)||null,l(T,_,R,N);case ps:return _=_.get(R.key===null?S:R.key)||null,c(T,_,R,N);case gr:var M=R._init;return m(_,T,S,M(R._payload),N)}if(qo(R)||Ro(R))return _=_.get(S)||null,h(T,_,R,N,null);tc(T,R)}return null}function y(_,T,S,R){for(var N=null,M=null,x=T,v=T=0,b=null;x!==null&&v<S.length;v++){x.index>v?(b=x,x=null):b=x.sibling;var k=p(_,x,S[v],R);if(k===null){x===null&&(x=b);break}t&&x&&k.alternate===null&&e(_,x),T=s(k,T,v),M===null?N=k:M.sibling=k,M=k,x=b}if(v===S.length)return n(_,x),xe&&yi(_,v),N;if(x===null){for(;v<S.length;v++)x=d(_,S[v],R),x!==null&&(T=s(x,T,v),M===null?N=x:M.sibling=x,M=x);return xe&&yi(_,v),N}for(x=r(_,x);v<S.length;v++)b=m(x,_,v,S[v],R),b!==null&&(t&&b.alternate!==null&&x.delete(b.key===null?v:b.key),T=s(b,T,v),M===null?N=b:M.sibling=b,M=b);return t&&x.forEach(function(C){return e(_,C)}),xe&&yi(_,v),N}function w(_,T,S,R){var N=Ro(S);if(typeof N!="function")throw Error(U(150));if(S=N.call(S),S==null)throw Error(U(151));for(var M=N=null,x=T,v=T=0,b=null,k=S.next();x!==null&&!k.done;v++,k=S.next()){x.index>v?(b=x,x=null):b=x.sibling;var C=p(_,x,k.value,R);if(C===null){x===null&&(x=b);break}t&&x&&C.alternate===null&&e(_,x),T=s(C,T,v),M===null?N=C:M.sibling=C,M=C,x=b}if(k.done)return n(_,x),xe&&yi(_,v),N;if(x===null){for(;!k.done;v++,k=S.next())k=d(_,k.value,R),k!==null&&(T=s(k,T,v),M===null?N=k:M.sibling=k,M=k);return xe&&yi(_,v),N}for(x=r(_,x);!k.done;v++,k=S.next())k=m(x,_,v,k.value,R),k!==null&&(t&&k.alternate!==null&&x.delete(k.key===null?v:k.key),T=s(k,T,v),M===null?N=k:M.sibling=k,M=k);return t&&x.forEach(function(D){return e(_,D)}),xe&&yi(_,v),N}function I(_,T,S,R){if(typeof S=="object"&&S!==null&&S.type===gs&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Wl:e:{for(var N=S.key,M=T;M!==null;){if(M.key===N){if(N=S.type,N===gs){if(M.tag===7){n(_,M.sibling),T=i(M,S.props.children),T.return=_,_=T;break e}}else if(M.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===gr&&Z_(N)===M.type){n(_,M.sibling),T=i(M,S.props),T.ref=Lo(_,M,S),T.return=_,_=T;break e}n(_,M);break}else e(_,M);M=M.sibling}S.type===gs?(T=Ri(S.props.children,_.mode,R,S.key),T.return=_,_=T):(R=$c(S.type,S.key,S.props,null,_.mode,R),R.ref=Lo(_,T,S),R.return=_,_=R)}return o(_);case ps:e:{for(M=S.key;T!==null;){if(T.key===M)if(T.tag===4&&T.stateNode.containerInfo===S.containerInfo&&T.stateNode.implementation===S.implementation){n(_,T.sibling),T=i(T,S.children||[]),T.return=_,_=T;break e}else{n(_,T);break}else e(_,T);T=T.sibling}T=Kd(S,_.mode,R),T.return=_,_=T}return o(_);case gr:return M=S._init,I(_,T,M(S._payload),R)}if(qo(S))return y(_,T,S,R);if(Ro(S))return w(_,T,S,R);tc(_,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,T!==null&&T.tag===6?(n(_,T.sibling),T=i(T,S),T.return=_,_=T):(n(_,T),T=qd(S,_.mode,R),T.return=_,_=T),o(_)):n(_,T)}return I}var zs=N1(!0),O1=N1(!1),yu=ri(null),_u=null,Is=null,bg=null;function kg(){bg=Is=_u=null}function Ag(t){var e=yu.current;Ie(yu),t._currentValue=e}function Jf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Rs(t,e){_u=t,bg=Is=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Pt=!0),t.firstContext=null)}function tn(t){var e=t._currentValue;if(bg!==t)if(t={context:t,memoizedValue:e,next:null},Is===null){if(_u===null)throw Error(U(308));Is=t,_u.dependencies={lanes:0,firstContext:t}}else Is=Is.next=t;return e}var Ii=null;function Pg(t){Ii===null?Ii=[t]:Ii.push(t)}function M1(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Pg(e)):(n.next=i.next,i.next=n),e.interleaved=n,Jn(t,r)}function Jn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var mr=!1;function Cg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function L1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Gn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ur(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,se&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Jn(t,n)}return i=r.interleaved,i===null?(e.next=e,Pg(r)):(e.next=i.next,i.next=e),r.interleaved=e,Jn(t,n)}function Vc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,gg(t,n)}}function e0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function vu(t,e,n,r){var i=t.updateQueue;mr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,w=a;switch(p=e,m=n,w.tag){case 1:if(y=w.payload,typeof y=="function"){d=y.call(m,d,p);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,p=typeof y=="function"?y.call(m,d,p):y,p==null)break e;d=Ae({},d,p);break e;case 2:mr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=m,l=d):h=h.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(h===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Fi|=o,t.lanes=o,t.memoizedState=d}}function t0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var ul={},bn=ri(ul),Oa=ri(ul),Ma=ri(ul);function xi(t){if(t===ul)throw Error(U(174));return t}function Rg(t,e){switch(ve(Ma,e),ve(Oa,t),ve(bn,ul),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Df(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Df(e,t)}Ie(bn),ve(bn,e)}function Bs(){Ie(bn),Ie(Oa),Ie(Ma)}function V1(t){xi(Ma.current);var e=xi(bn.current),n=Df(e,t.type);e!==n&&(ve(Oa,t),ve(bn,n))}function Dg(t){Oa.current===t&&(Ie(bn),Ie(Oa))}var be=ri(0);function wu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ud=[];function Ng(){for(var t=0;t<Ud.length;t++)Ud[t]._workInProgressVersionPrimary=null;Ud.length=0}var Fc=or.ReactCurrentDispatcher,zd=or.ReactCurrentBatchConfig,Vi=0,ke=null,Be=null,qe=null,Eu=!1,aa=!1,La=0,UA=0;function ct(){throw Error(U(321))}function Og(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!gn(t[n],e[n]))return!1;return!0}function Mg(t,e,n,r,i,s){if(Vi=s,ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fc.current=t===null||t.memoizedState===null?WA:HA,t=n(r,i),aa){s=0;do{if(aa=!1,La=0,25<=s)throw Error(U(301));s+=1,qe=Be=null,e.updateQueue=null,Fc.current=qA,t=n(r,i)}while(aa)}if(Fc.current=Tu,e=Be!==null&&Be.next!==null,Vi=0,qe=Be=ke=null,Eu=!1,e)throw Error(U(300));return t}function Lg(){var t=La!==0;return La=0,t}function Tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?ke.memoizedState=qe=t:qe=qe.next=t,qe}function nn(){if(Be===null){var t=ke.alternate;t=t!==null?t.memoizedState:null}else t=Be.next;var e=qe===null?ke.memoizedState:qe.next;if(e!==null)qe=e,Be=t;else{if(t===null)throw Error(U(310));Be=t,t={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},qe===null?ke.memoizedState=qe=t:qe=qe.next=t}return qe}function Va(t,e){return typeof e=="function"?e(t):e}function Bd(t){var e=nn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Be,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((Vi&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,ke.lanes|=h,Fi|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,gn(r,e.memoizedState)||(Pt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ke.lanes|=s,Fi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function $d(t){var e=nn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);gn(s,e.memoizedState)||(Pt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function F1(){}function j1(t,e){var n=ke,r=nn(),i=e(),s=!gn(r.memoizedState,i);if(s&&(r.memoizedState=i,Pt=!0),r=r.queue,Vg(B1.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||qe!==null&&qe.memoizedState.tag&1){if(n.flags|=2048,Fa(9,z1.bind(null,n,r,i,e),void 0,null),Ge===null)throw Error(U(349));Vi&30||U1(n,e,i)}return i}function U1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function z1(t,e,n,r){e.value=n,e.getSnapshot=r,$1(e)&&W1(t)}function B1(t,e,n){return n(function(){$1(e)&&W1(t)})}function $1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!gn(t,n)}catch{return!0}}function W1(t){var e=Jn(t,1);e!==null&&pn(e,t,1,-1)}function n0(t){var e=Tn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:t},e.queue=t,t=t.dispatch=$A.bind(null,ke,t),[e.memoizedState,t]}function Fa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ke.updateQueue,e===null?(e={lastEffect:null,stores:null},ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function H1(){return nn().memoizedState}function jc(t,e,n,r){var i=Tn();ke.flags|=t,i.memoizedState=Fa(1|e,n,void 0,r===void 0?null:r)}function gh(t,e,n,r){var i=nn();r=r===void 0?null:r;var s=void 0;if(Be!==null){var o=Be.memoizedState;if(s=o.destroy,r!==null&&Og(r,o.deps)){i.memoizedState=Fa(e,n,s,r);return}}ke.flags|=t,i.memoizedState=Fa(1|e,n,s,r)}function r0(t,e){return jc(8390656,8,t,e)}function Vg(t,e){return gh(2048,8,t,e)}function q1(t,e){return gh(4,2,t,e)}function K1(t,e){return gh(4,4,t,e)}function G1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Q1(t,e,n){return n=n!=null?n.concat([t]):null,gh(4,4,G1.bind(null,e,t),n)}function Fg(){}function Y1(t,e){var n=nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Og(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function X1(t,e){var n=nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Og(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function J1(t,e,n){return Vi&21?(gn(n,e)||(n=r1(),ke.lanes|=n,Fi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Pt=!0),t.memoizedState=n)}function zA(t,e){var n=de;de=n!==0&&4>n?n:4,t(!0);var r=zd.transition;zd.transition={};try{t(!1),e()}finally{de=n,zd.transition=r}}function Z1(){return nn().memoizedState}function BA(t,e,n){var r=Br(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},eT(t))tT(e,n);else if(n=M1(t,e,n,r),n!==null){var i=Tt();pn(n,t,r,i),nT(n,e,r)}}function $A(t,e,n){var r=Br(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(eT(t))tT(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,gn(a,o)){var l=e.interleaved;l===null?(i.next=i,Pg(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=M1(t,e,i,r),n!==null&&(i=Tt(),pn(n,t,r,i),nT(n,e,r))}}function eT(t){var e=t.alternate;return t===ke||e!==null&&e===ke}function tT(t,e){aa=Eu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function nT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,gg(t,n)}}var Tu={readContext:tn,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},WA={readContext:tn,useCallback:function(t,e){return Tn().memoizedState=[t,e===void 0?null:e],t},useContext:tn,useEffect:r0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,jc(4194308,4,G1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return jc(4194308,4,t,e)},useInsertionEffect:function(t,e){return jc(4,2,t,e)},useMemo:function(t,e){var n=Tn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Tn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=BA.bind(null,ke,t),[r.memoizedState,t]},useRef:function(t){var e=Tn();return t={current:t},e.memoizedState=t},useState:n0,useDebugValue:Fg,useDeferredValue:function(t){return Tn().memoizedState=t},useTransition:function(){var t=n0(!1),e=t[0];return t=zA.bind(null,t[1]),Tn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ke,i=Tn();if(xe){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Ge===null)throw Error(U(349));Vi&30||U1(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,r0(B1.bind(null,r,s,t),[t]),r.flags|=2048,Fa(9,z1.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Tn(),e=Ge.identifierPrefix;if(xe){var n=$n,r=Bn;n=(r&~(1<<32-fn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=La++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=UA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},HA={readContext:tn,useCallback:Y1,useContext:tn,useEffect:Vg,useImperativeHandle:Q1,useInsertionEffect:q1,useLayoutEffect:K1,useMemo:X1,useReducer:Bd,useRef:H1,useState:function(){return Bd(Va)},useDebugValue:Fg,useDeferredValue:function(t){var e=nn();return J1(e,Be.memoizedState,t)},useTransition:function(){var t=Bd(Va)[0],e=nn().memoizedState;return[t,e]},useMutableSource:F1,useSyncExternalStore:j1,useId:Z1,unstable_isNewReconciler:!1},qA={readContext:tn,useCallback:Y1,useContext:tn,useEffect:Vg,useImperativeHandle:Q1,useInsertionEffect:q1,useLayoutEffect:K1,useMemo:X1,useReducer:$d,useRef:H1,useState:function(){return $d(Va)},useDebugValue:Fg,useDeferredValue:function(t){var e=nn();return Be===null?e.memoizedState=t:J1(e,Be.memoizedState,t)},useTransition:function(){var t=$d(Va)[0],e=nn().memoizedState;return[t,e]},useMutableSource:F1,useSyncExternalStore:j1,useId:Z1,unstable_isNewReconciler:!1};function ln(t,e){if(t&&t.defaultProps){e=Ae({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Zf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var mh={isMounted:function(t){return(t=t._reactInternals)?Yi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Tt(),i=Br(t),s=Gn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ur(t,s,i),e!==null&&(pn(e,t,i,r),Vc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Tt(),i=Br(t),s=Gn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ur(t,s,i),e!==null&&(pn(e,t,i,r),Vc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Tt(),r=Br(t),i=Gn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ur(t,i,r),e!==null&&(pn(e,t,r,n),Vc(e,t,r))}};function i0(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ca(n,r)||!Ca(i,s):!0}function rT(t,e,n){var r=!1,i=Xr,s=e.contextType;return typeof s=="object"&&s!==null?s=tn(s):(i=Rt(e)?Mi:gt.current,r=e.contextTypes,s=(r=r!=null)?js(t,i):Xr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=mh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function s0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&mh.enqueueReplaceState(e,e.state,null)}function ep(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Cg(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=tn(s):(s=Rt(e)?Mi:gt.current,i.context=js(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Zf(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&mh.enqueueReplaceState(i,i.state,null),vu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function $s(t,e){try{var n="",r=e;do n+=wk(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Wd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function tp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var KA=typeof WeakMap=="function"?WeakMap:Map;function iT(t,e,n){n=Gn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){xu||(xu=!0,hp=r),tp(t,e)},n}function sT(t,e,n){n=Gn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){tp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){tp(t,e),typeof r!="function"&&(zr===null?zr=new Set([this]):zr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function o0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new KA;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=aP.bind(null,t,e,n),e.then(t,t))}function a0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function l0(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Gn(-1,1),e.tag=2,Ur(n,e,1))),n.lanes|=1),t)}var GA=or.ReactCurrentOwner,Pt=!1;function wt(t,e,n,r){e.child=t===null?O1(e,null,n,r):zs(e,t.child,n,r)}function c0(t,e,n,r,i){n=n.render;var s=e.ref;return Rs(e,i),r=Mg(t,e,n,r,s,i),n=Lg(),t!==null&&!Pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Zn(t,e,i)):(xe&&n&&Ig(e),e.flags|=1,wt(t,e,r,i),e.child)}function u0(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!qg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,oT(t,e,s,r,i)):(t=$c(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ca,n(o,r)&&t.ref===e.ref)return Zn(t,e,i)}return e.flags|=1,t=$r(s,r),t.ref=e.ref,t.return=e,e.child=t}function oT(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ca(s,r)&&t.ref===e.ref)if(Pt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Pt=!0);else return e.lanes=t.lanes,Zn(t,e,i)}return np(t,e,n,r,i)}function aT(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(Ss,Lt),Lt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ve(Ss,Lt),Lt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ve(Ss,Lt),Lt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ve(Ss,Lt),Lt|=r;return wt(t,e,i,n),e.child}function lT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function np(t,e,n,r,i){var s=Rt(n)?Mi:gt.current;return s=js(e,s),Rs(e,i),n=Mg(t,e,n,r,s,i),r=Lg(),t!==null&&!Pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Zn(t,e,i)):(xe&&r&&Ig(e),e.flags|=1,wt(t,e,n,i),e.child)}function h0(t,e,n,r,i){if(Rt(n)){var s=!0;pu(e)}else s=!1;if(Rs(e,i),e.stateNode===null)Uc(t,e),rT(e,n,r),ep(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=tn(c):(c=Rt(n)?Mi:gt.current,c=js(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&s0(e,o,r,c),mr=!1;var p=e.memoizedState;o.state=p,vu(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Ct.current||mr?(typeof h=="function"&&(Zf(e,n,h,r),l=e.memoizedState),(a=mr||i0(e,n,a,r,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,L1(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ln(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=tn(l):(l=Rt(n)?Mi:gt.current,l=js(e,l));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&s0(e,o,r,l),mr=!1,p=e.memoizedState,o.state=p,vu(e,r,o,i);var y=e.memoizedState;a!==d||p!==y||Ct.current||mr?(typeof m=="function"&&(Zf(e,n,m,r),y=e.memoizedState),(c=mr||i0(e,n,c,r,p,y,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return rp(t,e,n,r,s,i)}function rp(t,e,n,r,i,s){lT(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Y_(e,n,!1),Zn(t,e,s);r=e.stateNode,GA.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=zs(e,t.child,null,s),e.child=zs(e,null,a,s)):wt(t,e,a,s),e.memoizedState=r.state,i&&Y_(e,n,!0),e.child}function cT(t){var e=t.stateNode;e.pendingContext?Q_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Q_(t,e.context,!1),Rg(t,e.containerInfo)}function d0(t,e,n,r,i){return Us(),Sg(i),e.flags|=256,wt(t,e,n,r),e.child}var ip={dehydrated:null,treeContext:null,retryLane:0};function sp(t){return{baseLanes:t,cachePool:null,transitions:null}}function uT(t,e,n){var r=e.pendingProps,i=be.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ve(be,i&1),t===null)return Xf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=vh(o,r,0,null),t=Ri(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=sp(n),e.memoizedState=ip,t):jg(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return QA(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=$r(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=$r(a,s):(s=Ri(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?sp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=ip,r}return s=t.child,t=s.sibling,r=$r(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function jg(t,e){return e=vh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function nc(t,e,n,r){return r!==null&&Sg(r),zs(e,t.child,null,n),t=jg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function QA(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Wd(Error(U(422))),nc(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=vh({mode:"visible",children:r.children},i,0,null),s=Ri(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&zs(e,t.child,null,o),e.child.memoizedState=sp(o),e.memoizedState=ip,s);if(!(e.mode&1))return nc(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(U(419)),r=Wd(s,r,void 0),nc(t,e,o,r)}if(a=(o&t.childLanes)!==0,Pt||a){if(r=Ge,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Jn(t,i),pn(r,t,i,-1))}return Hg(),r=Wd(Error(U(421))),nc(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=lP.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Vt=jr(i.nextSibling),Ut=e,xe=!0,hn=null,t!==null&&(Kt[Gt++]=Bn,Kt[Gt++]=$n,Kt[Gt++]=Li,Bn=t.id,$n=t.overflow,Li=e),e=jg(e,r.children),e.flags|=4096,e)}function f0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Jf(t.return,e,n)}function Hd(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function hT(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(wt(t,e,r.children,n),r=be.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&f0(t,n,e);else if(t.tag===19)f0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ve(be,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&wu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Hd(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&wu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Hd(e,!0,n,null,s);break;case"together":Hd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Uc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Zn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Fi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=$r(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=$r(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function YA(t,e,n){switch(e.tag){case 3:cT(e),Us();break;case 5:V1(e);break;case 1:Rt(e.type)&&pu(e);break;case 4:Rg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ve(yu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ve(be,be.current&1),e.flags|=128,null):n&e.child.childLanes?uT(t,e,n):(ve(be,be.current&1),t=Zn(t,e,n),t!==null?t.sibling:null);ve(be,be.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return hT(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ve(be,be.current),r)break;return null;case 22:case 23:return e.lanes=0,aT(t,e,n)}return Zn(t,e,n)}var dT,op,fT,pT;dT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};op=function(){};fT=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,xi(bn.current);var s=null;switch(n){case"input":i=Af(t,i),r=Af(t,r),s=[];break;case"select":i=Ae({},i,{value:void 0}),r=Ae({},r,{value:void 0}),s=[];break;case"textarea":i=Rf(t,i),r=Rf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=du)}Nf(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ia.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ia.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Te("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};pT=function(t,e,n,r){n!==r&&(e.flags|=4)};function Vo(t,e){if(!xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function XA(t,e,n){var r=e.pendingProps;switch(xg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(e),null;case 1:return Rt(e.type)&&fu(),ut(e),null;case 3:return r=e.stateNode,Bs(),Ie(Ct),Ie(gt),Ng(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ec(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hn!==null&&(pp(hn),hn=null))),op(t,e),ut(e),null;case 5:Dg(e);var i=xi(Ma.current);if(n=e.type,t!==null&&e.stateNode!=null)fT(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return ut(e),null}if(t=xi(bn.current),ec(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[xn]=e,r[Na]=s,t=(e.mode&1)!==0,n){case"dialog":Te("cancel",r),Te("close",r);break;case"iframe":case"object":case"embed":Te("load",r);break;case"video":case"audio":for(i=0;i<Go.length;i++)Te(Go[i],r);break;case"source":Te("error",r);break;case"img":case"image":case"link":Te("error",r),Te("load",r);break;case"details":Te("toggle",r);break;case"input":T_(r,s),Te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Te("invalid",r);break;case"textarea":x_(r,s),Te("invalid",r)}Nf(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Zl(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Zl(r.textContent,a,t),i=["children",""+a]):Ia.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Te("scroll",r)}switch(n){case"input":Hl(r),I_(r,s,!0);break;case"textarea":Hl(r),S_(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=du)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=BE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[xn]=e,t[Na]=r,dT(t,e,!1,!1),e.stateNode=t;e:{switch(o=Of(n,r),n){case"dialog":Te("cancel",t),Te("close",t),i=r;break;case"iframe":case"object":case"embed":Te("load",t),i=r;break;case"video":case"audio":for(i=0;i<Go.length;i++)Te(Go[i],t);i=r;break;case"source":Te("error",t),i=r;break;case"img":case"image":case"link":Te("error",t),Te("load",t),i=r;break;case"details":Te("toggle",t),i=r;break;case"input":T_(t,r),i=Af(t,r),Te("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ae({},r,{value:void 0}),Te("invalid",t);break;case"textarea":x_(t,r),i=Rf(t,r),Te("invalid",t);break;default:i=r}Nf(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?HE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&$E(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&xa(t,l):typeof l=="number"&&xa(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ia.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Te("scroll",t):l!=null&&cg(t,s,l,o))}switch(n){case"input":Hl(t),I_(t,r,!1);break;case"textarea":Hl(t),S_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Yr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ks(t,!!r.multiple,s,!1):r.defaultValue!=null&&ks(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=du)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ut(e),null;case 6:if(t&&e.stateNode!=null)pT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=xi(Ma.current),xi(bn.current),ec(e)){if(r=e.stateNode,n=e.memoizedProps,r[xn]=e,(s=r.nodeValue!==n)&&(t=Ut,t!==null))switch(t.tag){case 3:Zl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Zl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xn]=e,e.stateNode=r}return ut(e),null;case 13:if(Ie(be),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xe&&Vt!==null&&e.mode&1&&!(e.flags&128))D1(),Us(),e.flags|=98560,s=!1;else if(s=ec(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[xn]=e}else Us(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ut(e),s=!1}else hn!==null&&(pp(hn),hn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||be.current&1?$e===0&&($e=3):Hg())),e.updateQueue!==null&&(e.flags|=4),ut(e),null);case 4:return Bs(),op(t,e),t===null&&Ra(e.stateNode.containerInfo),ut(e),null;case 10:return Ag(e.type._context),ut(e),null;case 17:return Rt(e.type)&&fu(),ut(e),null;case 19:if(Ie(be),s=e.memoizedState,s===null)return ut(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Vo(s,!1);else{if($e!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=wu(t),o!==null){for(e.flags|=128,Vo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ve(be,be.current&1|2),e.child}t=t.sibling}s.tail!==null&&Le()>Ws&&(e.flags|=128,r=!0,Vo(s,!1),e.lanes=4194304)}else{if(!r)if(t=wu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Vo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!xe)return ut(e),null}else 2*Le()-s.renderingStartTime>Ws&&n!==1073741824&&(e.flags|=128,r=!0,Vo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Le(),e.sibling=null,n=be.current,ve(be,r?n&1|2:n&1),e):(ut(e),null);case 22:case 23:return Wg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Lt&1073741824&&(ut(e),e.subtreeFlags&6&&(e.flags|=8192)):ut(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function JA(t,e){switch(xg(e),e.tag){case 1:return Rt(e.type)&&fu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Bs(),Ie(Ct),Ie(gt),Ng(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Dg(e),null;case 13:if(Ie(be),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Us()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ie(be),null;case 4:return Bs(),null;case 10:return Ag(e.type._context),null;case 22:case 23:return Wg(),null;case 24:return null;default:return null}}var rc=!1,ft=!1,ZA=typeof WeakSet=="function"?WeakSet:Set,W=null;function xs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ne(t,e,r)}else n.current=null}function ap(t,e,n){try{n()}catch(r){Ne(t,e,r)}}var p0=!1;function eP(t,e){if(Wf=cu,t=v1(),Tg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,p=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++h===r&&(l=o),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hf={focusedElem:t,selectionRange:n},cu=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,I=y.memoizedState,_=e.stateNode,T=_.getSnapshotBeforeUpdate(e.elementType===e.type?w:ln(e.type,w),I);_.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(R){Ne(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return y=p0,p0=!1,y}function la(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&ap(e,n,s)}i=i.next}while(i!==r)}}function yh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function lp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function gT(t){var e=t.alternate;e!==null&&(t.alternate=null,gT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xn],delete e[Na],delete e[Gf],delete e[LA],delete e[VA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function mT(t){return t.tag===5||t.tag===3||t.tag===4}function g0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||mT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=du));else if(r!==4&&(t=t.child,t!==null))for(cp(t,e,n),t=t.sibling;t!==null;)cp(t,e,n),t=t.sibling}function up(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(up(t,e,n),t=t.sibling;t!==null;)up(t,e,n),t=t.sibling}var Ze=null,cn=!1;function hr(t,e,n){for(n=n.child;n!==null;)yT(t,e,n),n=n.sibling}function yT(t,e,n){if(Sn&&typeof Sn.onCommitFiberUnmount=="function")try{Sn.onCommitFiberUnmount(ch,n)}catch{}switch(n.tag){case 5:ft||xs(n,e);case 6:var r=Ze,i=cn;Ze=null,hr(t,e,n),Ze=r,cn=i,Ze!==null&&(cn?(t=Ze,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ze.removeChild(n.stateNode));break;case 18:Ze!==null&&(cn?(t=Ze,n=n.stateNode,t.nodeType===8?Fd(t.parentNode,n):t.nodeType===1&&Fd(t,n),Aa(t)):Fd(Ze,n.stateNode));break;case 4:r=Ze,i=cn,Ze=n.stateNode.containerInfo,cn=!0,hr(t,e,n),Ze=r,cn=i;break;case 0:case 11:case 14:case 15:if(!ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ap(n,e,o),i=i.next}while(i!==r)}hr(t,e,n);break;case 1:if(!ft&&(xs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ne(n,e,a)}hr(t,e,n);break;case 21:hr(t,e,n);break;case 22:n.mode&1?(ft=(r=ft)||n.memoizedState!==null,hr(t,e,n),ft=r):hr(t,e,n);break;default:hr(t,e,n)}}function m0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ZA),e.forEach(function(r){var i=cP.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function on(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ze=a.stateNode,cn=!1;break e;case 3:Ze=a.stateNode.containerInfo,cn=!0;break e;case 4:Ze=a.stateNode.containerInfo,cn=!0;break e}a=a.return}if(Ze===null)throw Error(U(160));yT(s,o,i),Ze=null,cn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ne(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)_T(e,t),e=e.sibling}function _T(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(on(e,t),wn(t),r&4){try{la(3,t,t.return),yh(3,t)}catch(w){Ne(t,t.return,w)}try{la(5,t,t.return)}catch(w){Ne(t,t.return,w)}}break;case 1:on(e,t),wn(t),r&512&&n!==null&&xs(n,n.return);break;case 5:if(on(e,t),wn(t),r&512&&n!==null&&xs(n,n.return),t.flags&32){var i=t.stateNode;try{xa(i,"")}catch(w){Ne(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&UE(i,s),Of(a,o);var c=Of(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?HE(i,d):h==="dangerouslySetInnerHTML"?$E(i,d):h==="children"?xa(i,d):cg(i,h,d,c)}switch(a){case"input":Pf(i,s);break;case"textarea":zE(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?ks(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?ks(i,!!s.multiple,s.defaultValue,!0):ks(i,!!s.multiple,s.multiple?[]:"",!1))}i[Na]=s}catch(w){Ne(t,t.return,w)}}break;case 6:if(on(e,t),wn(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){Ne(t,t.return,w)}}break;case 3:if(on(e,t),wn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Aa(e.containerInfo)}catch(w){Ne(t,t.return,w)}break;case 4:on(e,t),wn(t);break;case 13:on(e,t),wn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Bg=Le())),r&4&&m0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(ft=(c=ft)||h,on(e,t),ft=c):on(e,t),wn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(W=t,h=t.child;h!==null;){for(d=W=h;W!==null;){switch(p=W,m=p.child,p.tag){case 0:case 11:case 14:case 15:la(4,p,p.return);break;case 1:xs(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(w){Ne(r,n,w)}}break;case 5:xs(p,p.return);break;case 22:if(p.memoizedState!==null){_0(d);continue}}m!==null?(m.return=p,W=m):_0(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=WE("display",o))}catch(w){Ne(t,t.return,w)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(w){Ne(t,t.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:on(e,t),wn(t),r&4&&m0(t);break;case 21:break;default:on(e,t),wn(t)}}function wn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(mT(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(xa(i,""),r.flags&=-33);var s=g0(t);up(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=g0(t);cp(t,a,o);break;default:throw Error(U(161))}}catch(l){Ne(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function tP(t,e,n){W=t,vT(t)}function vT(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var i=W,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||rc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ft;a=rc;var c=ft;if(rc=o,(ft=l)&&!c)for(W=i;W!==null;)o=W,l=o.child,o.tag===22&&o.memoizedState!==null?v0(i):l!==null?(l.return=o,W=l):v0(i);for(;s!==null;)W=s,vT(s),s=s.sibling;W=i,rc=a,ft=c}y0(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,W=s):y0(t)}}function y0(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ft||yh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ft)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ln(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&t0(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}t0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Aa(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}ft||e.flags&512&&lp(e)}catch(p){Ne(e,e.return,p)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function _0(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function v0(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{yh(4,e)}catch(l){Ne(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ne(e,i,l)}}var s=e.return;try{lp(e)}catch(l){Ne(e,s,l)}break;case 5:var o=e.return;try{lp(e)}catch(l){Ne(e,o,l)}}}catch(l){Ne(e,e.return,l)}if(e===t){W=null;break}var a=e.sibling;if(a!==null){a.return=e.return,W=a;break}W=e.return}}var nP=Math.ceil,Iu=or.ReactCurrentDispatcher,Ug=or.ReactCurrentOwner,Jt=or.ReactCurrentBatchConfig,se=0,Ge=null,Ue=null,nt=0,Lt=0,Ss=ri(0),$e=0,ja=null,Fi=0,_h=0,zg=0,ca=null,kt=null,Bg=0,Ws=1/0,jn=null,xu=!1,hp=null,zr=null,ic=!1,kr=null,Su=0,ua=0,dp=null,zc=-1,Bc=0;function Tt(){return se&6?Le():zc!==-1?zc:zc=Le()}function Br(t){return t.mode&1?se&2&&nt!==0?nt&-nt:jA.transition!==null?(Bc===0&&(Bc=r1()),Bc):(t=de,t!==0||(t=window.event,t=t===void 0?16:u1(t.type)),t):1}function pn(t,e,n,r){if(50<ua)throw ua=0,dp=null,Error(U(185));al(t,n,r),(!(se&2)||t!==Ge)&&(t===Ge&&(!(se&2)&&(_h|=n),$e===4&&_r(t,nt)),Dt(t,r),n===1&&se===0&&!(e.mode&1)&&(Ws=Le()+500,ph&&ii()))}function Dt(t,e){var n=t.callbackNode;jk(t,e);var r=lu(t,t===Ge?nt:0);if(r===0)n!==null&&A_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&A_(n),e===1)t.tag===0?FA(w0.bind(null,t)):P1(w0.bind(null,t)),OA(function(){!(se&6)&&ii()}),n=null;else{switch(i1(r)){case 1:n=pg;break;case 4:n=t1;break;case 16:n=au;break;case 536870912:n=n1;break;default:n=au}n=kT(n,wT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function wT(t,e){if(zc=-1,Bc=0,se&6)throw Error(U(327));var n=t.callbackNode;if(Ds()&&t.callbackNode!==n)return null;var r=lu(t,t===Ge?nt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=bu(t,r);else{e=r;var i=se;se|=2;var s=TT();(Ge!==t||nt!==e)&&(jn=null,Ws=Le()+500,Ci(t,e));do try{sP();break}catch(a){ET(t,a)}while(1);kg(),Iu.current=s,se=i,Ue!==null?e=0:(Ge=null,nt=0,e=$e)}if(e!==0){if(e===2&&(i=jf(t),i!==0&&(r=i,e=fp(t,i))),e===1)throw n=ja,Ci(t,0),_r(t,r),Dt(t,Le()),n;if(e===6)_r(t,r);else{if(i=t.current.alternate,!(r&30)&&!rP(i)&&(e=bu(t,r),e===2&&(s=jf(t),s!==0&&(r=s,e=fp(t,s))),e===1))throw n=ja,Ci(t,0),_r(t,r),Dt(t,Le()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:_i(t,kt,jn);break;case 3:if(_r(t,r),(r&130023424)===r&&(e=Bg+500-Le(),10<e)){if(lu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Tt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Kf(_i.bind(null,t,kt,jn),e);break}_i(t,kt,jn);break;case 4:if(_r(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-fn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*nP(r/1960))-r,10<r){t.timeoutHandle=Kf(_i.bind(null,t,kt,jn),r);break}_i(t,kt,jn);break;case 5:_i(t,kt,jn);break;default:throw Error(U(329))}}}return Dt(t,Le()),t.callbackNode===n?wT.bind(null,t):null}function fp(t,e){var n=ca;return t.current.memoizedState.isDehydrated&&(Ci(t,e).flags|=256),t=bu(t,e),t!==2&&(e=kt,kt=n,e!==null&&pp(e)),t}function pp(t){kt===null?kt=t:kt.push.apply(kt,t)}function rP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!gn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _r(t,e){for(e&=~zg,e&=~_h,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-fn(e),r=1<<n;t[n]=-1,e&=~r}}function w0(t){if(se&6)throw Error(U(327));Ds();var e=lu(t,0);if(!(e&1))return Dt(t,Le()),null;var n=bu(t,e);if(t.tag!==0&&n===2){var r=jf(t);r!==0&&(e=r,n=fp(t,r))}if(n===1)throw n=ja,Ci(t,0),_r(t,e),Dt(t,Le()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_i(t,kt,jn),Dt(t,Le()),null}function $g(t,e){var n=se;se|=1;try{return t(e)}finally{se=n,se===0&&(Ws=Le()+500,ph&&ii())}}function ji(t){kr!==null&&kr.tag===0&&!(se&6)&&Ds();var e=se;se|=1;var n=Jt.transition,r=de;try{if(Jt.transition=null,de=1,t)return t()}finally{de=r,Jt.transition=n,se=e,!(se&6)&&ii()}}function Wg(){Lt=Ss.current,Ie(Ss)}function Ci(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,NA(n)),Ue!==null)for(n=Ue.return;n!==null;){var r=n;switch(xg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&fu();break;case 3:Bs(),Ie(Ct),Ie(gt),Ng();break;case 5:Dg(r);break;case 4:Bs();break;case 13:Ie(be);break;case 19:Ie(be);break;case 10:Ag(r.type._context);break;case 22:case 23:Wg()}n=n.return}if(Ge=t,Ue=t=$r(t.current,null),nt=Lt=e,$e=0,ja=null,zg=_h=Fi=0,kt=ca=null,Ii!==null){for(e=0;e<Ii.length;e++)if(n=Ii[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ii=null}return t}function ET(t,e){do{var n=Ue;try{if(kg(),Fc.current=Tu,Eu){for(var r=ke.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Eu=!1}if(Vi=0,qe=Be=ke=null,aa=!1,La=0,Ug.current=null,n===null||n.return===null){$e=1,ja=e,Ue=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=nt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=a0(o);if(m!==null){m.flags&=-257,l0(m,o,a,s,e),m.mode&1&&o0(s,c,e),e=m,l=c;var y=e.updateQueue;if(y===null){var w=new Set;w.add(l),e.updateQueue=w}else y.add(l);break e}else{if(!(e&1)){o0(s,c,e),Hg();break e}l=Error(U(426))}}else if(xe&&a.mode&1){var I=a0(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),l0(I,o,a,s,e),Sg($s(l,a));break e}}s=l=$s(l,a),$e!==4&&($e=2),ca===null?ca=[s]:ca.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=iT(s,l,e);e0(s,_);break e;case 1:a=l;var T=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof T.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(zr===null||!zr.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var R=sT(s,a,e);e0(s,R);break e}}s=s.return}while(s!==null)}xT(n)}catch(N){e=N,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(1)}function TT(){var t=Iu.current;return Iu.current=Tu,t===null?Tu:t}function Hg(){($e===0||$e===3||$e===2)&&($e=4),Ge===null||!(Fi&268435455)&&!(_h&268435455)||_r(Ge,nt)}function bu(t,e){var n=se;se|=2;var r=TT();(Ge!==t||nt!==e)&&(jn=null,Ci(t,e));do try{iP();break}catch(i){ET(t,i)}while(1);if(kg(),se=n,Iu.current=r,Ue!==null)throw Error(U(261));return Ge=null,nt=0,$e}function iP(){for(;Ue!==null;)IT(Ue)}function sP(){for(;Ue!==null&&!Ck();)IT(Ue)}function IT(t){var e=bT(t.alternate,t,Lt);t.memoizedProps=t.pendingProps,e===null?xT(t):Ue=e,Ug.current=null}function xT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=JA(n,e),n!==null){n.flags&=32767,Ue=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$e=6,Ue=null;return}}else if(n=XA(n,e,Lt),n!==null){Ue=n;return}if(e=e.sibling,e!==null){Ue=e;return}Ue=e=t}while(e!==null);$e===0&&($e=5)}function _i(t,e,n){var r=de,i=Jt.transition;try{Jt.transition=null,de=1,oP(t,e,n,r)}finally{Jt.transition=i,de=r}return null}function oP(t,e,n,r){do Ds();while(kr!==null);if(se&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Uk(t,s),t===Ge&&(Ue=Ge=null,nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ic||(ic=!0,kT(au,function(){return Ds(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Jt.transition,Jt.transition=null;var o=de;de=1;var a=se;se|=4,Ug.current=null,eP(t,n),_T(n,t),bA(Hf),cu=!!Wf,Hf=Wf=null,t.current=n,tP(n),Rk(),se=a,de=o,Jt.transition=s}else t.current=n;if(ic&&(ic=!1,kr=t,Su=i),s=t.pendingLanes,s===0&&(zr=null),Ok(n.stateNode),Dt(t,Le()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(xu)throw xu=!1,t=hp,hp=null,t;return Su&1&&t.tag!==0&&Ds(),s=t.pendingLanes,s&1?t===dp?ua++:(ua=0,dp=t):ua=0,ii(),null}function Ds(){if(kr!==null){var t=i1(Su),e=Jt.transition,n=de;try{if(Jt.transition=null,de=16>t?16:t,kr===null)var r=!1;else{if(t=kr,kr=null,Su=0,se&6)throw Error(U(331));var i=se;for(se|=4,W=t.current;W!==null;){var s=W,o=s.child;if(W.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(W=c;W!==null;){var h=W;switch(h.tag){case 0:case 11:case 15:la(8,h,s)}var d=h.child;if(d!==null)d.return=h,W=d;else for(;W!==null;){h=W;var p=h.sibling,m=h.return;if(gT(h),h===c){W=null;break}if(p!==null){p.return=m,W=p;break}W=m}}}var y=s.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var I=w.sibling;w.sibling=null,w=I}while(w!==null)}}W=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,W=o;else e:for(;W!==null;){if(s=W,s.flags&2048)switch(s.tag){case 0:case 11:case 15:la(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,W=_;break e}W=s.return}}var T=t.current;for(W=T;W!==null;){o=W;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,W=S;else e:for(o=T;W!==null;){if(a=W,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:yh(9,a)}}catch(N){Ne(a,a.return,N)}if(a===o){W=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,W=R;break e}W=a.return}}if(se=i,ii(),Sn&&typeof Sn.onPostCommitFiberRoot=="function")try{Sn.onPostCommitFiberRoot(ch,t)}catch{}r=!0}return r}finally{de=n,Jt.transition=e}}return!1}function E0(t,e,n){e=$s(n,e),e=iT(t,e,1),t=Ur(t,e,1),e=Tt(),t!==null&&(al(t,1,e),Dt(t,e))}function Ne(t,e,n){if(t.tag===3)E0(t,t,n);else for(;e!==null;){if(e.tag===3){E0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zr===null||!zr.has(r))){t=$s(n,t),t=sT(e,t,1),e=Ur(e,t,1),t=Tt(),e!==null&&(al(e,1,t),Dt(e,t));break}}e=e.return}}function aP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Tt(),t.pingedLanes|=t.suspendedLanes&n,Ge===t&&(nt&n)===n&&($e===4||$e===3&&(nt&130023424)===nt&&500>Le()-Bg?Ci(t,0):zg|=n),Dt(t,e)}function ST(t,e){e===0&&(t.mode&1?(e=Gl,Gl<<=1,!(Gl&130023424)&&(Gl=4194304)):e=1);var n=Tt();t=Jn(t,e),t!==null&&(al(t,e,n),Dt(t,n))}function lP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),ST(t,n)}function cP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),ST(t,n)}var bT;bT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ct.current)Pt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Pt=!1,YA(t,e,n);Pt=!!(t.flags&131072)}else Pt=!1,xe&&e.flags&1048576&&C1(e,mu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Uc(t,e),t=e.pendingProps;var i=js(e,gt.current);Rs(e,n),i=Mg(null,e,r,t,i,n);var s=Lg();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Rt(r)?(s=!0,pu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Cg(e),i.updater=mh,e.stateNode=i,i._reactInternals=e,ep(e,r,t,n),e=rp(null,e,r,!0,s,n)):(e.tag=0,xe&&s&&Ig(e),wt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Uc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=hP(r),t=ln(r,t),i){case 0:e=np(null,e,r,t,n);break e;case 1:e=h0(null,e,r,t,n);break e;case 11:e=c0(null,e,r,t,n);break e;case 14:e=u0(null,e,r,ln(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ln(r,i),np(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ln(r,i),h0(t,e,r,i,n);case 3:e:{if(cT(e),t===null)throw Error(U(387));r=e.pendingProps,s=e.memoizedState,i=s.element,L1(t,e),vu(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=$s(Error(U(423)),e),e=d0(t,e,r,n,i);break e}else if(r!==i){i=$s(Error(U(424)),e),e=d0(t,e,r,n,i);break e}else for(Vt=jr(e.stateNode.containerInfo.firstChild),Ut=e,xe=!0,hn=null,n=O1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Us(),r===i){e=Zn(t,e,n);break e}wt(t,e,r,n)}e=e.child}return e;case 5:return V1(e),t===null&&Xf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,qf(r,i)?o=null:s!==null&&qf(r,s)&&(e.flags|=32),lT(t,e),wt(t,e,o,n),e.child;case 6:return t===null&&Xf(e),null;case 13:return uT(t,e,n);case 4:return Rg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=zs(e,null,r,n):wt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ln(r,i),c0(t,e,r,i,n);case 7:return wt(t,e,e.pendingProps,n),e.child;case 8:return wt(t,e,e.pendingProps.children,n),e.child;case 12:return wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ve(yu,r._currentValue),r._currentValue=o,s!==null)if(gn(s.value,o)){if(s.children===i.children&&!Ct.current){e=Zn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Gn(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Jf(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Jf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}wt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Rs(e,n),i=tn(i),r=r(i),e.flags|=1,wt(t,e,r,n),e.child;case 14:return r=e.type,i=ln(r,e.pendingProps),i=ln(r.type,i),u0(t,e,r,i,n);case 15:return oT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ln(r,i),Uc(t,e),e.tag=1,Rt(r)?(t=!0,pu(e)):t=!1,Rs(e,n),rT(e,r,i),ep(e,r,i,n),rp(null,e,r,!0,t,n);case 19:return hT(t,e,n);case 22:return aT(t,e,n)}throw Error(U(156,e.tag))};function kT(t,e){return e1(t,e)}function uP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(t,e,n,r){return new uP(t,e,n,r)}function qg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hP(t){if(typeof t=="function")return qg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===hg)return 11;if(t===dg)return 14}return 2}function $r(t,e){var n=t.alternate;return n===null?(n=Yt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function $c(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")qg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case gs:return Ri(n.children,i,s,e);case ug:o=8,i|=8;break;case xf:return t=Yt(12,n,e,i|2),t.elementType=xf,t.lanes=s,t;case Sf:return t=Yt(13,n,e,i),t.elementType=Sf,t.lanes=s,t;case bf:return t=Yt(19,n,e,i),t.elementType=bf,t.lanes=s,t;case VE:return vh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ME:o=10;break e;case LE:o=9;break e;case hg:o=11;break e;case dg:o=14;break e;case gr:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Yt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ri(t,e,n,r){return t=Yt(7,t,r,e),t.lanes=n,t}function vh(t,e,n,r){return t=Yt(22,t,r,e),t.elementType=VE,t.lanes=n,t.stateNode={isHidden:!1},t}function qd(t,e,n){return t=Yt(6,t,null,e),t.lanes=n,t}function Kd(t,e,n){return e=Yt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function dP(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kd(0),this.expirationTimes=kd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Kg(t,e,n,r,i,s,o,a,l){return t=new dP(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Yt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cg(s),t}function fP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ps,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function AT(t){if(!t)return Xr;t=t._reactInternals;e:{if(Yi(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Rt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Rt(n))return A1(t,n,e)}return e}function PT(t,e,n,r,i,s,o,a,l){return t=Kg(n,r,!0,t,i,s,o,a,l),t.context=AT(null),n=t.current,r=Tt(),i=Br(n),s=Gn(r,i),s.callback=e??null,Ur(n,s,i),t.current.lanes=i,al(t,i,r),Dt(t,r),t}function wh(t,e,n,r){var i=e.current,s=Tt(),o=Br(i);return n=AT(n),e.context===null?e.context=n:e.pendingContext=n,e=Gn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ur(i,e,o),t!==null&&(pn(t,i,o,s),Vc(t,i,o)),o}function ku(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function T0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Gg(t,e){T0(t,e),(t=t.alternate)&&T0(t,e)}function pP(){return null}var CT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Qg(t){this._internalRoot=t}Eh.prototype.render=Qg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));wh(t,e,null,null)};Eh.prototype.unmount=Qg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ji(function(){wh(null,t,null,null)}),e[Xn]=null}};function Eh(t){this._internalRoot=t}Eh.prototype.unstable_scheduleHydration=function(t){if(t){var e=a1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<yr.length&&e!==0&&e<yr[n].priority;n++);yr.splice(n,0,t),n===0&&c1(t)}};function Yg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Th(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function I0(){}function gP(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=ku(o);s.call(c)}}var o=PT(e,r,t,0,null,!1,!1,"",I0);return t._reactRootContainer=o,t[Xn]=o.current,Ra(t.nodeType===8?t.parentNode:t),ji(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=ku(l);a.call(c)}}var l=Kg(t,0,!1,null,null,!1,!1,"",I0);return t._reactRootContainer=l,t[Xn]=l.current,Ra(t.nodeType===8?t.parentNode:t),ji(function(){wh(e,l,n,r)}),l}function Ih(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=ku(o);a.call(l)}}wh(e,o,t,i)}else o=gP(n,e,t,i,r);return ku(o)}s1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ko(e.pendingLanes);n!==0&&(gg(e,n|1),Dt(e,Le()),!(se&6)&&(Ws=Le()+500,ii()))}break;case 13:ji(function(){var r=Jn(t,1);if(r!==null){var i=Tt();pn(r,t,1,i)}}),Gg(t,1)}};mg=function(t){if(t.tag===13){var e=Jn(t,134217728);if(e!==null){var n=Tt();pn(e,t,134217728,n)}Gg(t,134217728)}};o1=function(t){if(t.tag===13){var e=Br(t),n=Jn(t,e);if(n!==null){var r=Tt();pn(n,t,e,r)}Gg(t,e)}};a1=function(){return de};l1=function(t,e){var n=de;try{return de=t,e()}finally{de=n}};Lf=function(t,e,n){switch(e){case"input":if(Pf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=fh(r);if(!i)throw Error(U(90));jE(r),Pf(r,i)}}}break;case"textarea":zE(t,n);break;case"select":e=n.value,e!=null&&ks(t,!!n.multiple,e,!1)}};GE=$g;QE=ji;var mP={usingClientEntryPoint:!1,Events:[cl,vs,fh,qE,KE,$g]},Fo={findFiberByHostInstance:Ti,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yP={bundleType:Fo.bundleType,version:Fo.version,rendererPackageName:Fo.rendererPackageName,rendererConfig:Fo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:or.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=JE(t),t===null?null:t.stateNode},findFiberByHostInstance:Fo.findFiberByHostInstance||pP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sc.isDisabled&&sc.supportsFiber)try{ch=sc.inject(yP),Sn=sc}catch{}}Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mP;Wt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yg(e))throw Error(U(200));return fP(t,e,null,n)};Wt.createRoot=function(t,e){if(!Yg(t))throw Error(U(299));var n=!1,r="",i=CT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Kg(t,1,!1,null,null,n,!1,r,i),t[Xn]=e.current,Ra(t.nodeType===8?t.parentNode:t),new Qg(e)};Wt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=JE(e),t=t===null?null:t.stateNode,t};Wt.flushSync=function(t){return ji(t)};Wt.hydrate=function(t,e,n){if(!Th(e))throw Error(U(200));return Ih(null,t,e,!0,n)};Wt.hydrateRoot=function(t,e,n){if(!Yg(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=CT;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=PT(e,null,t,1,n??null,i,!1,s,o),t[Xn]=e.current,Ra(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Eh(e)};Wt.render=function(t,e,n){if(!Th(e))throw Error(U(200));return Ih(null,t,e,!1,n)};Wt.unmountComponentAtNode=function(t){if(!Th(t))throw Error(U(40));return t._reactRootContainer?(ji(function(){Ih(null,null,t,!1,function(){t._reactRootContainer=null,t[Xn]=null})}),!0):!1};Wt.unstable_batchedUpdates=$g;Wt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Th(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Ih(t,e,n,!1,r)};Wt.version="18.3.1-next-f1338f8080-20240426";function RT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(RT)}catch(t){console.error(t)}}RT(),RE.exports=Wt;var _P=RE.exports,x0=_P;Tf.createRoot=x0.createRoot,Tf.hydrateRoot=x0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ua(){return Ua=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ua.apply(this,arguments)}var Ar;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ar||(Ar={}));const S0="popstate";function vP(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return gp("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Au(i)}return EP(e,n,null,t)}function Fe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function DT(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wP(){return Math.random().toString(36).substr(2,8)}function b0(t,e){return{usr:t.state,key:t.key,idx:e}}function gp(t,e,n,r){return n===void 0&&(n=null),Ua({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ao(e):e,{state:n,key:e&&e.key||r||wP()})}function Au(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ao(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function EP(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Ar.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Ua({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Ar.Pop;let I=h(),_=I==null?null:I-c;c=I,l&&l({action:a,location:w.location,delta:_})}function p(I,_){a=Ar.Push;let T=gp(w.location,I,_);n&&n(T,I),c=h()+1;let S=b0(T,c),R=w.createHref(T);try{o.pushState(S,"",R)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(R)}s&&l&&l({action:a,location:w.location,delta:1})}function m(I,_){a=Ar.Replace;let T=gp(w.location,I,_);n&&n(T,I),c=h();let S=b0(T,c),R=w.createHref(T);o.replaceState(S,"",R),s&&l&&l({action:a,location:w.location,delta:0})}function y(I){let _=i.location.origin!=="null"?i.location.origin:i.location.href,T=typeof I=="string"?I:Au(I);return T=T.replace(/ $/,"%20"),Fe(_,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,_)}let w={get action(){return a},get location(){return t(i,o)},listen(I){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(S0,d),l=I,()=>{i.removeEventListener(S0,d),l=null}},createHref(I){return e(i,I)},createURL:y,encodeLocation(I){let _=y(I);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:p,replace:m,go(I){return o.go(I)}};return w}var k0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(k0||(k0={}));function TP(t,e,n){return n===void 0&&(n="/"),IP(t,e,n,!1)}function IP(t,e,n,r){let i=typeof e=="string"?ao(e):e,s=Xg(i.pathname||"/",n);if(s==null)return null;let o=NT(t);xP(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=MP(s);a=NP(o[l],c,r)}return a}function NT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Fe(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Wr([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(Fe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),NT(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:RP(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of OT(s.path))i(s,o,l)}),e}function OT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=OT(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function xP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:DP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const SP=/^:[\w-]+$/,bP=3,kP=2,AP=1,PP=10,CP=-2,A0=t=>t==="*";function RP(t,e){let n=t.split("/"),r=n.length;return n.some(A0)&&(r+=CP),e&&(r+=kP),n.filter(i=>!A0(i)).reduce((i,s)=>i+(SP.test(s)?bP:s===""?AP:PP),r)}function DP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function NP(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=P0({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=P0({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Wr([s,d.pathname]),pathnameBase:jP(Wr([s,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(s=Wr([s,d.pathnameBase]))}return o}function P0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=OP(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:p,isOptional:m}=h;if(p==="*"){let w=a[d]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const y=a[d];return m&&!y?c[p]=void 0:c[p]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function OP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),DT(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function MP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return DT(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Xg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function LP(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ao(t):t;return{pathname:n?n.startsWith("/")?n:VP(n,e):e,search:UP(r),hash:zP(i)}}function VP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Gd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function FP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Jg(t,e){let n=FP(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Zg(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ao(t):(i=Ua({},t),Fe(!i.pathname||!i.pathname.includes("?"),Gd("?","pathname","search",i)),Fe(!i.pathname||!i.pathname.includes("#"),Gd("#","pathname","hash",i)),Fe(!i.search||!i.search.includes("#"),Gd("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=LP(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Wr=t=>t.join("/").replace(/\/\/+/g,"/"),jP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),UP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,zP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function BP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const MT=["post","put","patch","delete"];new Set(MT);const $P=["get",...MT];new Set($P);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function za(){return za=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},za.apply(this,arguments)}const em=V.createContext(null),WP=V.createContext(null),si=V.createContext(null),xh=V.createContext(null),oi=V.createContext({outlet:null,matches:[],isDataRoute:!1}),LT=V.createContext(null);function HP(t,e){let{relative:n}=e===void 0?{}:e;lo()||Fe(!1);let{basename:r,navigator:i}=V.useContext(si),{hash:s,pathname:o,search:a}=FT(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Wr([r,o])),i.createHref({pathname:l,search:a,hash:s})}function lo(){return V.useContext(xh)!=null}function co(){return lo()||Fe(!1),V.useContext(xh).location}function VT(t){V.useContext(si).static||V.useLayoutEffect(t)}function uo(){let{isDataRoute:t}=V.useContext(oi);return t?iC():qP()}function qP(){lo()||Fe(!1);let t=V.useContext(em),{basename:e,future:n,navigator:r}=V.useContext(si),{matches:i}=V.useContext(oi),{pathname:s}=co(),o=JSON.stringify(Jg(i,n.v7_relativeSplatPath)),a=V.useRef(!1);return VT(()=>{a.current=!0}),V.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=Zg(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Wr([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,s,t])}function FT(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=V.useContext(si),{matches:i}=V.useContext(oi),{pathname:s}=co(),o=JSON.stringify(Jg(i,r.v7_relativeSplatPath));return V.useMemo(()=>Zg(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function KP(t,e){return GP(t,e)}function GP(t,e,n,r){lo()||Fe(!1);let{navigator:i,static:s}=V.useContext(si),{matches:o}=V.useContext(oi),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let h=co(),d;if(e){var p;let _=typeof e=="string"?ao(e):e;c==="/"||(p=_.pathname)!=null&&p.startsWith(c)||Fe(!1),d=_}else d=h;let m=d.pathname||"/",y=m;if(c!=="/"){let _=c.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(_.length).join("/")}let w=!s&&n&&n.matches&&n.matches.length>0?n.matches:TP(t,{pathname:y}),I=ZP(w&&w.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:Wr([c,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:Wr([c,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),o,n,r);return e&&I?V.createElement(xh.Provider,{value:{location:za({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ar.Pop}},I):I}function QP(){let t=rC(),e=BP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:i},n):null,s)}const YP=V.createElement(QP,null);class XP extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?V.createElement(oi.Provider,{value:this.props.routeContext},V.createElement(LT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function JP(t){let{routeContext:e,match:n,children:r}=t,i=V.useContext(em);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),V.createElement(oi.Provider,{value:e},r)}function ZP(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Fe(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:p,errors:m}=n,y=d.route.loader&&p[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,p)=>{let m,y=!1,w=null,I=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,w=d.route.errorElement||YP,l&&(c<0&&p===0?(sC("route-fallback",!1),y=!0,I=null):c===p&&(y=!0,I=d.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,p+1)),T=()=>{let S;return m?S=w:y?S=I:d.route.Component?S=V.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=h,V.createElement(JP,{match:d,routeContext:{outlet:h,matches:_,isDataRoute:n!=null},children:S})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?V.createElement(XP,{location:n.location,revalidation:n.revalidation,component:w,error:m,children:T(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):T()},null)}var jT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(jT||{}),Pu=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Pu||{});function eC(t){let e=V.useContext(em);return e||Fe(!1),e}function tC(t){let e=V.useContext(WP);return e||Fe(!1),e}function nC(t){let e=V.useContext(oi);return e||Fe(!1),e}function UT(t){let e=nC(),n=e.matches[e.matches.length-1];return n.route.id||Fe(!1),n.route.id}function rC(){var t;let e=V.useContext(LT),n=tC(Pu.UseRouteError),r=UT(Pu.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function iC(){let{router:t}=eC(jT.UseNavigateStable),e=UT(Pu.UseNavigateStable),n=V.useRef(!1);return VT(()=>{n.current=!0}),V.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,za({fromRouteId:e},s)))},[t,e])}const C0={};function sC(t,e,n){!e&&!C0[t]&&(C0[t]=!0)}function oC(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function zT(t){let{to:e,replace:n,state:r,relative:i}=t;lo()||Fe(!1);let{future:s,static:o}=V.useContext(si),{matches:a}=V.useContext(oi),{pathname:l}=co(),c=uo(),h=Zg(e,Jg(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(h);return V.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:i}),[c,d,i,n,r]),null}function pr(t){Fe(!1)}function aC(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ar.Pop,navigator:s,static:o=!1,future:a}=t;lo()&&Fe(!1);let l=e.replace(/^\/*/,"/"),c=V.useMemo(()=>({basename:l,navigator:s,static:o,future:za({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=ao(r));let{pathname:h="/",search:d="",hash:p="",state:m=null,key:y="default"}=r,w=V.useMemo(()=>{let I=Xg(h,l);return I==null?null:{location:{pathname:I,search:d,hash:p,state:m,key:y},navigationType:i}},[l,h,d,p,m,y,i]);return w==null?null:V.createElement(si.Provider,{value:c},V.createElement(xh.Provider,{children:n,value:w}))}function lC(t){let{children:e,location:n}=t;return KP(mp(e),n)}new Promise(()=>{});function mp(t,e){e===void 0&&(e=[]);let n=[];return V.Children.forEach(t,(r,i)=>{if(!V.isValidElement(r))return;let s=[...e,i];if(r.type===V.Fragment){n.push.apply(n,mp(r.props.children,s));return}r.type!==pr&&Fe(!1),!r.props.index||!r.props.children||Fe(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=mp(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yp(){return yp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yp.apply(this,arguments)}function cC(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function uC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function hC(t,e){return t.button===0&&(!e||e==="_self")&&!uC(t)}const dC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],fC="6";try{window.__reactRouterVersion=fC}catch{}const pC="startTransition",R0=ak[pC];function gC(t){let{basename:e,children:n,future:r,window:i}=t,s=V.useRef();s.current==null&&(s.current=vP({window:i,v5Compat:!0}));let o=s.current,[a,l]=V.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=V.useCallback(d=>{c&&R0?R0(()=>l(d)):l(d)},[l,c]);return V.useLayoutEffect(()=>o.listen(h),[o,h]),V.useEffect(()=>oC(r),[r]),V.createElement(aC,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const mC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oc=V.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:d}=e,p=cC(e,dC),{basename:m}=V.useContext(si),y,w=!1;if(typeof c=="string"&&yC.test(c)&&(y=c,mC))try{let S=new URL(window.location.href),R=c.startsWith("//")?new URL(S.protocol+c):new URL(c),N=Xg(R.pathname,m);R.origin===S.origin&&N!=null?c=N+R.search+R.hash:w=!0}catch{}let I=HP(c,{relative:i}),_=_C(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,viewTransition:d});function T(S){r&&r(S),S.defaultPrevented||_(S)}return V.createElement("a",yp({},p,{href:y||I,onClick:w||s?r:T,ref:n,target:l}))});var D0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(D0||(D0={}));var N0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(N0||(N0={}));function _C(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=uo(),c=co(),h=FT(t,{relative:o});return V.useCallback(d=>{if(hC(d,n)){d.preventDefault();let p=r!==void 0?r:Au(c)===Au(h);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,r,i,n,t,s,o,a])}const O0=t=>{let e;const n=new Set,r=(h,d)=>{const p=typeof h=="function"?h(e):h;if(!Object.is(p,e)){const m=e;e=d??(typeof p!="object"||p===null)?p:Object.assign({},e,p),n.forEach(y=>y(e,m))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{n.clear()}},c=e=t(r,i,l);return l},vC=t=>t?O0(t):O0;var BT={exports:{}},$T={},WT={exports:{}},HT={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hs=V;function wC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var EC=typeof Object.is=="function"?Object.is:wC,TC=Hs.useState,IC=Hs.useEffect,xC=Hs.useLayoutEffect,SC=Hs.useDebugValue;function bC(t,e){var n=e(),r=TC({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return xC(function(){i.value=n,i.getSnapshot=e,Qd(i)&&s({inst:i})},[t,n,e]),IC(function(){return Qd(i)&&s({inst:i}),t(function(){Qd(i)&&s({inst:i})})},[t]),SC(n),n}function Qd(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!EC(t,n)}catch{return!0}}function kC(t,e){return e()}var AC=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?kC:bC;HT.useSyncExternalStore=Hs.useSyncExternalStore!==void 0?Hs.useSyncExternalStore:AC;WT.exports=HT;var PC=WT.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sh=V,CC=PC;function RC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var DC=typeof Object.is=="function"?Object.is:RC,NC=CC.useSyncExternalStore,OC=Sh.useRef,MC=Sh.useEffect,LC=Sh.useMemo,VC=Sh.useDebugValue;$T.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=OC(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=LC(function(){function l(m){if(!c){if(c=!0,h=m,m=r(m),i!==void 0&&o.hasValue){var y=o.value;if(i(y,m))return d=y}return d=m}if(y=d,DC(h,m))return y;var w=r(m);return i!==void 0&&i(y,w)?(h=m,y):(h=m,d=w)}var c=!1,h,d,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,i]);var a=NC(t,s[0],s[1]);return MC(function(){o.hasValue=!0,o.value=a},[a]),VC(a),a};BT.exports=$T;var FC=BT.exports;const jC=vE(FC),{useDebugValue:UC}=ol,{useSyncExternalStoreWithSelector:zC}=jC;const BC=t=>t;function $C(t,e=BC,n){const r=zC(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return UC(r),r}const M0=t=>{const e=typeof t=="function"?vC(t):t,n=(r,i)=>$C(e,r,i);return Object.assign(n,e),n},qT=t=>t?M0(t):M0,hl=qT(t=>({user:{uid:"dev-user",displayName:"개발자",email:"dev@corevia.app",photoURL:void 0},isAuthenticated:!0,setUser:e=>t({user:e,isAuthenticated:!0}),logout:()=>{}})),Pr=qT((t,e)=>({part:null,mainExercise:null,accessoryExercises:[],notes:"",lastSessionCache:{},progressCache:{},setPart:n=>t({part:n}),setMainExercise:n=>t({mainExercise:n}),cacheLastSession:(n,r)=>t(i=>({lastSessionCache:{...i.lastSessionCache,[n]:r}})),cacheProgress:(n,r)=>t(i=>({progressCache:{...i.progressCache,[n]:r}})),updateReps:(n,r)=>t(i=>{if(!i.mainExercise)return i;const s=[...i.mainExercise.sets];return s[n]={...s[n],reps:r,isSuccess:r>=10},{mainExercise:{...i.mainExercise,sets:s}}}),toggleSuccess:n=>t(r=>{if(!r.mainExercise)return r;const i=[...r.mainExercise.sets];return i[n]={...i[n],isSuccess:!i[n].isSuccess},{mainExercise:{...r.mainExercise,sets:i}}}),addAccessoryExercise:n=>t(r=>({accessoryExercises:[...r.accessoryExercises,n]})),removeAccessoryExercise:n=>t(r=>({accessoryExercises:r.accessoryExercises.filter((i,s)=>s!==n)})),setNotes:n=>t({notes:n}),getSuccessSets:()=>{const n=e().mainExercise;return n?n.sets.filter(r=>r.isSuccess).length:0},resetSession:()=>t(n=>({part:n.part,mainExercise:null,accessoryExercises:[],notes:"",lastSessionCache:n.lastSessionCache,progressCache:n.progressCache}))}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},WC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},GT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[h],n[d],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(KT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):WC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new HC;const p=s<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),d!==64){const y=c<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class HC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qC=function(t){const e=KT(t);return GT.encodeByteArray(e,!0)},Cu=function(t){return qC(t).replace(/\./g,"")},QT=function(t){try{return GT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=()=>KC().__FIREBASE_DEFAULTS__,QC=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},YC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&QT(t[1]);return e&&JSON.parse(e)},bh=()=>{try{return GC()||QC()||YC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},YT=t=>{var e,n;return(n=(e=bh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},XC=t=>{const e=YT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},XT=()=>{var t;return(t=bh())===null||t===void 0?void 0:t.config},JT=t=>{var e;return(e=bh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Cu(JSON.stringify(n)),Cu(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mt())}function tR(){var t;const e=(t=bh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function rR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iR(){const t=mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function sR(){return!tR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function eI(){try{return typeof indexedDB=="object"}catch{return!1}}function tI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function oR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR="FirebaseError";class _n extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=aR,Object.setPrototypeOf(this,_n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xi.prototype.create)}}class Xi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?lR(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new _n(i,a,r)}}function lR(t,e){return t.replace(cR,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const cR=/\{\$([^}]+)}/g;function uR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ba(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(L0(s)&&L0(o)){if(!Ba(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function L0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hR(t,e){const n=new dR(t,e);return n.subscribe.bind(n)}class dR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");fR(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Yd),i.error===void 0&&(i.error=Yd),i.complete===void 0&&(i.complete=Yd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Yd(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=1e3,gR=2,mR=4*60*60*1e3,yR=.5;function V0(t,e=pR,n=gR){const r=e*Math.pow(n,t),i=Math.round(yR*r*(Math.random()-.5)*2);return Math.min(mR,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(t){return t&&t._delegate?t._delegate:t}class mn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new JC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wR(e))try{this.getOrInitializeService({instanceIdentifier:vi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=vi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vi){return this.instances.has(e)}getOptions(e=vi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:vR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=vi){return this.component?this.component.multipleInstances?e:vi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vR(t){return t===vi?void 0:t}function wR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _R(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ne||(ne={}));const TR={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},IR=ne.INFO,xR={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},SR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=xR[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kh{constructor(e){this.name=e,this._logLevel=IR,this._logHandler=SR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const bR=(t,e)=>e.some(n=>t instanceof n);let F0,j0;function kR(){return F0||(F0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AR(){return j0||(j0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nI=new WeakMap,_p=new WeakMap,rI=new WeakMap,Xd=new WeakMap,tm=new WeakMap;function PR(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Hr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&nI.set(n,t)}).catch(()=>{}),tm.set(e,t),e}function CR(t){if(_p.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});_p.set(t,e)}let vp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return _p.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function RR(t){vp=t(vp)}function DR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Jd(this),e,...n);return rI.set(r,e.sort?e.sort():[e]),Hr(r)}:AR().includes(t)?function(...e){return t.apply(Jd(this),e),Hr(nI.get(this))}:function(...e){return Hr(t.apply(Jd(this),e))}}function NR(t){return typeof t=="function"?DR(t):(t instanceof IDBTransaction&&CR(t),bR(t,kR())?new Proxy(t,vp):t)}function Hr(t){if(t instanceof IDBRequest)return PR(t);if(Xd.has(t))return Xd.get(t);const e=NR(t);return e!==t&&(Xd.set(t,e),tm.set(e,t)),e}const Jd=t=>tm.get(t);function iI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Hr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Hr(o.result),l.oldVersion,l.newVersion,Hr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const OR=["get","getKey","getAll","getAllKeys","count"],MR=["put","add","delete","clear"],Zd=new Map;function U0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Zd.get(e))return Zd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=MR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||OR.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Zd.set(e,s),s}RR(t=>({...t,get:(e,n,r)=>U0(e,n)||t.get(e,n,r),has:(e,n)=>!!U0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(VR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function VR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const wp="@firebase/app",z0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er=new kh("@firebase/app"),FR="@firebase/app-compat",jR="@firebase/analytics-compat",UR="@firebase/analytics",zR="@firebase/app-check-compat",BR="@firebase/app-check",$R="@firebase/auth",WR="@firebase/auth-compat",HR="@firebase/database",qR="@firebase/data-connect",KR="@firebase/database-compat",GR="@firebase/functions",QR="@firebase/functions-compat",YR="@firebase/installations",XR="@firebase/installations-compat",JR="@firebase/messaging",ZR="@firebase/messaging-compat",e2="@firebase/performance",t2="@firebase/performance-compat",n2="@firebase/remote-config",r2="@firebase/remote-config-compat",i2="@firebase/storage",s2="@firebase/storage-compat",o2="@firebase/firestore",a2="@firebase/vertexai-preview",l2="@firebase/firestore-compat",c2="firebase",u2="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep="[DEFAULT]",h2={[wp]:"fire-core",[FR]:"fire-core-compat",[UR]:"fire-analytics",[jR]:"fire-analytics-compat",[BR]:"fire-app-check",[zR]:"fire-app-check-compat",[$R]:"fire-auth",[WR]:"fire-auth-compat",[HR]:"fire-rtdb",[qR]:"fire-data-connect",[KR]:"fire-rtdb-compat",[GR]:"fire-fn",[QR]:"fire-fn-compat",[YR]:"fire-iid",[XR]:"fire-iid-compat",[JR]:"fire-fcm",[ZR]:"fire-fcm-compat",[e2]:"fire-perf",[t2]:"fire-perf-compat",[n2]:"fire-rc",[r2]:"fire-rc-compat",[i2]:"fire-gcs",[s2]:"fire-gcs-compat",[o2]:"fire-fst",[l2]:"fire-fst-compat",[a2]:"fire-vertex","fire-js":"fire-js",[c2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ru=new Map,d2=new Map,Tp=new Map;function B0(t,e){try{t.container.addComponent(e)}catch(n){er.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Rn(t){const e=t.name;if(Tp.has(e))return er.debug(`There were multiple attempts to register component ${e}.`),!1;Tp.set(e,t);for(const n of Ru.values())B0(n,t);for(const n of d2.values())B0(n,t);return!0}function Ji(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Cr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qr=new Xi("app","Firebase",f2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new mn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=u2;function sI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ep,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw qr.create("bad-app-name",{appName:String(i)});if(n||(n=XT()),!n)throw qr.create("no-options");const s=Ru.get(i);if(s){if(Ba(n,s.options)&&Ba(r,s.config))return s;throw qr.create("duplicate-app",{appName:i})}const o=new ER(i);for(const l of Tp.values())o.addComponent(l);const a=new p2(n,r,o);return Ru.set(i,a),a}function nm(t=Ep){const e=Ru.get(t);if(!e&&t===Ep&&XT())return sI();if(!e)throw qr.create("no-app",{appName:t});return e}function Zt(t,e,n){var r;let i=(r=h2[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),er.warn(a.join(" "));return}Rn(new mn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2="firebase-heartbeat-database",m2=1,$a="firebase-heartbeat-store";let ef=null;function oI(){return ef||(ef=iI(g2,m2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($a)}catch(n){console.warn(n)}}}}).catch(t=>{throw qr.create("idb-open",{originalErrorMessage:t.message})})),ef}async function y2(t){try{const n=(await oI()).transaction($a),r=await n.objectStore($a).get(aI(t));return await n.done,r}catch(e){if(e instanceof _n)er.warn(e.message);else{const n=qr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});er.warn(n.message)}}}async function $0(t,e){try{const r=(await oI()).transaction($a,"readwrite");await r.objectStore($a).put(e,aI(t)),await r.done}catch(n){if(n instanceof _n)er.warn(n.message);else{const r=qr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});er.warn(r.message)}}}function aI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2=1024,v2=30*24*60*60*1e3;class w2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new T2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=W0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=v2}),this._storage.overwrite(this._heartbeatsCache))}catch(r){er.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=W0(),{heartbeatsToSend:r,unsentEntries:i}=E2(this._heartbeatsCache.heartbeats),s=Cu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return er.warn(n),""}}}function W0(){return new Date().toISOString().substring(0,10)}function E2(t,e=_2){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),H0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),H0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class T2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return eI()?tI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await y2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return $0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return $0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function H0(t){return Cu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(t){Rn(new mn("platform-logger",e=>new LR(e),"PRIVATE")),Rn(new mn("heartbeat",e=>new w2(e),"PRIVATE")),Zt(wp,z0,t),Zt(wp,z0,"esm2017"),Zt("fire-js","")}I2("");var q0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Di,lI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,v){function b(){}b.prototype=v.prototype,x.D=v.prototype,x.prototype=new b,x.prototype.constructor=x,x.C=function(k,C,D){for(var A=Array(arguments.length-2),we=2;we<arguments.length;we++)A[we-2]=arguments[we];return v.prototype[C].apply(k,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,v,b){b||(b=0);var k=Array(16);if(typeof v=="string")for(var C=0;16>C;++C)k[C]=v.charCodeAt(b++)|v.charCodeAt(b++)<<8|v.charCodeAt(b++)<<16|v.charCodeAt(b++)<<24;else for(C=0;16>C;++C)k[C]=v[b++]|v[b++]<<8|v[b++]<<16|v[b++]<<24;v=x.g[0],b=x.g[1],C=x.g[2];var D=x.g[3],A=v+(D^b&(C^D))+k[0]+3614090360&4294967295;v=b+(A<<7&4294967295|A>>>25),A=D+(C^v&(b^C))+k[1]+3905402710&4294967295,D=v+(A<<12&4294967295|A>>>20),A=C+(b^D&(v^b))+k[2]+606105819&4294967295,C=D+(A<<17&4294967295|A>>>15),A=b+(v^C&(D^v))+k[3]+3250441966&4294967295,b=C+(A<<22&4294967295|A>>>10),A=v+(D^b&(C^D))+k[4]+4118548399&4294967295,v=b+(A<<7&4294967295|A>>>25),A=D+(C^v&(b^C))+k[5]+1200080426&4294967295,D=v+(A<<12&4294967295|A>>>20),A=C+(b^D&(v^b))+k[6]+2821735955&4294967295,C=D+(A<<17&4294967295|A>>>15),A=b+(v^C&(D^v))+k[7]+4249261313&4294967295,b=C+(A<<22&4294967295|A>>>10),A=v+(D^b&(C^D))+k[8]+1770035416&4294967295,v=b+(A<<7&4294967295|A>>>25),A=D+(C^v&(b^C))+k[9]+2336552879&4294967295,D=v+(A<<12&4294967295|A>>>20),A=C+(b^D&(v^b))+k[10]+4294925233&4294967295,C=D+(A<<17&4294967295|A>>>15),A=b+(v^C&(D^v))+k[11]+2304563134&4294967295,b=C+(A<<22&4294967295|A>>>10),A=v+(D^b&(C^D))+k[12]+1804603682&4294967295,v=b+(A<<7&4294967295|A>>>25),A=D+(C^v&(b^C))+k[13]+4254626195&4294967295,D=v+(A<<12&4294967295|A>>>20),A=C+(b^D&(v^b))+k[14]+2792965006&4294967295,C=D+(A<<17&4294967295|A>>>15),A=b+(v^C&(D^v))+k[15]+1236535329&4294967295,b=C+(A<<22&4294967295|A>>>10),A=v+(C^D&(b^C))+k[1]+4129170786&4294967295,v=b+(A<<5&4294967295|A>>>27),A=D+(b^C&(v^b))+k[6]+3225465664&4294967295,D=v+(A<<9&4294967295|A>>>23),A=C+(v^b&(D^v))+k[11]+643717713&4294967295,C=D+(A<<14&4294967295|A>>>18),A=b+(D^v&(C^D))+k[0]+3921069994&4294967295,b=C+(A<<20&4294967295|A>>>12),A=v+(C^D&(b^C))+k[5]+3593408605&4294967295,v=b+(A<<5&4294967295|A>>>27),A=D+(b^C&(v^b))+k[10]+38016083&4294967295,D=v+(A<<9&4294967295|A>>>23),A=C+(v^b&(D^v))+k[15]+3634488961&4294967295,C=D+(A<<14&4294967295|A>>>18),A=b+(D^v&(C^D))+k[4]+3889429448&4294967295,b=C+(A<<20&4294967295|A>>>12),A=v+(C^D&(b^C))+k[9]+568446438&4294967295,v=b+(A<<5&4294967295|A>>>27),A=D+(b^C&(v^b))+k[14]+3275163606&4294967295,D=v+(A<<9&4294967295|A>>>23),A=C+(v^b&(D^v))+k[3]+4107603335&4294967295,C=D+(A<<14&4294967295|A>>>18),A=b+(D^v&(C^D))+k[8]+1163531501&4294967295,b=C+(A<<20&4294967295|A>>>12),A=v+(C^D&(b^C))+k[13]+2850285829&4294967295,v=b+(A<<5&4294967295|A>>>27),A=D+(b^C&(v^b))+k[2]+4243563512&4294967295,D=v+(A<<9&4294967295|A>>>23),A=C+(v^b&(D^v))+k[7]+1735328473&4294967295,C=D+(A<<14&4294967295|A>>>18),A=b+(D^v&(C^D))+k[12]+2368359562&4294967295,b=C+(A<<20&4294967295|A>>>12),A=v+(b^C^D)+k[5]+4294588738&4294967295,v=b+(A<<4&4294967295|A>>>28),A=D+(v^b^C)+k[8]+2272392833&4294967295,D=v+(A<<11&4294967295|A>>>21),A=C+(D^v^b)+k[11]+1839030562&4294967295,C=D+(A<<16&4294967295|A>>>16),A=b+(C^D^v)+k[14]+4259657740&4294967295,b=C+(A<<23&4294967295|A>>>9),A=v+(b^C^D)+k[1]+2763975236&4294967295,v=b+(A<<4&4294967295|A>>>28),A=D+(v^b^C)+k[4]+1272893353&4294967295,D=v+(A<<11&4294967295|A>>>21),A=C+(D^v^b)+k[7]+4139469664&4294967295,C=D+(A<<16&4294967295|A>>>16),A=b+(C^D^v)+k[10]+3200236656&4294967295,b=C+(A<<23&4294967295|A>>>9),A=v+(b^C^D)+k[13]+681279174&4294967295,v=b+(A<<4&4294967295|A>>>28),A=D+(v^b^C)+k[0]+3936430074&4294967295,D=v+(A<<11&4294967295|A>>>21),A=C+(D^v^b)+k[3]+3572445317&4294967295,C=D+(A<<16&4294967295|A>>>16),A=b+(C^D^v)+k[6]+76029189&4294967295,b=C+(A<<23&4294967295|A>>>9),A=v+(b^C^D)+k[9]+3654602809&4294967295,v=b+(A<<4&4294967295|A>>>28),A=D+(v^b^C)+k[12]+3873151461&4294967295,D=v+(A<<11&4294967295|A>>>21),A=C+(D^v^b)+k[15]+530742520&4294967295,C=D+(A<<16&4294967295|A>>>16),A=b+(C^D^v)+k[2]+3299628645&4294967295,b=C+(A<<23&4294967295|A>>>9),A=v+(C^(b|~D))+k[0]+4096336452&4294967295,v=b+(A<<6&4294967295|A>>>26),A=D+(b^(v|~C))+k[7]+1126891415&4294967295,D=v+(A<<10&4294967295|A>>>22),A=C+(v^(D|~b))+k[14]+2878612391&4294967295,C=D+(A<<15&4294967295|A>>>17),A=b+(D^(C|~v))+k[5]+4237533241&4294967295,b=C+(A<<21&4294967295|A>>>11),A=v+(C^(b|~D))+k[12]+1700485571&4294967295,v=b+(A<<6&4294967295|A>>>26),A=D+(b^(v|~C))+k[3]+2399980690&4294967295,D=v+(A<<10&4294967295|A>>>22),A=C+(v^(D|~b))+k[10]+4293915773&4294967295,C=D+(A<<15&4294967295|A>>>17),A=b+(D^(C|~v))+k[1]+2240044497&4294967295,b=C+(A<<21&4294967295|A>>>11),A=v+(C^(b|~D))+k[8]+1873313359&4294967295,v=b+(A<<6&4294967295|A>>>26),A=D+(b^(v|~C))+k[15]+4264355552&4294967295,D=v+(A<<10&4294967295|A>>>22),A=C+(v^(D|~b))+k[6]+2734768916&4294967295,C=D+(A<<15&4294967295|A>>>17),A=b+(D^(C|~v))+k[13]+1309151649&4294967295,b=C+(A<<21&4294967295|A>>>11),A=v+(C^(b|~D))+k[4]+4149444226&4294967295,v=b+(A<<6&4294967295|A>>>26),A=D+(b^(v|~C))+k[11]+3174756917&4294967295,D=v+(A<<10&4294967295|A>>>22),A=C+(v^(D|~b))+k[2]+718787259&4294967295,C=D+(A<<15&4294967295|A>>>17),A=b+(D^(C|~v))+k[9]+3951481745&4294967295,x.g[0]=x.g[0]+v&4294967295,x.g[1]=x.g[1]+(C+(A<<21&4294967295|A>>>11))&4294967295,x.g[2]=x.g[2]+C&4294967295,x.g[3]=x.g[3]+D&4294967295}r.prototype.u=function(x,v){v===void 0&&(v=x.length);for(var b=v-this.blockSize,k=this.B,C=this.h,D=0;D<v;){if(C==0)for(;D<=b;)i(this,x,D),D+=this.blockSize;if(typeof x=="string"){for(;D<v;)if(k[C++]=x.charCodeAt(D++),C==this.blockSize){i(this,k),C=0;break}}else for(;D<v;)if(k[C++]=x[D++],C==this.blockSize){i(this,k),C=0;break}}this.h=C,this.o+=v},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var v=1;v<x.length-8;++v)x[v]=0;var b=8*this.o;for(v=x.length-8;v<x.length;++v)x[v]=b&255,b/=256;for(this.u(x),x=Array(16),v=b=0;4>v;++v)for(var k=0;32>k;k+=8)x[b++]=this.g[v]>>>k&255;return x};function s(x,v){var b=a;return Object.prototype.hasOwnProperty.call(b,x)?b[x]:b[x]=v(x)}function o(x,v){this.h=v;for(var b=[],k=!0,C=x.length-1;0<=C;C--){var D=x[C]|0;k&&D==v||(b[C]=D,k=!1)}this.g=b}var a={};function l(x){return-128<=x&&128>x?s(x,function(v){return new o([v|0],0>v?-1:0)}):new o([x|0],0>x?-1:0)}function c(x){if(isNaN(x)||!isFinite(x))return d;if(0>x)return I(c(-x));for(var v=[],b=1,k=0;x>=b;k++)v[k]=x/b|0,b*=4294967296;return new o(v,0)}function h(x,v){if(x.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(x.charAt(0)=="-")return I(h(x.substring(1),v));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=c(Math.pow(v,8)),k=d,C=0;C<x.length;C+=8){var D=Math.min(8,x.length-C),A=parseInt(x.substring(C,C+D),v);8>D?(D=c(Math.pow(v,D)),k=k.j(D).add(c(A))):(k=k.j(b),k=k.add(c(A)))}return k}var d=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(w(this))return-I(this).m();for(var x=0,v=1,b=0;b<this.g.length;b++){var k=this.i(b);x+=(0<=k?k:4294967296+k)*v,v*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(y(this))return"0";if(w(this))return"-"+I(this).toString(x);for(var v=c(Math.pow(x,6)),b=this,k="";;){var C=R(b,v).g;b=_(b,C.j(v));var D=((0<b.g.length?b.g[0]:b.h)>>>0).toString(x);if(b=C,y(b))return D+k;for(;6>D.length;)D="0"+D;k=D+k}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function y(x){if(x.h!=0)return!1;for(var v=0;v<x.g.length;v++)if(x.g[v]!=0)return!1;return!0}function w(x){return x.h==-1}t.l=function(x){return x=_(this,x),w(x)?-1:y(x)?0:1};function I(x){for(var v=x.g.length,b=[],k=0;k<v;k++)b[k]=~x.g[k];return new o(b,~x.h).add(p)}t.abs=function(){return w(this)?I(this):this},t.add=function(x){for(var v=Math.max(this.g.length,x.g.length),b=[],k=0,C=0;C<=v;C++){var D=k+(this.i(C)&65535)+(x.i(C)&65535),A=(D>>>16)+(this.i(C)>>>16)+(x.i(C)>>>16);k=A>>>16,D&=65535,A&=65535,b[C]=A<<16|D}return new o(b,b[b.length-1]&-2147483648?-1:0)};function _(x,v){return x.add(I(v))}t.j=function(x){if(y(this)||y(x))return d;if(w(this))return w(x)?I(this).j(I(x)):I(I(this).j(x));if(w(x))return I(this.j(I(x)));if(0>this.l(m)&&0>x.l(m))return c(this.m()*x.m());for(var v=this.g.length+x.g.length,b=[],k=0;k<2*v;k++)b[k]=0;for(k=0;k<this.g.length;k++)for(var C=0;C<x.g.length;C++){var D=this.i(k)>>>16,A=this.i(k)&65535,we=x.i(C)>>>16,oe=x.i(C)&65535;b[2*k+2*C]+=A*oe,T(b,2*k+2*C),b[2*k+2*C+1]+=D*oe,T(b,2*k+2*C+1),b[2*k+2*C+1]+=A*we,T(b,2*k+2*C+1),b[2*k+2*C+2]+=D*we,T(b,2*k+2*C+2)}for(k=0;k<v;k++)b[k]=b[2*k+1]<<16|b[2*k];for(k=v;k<2*v;k++)b[k]=0;return new o(b,0)};function T(x,v){for(;(x[v]&65535)!=x[v];)x[v+1]+=x[v]>>>16,x[v]&=65535,v++}function S(x,v){this.g=x,this.h=v}function R(x,v){if(y(v))throw Error("division by zero");if(y(x))return new S(d,d);if(w(x))return v=R(I(x),v),new S(I(v.g),I(v.h));if(w(v))return v=R(x,I(v)),new S(I(v.g),v.h);if(30<x.g.length){if(w(x)||w(v))throw Error("slowDivide_ only works with positive integers.");for(var b=p,k=v;0>=k.l(x);)b=N(b),k=N(k);var C=M(b,1),D=M(k,1);for(k=M(k,2),b=M(b,2);!y(k);){var A=D.add(k);0>=A.l(x)&&(C=C.add(b),D=A),k=M(k,1),b=M(b,1)}return v=_(x,C.j(v)),new S(C,v)}for(C=d;0<=x.l(v);){for(b=Math.max(1,Math.floor(x.m()/v.m())),k=Math.ceil(Math.log(b)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),D=c(b),A=D.j(v);w(A)||0<A.l(x);)b-=k,D=c(b),A=D.j(v);y(D)&&(D=p),C=C.add(D),x=_(x,A)}return new S(C,x)}t.A=function(x){return R(this,x).h},t.and=function(x){for(var v=Math.max(this.g.length,x.g.length),b=[],k=0;k<v;k++)b[k]=this.i(k)&x.i(k);return new o(b,this.h&x.h)},t.or=function(x){for(var v=Math.max(this.g.length,x.g.length),b=[],k=0;k<v;k++)b[k]=this.i(k)|x.i(k);return new o(b,this.h|x.h)},t.xor=function(x){for(var v=Math.max(this.g.length,x.g.length),b=[],k=0;k<v;k++)b[k]=this.i(k)^x.i(k);return new o(b,this.h^x.h)};function N(x){for(var v=x.g.length+1,b=[],k=0;k<v;k++)b[k]=x.i(k)<<1|x.i(k-1)>>>31;return new o(b,x.h)}function M(x,v){var b=v>>5;v%=32;for(var k=x.g.length-b,C=[],D=0;D<k;D++)C[D]=0<v?x.i(D+b)>>>v|x.i(D+b+1)<<32-v:x.i(D+b);return new o(C,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,lI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Di=o}).apply(typeof q0<"u"?q0:typeof self<"u"?self:typeof window<"u"?window:{});var ac=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cI,Qo,uI,Wc,Ip,hI,dI,fI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,g){return u==Array.prototype||u==Object.prototype||(u[f]=g.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ac=="object"&&ac];for(var f=0;f<u.length;++f){var g=u[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(u,f){if(f)e:{var g=r;u=u.split(".");for(var E=0;E<u.length-1;E++){var O=u[E];if(!(O in g))break e;g=g[O]}u=u[u.length-1],E=g[u],f=f(E),f!=E&&f!=null&&e(g,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var g=0,E=!1,O={next:function(){if(!E&&g<u.length){var L=g++;return{value:f(L,u[L]),done:!1}}return E=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,g){return u.call.apply(u.bind,arguments)}function d(u,f,g){if(!u)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,E),u.apply(f,O)}}return function(){return u.apply(f,arguments)}}function p(u,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function m(u,f){var g=Array.prototype.slice.call(arguments,1);return function(){var E=g.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function y(u,f){function g(){}g.prototype=f.prototype,u.aa=f.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(E,O,L){for(var z=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)z[ye-2]=arguments[ye];return f.prototype[O].apply(E,z)}}function w(u){const f=u.length;if(0<f){const g=Array(f);for(let E=0;E<f;E++)g[E]=u[E];return g}return[]}function I(u,f){for(let g=1;g<arguments.length;g++){const E=arguments[g];if(l(E)){const O=u.length||0,L=E.length||0;u.length=O+L;for(let z=0;z<L;z++)u[O+z]=E[z]}else u.push(E)}}class _{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function T(u){return/^[\s\xa0]*$/.test(u)}function S(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function R(u){return R[" "](u),u}R[" "]=function(){};var N=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function M(u,f,g){for(const E in u)f.call(g,u[E],E,u)}function x(u,f){for(const g in u)f.call(void 0,u[g],g,u)}function v(u){const f={};for(const g in u)f[g]=u[g];return f}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,f){let g,E;for(let O=1;O<arguments.length;O++){E=arguments[O];for(g in E)u[g]=E[g];for(let L=0;L<b.length;L++)g=b[L],Object.prototype.hasOwnProperty.call(E,g)&&(u[g]=E[g])}}function C(u){var f=1;u=u.split(":");const g=[];for(;0<f&&u.length;)g.push(u.shift()),f--;return u.length&&g.push(u.join(":")),g}function D(u){a.setTimeout(()=>{throw u},0)}function A(){var u=K;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class we{constructor(){this.h=this.g=null}add(f,g){const E=oe.get();E.set(f,g),this.h?this.h.next=E:this.g=E,this.h=E}}var oe=new _(()=>new Se,u=>u.reset());class Se{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Ce,B=!1,K=new we,G=()=>{const u=a.Promise.resolve(void 0);Ce=()=>{u.then(pe)}};var pe=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(g){D(g)}var f=oe;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}B=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var Ye=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return u}();function yt(u,f){if(me.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(N){e:{try{R(f.nodeName);var O=!0;break e}catch{}O=!1}O||(f=null)}}else g=="mouseover"?f=u.fromElement:g=="mouseout"&&(f=u.toElement);this.relatedTarget=f,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Xe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&yt.aa.h.call(this)}}y(yt,me);var Xe={2:"touch",3:"pen",4:"mouse"};yt.prototype.h=function(){yt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var vn="closure_listenable_"+(1e6*Math.random()|0),fb=0;function pb(u,f,g,E,O){this.listener=u,this.proxy=null,this.src=f,this.type=g,this.capture=!!E,this.ha=O,this.key=++fb,this.da=this.fa=!1}function Sl(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function bl(u){this.src=u,this.g={},this.h=0}bl.prototype.add=function(u,f,g,E,O){var L=u.toString();u=this.g[L],u||(u=this.g[L]=[],this.h++);var z=Zh(u,f,E,O);return-1<z?(f=u[z],g||(f.fa=!1)):(f=new pb(f,this.src,L,!!E,O),f.fa=g,u.push(f)),f};function Jh(u,f){var g=f.type;if(g in u.g){var E=u.g[g],O=Array.prototype.indexOf.call(E,f,void 0),L;(L=0<=O)&&Array.prototype.splice.call(E,O,1),L&&(Sl(f),u.g[g].length==0&&(delete u.g[g],u.h--))}}function Zh(u,f,g,E){for(var O=0;O<u.length;++O){var L=u[O];if(!L.da&&L.listener==f&&L.capture==!!g&&L.ha==E)return O}return-1}var ed="closure_lm_"+(1e6*Math.random()|0),td={};function my(u,f,g,E,O){if(E&&E.once)return _y(u,f,g,E,O);if(Array.isArray(f)){for(var L=0;L<f.length;L++)my(u,f[L],g,E,O);return null}return g=sd(g),u&&u[vn]?u.K(f,g,c(E)?!!E.capture:!!E,O):yy(u,f,g,!1,E,O)}function yy(u,f,g,E,O,L){if(!f)throw Error("Invalid event type");var z=c(O)?!!O.capture:!!O,ye=rd(u);if(ye||(u[ed]=ye=new bl(u)),g=ye.add(f,g,E,z,L),g.proxy)return g;if(E=gb(),g.proxy=E,E.src=u,E.listener=g,u.addEventListener)Ye||(O=z),O===void 0&&(O=!1),u.addEventListener(f.toString(),E,O);else if(u.attachEvent)u.attachEvent(wy(f.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return g}function gb(){function u(g){return f.call(u.src,u.listener,g)}const f=mb;return u}function _y(u,f,g,E,O){if(Array.isArray(f)){for(var L=0;L<f.length;L++)_y(u,f[L],g,E,O);return null}return g=sd(g),u&&u[vn]?u.L(f,g,c(E)?!!E.capture:!!E,O):yy(u,f,g,!0,E,O)}function vy(u,f,g,E,O){if(Array.isArray(f))for(var L=0;L<f.length;L++)vy(u,f[L],g,E,O);else E=c(E)?!!E.capture:!!E,g=sd(g),u&&u[vn]?(u=u.i,f=String(f).toString(),f in u.g&&(L=u.g[f],g=Zh(L,g,E,O),-1<g&&(Sl(L[g]),Array.prototype.splice.call(L,g,1),L.length==0&&(delete u.g[f],u.h--)))):u&&(u=rd(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Zh(f,g,E,O)),(g=-1<u?f[u]:null)&&nd(g))}function nd(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[vn])Jh(f.i,u);else{var g=u.type,E=u.proxy;f.removeEventListener?f.removeEventListener(g,E,u.capture):f.detachEvent?f.detachEvent(wy(g),E):f.addListener&&f.removeListener&&f.removeListener(E),(g=rd(f))?(Jh(g,u),g.h==0&&(g.src=null,f[ed]=null)):Sl(u)}}}function wy(u){return u in td?td[u]:td[u]="on"+u}function mb(u,f){if(u.da)u=!0;else{f=new yt(f,this);var g=u.listener,E=u.ha||u.src;u.fa&&nd(u),u=g.call(E,f)}return u}function rd(u){return u=u[ed],u instanceof bl?u:null}var id="__closure_events_fn_"+(1e9*Math.random()>>>0);function sd(u){return typeof u=="function"?u:(u[id]||(u[id]=function(f){return u.handleEvent(f)}),u[id])}function ot(){re.call(this),this.i=new bl(this),this.M=this,this.F=null}y(ot,re),ot.prototype[vn]=!0,ot.prototype.removeEventListener=function(u,f,g,E){vy(this,u,f,g,E)};function _t(u,f){var g,E=u.F;if(E)for(g=[];E;E=E.F)g.push(E);if(u=u.M,E=f.type||f,typeof f=="string")f=new me(f,u);else if(f instanceof me)f.target=f.target||u;else{var O=f;f=new me(E,u),k(f,O)}if(O=!0,g)for(var L=g.length-1;0<=L;L--){var z=f.g=g[L];O=kl(z,E,!0,f)&&O}if(z=f.g=u,O=kl(z,E,!0,f)&&O,O=kl(z,E,!1,f)&&O,g)for(L=0;L<g.length;L++)z=f.g=g[L],O=kl(z,E,!1,f)&&O}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var g=u.g[f],E=0;E<g.length;E++)Sl(g[E]);delete u.g[f],u.h--}}this.F=null},ot.prototype.K=function(u,f,g,E){return this.i.add(String(u),f,!1,g,E)},ot.prototype.L=function(u,f,g,E){return this.i.add(String(u),f,!0,g,E)};function kl(u,f,g,E){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var O=!0,L=0;L<f.length;++L){var z=f[L];if(z&&!z.da&&z.capture==g){var ye=z.listener,Je=z.ha||z.src;z.fa&&Jh(u.i,z),O=ye.call(Je,E)!==!1&&O}}return O&&!E.defaultPrevented}function Ey(u,f,g){if(typeof u=="function")g&&(u=p(u,g));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function Ty(u){u.g=Ey(()=>{u.g=null,u.i&&(u.i=!1,Ty(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class yb extends re{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Ty(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _o(u){re.call(this),this.h=u,this.g={}}y(_o,re);var Iy=[];function xy(u){M(u.g,function(f,g){this.g.hasOwnProperty(g)&&nd(f)},u),u.g={}}_o.prototype.N=function(){_o.aa.N.call(this),xy(this)},_o.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var od=a.JSON.stringify,_b=a.JSON.parse,vb=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function ad(){}ad.prototype.h=null;function Sy(u){return u.h||(u.h=u.i())}function by(){}var vo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ld(){me.call(this,"d")}y(ld,me);function cd(){me.call(this,"c")}y(cd,me);var ci={},ky=null;function Al(){return ky=ky||new ot}ci.La="serverreachability";function Ay(u){me.call(this,ci.La,u)}y(Ay,me);function wo(u){const f=Al();_t(f,new Ay(f))}ci.STAT_EVENT="statevent";function Py(u,f){me.call(this,ci.STAT_EVENT,u),this.stat=f}y(Py,me);function vt(u){const f=Al();_t(f,new Py(f,u))}ci.Ma="timingevent";function Cy(u,f){me.call(this,ci.Ma,u),this.size=f}y(Cy,me);function Eo(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function To(){this.g=!0}To.prototype.xa=function(){this.g=!1};function wb(u,f,g,E,O,L){u.info(function(){if(u.g)if(L)for(var z="",ye=L.split("&"),Je=0;Je<ye.length;Je++){var ae=ye[Je].split("=");if(1<ae.length){var at=ae[0];ae=ae[1];var lt=at.split("_");z=2<=lt.length&&lt[1]=="type"?z+(at+"="+ae+"&"):z+(at+"=redacted&")}}else z=null;else z=L;return"XMLHTTP REQ ("+E+") [attempt "+O+"]: "+f+`
`+g+`
`+z})}function Eb(u,f,g,E,O,L,z){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+O+"]: "+f+`
`+g+`
`+L+" "+z})}function is(u,f,g,E){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+Ib(u,g)+(E?" "+E:"")})}function Tb(u,f){u.info(function(){return"TIMEOUT: "+f})}To.prototype.info=function(){};function Ib(u,f){if(!u.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var E=g[u];if(!(2>E.length)){var O=E[1];if(Array.isArray(O)&&!(1>O.length)){var L=O[0];if(L!="noop"&&L!="stop"&&L!="close")for(var z=1;z<O.length;z++)O[z]=""}}}}return od(g)}catch{return f}}var Pl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ry={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ud;function Cl(){}y(Cl,ad),Cl.prototype.g=function(){return new XMLHttpRequest},Cl.prototype.i=function(){return{}},ud=new Cl;function lr(u,f,g,E){this.j=u,this.i=f,this.l=g,this.R=E||1,this.U=new _o(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Dy}function Dy(){this.i=null,this.g="",this.h=!1}var Ny={},hd={};function dd(u,f,g){u.L=1,u.v=Ol(Nn(f)),u.m=g,u.P=!0,Oy(u,null)}function Oy(u,f){u.F=Date.now(),Rl(u),u.A=Nn(u.v);var g=u.A,E=u.R;Array.isArray(E)||(E=[String(E)]),Gy(g.i,"t",E),u.C=0,g=u.j.J,u.h=new Dy,u.g=d_(u.j,g?f:null,!u.m),0<u.O&&(u.M=new yb(p(u.Y,u,u.g),u.O)),f=u.U,g=u.g,E=u.ca;var O="readystatechange";Array.isArray(O)||(O&&(Iy[0]=O.toString()),O=Iy);for(var L=0;L<O.length;L++){var z=my(g,O[L],E||f.handleEvent,!1,f.h||f);if(!z)break;f.g[z.key]=z}f=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),wo(),wb(u.i,u.u,u.A,u.l,u.R,u.m)}lr.prototype.ca=function(u){u=u.target;const f=this.M;f&&On(u)==3?f.j():this.Y(u)},lr.prototype.Y=function(u){try{if(u==this.g)e:{const lt=On(this.g);var f=this.g.Ba();const as=this.g.Z();if(!(3>lt)&&(lt!=3||this.g&&(this.h.h||this.g.oa()||t_(this.g)))){this.J||lt!=4||f==7||(f==8||0>=as?wo(3):wo(2)),fd(this);var g=this.g.Z();this.X=g;t:if(My(this)){var E=t_(this.g);u="";var O=E.length,L=On(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ui(this),Io(this);var z="";break t}this.h.i=new a.TextDecoder}for(f=0;f<O;f++)this.h.h=!0,u+=this.h.i.decode(E[f],{stream:!(L&&f==O-1)});E.length=0,this.h.g+=u,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=g==200,Eb(this.i,this.u,this.A,this.l,this.R,lt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var ye,Je=this.g;if((ye=Je.g?Je.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(ye)){var ae=ye;break t}}ae=null}if(g=ae)is(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pd(this,g);else{this.o=!1,this.s=3,vt(12),ui(this),Io(this);break e}}if(this.P){g=!0;let sn;for(;!this.J&&this.C<z.length;)if(sn=xb(this,z),sn==hd){lt==4&&(this.s=4,vt(14),g=!1),is(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==Ny){this.s=4,vt(15),is(this.i,this.l,z,"[Invalid Chunk]"),g=!1;break}else is(this.i,this.l,sn,null),pd(this,sn);if(My(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),lt!=4||z.length!=0||this.h.h||(this.s=1,vt(16),g=!1),this.o=this.o&&g,!g)is(this.i,this.l,z,"[Invalid Chunked Response]"),ui(this),Io(this);else if(0<z.length&&!this.W){this.W=!0;var at=this.j;at.g==this&&at.ba&&!at.M&&(at.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),wd(at),at.M=!0,vt(11))}}else is(this.i,this.l,z,null),pd(this,z);lt==4&&ui(this),this.o&&!this.J&&(lt==4?l_(this.j,this):(this.o=!1,Rl(this)))}else zb(this.g),g==400&&0<z.indexOf("Unknown SID")?(this.s=3,vt(12)):(this.s=0,vt(13)),ui(this),Io(this)}}}catch{}finally{}};function My(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function xb(u,f){var g=u.C,E=f.indexOf(`
`,g);return E==-1?hd:(g=Number(f.substring(g,E)),isNaN(g)?Ny:(E+=1,E+g>f.length?hd:(f=f.slice(E,E+g),u.C=E+g,f)))}lr.prototype.cancel=function(){this.J=!0,ui(this)};function Rl(u){u.S=Date.now()+u.I,Ly(u,u.I)}function Ly(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Eo(p(u.ba,u),f)}function fd(u){u.B&&(a.clearTimeout(u.B),u.B=null)}lr.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Tb(this.i,this.A),this.L!=2&&(wo(),vt(17)),ui(this),this.s=2,Io(this)):Ly(this,this.S-u)};function Io(u){u.j.G==0||u.J||l_(u.j,u)}function ui(u){fd(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,xy(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function pd(u,f){try{var g=u.j;if(g.G!=0&&(g.g==u||gd(g.h,u))){if(!u.K&&gd(g.h,u)&&g.G==3){try{var E=g.Da.g.parse(f)}catch{E=null}if(Array.isArray(E)&&E.length==3){var O=E;if(O[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)Ul(g),Fl(g);else break e;vd(g),vt(18)}}else g.za=O[1],0<g.za-g.T&&37500>O[2]&&g.F&&g.v==0&&!g.C&&(g.C=Eo(p(g.Za,g),6e3));if(1>=jy(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else di(g,11)}else if((u.K||g.g==u)&&Ul(g),!T(f))for(O=g.Da.g.parse(f),f=0;f<O.length;f++){let ae=O[f];if(g.T=ae[0],ae=ae[1],g.G==2)if(ae[0]=="c"){g.K=ae[1],g.ia=ae[2];const at=ae[3];at!=null&&(g.la=at,g.j.info("VER="+g.la));const lt=ae[4];lt!=null&&(g.Aa=lt,g.j.info("SVER="+g.Aa));const as=ae[5];as!=null&&typeof as=="number"&&0<as&&(E=1.5*as,g.L=E,g.j.info("backChannelRequestTimeoutMs_="+E)),E=g;const sn=u.g;if(sn){const Bl=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bl){var L=E.h;L.g||Bl.indexOf("spdy")==-1&&Bl.indexOf("quic")==-1&&Bl.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(md(L,L.h),L.h=null))}if(E.D){const Ed=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ed&&(E.ya=Ed,Ee(E.I,E.D,Ed))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),E=g;var z=u;if(E.qa=h_(E,E.J?E.ia:null,E.W),z.K){Uy(E.h,z);var ye=z,Je=E.L;Je&&(ye.I=Je),ye.B&&(fd(ye),Rl(ye)),E.g=z}else o_(E);0<g.i.length&&jl(g)}else ae[0]!="stop"&&ae[0]!="close"||di(g,7);else g.G==3&&(ae[0]=="stop"||ae[0]=="close"?ae[0]=="stop"?di(g,7):_d(g):ae[0]!="noop"&&g.l&&g.l.ta(ae),g.v=0)}}wo(4)}catch{}}var Sb=class{constructor(u,f){this.g=u,this.map=f}};function Vy(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Fy(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function jy(u){return u.h?1:u.g?u.g.size:0}function gd(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function md(u,f){u.g?u.g.add(f):u.h=f}function Uy(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}Vy.prototype.cancel=function(){if(this.i=zy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function zy(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const g of u.g.values())f=f.concat(g.D);return f}return w(u.i)}function bb(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],g=u.length,E=0;E<g;E++)f.push(u[E]);return f}f=[],g=0;for(E in u)f[g++]=u[E];return f}function kb(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var g=0;g<u;g++)f.push(g);return f}f=[],g=0;for(const E in u)f[g++]=E;return f}}}function By(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var g=kb(u),E=bb(u),O=E.length,L=0;L<O;L++)f.call(void 0,E[L],g&&g[L],u)}var $y=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ab(u,f){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var E=u[g].indexOf("="),O=null;if(0<=E){var L=u[g].substring(0,E);O=u[g].substring(E+1)}else L=u[g];f(L,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function hi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof hi){this.h=u.h,Dl(this,u.j),this.o=u.o,this.g=u.g,Nl(this,u.s),this.l=u.l;var f=u.i,g=new bo;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Wy(this,g),this.m=u.m}else u&&(f=String(u).match($y))?(this.h=!1,Dl(this,f[1]||"",!0),this.o=xo(f[2]||""),this.g=xo(f[3]||"",!0),Nl(this,f[4]),this.l=xo(f[5]||"",!0),Wy(this,f[6]||"",!0),this.m=xo(f[7]||"")):(this.h=!1,this.i=new bo(null,this.h))}hi.prototype.toString=function(){var u=[],f=this.j;f&&u.push(So(f,Hy,!0),":");var g=this.g;return(g||f=="file")&&(u.push("//"),(f=this.o)&&u.push(So(f,Hy,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(So(g,g.charAt(0)=="/"?Rb:Cb,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",So(g,Nb)),u.join("")};function Nn(u){return new hi(u)}function Dl(u,f,g){u.j=g?xo(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Nl(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function Wy(u,f,g){f instanceof bo?(u.i=f,Ob(u.i,u.h)):(g||(f=So(f,Db)),u.i=new bo(f,u.h))}function Ee(u,f,g){u.i.set(f,g)}function Ol(u){return Ee(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function xo(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function So(u,f,g){return typeof u=="string"?(u=encodeURI(u).replace(f,Pb),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Pb(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Hy=/[#\/\?@]/g,Cb=/[#\?:]/g,Rb=/[#\?]/g,Db=/[#\?@]/g,Nb=/#/g;function bo(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function cr(u){u.g||(u.g=new Map,u.h=0,u.i&&Ab(u.i,function(f,g){u.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=bo.prototype,t.add=function(u,f){cr(this),this.i=null,u=ss(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(f),this.h+=1,this};function qy(u,f){cr(u),f=ss(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Ky(u,f){return cr(u),f=ss(u,f),u.g.has(f)}t.forEach=function(u,f){cr(this),this.g.forEach(function(g,E){g.forEach(function(O){u.call(f,O,E,this)},this)},this)},t.na=function(){cr(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let E=0;E<f.length;E++){const O=u[E];for(let L=0;L<O.length;L++)g.push(f[E])}return g},t.V=function(u){cr(this);let f=[];if(typeof u=="string")Ky(this,u)&&(f=f.concat(this.g.get(ss(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)f=f.concat(u[g])}return f},t.set=function(u,f){return cr(this),this.i=null,u=ss(this,u),Ky(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function Gy(u,f,g){qy(u,f),0<g.length&&(u.i=null,u.g.set(ss(u,f),w(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var E=f[g];const L=encodeURIComponent(String(E)),z=this.V(E);for(E=0;E<z.length;E++){var O=L;z[E]!==""&&(O+="="+encodeURIComponent(String(z[E]))),u.push(O)}}return this.i=u.join("&")};function ss(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function Ob(u,f){f&&!u.j&&(cr(u),u.i=null,u.g.forEach(function(g,E){var O=E.toLowerCase();E!=O&&(qy(this,E),Gy(this,O,g))},u)),u.j=f}function Mb(u,f){const g=new To;if(a.Image){const E=new Image;E.onload=m(ur,g,"TestLoadImage: loaded",!0,f,E),E.onerror=m(ur,g,"TestLoadImage: error",!1,f,E),E.onabort=m(ur,g,"TestLoadImage: abort",!1,f,E),E.ontimeout=m(ur,g,"TestLoadImage: timeout",!1,f,E),a.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else f(!1)}function Lb(u,f){const g=new To,E=new AbortController,O=setTimeout(()=>{E.abort(),ur(g,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:E.signal}).then(L=>{clearTimeout(O),L.ok?ur(g,"TestPingServer: ok",!0,f):ur(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),ur(g,"TestPingServer: error",!1,f)})}function ur(u,f,g,E,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),E(g)}catch{}}function Vb(){this.g=new vb}function Fb(u,f,g){const E=g||"";try{By(u,function(O,L){let z=O;c(O)&&(z=od(O)),f.push(E+L+"="+encodeURIComponent(z))})}catch(O){throw f.push(E+"type="+encodeURIComponent("_badmap")),O}}function Ml(u){this.l=u.Ub||null,this.j=u.eb||!1}y(Ml,ad),Ml.prototype.g=function(){return new Ll(this.l,this.j)},Ml.prototype.i=function(u){return function(){return u}}({});function Ll(u,f){ot.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Ll,ot),t=Ll.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Ao(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ko(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ao(this)),this.g&&(this.readyState=3,Ao(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qy(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Qy(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?ko(this):Ao(this),this.readyState==3&&Qy(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,ko(this))},t.Qa=function(u){this.g&&(this.response=u,ko(this))},t.ga=function(){this.g&&ko(this)};function ko(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ao(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=f.next();return u.join(`\r
`)};function Ao(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ll.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Yy(u){let f="";return M(u,function(g,E){f+=E,f+=":",f+=g,f+=`\r
`}),f}function yd(u,f,g){e:{for(E in g){var E=!1;break e}E=!0}E||(g=Yy(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):Ee(u,f,g))}function Re(u){ot.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Re,ot);var jb=/^https?$/i,Ub=["POST","PUT"];t=Re.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,g,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ud.g(),this.v=this.o?Sy(this.o):Sy(ud),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(L){Xy(this,L);return}if(u=g||"",g=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var O in E)g.set(O,E[O]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const L of E.keys())g.set(L,E.get(L));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(g.keys()).find(L=>L.toLowerCase()=="content-type"),O=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ub,f,void 0))||E||O||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,z]of g)this.g.setRequestHeader(L,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{e_(this),this.u=!0,this.g.send(u),this.u=!1}catch(L){Xy(this,L)}};function Xy(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,Jy(u),Vl(u)}function Jy(u){u.A||(u.A=!0,_t(u,"complete"),_t(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,_t(this,"complete"),_t(this,"abort"),Vl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vl(this,!0)),Re.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Zy(this):this.bb())},t.bb=function(){Zy(this)};function Zy(u){if(u.h&&typeof o<"u"&&(!u.v[1]||On(u)!=4||u.Z()!=2)){if(u.u&&On(u)==4)Ey(u.Ea,0,u);else if(_t(u,"readystatechange"),On(u)==4){u.h=!1;try{const z=u.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var E;if(E=z===0){var O=String(u.D).match($y)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),E=!jb.test(O?O.toLowerCase():"")}g=E}if(g)_t(u,"complete"),_t(u,"success");else{u.m=6;try{var L=2<On(u)?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.Z()+"]",Jy(u)}}finally{Vl(u)}}}}function Vl(u,f){if(u.g){e_(u);const g=u.g,E=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||_t(u,"ready");try{g.onreadystatechange=E}catch{}}}function e_(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function On(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<On(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),_b(f)}};function t_(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function zb(u){const f={};u=(u.g&&2<=On(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(T(u[E]))continue;var g=C(u[E]);const O=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const L=f[O]||[];f[O]=L,L.push(g)}x(f,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Po(u,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||f}function n_(u){this.Aa=0,this.i=[],this.j=new To,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Po("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Po("baseRetryDelayMs",5e3,u),this.cb=Po("retryDelaySeedMs",1e4,u),this.Wa=Po("forwardChannelMaxRetries",2,u),this.wa=Po("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Vy(u&&u.concurrentRequestLimit),this.Da=new Vb,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=n_.prototype,t.la=8,t.G=1,t.connect=function(u,f,g,E){vt(0),this.W=u,this.H=f||{},g&&E!==void 0&&(this.H.OSID=g,this.H.OAID=E),this.F=this.X,this.I=h_(this,null,this.W),jl(this)};function _d(u){if(r_(u),u.G==3){var f=u.U++,g=Nn(u.I);if(Ee(g,"SID",u.K),Ee(g,"RID",f),Ee(g,"TYPE","terminate"),Co(u,g),f=new lr(u,u.j,f),f.L=2,f.v=Ol(Nn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=d_(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Rl(f)}u_(u)}function Fl(u){u.g&&(wd(u),u.g.cancel(),u.g=null)}function r_(u){Fl(u),u.u&&(a.clearTimeout(u.u),u.u=null),Ul(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function jl(u){if(!Fy(u.h)&&!u.s){u.s=!0;var f=u.Ga;Ce||G(),B||(Ce(),B=!0),K.add(f,u),u.B=0}}function Bb(u,f){return jy(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Eo(p(u.Ga,u,f),c_(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const O=new lr(this,this.j,u);let L=this.o;if(this.S&&(L?(L=v(L),k(L,this.S)):L=this.S),this.m!==null||this.O||(O.H=L,L=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var E=this.i[g];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(f+=E,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=s_(this,O,f),g=Nn(this.I),Ee(g,"RID",u),Ee(g,"CVER",22),this.D&&Ee(g,"X-HTTP-Session-Id",this.D),Co(this,g),L&&(this.O?f="headers="+encodeURIComponent(String(Yy(L)))+"&"+f:this.m&&yd(g,this.m,L)),md(this.h,O),this.Ua&&Ee(g,"TYPE","init"),this.P?(Ee(g,"$req",f),Ee(g,"SID","null"),O.T=!0,dd(O,g,null)):dd(O,g,f),this.G=2}}else this.G==3&&(u?i_(this,u):this.i.length==0||Fy(this.h)||i_(this))};function i_(u,f){var g;f?g=f.l:g=u.U++;const E=Nn(u.I);Ee(E,"SID",u.K),Ee(E,"RID",g),Ee(E,"AID",u.T),Co(u,E),u.m&&u.o&&yd(E,u.m,u.o),g=new lr(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),f&&(u.i=f.D.concat(u.i)),f=s_(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),md(u.h,g),dd(g,E,f)}function Co(u,f){u.H&&M(u.H,function(g,E){Ee(f,E,g)}),u.l&&By({},function(g,E){Ee(f,E,g)})}function s_(u,f,g){g=Math.min(u.i.length,g);var E=u.l?p(u.l.Na,u.l,u):null;e:{var O=u.i;let L=-1;for(;;){const z=["count="+g];L==-1?0<g?(L=O[0].g,z.push("ofs="+L)):L=0:z.push("ofs="+L);let ye=!0;for(let Je=0;Je<g;Je++){let ae=O[Je].g;const at=O[Je].map;if(ae-=L,0>ae)L=Math.max(0,O[Je].g-100),ye=!1;else try{Fb(at,z,"req"+ae+"_")}catch{E&&E(at)}}if(ye){E=z.join("&");break e}}}return u=u.i.splice(0,g),f.D=u,E}function o_(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;Ce||G(),B||(Ce(),B=!0),K.add(f,u),u.v=0}}function vd(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Eo(p(u.Fa,u),c_(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,a_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Eo(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vt(10),Fl(this),a_(this))};function wd(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function a_(u){u.g=new lr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=Nn(u.qa);Ee(f,"RID","rpc"),Ee(f,"SID",u.K),Ee(f,"AID",u.T),Ee(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ee(f,"TO",u.ja),Ee(f,"TYPE","xmlhttp"),Co(u,f),u.m&&u.o&&yd(f,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=Ol(Nn(f)),g.m=null,g.P=!0,Oy(g,u)}t.Za=function(){this.C!=null&&(this.C=null,Fl(this),vd(this),vt(19))};function Ul(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function l_(u,f){var g=null;if(u.g==f){Ul(u),wd(u),u.g=null;var E=2}else if(gd(u.h,f))g=f.D,Uy(u.h,f),E=1;else return;if(u.G!=0){if(f.o)if(E==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var O=u.B;E=Al(),_t(E,new Cy(E,g)),jl(u)}else o_(u);else if(O=f.s,O==3||O==0&&0<f.X||!(E==1&&Bb(u,f)||E==2&&vd(u)))switch(g&&0<g.length&&(f=u.h,f.i=f.i.concat(g)),O){case 1:di(u,5);break;case 4:di(u,10);break;case 3:di(u,6);break;default:di(u,2)}}}function c_(u,f){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*f}function di(u,f){if(u.j.info("Error code "+f),f==2){var g=p(u.fb,u),E=u.Xa;const O=!E;E=new hi(E||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Dl(E,"https"),Ol(E),O?Mb(E.toString(),g):Lb(E.toString(),g)}else vt(2);u.G=0,u.l&&u.l.sa(f),u_(u),r_(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function u_(u){if(u.G=0,u.ka=[],u.l){const f=zy(u.h);(f.length!=0||u.i.length!=0)&&(I(u.ka,f),I(u.ka,u.i),u.h.i.length=0,w(u.i),u.i.length=0),u.l.ra()}}function h_(u,f,g){var E=g instanceof hi?Nn(g):new hi(g);if(E.g!="")f&&(E.g=f+"."+E.g),Nl(E,E.s);else{var O=a.location;E=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;var L=new hi(null);E&&Dl(L,E),f&&(L.g=f),O&&Nl(L,O),g&&(L.l=g),E=L}return g=u.D,f=u.ya,g&&f&&Ee(E,g,f),Ee(E,"VER",u.la),Co(u,E),E}function d_(u,f,g){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Re(new Ml({eb:g})):new Re(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function f_(){}t=f_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function zl(){}zl.prototype.g=function(u,f){return new Ot(u,f)};function Ot(u,f){ot.call(this),this.g=new n_(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!T(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!T(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new os(this)}y(Ot,ot),Ot.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ot.prototype.close=function(){_d(this.g)},Ot.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=od(u),u=g);f.i.push(new Sb(f.Ya++,u)),f.G==3&&jl(f)},Ot.prototype.N=function(){this.g.l=null,delete this.j,_d(this.g),delete this.g,Ot.aa.N.call(this)};function p_(u){ld.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const g in f){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}y(p_,ld);function g_(){cd.call(this),this.status=1}y(g_,cd);function os(u){this.g=u}y(os,f_),os.prototype.ua=function(){_t(this.g,"a")},os.prototype.ta=function(u){_t(this.g,new p_(u))},os.prototype.sa=function(u){_t(this.g,new g_)},os.prototype.ra=function(){_t(this.g,"b")},zl.prototype.createWebChannel=zl.prototype.g,Ot.prototype.send=Ot.prototype.o,Ot.prototype.open=Ot.prototype.m,Ot.prototype.close=Ot.prototype.close,fI=function(){return new zl},dI=function(){return Al()},hI=ci,Ip={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pl.NO_ERROR=0,Pl.TIMEOUT=8,Pl.HTTP_ERROR=6,Wc=Pl,Ry.COMPLETE="complete",uI=Ry,by.EventType=vo,vo.OPEN="a",vo.CLOSE="b",vo.ERROR="c",vo.MESSAGE="d",ot.prototype.listen=ot.prototype.K,Qo=by,Re.prototype.listenOnce=Re.prototype.L,Re.prototype.getLastError=Re.prototype.Ka,Re.prototype.getLastErrorCode=Re.prototype.Ba,Re.prototype.getStatus=Re.prototype.Z,Re.prototype.getResponseJson=Re.prototype.Oa,Re.prototype.getResponseText=Re.prototype.oa,Re.prototype.send=Re.prototype.ea,Re.prototype.setWithCredentials=Re.prototype.Ha,cI=Re}).apply(typeof ac<"u"?ac:typeof self<"u"?self:typeof window<"u"?window:{});const K0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=new kh("@firebase/firestore");function jo(){return Ui.logLevel}function H(t,...e){if(Ui.logLevel<=ne.DEBUG){const n=e.map(rm);Ui.debug(`Firestore (${fo}): ${t}`,...n)}}function tr(t,...e){if(Ui.logLevel<=ne.ERROR){const n=e.map(rm);Ui.error(`Firestore (${fo}): ${t}`,...n)}}function qs(t,...e){if(Ui.logLevel<=ne.WARN){const n=e.map(rm);Ui.warn(`Firestore (${fo}): ${t}`,...n)}}function rm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t="Unexpected state"){const e=`FIRESTORE (${fo}) INTERNAL ASSERTION FAILED: `+t;throw tr(e),new Error(e)}function fe(t,e){t||X()}function Z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends _n{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class x2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dt.UNAUTHENTICATED))}shutdown(){}}class S2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class b2{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){fe(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Kr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Kr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Kr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(fe(typeof r.accessToken=="string"),new pI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string"),new dt(e)}}class k2{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class A2{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new k2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class P2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class C2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){fe(this.o===void 0);const r=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(fe(typeof n.token=="string"),this.R=n.token,new P2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=R2(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function le(t,e){return t<e?-1:t>e?1:0}function Ks(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new $(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new We(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.timestamp=e}static fromTimestamp(e){return new J(e)}static min(){return new J(new We(0,0))}static max(){return new J(new We(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(),r===void 0?r=e.length-n:r>e.length-n&&X(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Wa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Wa?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class _e extends Wa{construct(e,n,r){return new _e(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new _e(n)}static emptyPath(){return new _e([])}}const D2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tt extends Wa{construct(e,n,r){return new tt(e,n,r)}static isValidIdentifier(e){return D2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new tt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new $(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new $(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new $(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new $(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tt(n)}static emptyPath(){return new tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.path=e}static fromPath(e){return new q(_e.fromString(e))}static fromName(e){return new q(_e.fromString(e).popFirst(5))}static empty(){return new q(_e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return _e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new _e(e.slice()))}}function N2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=J.fromTimestamp(r===1e9?new We(n+1,0):new We(n,r));return new Jr(i,q.empty(),e)}function O2(t){return new Jr(t.readTime,t.key,-1)}class Jr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Jr(J.min(),q.empty(),-1)}static max(){return new Jr(J.max(),q.empty(),-1)}}function M2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class V2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fl(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==L2)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,r)=>{n(e)})}static reject(e){return new j((n,r)=>{r(e)})}static waitFor(e){return new j((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=j.resolve(!1);for(const r of e)n=n.next(i=>i?j.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new j((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new j((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function F2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function pl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}im.oe=-1;function Ah(t){return t==null}function Du(t){return t===0&&1/t==-1/0}function j2(t){return typeof t=="number"&&Number.isInteger(t)&&!Du(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function po(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function mI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e,n){this.comparator=e,this.root=n||et.EMPTY}insert(e,n){return new Pe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,et.BLACK,null,null))}remove(e){return new Pe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,et.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lc(this.root,e,this.comparator,!1)}getReverseIterator(){return new lc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lc(this.root,e,this.comparator,!0)}}class lc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class et{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??et.RED,this.left=i??et.EMPTY,this.right=s??et.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new et(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return et.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return et.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();const e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}}et.EMPTY=null,et.RED=!0,et.BLACK=!1;et.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,n,r,i,s){return this}insert(e,n,r){return new et(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.comparator=e,this.data=new Pe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Q0(this.data.getIterator())}getIteratorFrom(e){return new Q0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new rt(this.comparator);return n.data=e,n}}class Q0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.fields=e,e.sort(tt.comparator)}static empty(){return new dn([])}unionWith(e){let n=new rt(tt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new dn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ks(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new yI("Invalid base64 string: "+s):s}}(e);return new st(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new st(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}st.EMPTY_BYTE_STRING=new st("");const U2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zr(t){if(fe(!!t),typeof t=="string"){let e=0;const n=U2.exec(t);if(fe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Me(t.seconds),nanos:Me(t.nanos)}}function Me(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zi(t){return typeof t=="string"?st.fromBase64String(t):st.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function sm(t){const e=t.mapValue.fields.__previous_value__;return Ph(e)?sm(e):e}function Ha(t){const e=Zr(t.mapValue.fields.__local_write_time__.timestampValue);return new We(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class qa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new qa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof qa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Bi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ph(t)?4:$2(t)?9007199254740991:B2(t)?10:11:X()}function Dn(t,e){if(t===e)return!0;const n=Bi(t);if(n!==Bi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ha(t).isEqual(Ha(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Zr(i.timestampValue),a=Zr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return zi(i.bytesValue).isEqual(zi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Me(i.geoPointValue.latitude)===Me(s.geoPointValue.latitude)&&Me(i.geoPointValue.longitude)===Me(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Me(i.integerValue)===Me(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Me(i.doubleValue),a=Me(s.doubleValue);return o===a?Du(o)===Du(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ks(t.arrayValue.values||[],e.arrayValue.values||[],Dn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(G0(o)!==G0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Dn(o[l],a[l])))return!1;return!0}(t,e);default:return X()}}function Ka(t,e){return(t.values||[]).find(n=>Dn(n,e))!==void 0}function Gs(t,e){if(t===e)return 0;const n=Bi(t),r=Bi(e);if(n!==r)return le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return le(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Me(s.integerValue||s.doubleValue),l=Me(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Y0(t.timestampValue,e.timestampValue);case 4:return Y0(Ha(t),Ha(e));case 5:return le(t.stringValue,e.stringValue);case 6:return function(s,o){const a=zi(s),l=zi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=le(a[c],l[c]);if(h!==0)return h}return le(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=le(Me(s.latitude),Me(o.latitude));return a!==0?a:le(Me(s.longitude),Me(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return X0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const d=s.fields||{},p=o.fields||{},m=(a=d.value)===null||a===void 0?void 0:a.arrayValue,y=(l=p.value)===null||l===void 0?void 0:l.arrayValue,w=le(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((h=y==null?void 0:y.values)===null||h===void 0?void 0:h.length)||0);return w!==0?w:X0(m,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===cc.mapValue&&o===cc.mapValue)return 0;if(s===cc.mapValue)return 1;if(o===cc.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=le(l[d],h[d]);if(p!==0)return p;const m=Gs(a[l[d]],c[h[d]]);if(m!==0)return m}return le(l.length,h.length)}(t.mapValue,e.mapValue);default:throw X()}}function Y0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return le(t,e);const n=Zr(t),r=Zr(e),i=le(n.seconds,r.seconds);return i!==0?i:le(n.nanos,r.nanos)}function X0(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Gs(n[i],r[i]);if(s)return s}return le(n.length,r.length)}function Qs(t){return xp(t)}function xp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Zr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return zi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=xp(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${xp(n.fields[o])}`;return i+"}"}(t.mapValue):X()}function Nu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Sp(t){return!!t&&"integerValue"in t}function om(t){return!!t&&"arrayValue"in t}function J0(t){return!!t&&"nullValue"in t}function Z0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hc(t){return!!t&&"mapValue"in t}function B2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ha(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return po(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ha(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ha(t.arrayValue.values[n]);return e}return Object.assign({},t)}function $2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.value=e}static empty(){return new Qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Hc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ha(n)}setAll(e){let n=tt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=ha(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Hc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Dn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Hc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){po(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Qt(ha(this.value))}}function _I(t){const e=[];return po(t.fields,(n,r)=>{const i=new tt([n]);if(Hc(r)){const s=_I(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new pt(e,0,J.min(),J.min(),J.min(),Qt.empty(),0)}static newFoundDocument(e,n,r,i){return new pt(e,1,n,J.min(),r,i,0)}static newNoDocument(e,n){return new pt(e,2,n,J.min(),J.min(),Qt.empty(),0)}static newUnknownDocument(e,n){return new pt(e,3,n,J.min(),J.min(),Qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,n){this.position=e,this.inclusive=n}}function ev(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=q.comparator(q.fromName(o.referenceValue),n.key):r=Gs(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function tv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Dn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,n="asc"){this.field=e,this.dir=n}}function W2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{}class ze extends vI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new q2(e,n,r):n==="array-contains"?new Q2(e,r):n==="in"?new Y2(e,r):n==="not-in"?new X2(e,r):n==="array-contains-any"?new J2(e,r):new ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new K2(e,r):new G2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Gs(n,this.value)):n!==null&&Bi(this.value)===Bi(n)&&this.matchesComparison(Gs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yn extends vI{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new yn(e,n)}matches(e){return wI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function wI(t){return t.op==="and"}function EI(t){return H2(t)&&wI(t)}function H2(t){for(const e of t.filters)if(e instanceof yn)return!1;return!0}function bp(t){if(t instanceof ze)return t.field.canonicalString()+t.op.toString()+Qs(t.value);if(EI(t))return t.filters.map(e=>bp(e)).join(",");{const e=t.filters.map(n=>bp(n)).join(",");return`${t.op}(${e})`}}function TI(t,e){return t instanceof ze?function(r,i){return i instanceof ze&&r.op===i.op&&r.field.isEqual(i.field)&&Dn(r.value,i.value)}(t,e):t instanceof yn?function(r,i){return i instanceof yn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&TI(o,i.filters[a]),!0):!1}(t,e):void X()}function II(t){return t instanceof ze?function(n){return`${n.field.canonicalString()} ${n.op} ${Qs(n.value)}`}(t):t instanceof yn?function(n){return n.op.toString()+" {"+n.getFilters().map(II).join(" ,")+"}"}(t):"Filter"}class q2 extends ze{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class K2 extends ze{constructor(e,n){super(e,"in",n),this.keys=xI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class G2 extends ze{constructor(e,n){super(e,"not-in",n),this.keys=xI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function xI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}class Q2 extends ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return om(n)&&Ka(n.arrayValue,this.value)}}class Y2 extends ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ka(this.value.arrayValue,n)}}class X2 extends ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ka(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ka(this.value.arrayValue,n)}}class J2 extends ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!om(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ka(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function nv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Z2(t,e,n,r,i,s,o)}function am(t){const e=Z(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>bp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ah(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Qs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Qs(r)).join(",")),e.ue=n}return e.ue}function lm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!W2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!TI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!tv(t.startAt,e.startAt)&&tv(t.endAt,e.endAt)}function kp(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function eD(t,e,n,r,i,s,o,a){return new Zi(t,e,n,r,i,s,o,a)}function SI(t){return new Zi(t)}function rv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function cm(t){return t.collectionGroup!==null}function Ns(t){const e=Z(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new rt(tt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ga(s,r))}),n.has(tt.keyField().canonicalString())||e.ce.push(new Ga(tt.keyField(),r))}return e.ce}function kn(t){const e=Z(t);return e.le||(e.le=tD(e,Ns(t))),e.le}function tD(t,e){if(t.limitType==="F")return nv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Ga(i.field,s)});const n=t.endAt?new Ys(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ys(t.startAt.position,t.startAt.inclusive):null;return nv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ap(t,e){const n=t.filters.concat([e]);return new Zi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ou(t,e,n){return new Zi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ch(t,e){return lm(kn(t),kn(e))&&t.limitType===e.limitType}function bI(t){return`${am(kn(t))}|lt:${t.limitType}`}function hs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>II(i)).join(", ")}]`),Ah(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Qs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Qs(i)).join(",")),`Target(${r})`}(kn(t))}; limitType=${t.limitType})`}function Rh(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ns(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=ev(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Ns(r),i)||r.endAt&&!function(o,a,l){const c=ev(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Ns(r),i))}(t,e)}function nD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function kI(t){return(e,n)=>{let r=!1;for(const i of Ns(t)){const s=rD(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function rD(t,e,n){const r=t.field.isKeyField()?q.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Gs(l,c):X()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){po(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return mI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD=new Pe(q.comparator);function nr(){return iD}const AI=new Pe(q.comparator);function Yo(...t){let e=AI;for(const n of t)e=e.insert(n.key,n);return e}function PI(t){let e=AI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Si(){return da()}function CI(){return da()}function da(){return new go(t=>t.toString(),(t,e)=>t.isEqual(e))}const sD=new Pe(q.comparator),oD=new rt(q.comparator);function te(...t){let e=oD;for(const n of t)e=e.add(n);return e}const aD=new rt(le);function lD(){return aD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Du(e)?"-0":e}}function RI(t){return{integerValue:""+t}}function cD(t,e){return j2(e)?RI(e):um(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(){this._=void 0}}function uD(t,e,n){return t instanceof Mu?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Ph(s)&&(s=sm(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Qa?NI(t,e):t instanceof Ya?OI(t,e):function(i,s){const o=DI(i,s),a=iv(o)+iv(i.Pe);return Sp(o)&&Sp(i.Pe)?RI(a):um(i.serializer,a)}(t,e)}function hD(t,e,n){return t instanceof Qa?NI(t,e):t instanceof Ya?OI(t,e):n}function DI(t,e){return t instanceof Lu?function(r){return Sp(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Mu extends Dh{}class Qa extends Dh{constructor(e){super(),this.elements=e}}function NI(t,e){const n=MI(e);for(const r of t.elements)n.some(i=>Dn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ya extends Dh{constructor(e){super(),this.elements=e}}function OI(t,e){let n=MI(e);for(const r of t.elements)n=n.filter(i=>!Dn(i,r));return{arrayValue:{values:n}}}class Lu extends Dh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function iv(t){return Me(t.integerValue||t.doubleValue)}function MI(t){return om(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function dD(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Qa&&i instanceof Qa||r instanceof Ya&&i instanceof Ya?Ks(r.elements,i.elements,Dn):r instanceof Lu&&i instanceof Lu?Dn(r.Pe,i.Pe):r instanceof Mu&&i instanceof Mu}(t.transform,e.transform)}class fD{constructor(e,n){this.version=e,this.transformResults=n}}class Qn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Qn}static exists(e){return new Qn(void 0,e)}static updateTime(e){return new Qn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Nh{}function LI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new FI(t.key,Qn.none()):new gl(t.key,t.data,Qn.none());{const n=t.data,r=Qt.empty();let i=new rt(tt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new es(t.key,r,new dn(i.toArray()),Qn.none())}}function pD(t,e,n){t instanceof gl?function(i,s,o){const a=i.value.clone(),l=ov(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof es?function(i,s,o){if(!qc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=ov(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(VI(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function fa(t,e,n,r){return t instanceof gl?function(s,o,a,l){if(!qc(s.precondition,o))return a;const c=s.value.clone(),h=av(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof es?function(s,o,a,l){if(!qc(s.precondition,o))return a;const c=av(s.fieldTransforms,l,o),h=o.data;return h.setAll(VI(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return qc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function gD(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=DI(r.transform,i||null);s!=null&&(n===null&&(n=Qt.empty()),n.set(r.field,s))}return n||null}function sv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ks(r,i,(s,o)=>dD(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class gl extends Nh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class es extends Nh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function VI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ov(t,e,n){const r=new Map;fe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,hD(o,a,n[i]))}return r}function av(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,uD(s,o,e))}return r}class FI extends Nh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mD extends Nh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&pD(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=fa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=fa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=CI();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=LI(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),te())}isEqual(e){return this.batchId===e.batchId&&Ks(this.mutations,e.mutations,(n,r)=>sv(n,r))&&Ks(this.baseMutations,e.baseMutations,(n,r)=>sv(n,r))}}class hm{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){fe(e.mutations.length===r.length);let i=function(){return sD}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new hm(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je,ie;function wD(t){switch(t){default:return X();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function jI(t){if(t===void 0)return tr("GRPC error has no .code"),F.UNKNOWN;switch(t){case je.OK:return F.OK;case je.CANCELLED:return F.CANCELLED;case je.UNKNOWN:return F.UNKNOWN;case je.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case je.INTERNAL:return F.INTERNAL;case je.UNAVAILABLE:return F.UNAVAILABLE;case je.UNAUTHENTICATED:return F.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case je.NOT_FOUND:return F.NOT_FOUND;case je.ALREADY_EXISTS:return F.ALREADY_EXISTS;case je.PERMISSION_DENIED:return F.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case je.ABORTED:return F.ABORTED;case je.OUT_OF_RANGE:return F.OUT_OF_RANGE;case je.UNIMPLEMENTED:return F.UNIMPLEMENTED;case je.DATA_LOSS:return F.DATA_LOSS;default:return X()}}(ie=je||(je={}))[ie.OK=0]="OK",ie[ie.CANCELLED=1]="CANCELLED",ie[ie.UNKNOWN=2]="UNKNOWN",ie[ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ie[ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ie[ie.NOT_FOUND=5]="NOT_FOUND",ie[ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",ie[ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",ie[ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",ie[ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ie[ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ie[ie.ABORTED=10]="ABORTED",ie[ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",ie[ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",ie[ie.INTERNAL=13]="INTERNAL",ie[ie.UNAVAILABLE=14]="UNAVAILABLE",ie[ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD=new Di([4294967295,4294967295],0);function lv(t){const e=ED().encode(t),n=new lI;return n.update(e),new Uint8Array(n.digest())}function cv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Di([n,r],0),new Di([i,s],0)]}class dm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Xo(`Invalid padding: ${n}`);if(r<0)throw new Xo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Xo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Di.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Di.fromNumber(r)));return i.compare(TD)===1&&(i=new Di([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=lv(e),[r,i]=cv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new dm(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=lv(e),[r,i]=cv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Xo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ml.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Oh(J.min(),i,new Pe(le),nr(),te())}}class ml{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ml(r,n,te(),te(),te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class UI{constructor(e,n){this.targetId=e,this.me=n}}class zI{constructor(e,n,r=st.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class uv{constructor(){this.fe=0,this.ge=dv(),this.pe=st.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=te(),n=te(),r=te();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:X()}}),new ml(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=dv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ID{constructor(e){this.Le=e,this.Be=new Map,this.ke=nr(),this.qe=hv(),this.Qe=new Pe(le)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:X()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(kp(s))if(r===0){const o=new q(s.path);this.Ue(n,o,pt.newNoDocument(o,J.min()))}else fe(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=zi(r).toUint8Array()}catch(l){if(l instanceof yI)return qs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new dm(o,i,s)}catch(l){return qs(l instanceof Xo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&kp(a.target)){const l=new q(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,pt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=te();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Oh(e,n,this.Qe,this.ke,r);return this.ke=nr(),this.qe=hv(),this.Qe=new Pe(le),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new uv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new rt(le),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new uv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function hv(){return new Pe(q.comparator)}function dv(){return new Pe(q.comparator)}const xD=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),SD=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),bD=(()=>({and:"AND",or:"OR"}))();class kD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Pp(t,e){return t.useProto3Json||Ah(e)?e:{value:e}}function Vu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function AD(t,e){return Vu(t,e.toTimestamp())}function An(t){return fe(!!t),J.fromTimestamp(function(n){const r=Zr(n);return new We(r.seconds,r.nanos)}(t))}function fm(t,e){return Cp(t,e).canonicalString()}function Cp(t,e){const n=function(i){return new _e(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function $I(t){const e=_e.fromString(t);return fe(GI(e)),e}function Rp(t,e){return fm(t.databaseId,e.path)}function tf(t,e){const n=$I(e);if(n.get(1)!==t.databaseId.projectId)throw new $(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(HI(n))}function WI(t,e){return fm(t.databaseId,e)}function PD(t){const e=$I(t);return e.length===4?_e.emptyPath():HI(e)}function Dp(t){return new _e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function HI(t){return fe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function fv(t,e,n){return{name:Rp(t,e),fields:n.value.mapValue.fields}}function CD(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(fe(h===void 0||typeof h=="string"),st.fromBase64String(h||"")):(fe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),st.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?F.UNKNOWN:jI(c.code);return new $(h,c.message||"")}(o);n=new zI(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=tf(t,r.document.name),s=An(r.document.updateTime),o=r.document.createTime?An(r.document.createTime):J.min(),a=new Qt({mapValue:{fields:r.document.fields}}),l=pt.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Kc(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=tf(t,r.document),s=r.readTime?An(r.readTime):J.min(),o=pt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Kc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=tf(t,r.document),s=r.removedTargetIds||[];n=new Kc([],s,i,null)}else{if(!("filter"in e))return X();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new vD(i,s),a=r.targetId;n=new UI(a,o)}}return n}function RD(t,e){let n;if(e instanceof gl)n={update:fv(t,e.key,e.value)};else if(e instanceof FI)n={delete:Rp(t,e.key)};else if(e instanceof es)n={update:fv(t,e.key,e.data),updateMask:UD(e.fieldMask)};else{if(!(e instanceof mD))return X();n={verify:Rp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Mu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Qa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ya)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Lu)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw X()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:AD(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:X()}(t,e.precondition)),n}function DD(t,e){return t&&t.length>0?(fe(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?An(i.updateTime):An(s);return o.isEqual(J.min())&&(o=An(s)),new fD(o,i.transformResults||[])}(n,e))):[]}function ND(t,e){return{documents:[WI(t,e.path)]}}function OD(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=WI(t,i);const s=function(c){if(c.length!==0)return KI(yn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:ds(p.field),direction:VD(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Pp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function MD(t){let e=PD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){fe(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const p=qI(d);return p instanceof yn&&EI(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(y){return new Ga(fs(y.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,Ah(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(d){const p=!!d.before,m=d.values||[];return new Ys(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const p=!d.before,m=d.values||[];return new Ys(m,p)}(n.endAt)),eD(e,i,o,s,a,"F",l,c)}function LD(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function qI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=fs(n.unaryFilter.field);return ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=fs(n.unaryFilter.field);return ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=fs(n.unaryFilter.field);return ze.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=fs(n.unaryFilter.field);return ze.create(o,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(t):t.fieldFilter!==void 0?function(n){return ze.create(fs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return yn.create(n.compositeFilter.filters.map(r=>qI(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return X()}}(n.compositeFilter.op))}(t):X()}function VD(t){return xD[t]}function FD(t){return SD[t]}function jD(t){return bD[t]}function ds(t){return{fieldPath:t.canonicalString()}}function fs(t){return tt.fromServerFormat(t.fieldPath)}function KI(t){return t instanceof ze?function(n){if(n.op==="=="){if(Z0(n.value))return{unaryFilter:{field:ds(n.field),op:"IS_NAN"}};if(J0(n.value))return{unaryFilter:{field:ds(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Z0(n.value))return{unaryFilter:{field:ds(n.field),op:"IS_NOT_NAN"}};if(J0(n.value))return{unaryFilter:{field:ds(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ds(n.field),op:FD(n.op),value:n.value}}}(t):t instanceof yn?function(n){const r=n.getFilters().map(i=>KI(i));return r.length===1?r[0]:{compositeFilter:{op:jD(n.op),filters:r}}}(t):X()}function UD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function GI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,n,r,i,s=J.min(),o=J.min(),a=st.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Rr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e){this.ct=e}}function BD(t){const e=MD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ou(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(){this.un=new WD}addToCollectionParentIndex(e,n){return this.un.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(Jr.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(Jr.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class WD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new rt(_e.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new rt(_e.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Xs(0)}static kn(){return new Xs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(){this.changes=new go(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&fa(r.mutation,i,dn.empty(),We.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=te()){const i=Si();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Yo();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Si();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,te()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=nr();const o=da(),a=function(){return da()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof es)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),fa(h.mutation,c,h.mutation.getFieldMask(),We.now())):o.set(c.key,dn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new qD(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=da();let i=new Pe((o,a)=>o-a),s=te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||dn.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(i.get(a.batchId)||te()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=CI();h.forEach(p=>{if(!s.has(p)){const m=LI(n.get(p),r.get(p));m!==null&&d.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return j.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):cm(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):j.resolve(Si());let a=-1,l=s;return o.next(c=>j.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?j.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,te())).next(h=>({batchId:a,changes:PI(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let i=Yo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Yo();return this.indexManager.getCollectionParents(e,s).next(a=>j.forEach(a,l=>{const c=function(d,p){return new Zi(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,pt.newInvalidDocument(h)))});let a=Yo();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&fa(h.mutation,c,dn.empty(),We.now()),Rh(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return j.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:An(i.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:BD(i.bundledQuery),readTime:An(i.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(){this.overlays=new Pe(q.comparator),this.Ir=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Si();return j.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),j.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){const i=Si(),s=n.length+1,o=new q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return j.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Pe((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Si(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Si(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return j.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new _D(n,r));let s=this.Ir.get(n);s===void 0&&(s=te(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(){this.sessionToken=st.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(){this.Tr=new rt(He.Er),this.dr=new rt(He.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new He(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new He(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new q(new _e([])),r=new He(n,e),i=new He(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new q(new _e([])),r=new He(n,e),i=new He(n,e+1);let s=te();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new He(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class He{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return q.comparator(e.key,n.key)||le(e.wr,n.wr)}static Ar(e,n){return le(e.wr,n.wr)||q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new rt(He.Er)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new yD(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new He(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return j.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new He(n,0),i=new He(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),j.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new rt(le);return n.forEach(i=>{const s=new He(i,0),o=new He(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),j.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;q.isDocumentKey(s)||(s=s.child(""));const o=new He(new q(s),0);let a=new rt(le);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),j.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){fe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return j.forEach(n.mutations,i=>{const s=new He(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new He(n,0),i=this.br.firstAfterOrEqual(r);return j.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e){this.Mr=e,this.docs=function(){return new Pe(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():pt.newInvalidDocument(n))}getEntries(e,n){let r=nr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():pt.newInvalidDocument(i))}),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=nr();const o=n.path,a=new q(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||M2(O2(h),r)<=0||(i.has(h.key)||Rh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return j.resolve(s)}getAllFromCollectionGroup(e,n,r,i){X()}Or(e,n){return j.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ZD(this)}getSize(e){return j.resolve(this.size)}}class ZD extends HD{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),j.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e){this.persistence=e,this.Nr=new go(n=>am(n),lm),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Lr=0,this.Br=new pm,this.targetCount=0,this.kr=Xs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),j.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Xs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Kn(n),j.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),j.waitFor(s).next(()=>i)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),j.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),j.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,n){this.qr={},this.overlays={},this.Qr=new im(0),this.Kr=!1,this.Kr=!0,this.$r=new YD,this.referenceDelegate=e(this),this.Ur=new eN(this),this.indexManager=new $D,this.remoteDocumentCache=function(i){return new JD(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new zD(n),this.Gr=new GD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new QD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new XD(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const i=new nN(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return j.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class nN extends V2{constructor(e){super(),this.currentSequenceNumber=e}}class gm{constructor(e){this.persistence=e,this.Jr=new pm,this.Yr=null}static Zr(e){return new gm(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),j.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.Xr,r=>{const i=q.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,J.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return j.or([()=>j.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=te(),i=te();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new mm(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return sR()?8:F2(mt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new rN;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(jo()<=ne.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",hs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),j.resolve()):(jo()<=ne.DEBUG&&H("QueryEngine","Query:",hs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(jo()<=ne.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",hs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kn(n))):j.resolve())}Yi(e,n){if(rv(n))return j.resolve(null);let r=kn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Ou(n,null,"F"),r=kn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=te(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Ou(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return rv(n)||i.isEqual(J.min())?j.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?j.resolve(null):(jo()<=ne.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),hs(n)),this.rs(e,o,n,N2(i,-1)).next(a=>a))})}ts(e,n){let r=new rt(kI(e));return n.forEach((i,s)=>{Rh(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return jo()<=ne.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",hs(n)),this.Ji.getDocumentsMatchingQuery(e,n,Jr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Pe(le),this._s=new go(s=>am(s),lm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KD(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function oN(t,e,n,r){return new sN(t,e,n,r)}async function QI(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=te();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function aN(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,p=d.keys();let m=j.resolve();return p.forEach(y=>{m=m.next(()=>h.getEntry(l,y)).next(w=>{const I=c.docVersions.get(y);fe(I!==null),w.version.compareTo(I)<0&&(d.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),h.addEntry(w)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=te();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function YI(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function lN(t,e){const n=Z(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const p=i.get(d);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(st.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,r)),i=i.insert(d,m),function(w,I,_){return w.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,m,h)&&a.push(n.Ur.updateTargetData(s,m))});let l=nr(),c=te();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(cN(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(J.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return j.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function cN(t,e,n){let r=te(),i=te();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=nr();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(J.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):H("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function uN(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function hN(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,j.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Rr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Np(t,e,n){const r=Z(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!pl(o))throw o;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function pv(t,e,n){const r=Z(t);let i=J.min(),s=te();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=Z(l),p=d._s.get(h);return p!==void 0?j.resolve(d.os.get(p)):d.Ur.getTargetData(c,h)}(r,o,kn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:J.min(),n?s:te())).next(a=>(dN(r,nD(e),a),{documents:a,Ts:s})))}function dN(t,e,n){let r=t.us.get(e)||J.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class gv{constructor(){this.activeTargetIds=lD()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fN{constructor(){this.so=new gv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new gv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uc=null;function nf(){return uc===null?uc=function(){return 268435456+Math.round(2147483648*Math.random())}():uc++,"0x"+uc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht="WebChannelConnection";class yN extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=nf(),l=this.xo(n,r.toUriEncodedString());H("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(h=>(H("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw qs("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=gN[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=nf();return new Promise((o,a)=>{const l=new cI;l.setWithCredentials(!0),l.listenOnce(uI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Wc.NO_ERROR:const h=l.getResponseJson();H(ht,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Wc.TIMEOUT:H(ht,`RPC '${e}' ${s} timed out`),a(new $(F.DEADLINE_EXCEEDED,"Request time out"));break;case Wc.HTTP_ERROR:const d=l.getStatus();if(H(ht,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const y=function(I){const _=I.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(_)>=0?_:F.UNKNOWN}(m.status);a(new $(y,m.message))}else a(new $(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new $(F.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{H(ht,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);H(ht,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=nf(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=fI(),a=dI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");H(ht,`Creating RPC '${e}' stream ${i}: ${h}`,l);const d=o.createWebChannel(h,l);let p=!1,m=!1;const y=new mN({Io:I=>{m?H(ht,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(p||(H(ht,`Opening RPC '${e}' stream ${i} transport.`),d.open(),p=!0),H(ht,`RPC '${e}' stream ${i} sending:`,I),d.send(I))},To:()=>d.close()}),w=(I,_,T)=>{I.listen(_,S=>{try{T(S)}catch(R){setTimeout(()=>{throw R},0)}})};return w(d,Qo.EventType.OPEN,()=>{m||(H(ht,`RPC '${e}' stream ${i} transport opened.`),y.yo())}),w(d,Qo.EventType.CLOSE,()=>{m||(m=!0,H(ht,`RPC '${e}' stream ${i} transport closed`),y.So())}),w(d,Qo.EventType.ERROR,I=>{m||(m=!0,qs(ht,`RPC '${e}' stream ${i} transport errored:`,I),y.So(new $(F.UNAVAILABLE,"The operation could not be completed")))}),w(d,Qo.EventType.MESSAGE,I=>{var _;if(!m){const T=I.data[0];fe(!!T);const S=T,R=S.error||((_=S[0])===null||_===void 0?void 0:_.error);if(R){H(ht,`RPC '${e}' stream ${i} received error:`,R);const N=R.status;let M=function(b){const k=je[b];if(k!==void 0)return jI(k)}(N),x=R.message;M===void 0&&(M=F.INTERNAL,x="Unknown error status: "+N+" with message "+R.message),m=!0,y.So(new $(M,x)),d.close()}else H(ht,`RPC '${e}' stream ${i} received:`,T),y.bo(T)}}),w(a,hI.STAT_EVENT,I=>{I.stat===Ip.PROXY?H(ht,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===Ip.NOPROXY&&H(ht,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}function rf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(t){return new kD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&H("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new XI(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(tr(n.toString()),tr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new $(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _N extends JI{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=CD(this.serializer,e),r=function(s){if(!("targetChange"in s))return J.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?J.min():o.readTime?An(o.readTime):J.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Dp(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=kp(l)?{documents:ND(s,l)}:{query:OD(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=BI(s,o.resumeToken);const c=Pp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(J.min())>0){a.readTime=Vu(s,o.snapshotVersion.toTimestamp());const c=Pp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=LD(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Dp(this.serializer),n.removeTarget=e,this.a_(n)}}class vN extends JI{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return fe(!!e.streamToken),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=DD(e.writeResults,e.commitTime),r=An(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Dp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>RD(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new $(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Cp(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(F.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Cp(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class EN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(tr(n),this.D_=!1):H("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{ts(this)&&(H("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Z(l);c.L_.add(4),await yl(c),c.q_.set("Unknown"),c.L_.delete(4),await Lh(c)}(this))})}),this.q_=new EN(r,i)}}async function Lh(t){if(ts(t))for(const e of t.B_)await e(!0)}async function yl(t){for(const e of t.B_)await e(!1)}function ZI(t,e){const n=Z(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),wm(n)?vm(n):mo(n).r_()&&_m(n,e))}function ym(t,e){const n=Z(t),r=mo(n);n.N_.delete(e),r.r_()&&ex(n,e),n.N_.size===0&&(r.r_()?r.o_():ts(n)&&n.q_.set("Unknown"))}function _m(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}mo(t).A_(e)}function ex(t,e){t.Q_.xe(e),mo(t).R_(e)}function vm(t){t.Q_=new ID({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),mo(t).start(),t.q_.v_()}function wm(t){return ts(t)&&!mo(t).n_()&&t.N_.size>0}function ts(t){return Z(t).L_.size===0}function tx(t){t.Q_=void 0}async function IN(t){t.q_.set("Online")}async function xN(t){t.N_.forEach((e,n)=>{_m(t,e)})}async function SN(t,e){tx(t),wm(t)?(t.q_.M_(e),vm(t)):t.q_.set("Unknown")}async function bN(t,e,n){if(t.q_.set("Online"),e instanceof zI&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Fu(t,r)}else if(e instanceof Kc?t.Q_.Ke(e):e instanceof UI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(J.min()))try{const r=await YI(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(st.EMPTY_BYTE_STRING,h.snapshotVersion)),ex(s,l);const d=new Rr(h.target,l,c,h.sequenceNumber);_m(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){H("RemoteStore","Failed to raise snapshot:",r),await Fu(t,r)}}async function Fu(t,e,n){if(!pl(e))throw e;t.L_.add(1),await yl(t),t.q_.set("Offline"),n||(n=()=>YI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Lh(t)})}function nx(t,e){return e().catch(n=>Fu(t,n,e))}async function Vh(t){const e=Z(t),n=ei(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;kN(e);)try{const i=await uN(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,AN(e,i)}catch(i){await Fu(e,i)}rx(e)&&ix(e)}function kN(t){return ts(t)&&t.O_.length<10}function AN(t,e){t.O_.push(e);const n=ei(t);n.r_()&&n.V_&&n.m_(e.mutations)}function rx(t){return ts(t)&&!ei(t).n_()&&t.O_.length>0}function ix(t){ei(t).start()}async function PN(t){ei(t).p_()}async function CN(t){const e=ei(t);for(const n of t.O_)e.m_(n.mutations)}async function RN(t,e,n){const r=t.O_.shift(),i=hm.from(r,e,n);await nx(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Vh(t)}async function DN(t,e){e&&ei(t).V_&&await async function(r,i){if(function(o){return wD(o)&&o!==F.ABORTED}(i.code)){const s=r.O_.shift();ei(r).s_(),await nx(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Vh(r)}}(t,e),rx(t)&&ix(t)}async function yv(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");const r=ts(n);n.L_.add(3),await yl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Lh(n)}async function NN(t,e){const n=Z(t);e?(n.L_.delete(2),await Lh(n)):e||(n.L_.add(2),await yl(n),n.q_.set("Unknown"))}function mo(t){return t.K_||(t.K_=function(n,r,i){const s=Z(n);return s.w_(),new _N(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:IN.bind(null,t),Ro:xN.bind(null,t),mo:SN.bind(null,t),d_:bN.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),wm(t)?vm(t):t.q_.set("Unknown")):(await t.K_.stop(),tx(t))})),t.K_}function ei(t){return t.U_||(t.U_=function(n,r,i){const s=Z(n);return s.w_(),new vN(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:PN.bind(null,t),mo:DN.bind(null,t),f_:CN.bind(null,t),g_:RN.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Vh(t)):(await t.U_.stop(),t.O_.length>0&&(H("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Em(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tm(t,e){if(tr("AsyncQueue",`${e}: ${t}`),pl(t))return new $(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=Yo(),this.sortedSet=new Pe(this.comparator)}static emptySet(e){return new Os(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Os)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Os;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(){this.W_=new Pe(q.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Js{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Js(e,n,Os.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ch(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class MN{constructor(){this.queries=vv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Z(n),s=i.queries;i.queries=vv(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new $(F.ABORTED,"Firestore shutting down"))}}function vv(){return new go(t=>bI(t),Ch)}async function LN(t,e){const n=Z(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new ON,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Tm(o,`Initialization of query '${hs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Im(n)}async function VN(t,e){const n=Z(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function FN(t,e){const n=Z(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&Im(n)}function jN(t,e,n){const r=Z(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Im(t){t.Y_.forEach(e=>{e.next()})}var Op,wv;(wv=Op||(Op={})).ea="default",wv.Cache="cache";class UN{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Js(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Js.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Op.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e){this.key=e}}class ox{constructor(e){this.key=e}}class zN{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=te(),this.mutatedKeys=te(),this.Aa=kI(e),this.Ra=new Os(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new _v,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,d)=>{const p=i.get(h),m=Rh(this.query,d)?d:null,y=!!p&&this.mutatedKeys.has(p.key),w=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let I=!1;p&&m?p.data.isEqual(m.data)?y!==w&&(r.track({type:3,doc:m}),I=!0):this.ga(p,m)||(r.track({type:2,doc:m}),I=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),I=!0):p&&!m&&(r.track({type:1,doc:p}),I=!0,(l||c)&&(a=!0)),I&&(m?(o=o.add(m),s=w?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(m,y){const w=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return w(m)-w(y)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Js(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new _v,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=te(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new ox(r))}),this.da.forEach(r=>{e.has(r)||n.push(new sx(r))}),n}ba(e){this.Ta=e.Ts,this.da=te();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Js.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class BN{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class $N{constructor(e){this.key=e,this.va=!1}}class WN{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new go(a=>bI(a),Ch),this.Ma=new Map,this.xa=new Set,this.Oa=new Pe(q.comparator),this.Na=new Map,this.La=new pm,this.Ba={},this.ka=new Map,this.qa=Xs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function HN(t,e,n=!0){const r=dx(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await ax(r,e,n,!0),i}async function qN(t,e){const n=dx(t);await ax(n,e,!0,!1)}async function ax(t,e,n,r){const i=await hN(t.localStore,kn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await KN(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&ZI(t.remoteStore,i),a}async function KN(t,e,n,r,i){t.Ka=(d,p,m)=>async function(w,I,_,T){let S=I.view.ma(_);S.ns&&(S=await pv(w.localStore,I.query,!1).then(({documents:x})=>I.view.ma(x,S)));const R=T&&T.targetChanges.get(I.targetId),N=T&&T.targetMismatches.get(I.targetId)!=null,M=I.view.applyChanges(S,w.isPrimaryClient,R,N);return Tv(w,I.targetId,M.wa),M.snapshot}(t,d,p,m);const s=await pv(t.localStore,e,!0),o=new zN(e,s.Ts),a=o.ma(s.documents),l=ml.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);Tv(t,n,c.wa);const h=new BN(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function GN(t,e,n){const r=Z(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Ch(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Np(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ym(r.remoteStore,i.targetId),Mp(r,i.targetId)}).catch(fl)):(Mp(r,i.targetId),await Np(r.localStore,i.targetId,!0))}async function QN(t,e){const n=Z(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ym(n.remoteStore,r.targetId))}async function YN(t,e,n){const r=rO(t);try{const i=await function(o,a){const l=Z(o),c=We.now(),h=a.reduce((m,y)=>m.add(y.key),te());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=nr(),w=te();return l.cs.getEntries(m,h).next(I=>{y=I,y.forEach((_,T)=>{T.isValidDocument()||(w=w.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,y)).next(I=>{d=I;const _=[];for(const T of a){const S=gD(T,d.get(T.key).overlayedDocument);S!=null&&_.push(new es(T.key,S,_I(S.value.mapValue),Qn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,_,a)}).next(I=>{p=I;const _=I.applyToLocalDocumentSet(d,w);return l.documentOverlayCache.saveOverlays(m,I.batchId,_)})}).then(()=>({batchId:p.batchId,changes:PI(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Pe(le)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await _l(r,i.changes),await Vh(r.remoteStore)}catch(i){const s=Tm(i,"Failed to persist write");n.reject(s)}}async function lx(t,e){const n=Z(t);try{const r=await lN(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(fe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?fe(o.va):i.removedDocuments.size>0&&(fe(o.va),o.va=!1))}),await _l(n,r,e)}catch(r){await fl(r)}}function Ev(t,e,n){const r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Z(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const p of d.j_)p.Z_(a)&&(c=!0)}),c&&Im(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function XN(t,e,n){const r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Pe(q.comparator);o=o.insert(s,pt.newNoDocument(s,J.min()));const a=te().add(s),l=new Oh(J.min(),new Map,new Pe(le),o,a);await lx(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),xm(r)}else await Np(r.localStore,e,!1).then(()=>Mp(r,e,n)).catch(fl)}async function JN(t,e){const n=Z(t),r=e.batch.batchId;try{const i=await aN(n.localStore,e);ux(n,r,null),cx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await _l(n,i)}catch(i){await fl(i)}}async function ZN(t,e,n){const r=Z(t);try{const i=await function(o,a){const l=Z(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(fe(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);ux(r,e,n),cx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await _l(r,i)}catch(i){await fl(i)}}function cx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function ux(t,e,n){const r=Z(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Mp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||hx(t,r)})}function hx(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(ym(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),xm(t))}function Tv(t,e,n){for(const r of n)r instanceof sx?(t.La.addReference(r.key,e),eO(t,r)):r instanceof ox?(H("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||hx(t,r.key)):X()}function eO(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(H("SyncEngine","New document in limbo: "+n),t.xa.add(r),xm(t))}function xm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new q(_e.fromString(e)),r=t.qa.next();t.Na.set(r,new $N(n)),t.Oa=t.Oa.insert(n,r),ZI(t.remoteStore,new Rr(kn(SI(n.path)),r,"TargetPurposeLimboResolution",im.oe))}}async function _l(t,e,n){const r=Z(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=mm.Wi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const h=Z(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>j.forEach(c,p=>j.forEach(p.$i,m=>h.persistence.referenceDelegate.addReference(d,p.targetId,m)).next(()=>j.forEach(p.Ui,m=>h.persistence.referenceDelegate.removeReference(d,p.targetId,m)))))}catch(d){if(!pl(d))throw d;H("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const m=h.os.get(p),y=m.snapshotVersion,w=m.withLastLimboFreeSnapshotVersion(y);h.os=h.os.insert(p,w)}}}(r.localStore,s))}async function tO(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());const r=await QI(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new $(F.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await _l(n,r.hs)}}function nO(t,e){const n=Z(t),r=n.Na.get(e);if(r&&r.va)return te().add(r.key);{let i=te();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function dx(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=lx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=XN.bind(null,e),e.Ca.d_=FN.bind(null,e.eventManager),e.Ca.$a=jN.bind(null,e.eventManager),e}function rO(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZN.bind(null,e),e}class ju{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return oN(this.persistence,new iN,e.initialUser,this.serializer)}Ga(e){return new tN(gm.Zr,this.serializer)}Wa(e){return new fN}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ju.provider={build:()=>new ju};class Lp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ev(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=tO.bind(null,this.syncEngine),await NN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new MN}()}createDatastore(e){const n=Mh(e.databaseInfo.databaseId),r=function(s){return new yN(s)}(e.databaseInfo);return function(s,o,a,l){return new wN(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new TN(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Ev(this.syncEngine,n,0),function(){return mv.D()?new mv:new pN}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const d=new WN(i,s,o,a,l,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Z(i);H("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await yl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Lp.provider={build:()=>new Lp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):tr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=dt.UNAUTHENTICATED,this.clientId=gI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{H("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Tm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function sf(t,e){t.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await QI(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Iv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await oO(t);H("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>yv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>yv(e.remoteStore,i)),t._onlineComponents=e}async function oO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{await sf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;qs("Error using user provided cache. Falling back to memory cache: "+n),await sf(t,new ju)}}else H("FirestoreClient","Using default OfflineComponentProvider"),await sf(t,new ju);return t._offlineComponents}async function fx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),await Iv(t,t._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),await Iv(t,new Lp))),t._onlineComponents}function aO(t){return fx(t).then(e=>e.syncEngine)}async function lO(t){const e=await fx(t),n=e.eventManager;return n.onListen=HN.bind(null,e.syncEngine),n.onUnlisten=GN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=qN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=QN.bind(null,e.syncEngine),n}function cO(t,e,n={}){const r=new Kr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new iO({next:p=>{h.Za(),o.enqueueAndForget(()=>VN(s,d)),p.fromCache&&l.source==="server"?c.reject(new $(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new UN(a,h,{includeMetadataChanges:!0,_a:!0});return LN(s,d)}(await lO(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx(t,e,n){if(!n)throw new $(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function uO(t,e,n,r){if(e===!0&&r===!0)throw new $(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Sv(t){if(!q.isDocumentKey(t))throw new $(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function bv(t){if(q.isDocumentKey(t))throw new $(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Fh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X()}function Xa(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Fh(t);throw new $(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function hO(t,e){if(e<=0)throw new $(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=px((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new $(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new $(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new $(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new x2;switch(r.type){case"firstParty":return new A2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=xv.get(n);r&&(H("ComponentProvider","Removing Datastore"),xv.delete(n),r.terminate())}(this),Promise.resolve()}}function dO(t,e,n,r={}){var i;const s=(t=Xa(t,jh))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&qs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=dt.MOCK_USER;else{a=ZC(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new $(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new dt(c)}t._authCredentials=new S2(new pI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ar(this.firestore,e,this._query)}}class zt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zt(this.firestore,e,this._key)}}class Gr extends ar{constructor(e,n,r){super(e,n,SI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zt(this.firestore,null,new q(e))}withConverter(e){return new Gr(this.firestore,e,this._path)}}function Uu(t,e,...n){if(t=It(t),gx("collection","path",e),t instanceof jh){const r=_e.fromString(e,...n);return bv(r),new Gr(t,null,r)}{if(!(t instanceof zt||t instanceof Gr))throw new $(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_e.fromString(e,...n));return bv(r),new Gr(t.firestore,null,r)}}function fO(t,e,...n){if(t=It(t),arguments.length===1&&(e=gI.newId()),gx("doc","path",e),t instanceof jh){const r=_e.fromString(e,...n);return Sv(r),new zt(t,null,new q(r))}{if(!(t instanceof zt||t instanceof Gr))throw new $(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_e.fromString(e,...n));return Sv(r),new zt(t.firestore,t instanceof Gr?t.converter:null,new q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new XI(this,"async_queue_retry"),this.Vu=()=>{const r=rf();r&&H("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=rf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=rf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Kr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!pl(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw tr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Em.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&X()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Sm extends jh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Av,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Av(e),this._firestoreClient=void 0,await e}}}function pO(t,e){const n=typeof t=="object"?t:nm(),r=typeof t=="string"?t:e||"(default)",i=Ji(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=XC("firestore");s&&dO(i,...s)}return i}function mx(t){if(t._terminated)throw new $(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||gO(t),t._firestoreClient}function gO(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new z2(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,px(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new sO(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zs(st.fromBase64String(e))}catch(n){throw new $(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Zs(st.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO=/^__.*__$/;class yO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new es(e,this.data,this.fieldMask,n,this.fieldTransforms):new gl(e,this.data,n,this.fieldTransforms)}}function _x(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}class Pm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Pm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return zu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(_x(this.Cu)&&mO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class _O{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Mh(e)}Qu(e,n,r,i=!1){return new Pm({Cu:e,methodName:n,qu:r,path:tt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cm(t){const e=t._freezeSettings(),n=Mh(t._databaseId);return new _O(t._databaseId,!!e.ignoreUndefinedProperties,n)}function vO(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Tx("Data must be an object, but it was:",o,r);const a=wx(r,o);let l,c;if(s.merge)l=new dn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const p=wO(e,d,n);if(!o.contains(p))throw new $(F.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);TO(h,p)||h.push(p)}l=new dn(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new yO(new Qt(a),l,c)}function vx(t,e,n,r=!1){return Rm(n,t.Qu(r?4:3,e))}function Rm(t,e){if(Ex(t=It(t)))return Tx("Unsupported field value:",e,t),wx(t,e);if(t instanceof yx)return function(r,i){if(!_x(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Rm(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=It(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return cD(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=We.fromDate(r);return{timestampValue:Vu(i.serializer,s)}}if(r instanceof We){const s=new We(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vu(i.serializer,s)}}if(r instanceof km)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Zs)return{bytesValue:BI(i.serializer,r._byteString)};if(r instanceof zt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:fm(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Am)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return um(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Fh(r)}`)}(t,e)}function wx(t,e){const n={};return mI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):po(t,(r,i)=>{const s=Rm(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Ex(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof We||t instanceof km||t instanceof Zs||t instanceof zt||t instanceof yx||t instanceof Am)}function Tx(t,e,n){if(!Ex(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Fh(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function wO(t,e,n){if((e=It(e))instanceof bm)return e._internalPath;if(typeof e=="string")return Ix(t,e);throw zu("Field path arguments must be of type string or ",t,!1,void 0,n)}const EO=new RegExp("[~\\*/\\[\\]]");function Ix(t,e,n){if(e.search(EO)>=0)throw zu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new bm(...e.split("."))._internalPath}catch{throw zu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function zu(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new $(F.INVALID_ARGUMENT,a+t+l)}function TO(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new IO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Uh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class IO extends Dm{data(){return super.data()}}function Uh(t,e){return typeof e=="string"?Ix(t,e):e instanceof bm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Nm{}class zh extends Nm{}function Bu(t,e,...n){let r=[];e instanceof Nm&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Om).length,a=s.filter(l=>l instanceof Bh).length;if(o>1||o>0&&a>0)throw new $(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Bh extends zh{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Bh(e,n,r)}_apply(e){const n=this._parse(e);return xx(e._query,n),new ar(e.firestore,e.converter,Ap(e._query,n))}_parse(e){const n=Cm(e.firestore);return function(s,o,a,l,c,h,d){let p;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new $(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Cv(d,h);const m=[];for(const y of d)m.push(Pv(l,s,y));p={arrayValue:{values:m}}}else p=Pv(l,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Cv(d,h),p=vx(a,o,d,h==="in"||h==="not-in");return ze.create(c,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function bi(t,e,n){const r=e,i=Uh("where",t);return Bh._create(i,r,n)}class Om extends Nm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Om(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:yn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)xx(o,l),o=Ap(o,l)}(e._query,n),new ar(e.firestore,e.converter,Ap(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Mm extends zh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Mm(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new $(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new $(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ga(s,o)}(e._query,this._field,this._direction);return new ar(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Zi(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Vp(t,e="asc"){const n=e,r=Uh("orderBy",t);return Mm._create(r,n)}class Lm extends zh{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Lm(e,n,r)}_apply(e){return new ar(e.firestore,e.converter,Ou(e._query,this._limit,this._limitType))}}function Fp(t){return hO("limit",t),Lm._create("limit",t,"F")}class Vm extends zh{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Vm(e,n,r)}_apply(e){const n=bO(e,this.type,this._docOrFields,this._inclusive);return new ar(e.firestore,e.converter,function(i,s){return new Zi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function SO(...t){return Vm._create("startAfter",t,!1)}function bO(t,e,n,r){if(n[0]=It(n[0]),n[0]instanceof Dm)return function(s,o,a,l,c){if(!l)throw new $(F.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const d of Ns(s))if(d.field.isKeyField())h.push(Nu(o,l.key));else{const p=l.data.field(d.field);if(Ph(p))throw new $(F.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const m=d.field.canonicalString();throw new $(F.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}h.push(p)}return new Ys(h,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Cm(t.firestore);return function(o,a,l,c,h,d){const p=o.explicitOrderBy;if(h.length>p.length)throw new $(F.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let y=0;y<h.length;y++){const w=h[y];if(p[y].field.isKeyField()){if(typeof w!="string")throw new $(F.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof w}`);if(!cm(o)&&w.indexOf("/")!==-1)throw new $(F.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${w}' contains a slash.`);const I=o.path.child(_e.fromString(w));if(!q.isDocumentKey(I))throw new $(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${I}' is not because it contains an odd number of segments.`);const _=new q(I);m.push(Nu(a,_))}else{const I=vx(l,c,w);m.push(I)}}return new Ys(m,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function Pv(t,e,n){if(typeof(n=It(n))=="string"){if(n==="")throw new $(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cm(e)&&n.indexOf("/")!==-1)throw new $(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(_e.fromString(n));if(!q.isDocumentKey(r))throw new $(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Nu(t,new q(r))}if(n instanceof zt)return Nu(t,n._key);throw new $(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Fh(n)}.`)}function Cv(t,e){if(!Array.isArray(t)||t.length===0)throw new $(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xx(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class kO{convertValue(e,n="none"){switch(Bi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return po(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Me(o.doubleValue));return new Am(s)}convertGeoPoint(e){return new km(Me(e.latitude),Me(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=sm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ha(e));default:return null}}convertTimestamp(e){const n=Zr(e);return new We(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=_e.fromString(e);fe(GI(r));const i=new qa(r.get(1),r.get(3)),s=new q(r.popFirst(5));return i.isEqual(n)||tr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class PO extends Dm{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Gc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Uh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Gc extends PO{data(e={}){return super.data(e)}}class CO{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new hc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Gc(this._firestore,this._userDataWriter,r.key,r,new hc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Gc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new hc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Gc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new hc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:RO(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function RO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}class DO extends kO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new zt(this.firestore,null,n)}}function Fm(t){t=Xa(t,ar);const e=Xa(t.firestore,Sm),n=mx(e),r=new DO(e);return xO(t._query),cO(n,t._query).then(i=>new CO(e,r,t,i))}function NO(t,e,n){t=Xa(t,zt);const r=Xa(t.firestore,Sm),i=AO(t.converter,e,n);return OO(r,[vO(Cm(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Qn.none())])}function OO(t,e){return function(r,i){const s=new Kr;return r.asyncQueue.enqueueAndForget(async()=>YN(await aO(r),i,s)),s.promise}(mx(t),e)}(function(e,n=!0){(function(i){fo=i})(ho),Rn(new mn("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Sm(new b2(r.getProvider("auth-internal")),new C2(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new $(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qa(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Zt(K0,"4.7.3",e),Zt(K0,"4.7.3","esm2017")})();function jm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Sx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const MO=Sx,bx=new Xi("auth","Firebase",Sx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $u=new kh("@firebase/auth");function LO(t,...e){$u.logLevel<=ne.WARN&&$u.warn(`Auth (${ho}): ${t}`,...e)}function Qc(t,...e){$u.logLevel<=ne.ERROR&&$u.error(`Auth (${ho}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(t,...e){throw Um(t,...e)}function Pn(t,...e){return Um(t,...e)}function kx(t,e,n){const r=Object.assign(Object.assign({},MO()),{[e]:n});return new Xi("auth","Firebase",r).create(e,{appName:t.name})}function Ni(t){return kx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Um(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return bx.create(t,...e)}function Y(t,e,...n){if(!t)throw Um(e,...n)}function Wn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qc(e),new Error(e)}function ir(t,e){t||Wn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function VO(){return Rv()==="http:"||Rv()==="https:"}function Rv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VO()||ZT()||"connection"in navigator)?navigator.onLine:!0}function jO(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,n){this.shortDelay=e,this.longDelay=n,ir(n>e,"Short delay should be less than long delay!"),this.isMobile=eR()||rR()}get(){return FO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(t,e){ir(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO=new vl(3e4,6e4);function Bm(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function yo(t,e,n,r,i={}){return Px(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=dl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return nR()||(c.referrerPolicy="no-referrer"),Ax.fetch()(Cx(t,t.config.apiHost,n,a),c)})}async function Px(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},UO),e);try{const i=new $O(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw dc(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw dc(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw dc(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw dc(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw kx(t,h,c);rr(t,h)}}catch(i){if(i instanceof _n)throw i;rr(t,"network-request-failed",{message:String(i)})}}async function BO(t,e,n,r,i={}){const s=await yo(t,e,n,r,i);return"mfaPendingCredential"in s&&rr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function Cx(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?zm(t.config,i):`${t.config.apiScheme}://${i}`}class $O{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Pn(this.auth,"network-request-failed")),zO.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function dc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Pn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WO(t,e){return yo(t,"POST","/v1/accounts:delete",e)}async function Rx(t,e){return yo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function HO(t,e=!1){const n=It(t),r=await n.getIdToken(e),i=$m(r);Y(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:pa(of(i.auth_time)),issuedAtTime:pa(of(i.iat)),expirationTime:pa(of(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function of(t){return Number(t)*1e3}function $m(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Qc("JWT malformed, contained fewer than 3 sections"),null;try{const i=QT(n);return i?JSON.parse(i):(Qc("Failed to decode base64 JWT payload"),null)}catch(i){return Qc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Dv(t){const e=$m(t);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ja(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof _n&&qO(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function qO({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=pa(this.lastLoginAt),this.creationTime=pa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wu(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ja(t,Rx(n,{idToken:r}));Y(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Dx(s.providerUserInfo):[],a=QO(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Up(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function GO(t){const e=It(t);await Wu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function QO(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Dx(t){return t.map(e=>{var{providerId:n}=e,r=jm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YO(t,e){const n=await Px(t,{},async()=>{const r=dl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=Cx(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Ax.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function XO(t,e){return yo(t,"POST","/v2/accounts:revokeToken",Bm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Dv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Y(e.length!==0,"internal-error");const n=Dv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await YO(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ms;return r&&(Y(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Y(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Y(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ms,this.toJSON())}_performRefresh(){return Wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(t,e){Y(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Hn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=jm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new KO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Up(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ja(this,this.stsTokenManager.getToken(this.auth,e));return Y(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return HO(this,e)}reload(){return GO(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Hn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Wu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Cr(this.auth.app))return Promise.reject(Ni(this.auth));const e=await this.getIdToken();return await Ja(this,WO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,I=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(c=n.createdAt)!==null&&c!==void 0?c:void 0,T=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:S,emailVerified:R,isAnonymous:N,providerData:M,stsTokenManager:x}=n;Y(S&&x,e,"internal-error");const v=Ms.fromJSON(this.name,x);Y(typeof S=="string",e,"internal-error"),dr(d,e.name),dr(p,e.name),Y(typeof R=="boolean",e,"internal-error"),Y(typeof N=="boolean",e,"internal-error"),dr(m,e.name),dr(y,e.name),dr(w,e.name),dr(I,e.name),dr(_,e.name),dr(T,e.name);const b=new Hn({uid:S,auth:e,email:p,emailVerified:R,displayName:d,isAnonymous:N,photoURL:y,phoneNumber:m,tenantId:w,stsTokenManager:v,createdAt:_,lastLoginAt:T});return M&&Array.isArray(M)&&(b.providerData=M.map(k=>Object.assign({},k))),I&&(b._redirectEventId=I),b}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ms;i.updateFromServerResponse(n);const s=new Hn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Wu(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Y(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Dx(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Ms;a.updateFromIdToken(r);const l=new Hn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Up(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=new Map;function qn(t){ir(t instanceof Function,"Expected a class definition");let e=Nv.get(t);return e?(ir(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Nv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Nx.type="NONE";const Ov=Nx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(t,e,n){return`firebase:${t}:${e}:${n}`}class Ls{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Yc(this.userKey,i.apiKey,s),this.fullPersistenceKey=Yc("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Hn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ls(qn(Ov),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||qn(Ov);const o=Yc(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=Hn._fromJSON(e,h);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ls(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ls(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Vx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ox(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jx(e))return"Blackberry";if(Ux(e))return"Webos";if(Mx(e))return"Safari";if((e.includes("chrome/")||Lx(e))&&!e.includes("edge/"))return"Chrome";if(Fx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Ox(t=mt()){return/firefox\//i.test(t)}function Mx(t=mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Lx(t=mt()){return/crios\//i.test(t)}function Vx(t=mt()){return/iemobile/i.test(t)}function Fx(t=mt()){return/android/i.test(t)}function jx(t=mt()){return/blackberry/i.test(t)}function Ux(t=mt()){return/webos/i.test(t)}function Wm(t=mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function JO(t=mt()){var e;return Wm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ZO(){return iR()&&document.documentMode===10}function zx(t=mt()){return Wm(t)||Fx(t)||Ux(t)||jx(t)||/windows phone/i.test(t)||Vx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(t,e=[]){let n;switch(t){case"Browser":n=Mv(mt());break;case"Worker":n=`${Mv(mt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ho}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tM(t,e={}){return yo(t,"GET","/v2/passwordPolicy",Bm(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM=6;class rM{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:nM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lv(this),this.idTokenSubscription=new Lv(this),this.beforeStateQueue=new eM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=qn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ls.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Rx(this,{idToken:e}),r=await Hn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Cr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Wu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Cr(this.app))return Promise.reject(Ni(this));const n=e?It(e):null;return n&&Y(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Cr(this.app)?Promise.reject(Ni(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Cr(this.app)?Promise.reject(Ni(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await tM(this),n=new rM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await XO(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&qn(e)||this._popupRedirectResolver;Y(n,this,"argument-error"),this.redirectPersistenceManager=await Ls.create(this,[qn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Bx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&LO(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Hm(t){return It(t)}class Lv{constructor(e){this.auth=e,this.observer=null,this.addObserver=hR(n=>this.observer=n)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sM(t){qm=t}function oM(t){return qm.loadJS(t)}function aM(){return qm.gapiScript}function lM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(t,e){const n=Ji(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Ba(s,e??{}))return i;rr(i,"already-initialized")}return n.initialize({options:e})}function uM(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(qn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function hM(t,e,n){const r=Hm(t);Y(r._canInitEmulator,r,"emulator-config-failed"),Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=$x(e),{host:o,port:a}=dM(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||fM()}function $x(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function dM(t){const e=$x(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Vv(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Vv(o)}}}function Vv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function fM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wn("not implemented")}_getIdTokenResponse(e){return Wn("not implemented")}_linkToIdToken(e,n){return Wn("not implemented")}_getReauthenticationResolver(e){return Wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vs(t,e){return BO(t,"POST","/v1/accounts:signInWithIdp",Bm(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM="http://localhost";class $i extends Wx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $i(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):rr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=jm(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new $i(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Vs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Vs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Vs(e,n)}buildRequest(){const e={requestUri:pM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=dl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl extends Hx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends wl{constructor(){super("facebook.com")}static credential(e){return $i._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vr.credential(e.oauthAccessToken)}catch{return null}}}vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";vr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends wl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $i._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return wr.credential(n,r)}catch{return null}}}wr.GOOGLE_SIGN_IN_METHOD="google.com";wr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends wl{constructor(){super("github.com")}static credential(e){return $i._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Er.credential(e.oauthAccessToken)}catch{return null}}}Er.GITHUB_SIGN_IN_METHOD="github.com";Er.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends wl{constructor(){super("twitter.com")}static credential(e,n){return $i._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Tr.credential(n,r)}catch{return null}}}Tr.TWITTER_SIGN_IN_METHOD="twitter.com";Tr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Hn._fromIdTokenResponse(e,r,i),o=Fv(r);return new eo({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Fv(r);return new eo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Fv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu extends _n{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Hu.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Hu(e,n,r,i)}}function qx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Hu._fromErrorAndOperation(t,s,e,r):s})}async function gM(t,e,n=!1){const r=await Ja(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return eo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mM(t,e,n=!1){const{auth:r}=t;if(Cr(r.app))return Promise.reject(Ni(r));const i="reauthenticate";try{const s=await Ja(t,qx(r,i,e,t),n);Y(s.idToken,r,"internal-error");const o=$m(s.idToken);Y(o,r,"internal-error");const{sub:a}=o;return Y(t.uid===a,r,"user-mismatch"),eo._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&rr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yM(t,e,n=!1){if(Cr(t.app))return Promise.reject(Ni(t));const r="signIn",i=await qx(t,r,e),s=await eo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function _M(t,e,n,r){return It(t).onIdTokenChanged(e,n,r)}function vM(t,e,n){return It(t).beforeAuthStateChanged(e,n)}const qu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qu,"1"),this.storage.removeItem(qu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM=1e3,EM=10;class Gx extends Kx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);ZO()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,EM):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},wM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Gx.type="LOCAL";const TM=Gx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx extends Kx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Qx.type="SESSION";const Yx=Qx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new $h(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await IM(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$h.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Km("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(){return window}function SM(t){Cn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(){return typeof Cn().WorkerGlobalScope<"u"&&typeof Cn().importScripts=="function"}async function bM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function AM(){return Xx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="firebaseLocalStorageDb",PM=1,Ku="firebaseLocalStorage",Zx="fbase_key";class El{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Wh(t,e){return t.transaction([Ku],e?"readwrite":"readonly").objectStore(Ku)}function CM(){const t=indexedDB.deleteDatabase(Jx);return new El(t).toPromise()}function zp(){const t=indexedDB.open(Jx,PM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ku,{keyPath:Zx})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ku)?e(r):(r.close(),await CM(),e(await zp()))})})}async function jv(t,e,n){const r=Wh(t,!0).put({[Zx]:e,value:n});return new El(r).toPromise()}async function RM(t,e){const n=Wh(t,!1).get(e),r=await new El(n).toPromise();return r===void 0?null:r.value}function Uv(t,e){const n=Wh(t,!0).delete(e);return new El(n).toPromise()}const DM=800,NM=3;class eS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>NM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Xx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$h._getInstance(AM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await bM(),!this.activeServiceWorker)return;this.sender=new xM(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zp();return await jv(e,qu,"1"),await Uv(e,qu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>jv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>RM(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Uv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Wh(i,!1).getAll();return new El(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eS.type="LOCAL";const OM=eS;new vl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MM(t,e){return e?qn(e):(Y(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm extends Wx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Vs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Vs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function LM(t){return yM(t.auth,new Gm(t),t.bypassAuthState)}function VM(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),mM(n,new Gm(t),t.bypassAuthState)}async function FM(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),gM(n,new Gm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return LM;case"linkViaPopup":case"linkViaRedirect":return FM;case"reauthViaPopup":case"reauthViaRedirect":return VM;default:rr(this.auth,"internal-error")}}resolve(e){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM=new vl(2e3,1e4);class bs extends tS{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,bs.currentPopupAction&&bs.currentPopupAction.cancel(),bs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Y(e,this.auth,"internal-error"),e}async onExecution(){ir(this.filter.length===1,"Popup operations only handle one event");const e=Km();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Pn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Pn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,jM.get())};e()}}bs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM="pendingRedirect",Xc=new Map;class zM extends tS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Xc.get(this.auth._key());if(!e){try{const r=await BM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Xc.set(this.auth._key(),e)}return this.bypassAuthState||Xc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function BM(t,e){const n=HM(e),r=WM(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function $M(t,e){Xc.set(t._key(),e)}function WM(t){return qn(t._redirectPersistence)}function HM(t){return Yc(UM,t.config.apiKey,t.name)}async function qM(t,e,n=!1){if(Cr(t.app))return Promise.reject(Ni(t));const r=Hm(t),i=MM(r,e),o=await new zM(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM=10*60*1e3;class GM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!QM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!nS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Pn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=KM&&this.cachedEventUids.clear(),this.cachedEventUids.has(zv(e))}saveEventToCache(e){this.cachedEventUids.add(zv(e)),this.lastProcessedEventTime=Date.now()}}function zv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function nS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function QM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YM(t,e={}){return yo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,JM=/^https?/;async function ZM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await YM(t);for(const n of e)try{if(eL(n))return}catch{}rr(t,"unauthorized-domain")}function eL(t){const e=jp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!JM.test(n))return!1;if(XM.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL=new vl(3e4,6e4);function Bv(){const t=Cn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function nL(t){return new Promise((e,n)=>{var r,i,s;function o(){Bv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Bv(),n(Pn(t,"network-request-failed"))},timeout:tL.get()})}if(!((i=(r=Cn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Cn().gapi)===null||s===void 0)&&s.load)o();else{const a=lM("iframefcb");return Cn()[a]=()=>{gapi.load?o():n(Pn(t,"network-request-failed"))},oM(`${aM()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Jc=null,e})}let Jc=null;function rL(t){return Jc=Jc||nL(t),Jc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=new vl(5e3,15e3),sL="__/auth/iframe",oL="emulator/auth/iframe",aL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cL(t){const e=t.config;Y(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?zm(e,oL):`https://${t.config.authDomain}/${sL}`,r={apiKey:e.apiKey,appName:t.name,v:ho},i=lL.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${dl(r).slice(1)}`}async function uL(t){const e=await rL(t),n=Cn().gapi;return Y(n,t,"internal-error"),e.open({where:document.body,url:cL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aL,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Pn(t,"network-request-failed"),a=Cn().setTimeout(()=>{s(o)},iL.get());function l(){Cn().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dL=500,fL=600,pL="_blank",gL="http://localhost";class $v{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function mL(t,e,n,r=dL,i=fL){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},hL),{width:r.toString(),height:i.toString(),top:s,left:o}),c=mt().toLowerCase();n&&(a=Lx(c)?pL:n),Ox(c)&&(e=e||gL,l.scrollbars="yes");const h=Object.entries(l).reduce((p,[m,y])=>`${p}${m}=${y},`,"");if(JO(c)&&a!=="_self")return yL(e||"",a),new $v(null);const d=window.open(e||"",a,h);Y(d,t,"popup-blocked");try{d.focus()}catch{}return new $v(d)}function yL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L="__/auth/handler",vL="emulator/auth/handler",wL=encodeURIComponent("fac");async function Wv(t,e,n,r,i,s){Y(t.config.authDomain,t,"auth-domain-config-required"),Y(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ho,eventId:i};if(e instanceof Hx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",uR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries(s||{}))o[h]=d}if(e instanceof wl){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${wL}=${encodeURIComponent(l)}`:"";return`${EL(t)}?${dl(a).slice(1)}${c}`}function EL({config:t}){return t.emulator?zm(t,vL):`https://${t.authDomain}/${_L}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af="webStorageSupport";class TL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yx,this._completeRedirectFn=qM,this._overrideRedirectResult=$M}async _openPopup(e,n,r,i){var s;ir((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Wv(e,n,r,jp(),i);return mL(e,o,Km())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Wv(e,n,r,jp(),i);return SM(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ir(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await uL(e),r=new GM(e);return n.register("authEvent",i=>(Y(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(af,{type:af},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[af];o!==void 0&&n(!!o),rr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ZM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return zx()||Mx()||Wm()}}const IL=TL;var Hv="@firebase/auth",qv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bL(t){Rn(new mn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Y(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bx(t)},c=new iM(r,i,s,l);return uM(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Rn(new mn("auth-internal",e=>{const n=Hm(e.getProvider("auth").getImmediate());return(r=>new xL(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zt(Hv,qv,SL(t)),Zt(Hv,qv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL=5*60,AL=JT("authIdTokenMaxAge")||kL;let Kv=null;const PL=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>AL)return;const i=n==null?void 0:n.token;Kv!==i&&(Kv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function CL(t=nm()){const e=Ji(t,"auth");if(e.isInitialized())return e.getImmediate();const n=cM(t,{popupRedirectResolver:IL,persistence:[OM,TM,Yx]}),r=JT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=PL(s.toString());vM(n,o,()=>o(n.currentUser)),_M(n,a=>o(a))}}const i=YT("auth");return i&&hM(n,`http://${i}`),n}function RL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}sM({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Pn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",RL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bL("Browser");var DL="firebase",NL="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zt(DL,NL,"app");const rS="@firebase/installations",Qm="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=1e4,sS=`w:${Qm}`,oS="FIS_v2",OL="https://firebaseinstallations.googleapis.com/v1",ML=60*60*1e3,LL="installations",VL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Wi=new Xi(LL,VL,FL);function aS(t){return t instanceof _n&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS({projectId:t}){return`${OL}/projects/${t}/installations`}function cS(t){return{token:t.token,requestStatus:2,expiresIn:UL(t.expiresIn),creationTime:Date.now()}}async function uS(t,e){const r=(await e.json()).error;return Wi.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function hS({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function jL(t,{refreshToken:e}){const n=hS(t);return n.append("Authorization",zL(e)),n}async function dS(t){const e=await t();return e.status>=500&&e.status<600?t():e}function UL(t){return Number(t.replace("s","000"))}function zL(t){return`${oS} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BL({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=lS(t),i=hS(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:n,authVersion:oS,appId:t.appId,sdkVersion:sS},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await dS(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:cS(c.authToken)}}else throw await uS("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $L(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL=/^[cdef][\w-]{21}$/,Bp="";function HL(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=qL(t);return WL.test(n)?n:Bp}catch{return Bp}}function qL(t){return $L(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=new Map;function gS(t,e){const n=Hh(t);mS(n,e),KL(n,e)}function mS(t,e){const n=pS.get(t);if(n)for(const r of n)r(e)}function KL(t,e){const n=GL();n&&n.postMessage({key:t,fid:e}),QL()}let ki=null;function GL(){return!ki&&"BroadcastChannel"in self&&(ki=new BroadcastChannel("[Firebase] FID Change"),ki.onmessage=t=>{mS(t.data.key,t.data.fid)}),ki}function QL(){pS.size===0&&ki&&(ki.close(),ki=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL="firebase-installations-database",XL=1,Hi="firebase-installations-store";let lf=null;function Ym(){return lf||(lf=iI(YL,XL,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Hi)}}})),lf}async function Gu(t,e){const n=Hh(t),i=(await Ym()).transaction(Hi,"readwrite"),s=i.objectStore(Hi),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&gS(t,e.fid),e}async function yS(t){const e=Hh(t),r=(await Ym()).transaction(Hi,"readwrite");await r.objectStore(Hi).delete(e),await r.done}async function qh(t,e){const n=Hh(t),i=(await Ym()).transaction(Hi,"readwrite"),s=i.objectStore(Hi),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&gS(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xm(t){let e;const n=await qh(t.appConfig,r=>{const i=JL(r),s=ZL(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===Bp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function JL(t){const e=t||{fid:HL(),registrationStatus:0};return _S(e)}function ZL(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Wi.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=eV(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:tV(t)}:{installationEntry:e}}async function eV(t,e){try{const n=await BL(t,e);return Gu(t.appConfig,n)}catch(n){throw aS(n)&&n.customData.serverCode===409?await yS(t.appConfig):await Gu(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function tV(t){let e=await Gv(t.appConfig);for(;e.registrationStatus===1;)await fS(100),e=await Gv(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Xm(t);return r||n}return e}function Gv(t){return qh(t,e=>{if(!e)throw Wi.create("installation-not-found");return _S(e)})}function _S(t){return nV(t)?{fid:t.fid,registrationStatus:0}:t}function nV(t){return t.registrationStatus===1&&t.registrationTime+iS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rV({appConfig:t,heartbeatServiceProvider:e},n){const r=iV(t,n),i=jL(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:sS,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await dS(()=>fetch(r,a));if(l.ok){const c=await l.json();return cS(c)}else throw await uS("Generate Auth Token",l)}function iV(t,{fid:e}){return`${lS(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jm(t,e=!1){let n;const r=await qh(t.appConfig,s=>{if(!vS(s))throw Wi.create("not-registered");const o=s.authToken;if(!e&&aV(o))return s;if(o.requestStatus===1)return n=sV(t,e),s;{if(!navigator.onLine)throw Wi.create("app-offline");const a=cV(s);return n=oV(t,a),a}});return n?await n:r.authToken}async function sV(t,e){let n=await Qv(t.appConfig);for(;n.authToken.requestStatus===1;)await fS(100),n=await Qv(t.appConfig);const r=n.authToken;return r.requestStatus===0?Jm(t,e):r}function Qv(t){return qh(t,e=>{if(!vS(e))throw Wi.create("not-registered");const n=e.authToken;return uV(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function oV(t,e){try{const n=await rV(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Gu(t.appConfig,r),n}catch(n){if(aS(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await yS(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Gu(t.appConfig,r)}throw n}}function vS(t){return t!==void 0&&t.registrationStatus===2}function aV(t){return t.requestStatus===2&&!lV(t)}function lV(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+ML}function cV(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function uV(t){return t.requestStatus===1&&t.requestTime+iS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hV(t){const e=t,{installationEntry:n,registrationPromise:r}=await Xm(e);return r?r.catch(console.error):Jm(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dV(t,e=!1){const n=t;return await fV(n),(await Jm(n,e)).token}async function fV(t){const{registrationPromise:e}=await Xm(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pV(t){if(!t||!t.options)throw cf("App Configuration");if(!t.name)throw cf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw cf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function cf(t){return Wi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS="installations",gV="installations-internal",mV=t=>{const e=t.getProvider("app").getImmediate(),n=pV(e),r=Ji(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},yV=t=>{const e=t.getProvider("app").getImmediate(),n=Ji(e,wS).getImmediate();return{getId:()=>hV(n),getToken:i=>dV(n,i)}};function _V(){Rn(new mn(wS,mV,"PUBLIC")),Rn(new mn(gV,yV,"PRIVATE"))}_V();Zt(rS,Qm);Zt(rS,Qm,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu="analytics",vV="firebase_id",wV="origin",EV=60*1e3,TV="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Zm="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt=new kh("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Bt=new Xi("analytics","Analytics",IV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(t){if(!t.startsWith(Zm)){const e=Bt.create("invalid-gtag-resource",{gtagURL:t});return Nt.warn(e.message),""}return t}function ES(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function SV(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function bV(t,e){const n=SV("firebase-js-sdk-policy",{createScriptURL:xV}),r=document.createElement("script"),i=`${Zm}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function kV(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function AV(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await ES(n)).find(c=>c.measurementId===i);l&&await e[l.appId]}}catch(a){Nt.error(a)}t("config",i,s)}async function PV(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await ES(n);for(const l of o){const c=a.find(d=>d.measurementId===l),h=c&&e[c.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Nt.error(s)}}function CV(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await PV(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await AV(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){Nt.error(a)}}return i}function RV(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=CV(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function DV(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Zm)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV=30,OV=1e3;class MV{constructor(e={},n=OV){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const TS=new MV;function LV(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function VV(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:LV(r)},s=TV.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Bt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function FV(t,e=TS,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Bt.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Bt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new zV;return setTimeout(async()=>{a.abort()},n!==void 0?n:EV),IS({appId:r,apiKey:i,measurementId:s},o,a,e)}async function IS(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=TS){var s;const{appId:o,measurementId:a}=t;try{await jV(r,e)}catch(l){if(a)return Nt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await VV(t);return i.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!UV(c)){if(i.deleteThrottleMetadata(o),a)return Nt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const h=Number((s=c==null?void 0:c.customData)===null||s===void 0?void 0:s.httpStatus)===503?V0(n,i.intervalMillis,NV):V0(n,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return i.setThrottleMetadata(o,d),Nt.debug(`Calling attemptFetch again in ${h} millis`),IS(t,d,r,i)}}function jV(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Bt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function UV(t){if(!(t instanceof _n)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class zV{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function BV(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $V(){if(eI())try{await tI()}catch(t){return Nt.warn(Bt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Nt.warn(Bt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function WV(t,e,n,r,i,s,o){var a;const l=FV(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&Nt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Nt.error(m)),e.push(l);const c=$V().then(m=>{if(m)return r.getId()}),[h,d]=await Promise.all([l,c]);DV(s)||bV(s,h.measurementId),i("js",new Date);const p=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return p[wV]="firebase",p.update=!0,d!=null&&(p[vV]=d),i("config",h.measurementId,p),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(e){this.app=e}_delete(){return delete ga[this.app.options.appId],Promise.resolve()}}let ga={},Yv=[];const Xv={};let uf="dataLayer",qV="gtag",Jv,xS,Zv=!1;function KV(){const t=[];if(ZT()&&t.push("This is a browser extension environment."),oR()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Bt.create("invalid-analytics-context",{errorInfo:e});Nt.warn(n.message)}}function GV(t,e,n){KV();const r=t.options.appId;if(!r)throw Bt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Nt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Bt.create("no-api-key");if(ga[r]!=null)throw Bt.create("already-exists",{id:r});if(!Zv){kV(uf);const{wrappedGtag:s,gtagCore:o}=RV(ga,Yv,Xv,uf,qV);xS=s,Jv=o,Zv=!0}return ga[r]=WV(t,Yv,Xv,e,Jv,uf,n),new HV(t)}function QV(t=nm()){t=It(t);const e=Ji(t,Qu);return e.isInitialized()?e.getImmediate():YV(t)}function YV(t,e={}){const n=Ji(t,Qu);if(n.isInitialized()){const i=n.getImmediate();if(Ba(e,n.getOptions()))return i;throw Bt.create("already-initialized")}return n.initialize({options:e})}function XV(t,e,n,r){t=It(t),BV(xS,ga[t.app.options.appId],e,n,r).catch(i=>Nt.error(i))}const ew="@firebase/analytics",tw="0.10.8";function JV(){Rn(new mn(Qu,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return GV(r,i,n)},"PUBLIC")),Rn(new mn("analytics-internal",t,"PRIVATE")),Zt(ew,tw),Zt(ew,tw,"esm2017");function t(e){try{const n=e.getProvider(Qu).getImmediate();return{logEvent:(r,i,s)=>XV(n,r,i,s)}}catch(n){throw Bt.create("interop-component-reg-failed",{reason:n})}}}JV();const ZV={apiKey:"AIzaSyAVTueD8Zu_yWoSH4FLMx-Sd5KZpqzu-dk",authDomain:"corevia-fitness-tracking.firebaseapp.com",projectId:"corevia-fitness-tracking",storageBucket:"corevia-fitness-tracking.firebasestorage.app",messagingSenderId:"118613268034",appId:"1:118613268034:web:eb0c8db85ee52b60f8ffdb",measurementId:"G-3HT5SN1CDP"},ey=sI(ZV);QV(ey);const Za=pO(ey),eF=CL(ey),tF=async()=>{try{await eF.signOut()}catch(t){console.error("로그아웃 에러:",t)}},nw=async t=>{try{const e=crypto.randomUUID(),n={userId:t.userId,date:new Date,part:t.part,mainExercise:{part:t.mainExercise.part,weight:t.mainExercise.weight,sets:Array.isArray(t.mainExercise.sets)?t.mainExercise.sets.map(r=>({reps:r.reps,isSuccess:r.isSuccess})):[]},accessoryExercises:Array.isArray(t.accessoryExercises)?t.accessoryExercises.map(r=>({name:r.name,weight:r.weight||0,reps:r.reps||0,sets:Array.isArray(r.sets)?r.sets.map(i=>({reps:i.reps,weight:i.weight})):[]})):[],notes:t.notes?t.notes.substring(0,300):"",isAllSuccess:t.mainExercise.sets.every(r=>r.isSuccess)};return await NO(fO(Za,"sessions",e),n),e}catch(e){throw console.error("세션 저장 중 오류:",e),e}},Ir={},ty=5*60*1e3,SS=async(t,e)=>{try{const n=`${t}-${e}`,r=Date.now();if(Ir[n]&&r-Ir[n].timestamp<ty)return Ir[n].data;const i=Bu(Uu(Za,"sessions"),bi("userId","==",t),bi("part","==",e),Vp("date","desc"),Fp(1)),s=await Fm(i);if(s.empty)return Ir[n]={data:null,timestamp:r},null;const o=s.docs[0],a=o.data(),l={...a,id:o.id,date:a.date.toDate()};return Ir[n]={data:l,timestamp:r},l}catch(n){return console.error("최근 세션 조회 에러:",n),null}},nF=(t,e)=>{if(e){const n=`${t}-${e}`;delete Ir[n],Object.keys(Dr).forEach(r=>{r.startsWith(`${t}-${e}`)&&delete Dr[r]})}else Object.keys(Ir).forEach(n=>{n.startsWith(`${t}`)&&delete Ir[n]}),Object.keys(Dr).forEach(n=>{n.startsWith(`${t}`)&&delete Dr[n]})},fc={},Dr={},rw=async(t,e,n=10,r=0,i=!1)=>{try{const s=`${t}-${e}-${r}-${n}`,o=Date.now();if(r===0&&Dr[s]&&o-Dr[s].timestamp<ty&&!i)return Dr[s].data;r===0&&(fc[`${t}-${e}`]=null);let a=Bu(Uu(Za,"sessions"),bi("userId","==",t),bi("part","==",e),Vp("date","desc"),Fp(n));const l=`${t}-${e}`;r>0&&fc[l]&&(a=Bu(Uu(Za,"sessions"),bi("userId","==",t),bi("part","==",e),Vp("date","desc"),SO(fc[l]),Fp(n)));const c=await Fm(a);c.empty||(fc[l]=c.docs[c.docs.length-1]);const h=c.docs.map(d=>{const p=d.data(),m=Array.isArray(p.mainExercise.sets)?p.mainExercise.sets.filter(y=>y.isSuccess).length:0;return{date:p.date.toDate(),weight:p.mainExercise.weight,successSets:m,isSuccess:m===5,sets:p.mainExercise.sets,accessoryNames:Array.isArray(p.accessoryExercises)?p.accessoryExercises.map(y=>y.name):[]}});if(r===0){Dr[s]={data:h,timestamp:o};try{localStorage.setItem(`progress-${s}`,JSON.stringify({data:h,timestamp:o}))}catch(d){console.log("LocalStorage 캐시 저장 실패:",d)}}return h}catch(s){return console.error("진행 데이터 가져오기 오류:",s),[]}},pc={},rF=async t=>{try{const e=`faq-${t}`,n=Date.now();if(pc[e]&&n-pc[e].timestamp<ty)return pc[e].data;const r=Bu(Uu(Za,"faqs"),bi("part","==",t)),s=(await Fm(r)).docs.map(o=>({id:o.id,...o.data()}));return pc[e]={data:s,timestamp:n},s}catch(e){return console.error("FAQ 조회 에러:",e),[]}},iF=()=>{const t=co(),e=n=>t.pathname===n?"text-blue-500":"text-gray-500";return P.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 py-3",children:P.jsxs("div",{className:"container mx-auto flex justify-around items-center",children:[P.jsxs(oc,{to:"/",className:`flex flex-col items-center ${e("/")}`,children:[P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),P.jsx("span",{className:"text-xs mt-1",children:"홈"})]}),P.jsxs(oc,{to:"/graph",className:`flex flex-col items-center ${e("/graph")}`,children:[P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),P.jsx("span",{className:"text-xs mt-1",children:"그래프"})]}),P.jsxs(oc,{to:"/qna",className:`flex flex-col items-center ${e("/qna")}`,children:[P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),P.jsx("span",{className:"text-xs mt-1",children:"Q&A"})]}),P.jsxs(oc,{to:"/settings",className:`flex flex-col items-center ${e("/settings")}`,children:[P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),P.jsx("span",{className:"text-xs mt-1",children:"설정"})]})]})})},qi=({children:t,hideNav:e=!1})=>P.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900",children:[P.jsx("main",{className:"container mx-auto px-4 py-6 pb-20",children:t}),!e&&P.jsx(iF,{})]}),sF="/Corevia-Fitness-Tracking-Ver-2/assets/Corevia-logo-d2bb06a3.png",oF=[{value:"chest",label:"가슴",icon:"💪"},{value:"back",label:"등",icon:"🔙"},{value:"shoulder",label:"어깨",icon:"🏋️"},{value:"leg",label:"하체",icon:"🦵"}],aF=()=>{const t=uo(),{user:e}=hl(),{setPart:n,resetSession:r,cacheLastSession:i,lastSessionCache:s}=Pr();if(!e)return P.jsx(qi,{children:P.jsx("div",{className:"text-center py-10 text-gray-500",children:"로그인 정보를 불러오는 중..."})});V.useEffect(()=>{r()},[r]);const o=l=>{n(l),t("/record"),s[l]===void 0&&SS(e.uid,l).then(c=>i(l,c??null)).catch(console.error)},a=new Date().toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"long"});return P.jsxs(qi,{children:[P.jsx("img",{src:sF,alt:"Corevia Fitness",className:"mx-auto mb-6 w-48"}),P.jsxs("div",{className:"mb-8 text-center",children:[P.jsxs("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:["안녕하세요, ",e.displayName||"회원","님!"]}),P.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a})]}),P.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-8",children:[P.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-6 text-center",children:"오늘은 어떤 운동을 하시나요?"}),P.jsx("div",{className:"grid grid-cols-2 gap-4",children:oF.map(l=>P.jsxs("button",{onClick:()=>o(l.value),className:"flex flex-col items-center justify-center p-6 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-blue-50 dark:hover:bg-gray-600 transition-colors",children:[P.jsx("span",{className:"text-4xl mb-3",children:l.icon}),P.jsx("span",{className:"text-lg font-medium text-gray-800 dark:text-white",children:l.label})]},l.value))})]})]})},lF=({initialWeight:t=20})=>{const{mainExercise:e,updateReps:n,toggleSuccess:r}=Pr(),[i,s]=V.useState(t);V.useEffect(()=>{!e&&i&&Pr.setState({mainExercise:{part:Pr.getState().part,weight:i,sets:[{reps:0,isSuccess:!1},{reps:0,isSuccess:!1},{reps:0,isSuccess:!1},{reps:0,isSuccess:!1},{reps:0,isSuccess:!1}]}})},[e,i]);const o=l=>{const c=Number(l.target.value);s(c),e&&Pr.setState({mainExercise:{...e,weight:c}})},a=(l,c)=>{const h=Number(c.target.value);n(l,h)};return e?P.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-6",children:[P.jsxs("div",{className:"mb-4",children:[P.jsx("label",{className:"block text-gray-700 dark:text-gray-300 font-medium mb-2",children:"무게 (kg)"}),P.jsx("input",{type:"number",value:i,onChange:o,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",min:"0",step:"2.5"})]}),P.jsxs("div",{className:"space-y-4",children:[P.jsx("h3",{className:"text-lg font-medium text-gray-800 dark:text-gray-200",children:"세트"}),e.sets.map((l,c)=>P.jsxs("div",{className:"flex items-center space-x-4",children:[P.jsx("div",{className:"flex-shrink-0 w-8",children:P.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:c+1})}),P.jsx("div",{className:"flex-grow",children:P.jsx("input",{type:"number",value:l.reps||"",onChange:h=>a(c,h),placeholder:"반복 횟수",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",min:"0"})}),P.jsx("div",{className:"flex-shrink-0",children:P.jsx("button",{type:"button",onClick:()=>r(c),className:`px-4 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 ${l.isSuccess?"bg-green-500 text-white focus:ring-green-500":"bg-gray-200 text-gray-700 dark:bg-gray-600 dark:text-gray-200 focus:ring-gray-500"}`,children:l.isSuccess?"성공":"실패"})})]},c))]})]}):null},hf={chest:["인클라인 덤벨 프레스","케이블 플라이","푸시업","펙덱 플라이"],back:["턱걸이","시티드 로우","랫풀다운","페이스풀"],shoulder:["사이드 레터럴 레이즈","프론트 레이즈","리버스 플라이","오버헤드 프레스"],leg:["레그 익스텐션","레그 컬","카프 레이즈","불가리안 스플릿 스쿼트"]},cF=({part:t})=>{var l;const{accessoryExercises:e,addAccessoryExercise:n,removeAccessoryExercise:r}=Pr(),[i,s]=V.useState({name:hf[t][0]||"",weight:10,reps:12,sets:3}),o=c=>{const{name:h,value:d}=c.target;s({...i,[h]:h==="name"?d:Number(d)})},a=c=>{c.preventDefault(),n(i),s({...i,name:hf[t][0]||""})};return P.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-6",children:[P.jsx("h3",{className:"text-lg font-medium text-gray-800 dark:text-gray-200 mb-4",children:"보조 운동"}),e.length>0&&P.jsxs("div",{className:"mb-6",children:[P.jsx("h4",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2",children:"추가된 보조 운동"}),P.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.map((c,h)=>P.jsxs("li",{className:"py-3 flex justify-between items-center",children:[P.jsxs("div",{children:[P.jsx("span",{className:"font-medium",children:c.name}),P.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[c.weight,"kg x ",c.reps,"회 x ",c.sets,"세트"]})]}),P.jsx("button",{type:"button",onClick:()=>r(h),className:"text-red-500 hover:text-red-700",children:"삭제"})]},h))})]}),P.jsxs("form",{onSubmit:a,className:"space-y-4",children:[P.jsxs("div",{children:[P.jsx("label",{className:"block text-gray-700 dark:text-gray-300 font-medium mb-2",children:"운동 선택"}),P.jsx("select",{name:"name",value:i.name,onChange:o,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:(l=hf[t])==null?void 0:l.map(c=>P.jsx("option",{value:c,children:c},c))})]}),P.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[P.jsxs("div",{children:[P.jsx("label",{className:"block text-gray-700 dark:text-gray-300 font-medium mb-2",children:"무게 (kg)"}),P.jsx("input",{type:"number",name:"weight",value:i.weight,onChange:o,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",min:"0",step:"2.5"})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-gray-700 dark:text-gray-300 font-medium mb-2",children:"반복"}),P.jsx("input",{type:"number",name:"reps",value:i.reps,onChange:o,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",min:"0"})]}),P.jsxs("div",{children:[P.jsx("label",{className:"block text-gray-700 dark:text-gray-300 font-medium mb-2",children:"세트"}),P.jsx("input",{type:"number",name:"sets",value:i.sets,onChange:o,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",min:"1"})]})]}),P.jsx("div",{children:P.jsx("button",{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-medium py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"추가하기"})})]})]})};let uF={data:""},hF=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||uF,dF=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,fF=/\/\*[^]*?\*\/|  +/g,iw=/\n+/g,xr=(t,e)=>{let n="",r="",i="";for(let s in t){let o=t[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":r+=s[1]=="f"?xr(o,s):s+"{"+xr(o,s[1]=="k"?"":e)+"}":typeof o=="object"?r+=xr(o,e?e.replace(/([^,])+/g,a=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=xr.p?xr.p(s,o):s+":"+o+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Mn={},bS=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+bS(t[n]);return e}return t},pF=(t,e,n,r,i)=>{let s=bS(t),o=Mn[s]||(Mn[s]=(l=>{let c=0,h=11;for(;c<l.length;)h=101*h+l.charCodeAt(c++)>>>0;return"go"+h})(s));if(!Mn[o]){let l=s!==t?t:(c=>{let h,d,p=[{}];for(;h=dF.exec(c.replace(fF,""));)h[4]?p.shift():h[3]?(d=h[3].replace(iw," ").trim(),p.unshift(p[0][d]=p[0][d]||{})):p[0][h[1]]=h[2].replace(iw," ").trim();return p[0]})(t);Mn[o]=xr(i?{["@keyframes "+o]:l}:l,n?"":"."+o)}let a=n&&Mn.g?Mn.g:null;return n&&(Mn.g=Mn[o]),((l,c,h,d)=>{d?c.data=c.data.replace(d,l):c.data.indexOf(l)===-1&&(c.data=h?l+c.data:c.data+l)})(Mn[o],e,r,a),o},gF=(t,e,n)=>t.reduce((r,i,s)=>{let o=e[s];if(o&&o.call){let a=o(n),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":xr(a,""):a===!1?"":a}return r+i+(o??"")},"");function Kh(t){let e=this||{},n=t.call?t(e.p):t;return pF(n.unshift?n.raw?gF(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,hF(e.target),e.g,e.o,e.k)}let kS,$p,Wp;Kh.bind({g:1});let sr=Kh.bind({k:1});function mF(t,e,n,r){xr.p=e,kS=t,$p=n,Wp=r}function ai(t,e){let n=this||{};return function(){let r=arguments;function i(s,o){let a=Object.assign({},s),l=a.className||i.className;n.p=Object.assign({theme:$p&&$p()},a),n.o=/ *go\d+/.test(l),a.className=Kh.apply(n,r)+(l?" "+l:""),e&&(a.ref=o);let c=t;return t[0]&&(c=a.as||t,delete a.as),Wp&&c[0]&&Wp(a),kS(c,a)}return e?e(i):i}}var yF=t=>typeof t=="function",Yu=(t,e)=>yF(t)?t(e):t,_F=(()=>{let t=0;return()=>(++t).toString()})(),AS=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),vF=20,PS=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,vF)};case 1:return{...t,toasts:t.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:n}=e;return PS(t,{type:t.toasts.find(s=>s.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(s=>s.id===r||r===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+i}))}}},Zc=[],Ai={toasts:[],pausedAt:void 0},ns=t=>{Ai=PS(Ai,t),Zc.forEach(e=>{e(Ai)})},wF={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},EF=(t={})=>{let[e,n]=V.useState(Ai),r=V.useRef(Ai);V.useEffect(()=>(r.current!==Ai&&n(Ai),Zc.push(n),()=>{let s=Zc.indexOf(n);s>-1&&Zc.splice(s,1)}),[]);let i=e.toasts.map(s=>{var o,a,l;return{...t,...t[s.type],...s,removeDelay:s.removeDelay||((o=t[s.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:s.duration||((a=t[s.type])==null?void 0:a.duration)||(t==null?void 0:t.duration)||wF[s.type],style:{...t.style,...(l=t[s.type])==null?void 0:l.style,...s.style}}});return{...e,toasts:i}},TF=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||_F()}),Tl=t=>(e,n)=>{let r=TF(e,t,n);return ns({type:2,toast:r}),r.id},Et=(t,e)=>Tl("blank")(t,e);Et.error=Tl("error");Et.success=Tl("success");Et.loading=Tl("loading");Et.custom=Tl("custom");Et.dismiss=t=>{ns({type:3,toastId:t})};Et.remove=t=>ns({type:4,toastId:t});Et.promise=(t,e,n)=>{let r=Et.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let s=e.success?Yu(e.success,i):void 0;return s?Et.success(s,{id:r,...n,...n==null?void 0:n.success}):Et.dismiss(r),i}).catch(i=>{let s=e.error?Yu(e.error,i):void 0;s?Et.error(s,{id:r,...n,...n==null?void 0:n.error}):Et.dismiss(r)}),t};var IF=(t,e)=>{ns({type:1,toast:{id:t,height:e}})},xF=()=>{ns({type:5,time:Date.now()})},ma=new Map,SF=1e3,bF=(t,e=SF)=>{if(ma.has(t))return;let n=setTimeout(()=>{ma.delete(t),ns({type:4,toastId:t})},e);ma.set(t,n)},kF=t=>{let{toasts:e,pausedAt:n}=EF(t);V.useEffect(()=>{if(n)return;let s=Date.now(),o=e.map(a=>{if(a.duration===1/0)return;let l=(a.duration||0)+a.pauseDuration-(s-a.createdAt);if(l<0){a.visible&&Et.dismiss(a.id);return}return setTimeout(()=>Et.dismiss(a.id),l)});return()=>{o.forEach(a=>a&&clearTimeout(a))}},[e,n]);let r=V.useCallback(()=>{n&&ns({type:6,time:Date.now()})},[n]),i=V.useCallback((s,o)=>{let{reverseOrder:a=!1,gutter:l=8,defaultPosition:c}=o||{},h=e.filter(m=>(m.position||c)===(s.position||c)&&m.height),d=h.findIndex(m=>m.id===s.id),p=h.filter((m,y)=>y<d&&m.visible).length;return h.filter(m=>m.visible).slice(...a?[p+1]:[0,p]).reduce((m,y)=>m+(y.height||0)+l,0)},[e]);return V.useEffect(()=>{e.forEach(s=>{if(s.dismissed)bF(s.id,s.removeDelay);else{let o=ma.get(s.id);o&&(clearTimeout(o),ma.delete(s.id))}})},[e]),{toasts:e,handlers:{updateHeight:IF,startPause:xF,endPause:r,calculateOffset:i}}},AF=sr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,PF=sr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,CF=sr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,RF=ai("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${AF} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${PF} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${CF} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,DF=sr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,NF=ai("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${DF} 1s linear infinite;
`,OF=sr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,MF=sr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,LF=ai("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${OF} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${MF} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,VF=ai("div")`
  position: absolute;
`,FF=ai("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,jF=sr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,UF=ai("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${jF} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,zF=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?V.createElement(UF,null,e):e:n==="blank"?null:V.createElement(FF,null,V.createElement(NF,{...r}),n!=="loading"&&V.createElement(VF,null,n==="error"?V.createElement(RF,{...r}):V.createElement(LF,{...r})))},BF=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,$F=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,WF="0%{opacity:0;} 100%{opacity:1;}",HF="0%{opacity:1;} 100%{opacity:0;}",qF=ai("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,KF=ai("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,GF=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=AS()?[WF,HF]:[BF(n),$F(n)];return{animation:e?`${sr(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${sr(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},QF=V.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?GF(t.position||e||"top-center",t.visible):{opacity:0},s=V.createElement(zF,{toast:t}),o=V.createElement(KF,{...t.ariaProps},Yu(t.message,t));return V.createElement(qF,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:s,message:o}):V.createElement(V.Fragment,null,s,o))});mF(V.createElement);var YF=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let s=V.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;r(t,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return V.createElement("div",{ref:s,className:e,style:n},i)},XF=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:AS()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},JF=Kh`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,gc=16,ZF=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,containerStyle:s,containerClassName:o})=>{let{toasts:a,handlers:l}=kF(n);return V.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:gc,left:gc,right:gc,bottom:gc,pointerEvents:"none",...s},className:o,onMouseEnter:l.startPause,onMouseLeave:l.endPause},a.map(c=>{let h=c.position||e,d=l.calculateOffset(c,{reverseOrder:t,gutter:r,defaultPosition:e}),p=XF(h,d);return V.createElement(YF,{id:c.id,key:c.id,onHeightUpdate:l.updateHeight,className:c.visible?JF:"",style:p},c.type==="custom"?Yu(c.message,c):i?i(c):V.createElement(QF,{toast:c,position:h}))}))},an=Et;const e4={chest:"가슴",back:"등",shoulder:"어깨",leg:"하체"},t4={chest:"벤치프레스",back:"데드리프트",shoulder:"오버헤드 프레스",leg:"스쿼트"},n4=t=>{try{const e=`${t.userId}-${t.part}-0-10`;console.log("updateLocalCache 호출됨, 키:",e);const n={date:t.date,weight:t.mainExercise.weight,successSets:t.mainExercise.sets.filter(i=>i.isSuccess).length,isSuccess:t.mainExercise.sets.filter(i=>i.isSuccess).length===5,sets:t.mainExercise.sets,accessoryNames:t.accessoryExercises?t.accessoryExercises.map(i=>i.name):[]},r=localStorage.getItem(`progress-${e}`);if(r)try{const i=JSON.parse(r);i.data=[n,...i.data||[]],localStorage.setItem(`progress-${e}`,JSON.stringify(i)),console.log("로컬 캐시 업데이트 성공")}catch(i){console.error("캐시 파싱 오류:",i);const s={data:[n],timestamp:Date.now()};localStorage.setItem(`progress-${e}`,JSON.stringify(s))}else{const i={data:[n],timestamp:Date.now()};localStorage.setItem(`progress-${e}`,JSON.stringify(i)),console.log("새 로컬 캐시 생성됨")}}catch(e){console.error("캐시 갱신 실패:",e)}},Sr={saveSession:t=>{try{const e=Sr.getAllSessions();return e.push({...t,offlineId:Date.now().toString(),pendingSync:!0,createdAt:new Date().toISOString()}),localStorage.setItem("offlineSessions",JSON.stringify(e)),localStorage.setItem("hasPendingSessions","true"),!0}catch(e){return console.error("오프라인 저장 실패:",e),!1}},getAllSessions:()=>{try{const t=localStorage.getItem("offlineSessions");return t?JSON.parse(t):[]}catch(t){return console.error("오프라인 데이터 조회 실패:",t),[]}},getPendingCount:()=>{try{return Sr.getAllSessions().filter(e=>e.pendingSync).length}catch{return 0}},cleanupOldData:()=>{try{const t=Sr.getAllSessions(),e=new Date;e.setDate(e.getDate()-30);const n=t.filter(r=>(r.createdAt?new Date(r.createdAt):new Date(0))>e);return localStorage.setItem("offlineSessions",JSON.stringify(n)),!0}catch{return!1}}};function r4(){const{user:t}=hl(),{part:e,mainExercise:n,accessoryExercises:r,notes:i,setNotes:s,setMainExercise:o}=Pr(),[a,l]=V.useState(null),[c,h]=V.useState(!1),[d,p]=V.useState(!1),[m,y]=V.useState(navigator.onLine),w=uo();V.useEffect(()=>{const S=()=>{y(!0),an.success("인터넷에 다시 연결되었습니다"),I()},R=()=>{y(!1),an.warning("오프라인 모드로 전환되었습니다")};return window.addEventListener("online",S),window.addEventListener("offline",R),()=>{window.removeEventListener("online",S),window.removeEventListener("offline",R)}},[]),V.useEffect(()=>{if(!e){w("/");return}if(!t)return;let S=!0;return SS(t.uid,e).then(R=>{if(S&&(l(R),R!=null&&R.mainExercise)){const N=R.mainExercise.sets.every(M=>M.isSuccess)?2.5:0;o({part:e,weight:R.mainExercise.weight+N,sets:Array(5).fill({reps:0,isSuccess:!1})})}}),()=>{S=!1}},[t,e,w,o]),V.useEffect(()=>{t&&(localStorage.getItem("hasPendingSessions")==="true"&&navigator.onLine&&I(),Sr.cleanupOldData())},[t]);const I=async()=>{if(!(!navigator.onLine||!t||!(localStorage.getItem("hasPendingSessions")==="true")))try{const R=Sr.getAllSessions(),N=R.filter(C=>C.pendingSync);if(N.length===0){localStorage.removeItem("hasPendingSessions");return}const M=an.loading(`오프라인 데이터 동기화 중... (0/${N.length})`);let x=0;const v=[],b=3;for(let C=0;C<N.length;C+=b){const D=N.slice(C,C+b);(await Promise.allSettled(D.map(we=>nw(we)))).forEach((we,oe)=>{we.status==="fulfilled"?(x++,D[oe].pendingSync=!1):v.push(D[oe])}),an.loading(`오프라인 데이터 동기화 중... (${x}/${N.length})`,{id:M})}const k=R.filter(C=>!C.pendingSync||v.includes(C));localStorage.setItem("offlineSessions",JSON.stringify(k)),v.length===0?(localStorage.removeItem("hasPendingSessions"),an.success(`✅ ${x}개 세션 동기화 완료!`,{id:M})):(localStorage.setItem("hasPendingSessions","true"),an.success(`✅ ${x}개 동기화, ${v.length}개 실패`,{id:M}))}catch(R){console.error("동기화 과정 오류:",R),an.error("❌ 동기화 중 오류가 발생했습니다")}},_=S=>{try{return Sr.saveSession(S)?(an.success("✅ 오프라인에 저장되었습니다"),h(!1),p(!0),setTimeout(()=>{w("/feedback",{replace:!0})},500),!0):!1}catch(R){return console.error("오프라인 저장 실패:",R),an.error("❌ 저장에 실패했습니다"),h(!1),!1}},T=async()=>{if(!(!t||!e||!n)){h(!0),p(!1);try{const S={part:e,weight:n.weight,sets:n.sets.map(M=>({reps:M.reps,isSuccess:M.isSuccess}))},R=Array.isArray(r)?r.map(M=>({name:M.name,sets:Array.isArray(M.sets)?M.sets.map(x=>({reps:x.reps,weight:x.weight})):[],weight:M.weight||0,reps:M.reps||0})):[],N={userId:t.uid,date:new Date,part:e,mainExercise:S,accessoryExercises:R,notes:i?i.substring(0,300):"",isAllSuccess:n.sets.every(M=>M.isSuccess)};if(!navigator.onLine){_(N);return}an.success("✅ 저장 중..."),nw(N).then(()=>{n4(N)}).catch(M=>{console.error("[saveSession error]",(M==null?void 0:M.message)||M),Sr.saveSession(N)}),h(!1),p(!0),localStorage.setItem("shouldRefreshGraph","true"),setTimeout(()=>{w("/feedback",{replace:!0})},500)}catch(S){console.error("[saveSession 오류]",(S==null?void 0:S.message)||S),an.error("❌ 저장 실패! 오프라인으로 저장합니다.");const R={part:e,weight:n.weight,sets:n.sets.map(x=>({reps:x.reps,isSuccess:x.isSuccess}))},N=Array.isArray(r)?r.map(x=>({name:x.name,sets:Array.isArray(x.sets)?x.sets.map(v=>({reps:v.reps,weight:v.weight})):[],weight:x.weight||0,reps:x.reps||0})):[],M={userId:t.uid,date:new Date,part:e,mainExercise:R,accessoryExercises:N,notes:i?i.substring(0,300):"",isAllSuccess:n.sets.every(x=>x.isSuccess)};_(M)}}};return P.jsxs(qi,{children:[P.jsx(ZF,{position:"top-center",gutter:12}),c&&!d&&P.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:P.jsx("div",{className:"h-12 w-12 border-4 border-white/60 border-t-transparent rounded-full animate-spin"})}),!m&&P.jsxs("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-2 mb-4 rounded",children:[P.jsx("p",{className:"text-sm font-medium",children:"오프라인 모드 - 인터넷 연결이 없습니다"}),P.jsx("p",{className:"text-xs",children:"데이터는 기기에 임시 저장되고 인터넷 연결 시 동기화됩니다"})]}),localStorage.getItem("hasPendingSessions")==="true"&&m&&P.jsx("div",{className:"bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4 mb-4 rounded",children:P.jsxs("div",{className:"flex justify-between items-center",children:[P.jsxs("p",{className:"text-sm font-medium",children:["동기화되지 않은 데이터가 있습니다",P.jsxs("span",{className:"text-xs ml-2",children:["(",Sr.getPendingCount(),"개)"]})]}),P.jsx("button",{onClick:I,className:"ml-4 bg-blue-500 hover:bg-blue-600 text-white text-xs px-3 py-1 rounded",children:"지금 동기화"})]})}),P.jsxs("div",{className:"mb-6",children:[P.jsxs("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:[e4[e]||"운동"," 기록하기"]}),P.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:new Date().toLocaleDateString("ko-KR")})]}),P.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 rounded-lg p-4 mb-4",children:P.jsxs("h2",{className:"font-semibold text-gray-900 dark:text-white",children:["오늘의 핵심 운동:"," ",P.jsx("span",{className:"text-blue-600 dark:text-blue-300",children:t4[e]})]})}),a&&P.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900 rounded-lg p-4 mb-6",children:[P.jsxs("p",{className:"text-blue-700 dark:text-blue-300",children:["일자: ",new Date(a.date).toLocaleDateString("ko-KR")]}),P.jsxs("p",{className:"text-blue-700 dark:text-blue-300",children:["무게: ",a.mainExercise.weight,"kg"]}),P.jsxs("p",{className:"text-blue-700 dark:text-blue-300",children:["성공 세트: ",a.mainExercise.sets.filter(S=>S.isSuccess).length,"/5"]})]}),P.jsx(lF,{initialWeight:a!=null&&a.mainExercise.weight?a.mainExercise.sets.every(S=>S.isSuccess)?a.mainExercise.weight+2.5:a.mainExercise.weight:20}),e&&P.jsx(cF,{part:e}),P.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-6",children:[P.jsx("h3",{className:"text-lg font-medium mb-4 text-gray-800 dark:text-gray-200",children:"메모"}),P.jsx("textarea",{value:i,onChange:S=>s(S.target.value),placeholder:"오늘의 컨디션이나 특이사항을 기록해보세요.",className:"w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white",rows:3,maxLength:300}),P.jsxs("p",{className:"text-xs text-gray-500 mt-1 text-right",children:[i?i.length:0,"/300"]})]}),P.jsx("div",{className:"fixed bottom-20 left-0 right-0 p-4 bg-white dark:bg-gray-800 border-t dark:border-gray-700",children:P.jsx("button",{onClick:T,disabled:c||!n||n.sets.every(S=>S.reps===0),className:c?"w-full bg-gray-400 cursor-wait text-white py-3 rounded flex justify-center items-center":`w-full ${m?"bg-blue-500 hover:bg-blue-600":"bg-yellow-500 hover:bg-yellow-600"} text-white py-3 rounded`,children:c?P.jsxs(P.Fragment,{children:[P.jsx("span",{children:"저장 중"}),P.jsx("span",{className:"ml-2 dot-flashing"})]}):m?"저장하기":"오프라인 저장"})}),P.jsx("style",{children:`
        .dot-flashing {
          position: relative;
          width: 6px;
          height: 6px;
          border-radius: 3px;
          background-color: #fff;
          animation: dot-flashing 1s infinite linear alternate;
          animation-delay: .5s;
        }
        
        .dot-flashing::before, .dot-flashing::after {
          content: '';
          display: inline-block;
          position: absolute;
          top: 0;
        }
        
        .dot-flashing::before {
          left: -10px;
          width: 6px;
          height: 6px;
          border-radius: 3px;
          background-color: #fff;
          animation: dot-flashing 1s infinite alternate;
          animation-delay: 0s;
        }
        
        .dot-flashing::after {
          left: 10px;
          width: 6px;
          height: 6px;
          border-radius: 3px;
          background-color: #fff;
          animation: dot-flashing 1s infinite alternate;
          animation-delay: 1s;
        }
        
        @keyframes dot-flashing {
          0% { background-color: #fff; }
          50%, 100% { background-color: rgba(255, 255, 255, 0.2); }
        }
      `})]})}const sw={chest:"가슴",back:"등",shoulder:"어깨",leg:"하체"},i4=()=>{const{part:t,mainExercise:e,getSuccessSets:n,resetSession:r}=Pr(),i=uo();if(!t||!e)return i("/"),null;const s=n(),o=s===e.sets.length,a=o?e.weight+2.5:e.weight,l=()=>o?"축하합니다! 모든 세트를 성공적으로 완료했습니다. 다음 세션에는 무게를 증가시켜보세요.":s>=3?"좋은 퍼포먼스입니다! 대부분의 세트를 성공했습니다. 다음 세션에서도 같은 무게로 도전해보세요.":s>=1?"몇 세트를 성공했습니다. 다음 세션에서도 같은 무게로 도전하고 더 많은 세트를 성공해보세요.":"이번 세션에서는 모든 세트를 완료하지 못했습니다. 다음 세션에서는 무게를 줄이는 것을 고려해보세요.",c=()=>{r(),i("/")};return P.jsxs(qi,{children:[P.jsxs("div",{className:"mb-6",children:[P.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"피드백"}),P.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:new Date().toLocaleDateString("ko-KR")})]}),P.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 mb-6",children:[P.jsxs("div",{className:`p-4 mb-6 rounded-lg ${o?"bg-green-100 dark:bg-green-900":"bg-yellow-100 dark:bg-yellow-900"}`,children:[P.jsx("h2",{className:`text-xl font-semibold mb-2 ${o?"text-green-800 dark:text-green-200":"text-yellow-800 dark:text-yellow-200"}`,children:o?"🎉 완벽한 세션!":"🔥 노력하는 중!"}),P.jsx("p",{className:o?"text-green-700 dark:text-green-300":"text-yellow-700 dark:text-yellow-300",children:l()})]}),P.jsxs("div",{className:"mb-6",children:[P.jsx("h3",{className:"text-lg font-medium text-gray-800 dark:text-gray-200 mb-4",children:"세션 요약"}),P.jsxs("div",{className:"space-y-3",children:[P.jsxs("div",{className:"flex justify-between",children:[P.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"운동 부위"}),P.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:sw[t]})]}),P.jsxs("div",{className:"flex justify-between",children:[P.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"무게"}),P.jsxs("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:[e.weight," kg"]})]}),P.jsxs("div",{className:"flex justify-between",children:[P.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"성공 세트"}),P.jsxs("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:[s," / ",e.sets.length]})]})]})]}),P.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[P.jsx("h3",{className:"text-lg font-medium text-gray-800 dark:text-gray-200 mb-4",children:"다음 목표"}),P.jsx("div",{className:"bg-blue-50 dark:bg-blue-900 rounded-lg p-4",children:P.jsxs("p",{className:"text-blue-700 dark:text-blue-300",children:["다음 ",sw[t]," 운동 세션에서는 ",P.jsxs("strong",{children:[a," kg"]}),"으로 도전해보세요!"]})})]})]}),P.jsx("div",{className:"fixed bottom-20 left-0 right-0 p-4 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:P.jsx("button",{onClick:c,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-medium py-3 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"완료"})})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Il(t){return t+.5|0}const Nr=(t,e,n)=>Math.max(Math.min(t,n),e);function Jo(t){return Nr(Il(t*2.55),0,255)}function Qr(t){return Nr(Il(t*255),0,255)}function zn(t){return Nr(Il(t/2.55)/100,0,1)}function ow(t){return Nr(Il(t*100),0,100)}const qt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Hp=[..."0123456789ABCDEF"],s4=t=>Hp[t&15],o4=t=>Hp[(t&240)>>4]+Hp[t&15],mc=t=>(t&240)>>4===(t&15),a4=t=>mc(t.r)&&mc(t.g)&&mc(t.b)&&mc(t.a);function l4(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&qt[t[1]]*17,g:255&qt[t[2]]*17,b:255&qt[t[3]]*17,a:e===5?qt[t[4]]*17:255}:(e===7||e===9)&&(n={r:qt[t[1]]<<4|qt[t[2]],g:qt[t[3]]<<4|qt[t[4]],b:qt[t[5]]<<4|qt[t[6]],a:e===9?qt[t[7]]<<4|qt[t[8]]:255})),n}const c4=(t,e)=>t<255?e(t):"";function u4(t){var e=a4(t)?s4:o4;return t?"#"+e(t.r)+e(t.g)+e(t.b)+c4(t.a,e):void 0}const h4=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function CS(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function d4(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function f4(t,e,n){const r=CS(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function p4(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function ny(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,h;return s!==o&&(h=s-o,c=a>.5?h/(2-s-o):h/(s+o),l=p4(n,r,i,h,s),l=l*60+.5),[l|0,c||0,a]}function ry(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Qr)}function iy(t,e,n){return ry(CS,t,e,n)}function g4(t,e,n){return ry(f4,t,e,n)}function m4(t,e,n){return ry(d4,t,e,n)}function RS(t){return(t%360+360)%360}function y4(t){const e=h4.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Jo(+e[5]):Qr(+e[5]));const i=RS(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=g4(i,s,o):e[1]==="hsv"?r=m4(i,s,o):r=iy(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function _4(t,e){var n=ny(t);n[0]=RS(n[0]+e),n=iy(n),t.r=n[0],t.g=n[1],t.b=n[2]}function v4(t){if(!t)return;const e=ny(t),n=e[0],r=ow(e[1]),i=ow(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${zn(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const aw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},lw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function w4(){const t={},e=Object.keys(lw),n=Object.keys(aw);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,aw[s]);s=parseInt(lw[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let yc;function E4(t){yc||(yc=w4(),yc.transparent=[0,0,0,0]);const e=yc[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const T4=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function I4(t){const e=T4.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Jo(o):Nr(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Jo(r):Nr(r,0,255)),i=255&(e[4]?Jo(i):Nr(i,0,255)),s=255&(e[6]?Jo(s):Nr(s,0,255)),{r,g:i,b:s,a:n}}}function x4(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${zn(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const df=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,cs=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function S4(t,e,n){const r=cs(zn(t.r)),i=cs(zn(t.g)),s=cs(zn(t.b));return{r:Qr(df(r+n*(cs(zn(e.r))-r))),g:Qr(df(i+n*(cs(zn(e.g))-i))),b:Qr(df(s+n*(cs(zn(e.b))-s))),a:t.a+n*(e.a-t.a)}}function _c(t,e,n){if(t){let r=ny(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=iy(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function DS(t,e){return t&&Object.assign(e||{},t)}function cw(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Qr(t[3]))):(e=DS(t,{r:0,g:0,b:0,a:1}),e.a=Qr(e.a)),e}function b4(t){return t.charAt(0)==="r"?I4(t):y4(t)}class el{constructor(e){if(e instanceof el)return e;const n=typeof e;let r;n==="object"?r=cw(e):n==="string"&&(r=l4(e)||E4(e)||b4(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=DS(this._rgb);return e&&(e.a=zn(e.a)),e}set rgb(e){this._rgb=cw(e)}rgbString(){return this._valid?x4(this._rgb):void 0}hexString(){return this._valid?u4(this._rgb):void 0}hslString(){return this._valid?v4(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=S4(this._rgb,e._rgb,n)),this}clone(){return new el(this.rgb)}alpha(e){return this._rgb.a=Qr(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Il(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return _c(this._rgb,2,e),this}darken(e){return _c(this._rgb,2,-e),this}saturate(e){return _c(this._rgb,1,e),this}desaturate(e){return _c(this._rgb,1,-e),this}rotate(e){return _4(this._rgb,e),this}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ln(){}const k4=(()=>{let t=0;return()=>t++})();function he(t){return t==null}function Oe(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ce(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Ke(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Mt(t,e){return Ke(t)?t:e}function ge(t,e){return typeof t>"u"?e:t}const A4=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function De(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ue(t,e,n,r){let i,s,o;if(Oe(t))if(s=t.length,r)for(i=s-1;i>=0;i--)e.call(n,t[i],i);else for(i=0;i<s;i++)e.call(n,t[i],i);else if(ce(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function Xu(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Ju(t){if(Oe(t))return t.map(Ju);if(ce(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=Ju(t[n[i]]);return e}return t}function NS(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function P4(t,e,n,r){if(!NS(t))return;const i=e[t],s=n[t];ce(i)&&ce(s)?tl(i,s,r):e[t]=Ju(s)}function tl(t,e,n){const r=Oe(e)?e:[e],i=r.length;if(!ce(t))return t;n=n||{};const s=n.merger||P4;let o;for(let a=0;a<i;++a){if(o=r[a],!ce(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)s(l[c],t,o,n)}return t}function ya(t,e){return tl(t,e,{merger:C4})}function C4(t,e,n){if(!NS(t))return;const r=e[t],i=n[t];ce(r)&&ce(i)?ya(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Ju(i))}const uw={"":t=>t,x:t=>t.x,y:t=>t.y};function R4(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function D4(t){const e=R4(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Zu(t,e){return(uw[e]||(uw[e]=D4(e)))(t)}function sy(t){return t.charAt(0).toUpperCase()+t.slice(1)}const eh=t=>typeof t<"u",ti=t=>typeof t=="function",hw=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function N4(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Qe=Math.PI,en=2*Qe,O4=en+Qe,th=Number.POSITIVE_INFINITY,M4=Qe/180,Ft=Qe/2,fi=Qe/4,dw=Qe*2/3,Or=Math.log10,to=Math.sign;function _a(t,e,n){return Math.abs(t-e)<n}function fw(t){const e=Math.round(t);t=_a(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Or(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function L4(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function V4(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function nl(t){return!V4(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function F4(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function OS(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Mr(t){return t*(Qe/180)}function oy(t){return t*(180/Qe)}function pw(t){if(!Ke(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function j4(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*Qe&&(s+=en),{angle:s,distance:i}}function qp(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function U4(t,e){return(t-e+O4)%en-Qe}function un(t){return(t%en+en)%en}function MS(t,e,n,r){const i=un(t),s=un(e),o=un(n),a=un(s-i),l=un(o-i),c=un(i-s),h=un(i-o);return i===s||i===o||r&&s===o||a>l&&c<h}function Xt(t,e,n){return Math.max(e,Math.min(n,t))}function z4(t){return Xt(t,-32768,32767)}function B4(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function ay(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const Pi=(t,e,n,r)=>ay(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),$4=(t,e,n)=>ay(t,n,r=>t[r][e]>=n);function W4(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const LS=["push","pop","shift","splice","unshift"];function H4(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),LS.forEach(n=>{const r="_onData"+sy(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function gw(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(LS.forEach(s=>{delete t[s]}),delete t._chartjs)}function q4(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const VS=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function FS(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,VS.call(window,()=>{r=!1,t.apply(e,n)}))}}function K4(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const G4=t=>t==="start"?"left":t==="end"?"right":"center",mw=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2;function Q4(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=o.axis,{min:d,max:p,minDefined:m,maxDefined:y}=o.getUserBounds();if(m){if(i=Math.min(Pi(l,h,d).lo,n?r:Pi(e,h,o.getPixelForValue(d)).lo),c){const w=l.slice(0,i+1).reverse().findIndex(I=>!he(I[a.axis]));i-=Math.max(0,w)}i=Xt(i,0,r-1)}if(y){let w=Math.max(Pi(l,o.axis,p,!0).hi+1,n?0:Pi(e,h,o.getPixelForValue(p),!0).hi+1);if(c){const I=l.slice(w-1).findIndex(_=>!he(_[a.axis]));w+=Math.max(0,I)}s=Xt(w,i,r)-i}else s=r-i}return{start:i,count:s}}function Y4(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const vc=t=>t===0||t===1,yw=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*en/n)),_w=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*en/n)+1,va={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Ft)+1,easeOutSine:t=>Math.sin(t*Ft),easeInOutSine:t=>-.5*(Math.cos(Qe*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>vc(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>vc(t)?t:yw(t,.075,.3),easeOutElastic:t=>vc(t)?t:_w(t,.075,.3),easeInOutElastic(t){return vc(t)?t:t<.5?.5*yw(t*2,.1125,.45):.5+.5*_w(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-va.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?va.easeInBounce(t*2)*.5:va.easeOutBounce(t*2-1)*.5+.5};function ly(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function vw(t){return ly(t)?t:new el(t)}function ff(t){return ly(t)?t:new el(t).saturate(.5).darken(.1).hexString()}const X4=["x","y","borderWidth","radius","tension"],J4=["color","borderColor","backgroundColor"];function Z4(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:J4},numbers:{type:"number",properties:X4}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function ej(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const ww=new Map;function tj(t,e){e=e||{};const n=t+JSON.stringify(e);let r=ww.get(n);return r||(r=new Intl.NumberFormat(t,e),ww.set(n,r)),r}function cy(t,e,n){return tj(e,n).format(t)}const jS={values(t){return Oe(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=nj(t,n)}const o=Or(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),cy(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(Or(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?jS.numeric.call(this,t,e,n):""}};function nj(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Gh={formatters:jS};function rj(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Gh.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ki=Object.create(null),Kp=Object.create(null);function wa(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function pf(t,e,n){return typeof e=="string"?tl(wa(t,e),n):tl(wa(t,""),e)}class ij{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>ff(i.backgroundColor),this.hoverBorderColor=(r,i)=>ff(i.borderColor),this.hoverColor=(r,i)=>ff(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return pf(this,e,n)}get(e){return wa(this,e)}describe(e,n){return pf(Kp,e,n)}override(e,n){return pf(Ki,e,n)}route(e,n,r,i){const s=wa(this,e),o=wa(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return ce(l)?Object.assign({},c,l):ge(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Ve=new ij({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Z4,ej,rj]);function sj(t){return!t||he(t.size)||he(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function nh(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function oj(t,e,n,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,h,d,p;for(l=0;l<a;l++)if(d=n[l],d!=null&&!Oe(d))o=nh(t,i,s,o,d);else if(Oe(d))for(c=0,h=d.length;c<h;c++)p=d[c],p!=null&&!Oe(p)&&(o=nh(t,i,s,o,p));t.restore();const m=s.length/2;if(m>n.length){for(l=0;l<m;l++)delete i[s[l]];s.splice(0,m)}return o}function pi(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function Ew(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Gp(t,e,n,r){aj(t,e,n,r,null)}function aj(t,e,n,r,i){let s,o,a,l,c,h,d,p;const m=e.pointStyle,y=e.rotation,w=e.radius;let I=(y||0)*M4;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(I),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(w)||w<=0)){switch(t.beginPath(),m){default:i?t.ellipse(n,r,i/2,w,0,0,en):t.arc(n,r,w,0,en),t.closePath();break;case"triangle":h=i?i/2:w,t.moveTo(n+Math.sin(I)*h,r-Math.cos(I)*w),I+=dw,t.lineTo(n+Math.sin(I)*h,r-Math.cos(I)*w),I+=dw,t.lineTo(n+Math.sin(I)*h,r-Math.cos(I)*w),t.closePath();break;case"rectRounded":c=w*.516,l=w-c,o=Math.cos(I+fi)*l,d=Math.cos(I+fi)*(i?i/2-c:l),a=Math.sin(I+fi)*l,p=Math.sin(I+fi)*(i?i/2-c:l),t.arc(n-d,r-a,c,I-Qe,I-Ft),t.arc(n+p,r-o,c,I-Ft,I),t.arc(n+d,r+a,c,I,I+Ft),t.arc(n-p,r+o,c,I+Ft,I+Qe),t.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*w,h=i?i/2:l,t.rect(n-h,r-l,2*h,2*l);break}I+=fi;case"rectRot":d=Math.cos(I)*(i?i/2:w),o=Math.cos(I)*w,a=Math.sin(I)*w,p=Math.sin(I)*(i?i/2:w),t.moveTo(n-d,r-a),t.lineTo(n+p,r-o),t.lineTo(n+d,r+a),t.lineTo(n-p,r+o),t.closePath();break;case"crossRot":I+=fi;case"cross":d=Math.cos(I)*(i?i/2:w),o=Math.cos(I)*w,a=Math.sin(I)*w,p=Math.sin(I)*(i?i/2:w),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o);break;case"star":d=Math.cos(I)*(i?i/2:w),o=Math.cos(I)*w,a=Math.sin(I)*w,p=Math.sin(I)*(i?i/2:w),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o),I+=fi,d=Math.cos(I)*(i?i/2:w),o=Math.cos(I)*w,a=Math.sin(I)*w,p=Math.sin(I)*(i?i/2:w),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o);break;case"line":o=i?i/2:Math.cos(I)*w,a=Math.sin(I)*w,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(I)*(i?i/2:w),r+Math.sin(I)*w);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Kn(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function US(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function zS(t){t.restore()}function lj(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function cj(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function uj(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),he(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function hj(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,h=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function dj(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function rh(t,e,n,r,i,s={}){const o=Oe(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,uj(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&dj(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),he(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),hj(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function Qp(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Qe,Qe,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Qe,Ft,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Ft,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-Ft,!0),t.lineTo(n+o.topLeft,r)}const fj=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,pj=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function gj(t,e){const n=(""+t).match(fj);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const mj=t=>+t||0;function BS(t,e){const n={},r=ce(e),i=r?Object.keys(e):e,s=ce(t)?r?o=>ge(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=mj(s(o));return n}function yj(t){return BS(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Ea(t){return BS(t,["topLeft","topRight","bottomLeft","bottomRight"])}function rn(t){const e=yj(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function jt(t,e){t=t||{},e=e||Ve.font;let n=ge(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=ge(t.style,e.style);r&&!(""+r).match(pj)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:ge(t.family,e.family),lineHeight:gj(ge(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:ge(t.weight,e.weight),string:""};return i.string=sj(i),i}function wc(t,e,n,r){let i=!0,s,o,a;for(s=0,o=t.length;s<o;++s)if(a=t[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),i=!1),n!==void 0&&Oe(a)&&(a=a[n%a.length],i=!1),a!==void 0))return r&&!i&&(r.cacheable=!1),a}function _j(t,e,n){const{min:r,max:i}=t,s=A4(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function li(t,e){return Object.assign(Object.create(t),e)}function uy(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=qS("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>uy([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return WS(a,l,()=>bj(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return Iw(a).includes(l)},ownKeys(a){return Iw(a)},set(a,l,c){const h=a._storage||(a._storage=i());return a[l]=h[l]=c,delete a._keys,!0}})}function no(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:$S(t,r),setContext:s=>no(t,s,n,r),override:s=>no(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return WS(s,o,()=>wj(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function $S(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:ti(n)?n:()=>n,isIndexable:ti(r)?r:()=>r}}const vj=(t,e)=>t?t+sy(e):e,hy=(t,e)=>ce(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function WS(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function wj(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return ti(a)&&o.isScriptable(e)&&(a=Ej(e,a,t,n)),Oe(a)&&a.length&&(a=Tj(e,a,t,o.isIndexable)),hy(e,a)&&(a=no(a,i,s&&s[e],o)),a}function Ej(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),hy(t,l)&&(l=dy(i._scopes,i,t,l)),l}function Tj(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(ce(e[0])){const l=e,c=i._scopes.filter(h=>h!==l);e=[];for(const h of l){const d=dy(c,i,t,h);e.push(no(d,s,o&&o[t],a))}}return e}function HS(t,e,n){return ti(t)?t(e,n):t}const Ij=(t,e)=>t===!0?e:typeof t=="string"?Zu(e,t):void 0;function xj(t,e,n,r,i){for(const s of e){const o=Ij(n,s);if(o){t.add(o);const a=HS(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function dy(t,e,n,r){const i=e._rootScopes,s=HS(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=Tw(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=Tw(a,o,s,l,r),l===null)?!1:uy(Array.from(a),[""],i,s,()=>Sj(e,n,r))}function Tw(t,e,n,r,i){for(;n;)n=xj(t,e,n,r,i);return n}function Sj(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return Oe(i)&&ce(n)?n:i||{}}function bj(t,e,n,r){let i;for(const s of e)if(i=qS(vj(s,t),n),typeof i<"u")return hy(t,i)?dy(n,r,t,i):i}function qS(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function Iw(t){let e=t._keys;return e||(e=t._keys=kj(t._scopes)),e}function kj(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const Aj=Number.EPSILON||1e-14,ro=(t,e)=>e<t.length&&!t[e].skip&&t[e],KS=t=>t==="x"?"y":"x";function Pj(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=qp(s,i),l=qp(o,s);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const d=r*c,p=r*h;return{previous:{x:s.x-d*(o.x-i.x),y:s.y-d*(o.y-i.y)},next:{x:s.x+p*(o.x-i.x),y:s.y+p*(o.y-i.y)}}}function Cj(t,e,n){const r=t.length;let i,s,o,a,l,c=ro(t,0);for(let h=0;h<r-1;++h)if(l=c,c=ro(t,h+1),!(!l||!c)){if(_a(e[h],0,Aj)){n[h]=n[h+1]=0;continue}i=n[h]/e[h],s=n[h+1]/e[h],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=i*o*e[h],n[h+1]=s*o*e[h])}}function Rj(t,e,n="x"){const r=KS(n),i=t.length;let s,o,a,l=ro(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=ro(t,c+1),!a)continue;const h=a[n],d=a[r];o&&(s=(h-o[n])/3,a[`cp1${n}`]=h-s,a[`cp1${r}`]=d-s*e[c]),l&&(s=(l[n]-h)/3,a[`cp2${n}`]=h+s,a[`cp2${r}`]=d+s*e[c])}}function Dj(t,e="x"){const n=KS(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=ro(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=ro(t,o+1),!!l){if(c){const h=c[e]-l[e];i[o]=h!==0?(c[n]-l[n])/h:0}s[o]=a?c?to(i[o-1])!==to(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}Cj(t,i,s),Rj(t,s,e)}function Ec(t,e,n){return Math.max(Math.min(t,n),e)}function Nj(t,e){let n,r,i,s,o,a=Kn(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&Kn(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=Ec(i.cp1x,e.left,e.right),i.cp1y=Ec(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=Ec(i.cp2x,e.left,e.right),i.cp2y=Ec(i.cp2y,e.top,e.bottom)))}function Oj(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")Dj(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=Pj(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&Nj(t,n)}function fy(){return typeof window<"u"&&typeof document<"u"}function py(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function ih(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Qh=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Mj(t,e){return Qh(t).getPropertyValue(e)}const Lj=["top","right","bottom","left"];function Oi(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=Lj[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const Vj=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function Fj(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(Vj(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function wi(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=Qh(n),s=i.boxSizing==="border-box",o=Oi(i,"padding"),a=Oi(i,"border","width"),{x:l,y:c,box:h}=Fj(t,n),d=o.left+(h&&a.left),p=o.top+(h&&a.top);let{width:m,height:y}=e;return s&&(m-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-d)/m*n.width/r),y:Math.round((c-p)/y*n.height/r)}}function jj(t,e,n){let r,i;if(e===void 0||n===void 0){const s=t&&py(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Qh(s),l=Oi(a,"border","width"),c=Oi(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=ih(a.maxWidth,s,"clientWidth"),i=ih(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||th,maxHeight:i||th}}const Tc=t=>Math.round(t*10)/10;function Uj(t,e,n,r){const i=Qh(t),s=Oi(i,"margin"),o=ih(i.maxWidth,t,"clientWidth")||th,a=ih(i.maxHeight,t,"clientHeight")||th,l=jj(t,e,n);let{width:c,height:h}=l;if(i.boxSizing==="content-box"){const p=Oi(i,"border","width"),m=Oi(i,"padding");c-=m.width+p.width,h-=m.height+p.height}return c=Math.max(0,c-s.width),h=Math.max(0,r?c/r:h-s.height),c=Tc(Math.min(c,o,l.maxWidth)),h=Tc(Math.min(h,a,l.maxHeight)),c&&!h&&(h=Tc(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&h>l.height&&(h=l.height,c=Tc(Math.floor(h*r))),{width:c,height:h}}function xw(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const zj=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};fy()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Sw(t,e){const n=Mj(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Ei(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function Bj(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function $j(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Ei(t,i,n),a=Ei(i,s,n),l=Ei(s,e,n),c=Ei(o,a,n),h=Ei(a,l,n);return Ei(c,h,n)}const Wj=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},Hj=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function gf(t,e,n){return t?Wj(e,n):Hj()}function qj(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function Kj(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function GS(t){return t==="angle"?{between:MS,compare:U4,normalize:un}:{between:B4,compare:(e,n)=>e-n,normalize:e=>e}}function bw({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function Gj(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=GS(r),l=e.length;let{start:c,end:h,loop:d}=t,p,m;if(d){for(c+=l,h+=l,p=0,m=l;p<m&&o(a(e[c%l][r]),i,s);++p)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:d,style:t.style}}function Qj(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=GS(r),{start:h,end:d,loop:p,style:m}=Gj(t,e,n),y=[];let w=!1,I=null,_,T,S;const R=()=>l(i,S,_)&&a(i,S)!==0,N=()=>a(s,_)===0||l(s,S,_),M=()=>w||R(),x=()=>!w||N();for(let v=h,b=h;v<=d;++v)T=e[v%o],!T.skip&&(_=c(T[r]),_!==S&&(w=l(_,i,s),I===null&&M()&&(I=a(_,i)===0?v:b),I!==null&&x()&&(y.push(bw({start:I,end:v,loop:p,count:o,style:m})),I=null),b=v,S=_));return I!==null&&y.push(bw({start:I,end:d,loop:p,count:o,style:m})),y}function Yj(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=Qj(r[i],t.points,e);s.length&&n.push(...s)}return n}function Xj(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function Jj(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function Zj(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=Xj(n,i,s,r);if(r===!0)return kw(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return kw(t,Jj(n,o,l,c),n,e)}function kw(t,e,n,r){return!r||!r.setContext||!n?e:eU(t,e,n,r)}function eU(t,e,n,r){const i=t._chart.getContext(),s=Aw(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let h=s,d=e[0].start,p=d;function m(y,w,I,_){const T=a?-1:1;if(y!==w){for(y+=l;n[y%l].skip;)y-=T;for(;n[w%l].skip;)w+=T;y%l!==w%l&&(c.push({start:y%l,end:w%l,loop:I,style:_}),h=_,d=w%l)}}for(const y of e){d=a?d:y.start;let w=n[d%l],I;for(p=d+1;p<=y.end;p++){const _=n[p%l];I=Aw(r.setContext(li(i,{type:"segment",p0:w,p1:_,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:o}))),tU(I,h)&&m(d,p-1,y.loop,h),w=_,h=I}d<p-1&&m(d,p-1,y.loop,h)}return c}function Aw(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function tU(t,e){if(!e)return!1;const n=[],r=function(i,s){return ly(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Ic(t,e,n){return t.options.clip?t[n]:e[n]}function nU(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Ic(n,e,"left"),right:Ic(n,e,"right"),top:Ic(r,e,"top"),bottom:Ic(r,e,"bottom")}:e}function rU(t,e){const n=e._clip;if(n.disabled)return!1;const r=nU(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.4.9
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class iU{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=VS.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Vn=new iU;const Pw="transparent",sU={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=vw(t||Pw),i=r.valid&&vw(e||Pw);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class oU{constructor(e,n,r,i){const s=n[r];i=wc([e.to,i,s,e.from]);const o=wc([e.from,s,i]);this._active=!0,this._fn=e.fn||sU[e.type||typeof o],this._easing=va[e.easing]||va.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=wc([e.to,n,i,e.from]),this._from=wc([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class QS{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ce(e))return;const n=Object.keys(Ve.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!ce(s))return;const o={};for(const a of n)o[a]=s[a];(Oe(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=lU(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&aU(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const h=n[c];let d=s[c];const p=r.get(c);if(d)if(p&&d.active()){d.update(p,h,a);continue}else d.cancel();if(!p||!p.duration){e[c]=h;continue}s[c]=d=new oU(p,e,c,h),i.push(d)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Vn.add(this._chart,r),!0}}function aU(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function lU(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Cw(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function cU(t,e,n){if(n===!1)return!1;const r=Cw(t,n),i=Cw(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function uU(t){let e,n,r,i;return ce(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function YS(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function Rw(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e===null)return;let h=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(h=!0,r.all)continue;break}c=t.values[l],Ke(c)&&(s||e===0||to(e)===to(c))&&(e+=c)}return!h&&!r.all?0:e}function hU(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,h;for(l=0,c=o.length;l<c;++l)h=o[l],a[l]={[i]:h,[s]:t[h]};return a}function mf(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function dU(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function fU(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function pU(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function Dw(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function Nw(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,h=dU(s,o,r),d=e.length;let p;for(let m=0;m<d;++m){const y=e[m],{[l]:w,[c]:I}=y,_=y._stacks||(y._stacks={});p=_[c]=pU(i,h,w),p[a]=I,p._top=Dw(p,o,!0,r.type),p._bottom=Dw(p,o,!1,r.type);const T=p._visualValues||(p._visualValues={});T[a]=I}}function yf(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function gU(t,e){return li(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function mU(t,e,n){return li(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Uo(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const _f=t=>t==="reset"||t==="none",Ow=(t,e)=>e?t:Object.assign({},t),yU=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:YS(n,!0),values:null};class Ta{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=mf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Uo(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(d,p,m,y)=>d==="x"?p:d==="r"?y:m,s=n.xAxisID=ge(r.xAxisID,yf(e,"x")),o=n.yAxisID=ge(r.yAxisID,yf(e,"y")),a=n.rAxisID=ge(r.rAxisID,yf(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),h=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&gw(this._data,this),e._stacked&&Uo(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(ce(n)){const i=this._cachedMeta;this._data=hU(n,i)}else if(r!==n){if(r){gw(r,this);const i=this._cachedMeta;Uo(i),i._parsed=[]}n&&Object.isExtensible(n)&&H4(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=mf(n.vScale,n),n.stack!==r.stack&&(i=!0,Uo(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&(Nw(this,n._parsed),n._stacked=mf(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],h,d,p;if(this._parsing===!1)r._parsed=i,r._sorted=!0,p=i;else{Oe(i[e])?p=this.parseArrayData(r,i,e,n):ce(i[e])?p=this.parseObjectData(r,i,e,n):p=this.parsePrimitiveData(r,i,e,n);const m=()=>d[a]===null||c&&d[a]<c[a];for(h=0;h<n;++h)r._parsed[h+e]=d=p[h],l&&(m()&&(l=!1),c=d);r._sorted=l}o&&Nw(this,p)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),h=s===o,d=new Array(i);let p,m,y;for(p=0,m=i;p<m;++p)y=p+r,d[p]={[a]:h||s.parse(c[y],y),[l]:o.parse(n[y],y)};return d}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,h,d;for(l=0,c=i;l<c;++l)h=l+r,d=n[h],a[l]={x:s.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let h,d,p,m;for(h=0,d=i;h<d;++h)p=h+r,m=n[p],c[h]={x:s.parse(Zu(m,a),p),y:o.parse(Zu(m,l),p)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:YS(i,!0),values:n._stacks[e.axis]._visualValues};return Rw(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=Rw(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=yU(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=fU(a);let p,m;function y(){m=i[p];const w=m[a.axis];return!Ke(m[e.axis])||h>w||d<w}for(p=0;p<o&&!(!y()&&(this.updateRangeFromParsed(c,e,m,l),s));++p);if(s){for(p=o-1;p>=0;--p)if(!y()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],Ke(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=uU(ge(this.options.clip,cU(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let h;for(r.dataset&&r.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const d=i[h];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=mU(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=gU(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&eh(r);if(a)return Ow(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),d=i?[`${e}Hover`,"hover",e,""]:[e,""],p=c.getOptionScopes(this.getDataset(),h),m=Object.keys(Ve.elements[e]),y=()=>this.getContext(r,i,n),w=c.resolveNamedOptions(p,m,y,d);return w.$shared&&(w.$shared=l,s[o]=Object.freeze(Ow(w,l))),w}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),p=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(p,this.getContext(e,r,n))}const c=new QS(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||_f(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){_f(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!_f(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&Uo(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Q(Ta,"defaults",{}),Q(Ta,"datasetElementType",null),Q(Ta,"dataElementType",null);class eu extends Ta{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=Q4(n,i,o);this._drawStart=a,this._drawCount=l,Y4(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,i),p=o.axis,m=a.axis,{spanGaps:y,segment:w}=this.options,I=nl(y)?y:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||s||i==="none",T=n+r,S=e.length;let R=n>0&&this.getParsed(n-1);for(let N=0;N<S;++N){const M=e[N],x=_?M:{};if(N<n||N>=T){x.skip=!0;continue}const v=this.getParsed(N),b=he(v[m]),k=x[p]=o.getPixelForValue(v[p],N),C=x[m]=s||b?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,v,l):v[m],N);x.skip=isNaN(k)||isNaN(C)||b,x.stop=N>0&&Math.abs(v[p]-R[p])>I,w&&(x.parsed=v,x.raw=c.data[N]),d&&(x.options=h||this.resolveDataElementOptions(N,M.active?"active":i)),_||this.updateElement(M,N,x,i),R=v}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Q(eu,"id","line"),Q(eu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Q(eu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function gi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class gy{constructor(e){Q(this,"options");this.options=e||{}}static override(e){Object.assign(gy.prototype,e)}init(){}formats(){return gi()}parse(){return gi()}format(){return gi()}add(){return gi()}diff(){return gi()}startOf(){return gi()}endOf(){return gi()}}var _U={_date:gy};function vU(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?$4:Pi;if(r){if(i._sharedOptions){const h=s[0],d=typeof h.getRange=="function"&&h.getRange(e);if(d){const p=c(s,e,n-d),m=c(s,e,n+d);return{lo:p.lo,hi:m.hi}}}}else{const h=c(s,e,n);if(l){const{vScale:d}=i._cachedMeta,{_parsed:p}=t,m=p.slice(0,h.lo+1).reverse().findIndex(w=>!he(w[d.axis]));h.lo-=Math.max(0,m);const y=p.slice(h.hi).findIndex(w=>!he(w[d.axis]));h.hi+=Math.max(0,y)}return h}}return{lo:0,hi:s.length-1}}function xl(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:h}=s[a],{lo:d,hi:p}=vU(s[a],e,o,i);for(let m=d;m<=p;++m){const y=h[m];y.skip||r(y,c,m)}}}function wU(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function vf(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||xl(t,n,e,function(a,l,c){!i&&!Kn(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function EU(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],r),{angle:d}=j4(o,{x:e.x,y:e.y});MS(d,c,h)&&i.push({element:o,datasetIndex:a,index:l})}return xl(t,n,e,s),i}function TU(t,e,n,r,i,s){let o=[];const a=wU(n);let l=Number.POSITIVE_INFINITY;function c(h,d,p){const m=h.inRange(e.x,e.y,i);if(r&&!m)return;const y=h.getCenterPoint(i);if(!(!!s||t.isPointInArea(y))&&!m)return;const I=a(e,y);I<l?(o=[{element:h,datasetIndex:d,index:p}],l=I):I===l&&o.push({element:h,datasetIndex:d,index:p})}return xl(t,n,e,c),o}function wf(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?EU(t,e,n,i):TU(t,e,n,r,i,s)}function Mw(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return xl(t,n,e,(l,c,h)=>{l[o]&&l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var IU={evaluateInteractionItems:xl,modes:{index(t,e,n,r){const i=wi(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?vf(t,i,s,r,o):wf(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,d=c.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:h})}),l):[]},dataset(t,e,n,r){const i=wi(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?vf(t,i,s,r,o):wf(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(t,e,n,r){const i=wi(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return vf(t,i,s,r,o)},nearest(t,e,n,r){const i=wi(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return wf(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=wi(e,t);return Mw(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=wi(e,t);return Mw(t,i,"y",n.intersect,r)}}};const XS=["left","top","right","bottom"];function zo(t,e){return t.filter(n=>n.pos===e)}function Lw(t,e){return t.filter(n=>XS.indexOf(n.pos)===-1&&n.box.axis===e)}function Bo(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function xU(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function SU(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!XS.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function bU(t,e){const n=SU(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=h?h*i:l&&e.availableHeight)}return n}function kU(t){const e=xU(t),n=Bo(e.filter(c=>c.box.fullSize),!0),r=Bo(zo(e,"left"),!0),i=Bo(zo(e,"right")),s=Bo(zo(e,"top"),!0),o=Bo(zo(e,"bottom")),a=Lw(e,"x"),l=Lw(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:zo(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function Vw(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function JS(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function AU(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!ce(i)){n.size&&(t[i]-=n.size);const d=r[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[i]+=n.size}s.getPadding&&JS(o,s.getPadding());const a=Math.max(0,e.outerWidth-Vw(o,t,"left","right")),l=Math.max(0,e.outerHeight-Vw(o,t,"top","bottom")),c=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function PU(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function CU(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function Zo(t,e,n,r){const i=[];let s,o,a,l,c,h;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,CU(a.horizontal,e));const{same:d,other:p}=AU(e,n,a,r);c|=d&&i.length,h=h||p,l.fullSize||i.push(a)}return c&&Zo(i,e,n,r)||h}function xc(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function Fw(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*h,p=c.size||l.height;eh(c.start)&&(o=c.start),l.fullSize?xc(l,i.left,o,n.outerWidth-i.right-i.left,p):xc(l,e.left+c.placed,o,d,p),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*h,p=c.size||l.width;eh(c.start)&&(s=c.start),l.fullSize?xc(l,s,i.top,p,n.outerHeight-i.bottom-i.top):xc(l,s,e.top+c.placed,p,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var Sc={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=rn(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=kU(t.boxes),l=a.vertical,c=a.horizontal;ue(t.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});const h=l.reduce((w,I)=>I.box.options&&I.box.options.display===!1?w:w+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),p=Object.assign({},i);JS(p,rn(r));const m=Object.assign({maxPadding:p,w:s,h:o,x:i.left,y:i.top},i),y=bU(l.concat(c),d);Zo(a.fullSize,m,d,y),Zo(l,m,d,y),Zo(c,m,d,y)&&Zo(l,m,d,y),PU(m),Fw(a.leftAndTop,m,d,y),m.x+=m.w,m.y+=m.h,Fw(a.rightAndBottom,m,d,y),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},ue(a.chartArea,w=>{const I=w.box;Object.assign(I,t.chartArea),I.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class ZS{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class RU extends ZS{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const tu="$chartjs",DU={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},jw=t=>t===null||t==="";function NU(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[tu]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",jw(i)){const s=Sw(t,"width");s!==void 0&&(t.width=s)}if(jw(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=Sw(t,"height");s!==void 0&&(t.height=s)}return t}const eb=zj?{passive:!0}:!1;function OU(t,e,n){t&&t.addEventListener(e,n,eb)}function MU(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,eb)}function LU(t,e){const n=DU[t.type]||t.type,{x:r,y:i}=wi(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function sh(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function VU(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||sh(a.addedNodes,r),o=o&&!sh(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function FU(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||sh(a.removedNodes,r),o=o&&!sh(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const rl=new Map;let Uw=0;function tb(){const t=window.devicePixelRatio;t!==Uw&&(Uw=t,rl.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function jU(t,e){rl.size||window.addEventListener("resize",tb),rl.set(t,e)}function UU(t){rl.delete(t),rl.size||window.removeEventListener("resize",tb)}function zU(t,e,n){const r=t.canvas,i=r&&py(r);if(!i)return;const s=FS((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||s(c,h)});return o.observe(i),jU(t,s),o}function Ef(t,e,n){n&&n.disconnect(),e==="resize"&&UU(t)}function BU(t,e,n){const r=t.canvas,i=FS(s=>{t.ctx!==null&&n(LU(s,t))},t);return OU(r,e,i),i}class $U extends ZS{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(NU(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[tu])return!1;const r=n[tu].initial;["height","width"].forEach(s=>{const o=r[s];he(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[tu],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:VU,detach:FU,resize:zU}[n]||BU;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:Ef,detach:Ef,resize:Ef}[n]||MU)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return Uj(e,n,r,i)}isAttached(e){const n=e&&py(e);return!!(n&&n.isConnected)}}function WU(t){return!fy()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?RU:$U}class Gi{constructor(){Q(this,"x");Q(this,"y");Q(this,"active",!1);Q(this,"options");Q(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return nl(this.x)&&nl(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}}Q(Gi,"defaults",{}),Q(Gi,"defaultRoutes");function HU(t,e){const n=t.options.ticks,r=qU(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?GU(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return QU(e,c,s,o/i),c;const h=KU(s,e,i);if(o>0){let d,p;const m=o>1?Math.round((l-a)/(o-1)):null;for(bc(e,c,h,he(m)?0:a-m,a),d=0,p=o-1;d<p;d++)bc(e,c,h,s[d],s[d+1]);return bc(e,c,h,l,he(m)?e.length:l+m),c}return bc(e,c,h),c}function qU(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function KU(t,e,n){const r=YU(t),i=e.length/n;if(!r)return Math.max(i,1);const s=L4(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function GU(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function QU(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function bc(t,e,n,r,i){const s=ge(r,0),o=Math.min(ge(i,t.length),t.length);let a=0,l,c,h;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),h=s;h<0;)a++,h=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===h&&(e.push(t[c]),a++,h=Math.round(s+a*n))}function YU(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const XU=t=>t==="left"?"right":t==="right"?"left":t,zw=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Bw=(t,e)=>Math.min(e||t,t);function $w(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function JU(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function ZU(t,e){ue(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function $o(t){return t.drawTicks?t.tickLength:0}function Ww(t,e){if(!t.display)return 0;const n=jt(t.font,e),r=rn(t.padding);return(Oe(t.text)?t.text.length:1)*n.lineHeight+r.height}function e3(t,e){return li(t,{scale:e,type:"scale"})}function t3(t,e,n){return li(t,{tick:n,index:e,type:"tick"})}function n3(t,e,n){let r=G4(t);return(n&&e!=="right"||!n&&e==="right")&&(r=XU(r)),r}function r3(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:h}=l;let d=0,p,m,y;const w=o-i,I=a-s;if(t.isHorizontal()){if(m=mw(r,s,a),ce(n)){const _=Object.keys(n)[0],T=n[_];y=h[_].getPixelForValue(T)+w-e}else n==="center"?y=(c.bottom+c.top)/2+w-e:y=zw(t,n,e);p=a-s}else{if(ce(n)){const _=Object.keys(n)[0],T=n[_];m=h[_].getPixelForValue(T)-I+e}else n==="center"?m=(c.left+c.right)/2-I+e:m=zw(t,n,e);y=mw(r,o,i),d=n==="left"?-Ft:Ft}return{titleX:m,titleY:y,maxWidth:p,rotation:d}}class rs extends Gi{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=Mt(e,Number.POSITIVE_INFINITY),n=Mt(n,Number.NEGATIVE_INFINITY),r=Mt(r,Number.POSITIVE_INFINITY),i=Mt(i,Number.NEGATIVE_INFINITY),{min:Mt(e,r),max:Mt(n,i),minDefined:Ke(e),maxDefined:Ke(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:Mt(n,Mt(r,n)),max:Mt(r,Mt(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){De(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=_j(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?$w(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=HU(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){De(this.options.afterUpdate,[this])}beforeSetDimensions(){De(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){De(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),De(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){De(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=De(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){De(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){De(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=Bw(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const h=this._getLabelSizes(),d=h.widest.width,p=h.highest.height,m=Xt(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/r:m/(r-1),d+6>a&&(a=m/(r-(e.offset?.5:1)),l=this.maxHeight-$o(e.grid)-n.padding-Ww(e.title,this.chart.options.font),c=Math.sqrt(d*d+p*p),o=oy(Math.min(Math.asin(Xt((h.highest.height+6)/a,-1,1)),Math.asin(Xt(l/c,-1,1))-Math.asin(Xt(p/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){De(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){De(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Ww(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=$o(s)+l):(e.height=this.maxHeight,e.width=$o(s)+l),r.display&&this.ticks.length){const{first:c,last:h,widest:d,highest:p}=this._getLabelSizes(),m=r.padding*2,y=Mr(this.labelRotation),w=Math.cos(y),I=Math.sin(y);if(a){const _=r.mirror?0:I*d.width+w*p.height;e.height=Math.min(this.maxHeight,e.height+_+m)}else{const _=r.mirror?0:w*d.width+I*p.height;e.width=Math.min(this.maxWidth,e.width+_+m)}this._calculatePadding(c,h,I,w)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,m=0;l?c?(p=i*e.width,m=r*n.height):(p=r*e.height,m=i*n.width):s==="start"?m=n.width:s==="end"?p=e.width:s!=="inner"&&(p=e.width/2,m=n.width/2),this.paddingLeft=Math.max((p-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((m-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=e.height/2;s==="start"?(h=0,d=e.height):s==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){De(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)he(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=$w(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/Bw(n,r));let c=0,h=0,d,p,m,y,w,I,_,T,S,R,N;for(d=0;d<n;d+=l){if(y=e[d].label,w=this._resolveTickFontOptions(d),i.font=I=w.string,_=s[I]=s[I]||{data:{},gc:[]},T=w.lineHeight,S=R=0,!he(y)&&!Oe(y))S=nh(i,_.data,_.gc,S,y),R=T;else if(Oe(y))for(p=0,m=y.length;p<m;++p)N=y[p],!he(N)&&!Oe(N)&&(S=nh(i,_.data,_.gc,S,N),R+=T);o.push(S),a.push(R),c=Math.max(S,c),h=Math.max(R,h)}ZU(s,n);const M=o.indexOf(c),x=a.indexOf(h),v=b=>({width:o[b]||0,height:a[b]||0});return{first:v(0),last:v(n-1),widest:v(M),highest:v(x),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return z4(this._alignToPixels?pi(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=t3(this.getContext(),e,r))}return this.$context||(this.$context=e3(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Mr(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),p=$o(s),m=[],y=a.setContext(this.getContext()),w=y.display?y.width:0,I=w/2,_=function(Se){return pi(r,Se,w)};let T,S,R,N,M,x,v,b,k,C,D,A;if(o==="top")T=_(this.bottom),x=this.bottom-p,b=T-I,C=_(e.top)+I,A=e.bottom;else if(o==="bottom")T=_(this.top),C=e.top,A=_(e.bottom)-I,x=T+I,b=this.top+p;else if(o==="left")T=_(this.right),M=this.right-p,v=T-I,k=_(e.left)+I,D=e.right;else if(o==="right")T=_(this.left),k=e.left,D=_(e.right)-I,M=T+I,v=this.left+p;else if(n==="x"){if(o==="center")T=_((e.top+e.bottom)/2+.5);else if(ce(o)){const Se=Object.keys(o)[0],Ce=o[Se];T=_(this.chart.scales[Se].getPixelForValue(Ce))}C=e.top,A=e.bottom,x=T+I,b=x+p}else if(n==="y"){if(o==="center")T=_((e.left+e.right)/2);else if(ce(o)){const Se=Object.keys(o)[0],Ce=o[Se];T=_(this.chart.scales[Se].getPixelForValue(Ce))}M=T-I,v=M-p,k=e.left,D=e.right}const we=ge(i.ticks.maxTicksLimit,d),oe=Math.max(1,Math.ceil(d/we));for(S=0;S<d;S+=oe){const Se=this.getContext(S),Ce=s.setContext(Se),B=a.setContext(Se),K=Ce.lineWidth,G=Ce.color,pe=B.dash||[],re=B.dashOffset,me=Ce.tickWidth,Ye=Ce.tickColor,yt=Ce.tickBorderDash||[],Xe=Ce.tickBorderDashOffset;R=JU(this,S,l),R!==void 0&&(N=pi(r,R,K),c?M=v=k=D=N:x=b=C=A=N,m.push({tx1:M,ty1:x,tx2:v,ty2:b,x1:k,y1:C,x2:D,y2:A,width:K,color:G,borderDash:pe,borderDashOffset:re,tickWidth:me,tickColor:Ye,tickBorderDash:yt,tickBorderDashOffset:Xe}))}return this._ticksLength=d,this._borderValue=T,m}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=s,p=$o(r.grid),m=p+h,y=d?-h:m,w=-Mr(this.labelRotation),I=[];let _,T,S,R,N,M,x,v,b,k,C,D,A="middle";if(i==="top")M=this.bottom-y,x=this._getXAxisLabelAlignment();else if(i==="bottom")M=this.top+y,x=this._getXAxisLabelAlignment();else if(i==="left"){const oe=this._getYAxisLabelAlignment(p);x=oe.textAlign,N=oe.x}else if(i==="right"){const oe=this._getYAxisLabelAlignment(p);x=oe.textAlign,N=oe.x}else if(n==="x"){if(i==="center")M=(e.top+e.bottom)/2+m;else if(ce(i)){const oe=Object.keys(i)[0],Se=i[oe];M=this.chart.scales[oe].getPixelForValue(Se)+m}x=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")N=(e.left+e.right)/2-m;else if(ce(i)){const oe=Object.keys(i)[0],Se=i[oe];N=this.chart.scales[oe].getPixelForValue(Se)}x=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(l==="start"?A="top":l==="end"&&(A="bottom"));const we=this._getLabelSizes();for(_=0,T=a.length;_<T;++_){S=a[_],R=S.label;const oe=s.setContext(this.getContext(_));v=this.getPixelForTick(_)+s.labelOffset,b=this._resolveTickFontOptions(_),k=b.lineHeight,C=Oe(R)?R.length:1;const Se=C/2,Ce=oe.color,B=oe.textStrokeColor,K=oe.textStrokeWidth;let G=x;o?(N=v,x==="inner"&&(_===T-1?G=this.options.reverse?"left":"right":_===0?G=this.options.reverse?"right":"left":G="center"),i==="top"?c==="near"||w!==0?D=-C*k+k/2:c==="center"?D=-we.highest.height/2-Se*k+k:D=-we.highest.height+k/2:c==="near"||w!==0?D=k/2:c==="center"?D=we.highest.height/2-Se*k:D=we.highest.height-C*k,d&&(D*=-1),w!==0&&!oe.showLabelBackdrop&&(N+=k/2*Math.sin(w))):(M=v,D=(1-C)*k/2);let pe;if(oe.showLabelBackdrop){const re=rn(oe.backdropPadding),me=we.heights[_],Ye=we.widths[_];let yt=D-re.top,Xe=0-re.left;switch(A){case"middle":yt-=me/2;break;case"bottom":yt-=me;break}switch(x){case"center":Xe-=Ye/2;break;case"right":Xe-=Ye;break;case"inner":_===T-1?Xe-=Ye:_>0&&(Xe-=Ye/2);break}pe={left:Xe,top:yt,width:Ye+re.width,height:me+re.height,color:oe.backdropColor}}I.push({label:R,font:b,textOffset:D,options:{rotation:w,color:Ce,strokeColor:B,strokeWidth:K,textAlign:G,textBaseline:A,translation:[N,M],backdrop:pe}})}return I}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Mr(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,h;return n==="left"?i?(h=this.right+s,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?i?(h=this.left+s,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,h)=>{!h.width||!h.color||(r.save(),r.lineWidth=h.width,r.strokeStyle=h.color,r.setLineDash(h.borderDash||[]),r.lineDashOffset=h.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,d,p;this.isHorizontal()?(c=pi(e,this.left,o)-o/2,h=pi(e,this.right,a)+a/2,d=p=l):(d=pi(e,this.top,o)-o/2,p=pi(e,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,d),n.lineTo(h,p),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&US(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,h=o.textOffset;rh(r,c,0,h,l,a)}i&&zS(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=jt(r.font),o=rn(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||ce(n)?(l+=o.bottom,Oe(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:d,rotation:p}=r3(this,l,n,a);rh(e,r.text,0,0,s,{color:r.color,maxWidth:d,rotation:p,textAlign:n3(a,n,i),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=ge(e.grid&&e.grid.z,-1),i=ge(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==rs.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return jt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class kc{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;o3(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,i3(e,o,r),this.override&&Ve.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in Ve[i]&&(delete Ve[i][r],this.override&&delete Ki[r])}}function i3(t,e,n){const r=tl(Object.create(null),[n?Ve.get(n):{},Ve.get(e),t.defaults]);Ve.set(e,r),t.defaultRoutes&&s3(e,t.defaultRoutes),t.descriptors&&Ve.describe(e,t.descriptors)}function s3(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Ve.route(s,i,l,a)})}function o3(t){return"id"in t&&"defaults"in t}class a3{constructor(){this.controllers=new kc(Ta,"datasets",!0),this.elements=new kc(Gi,"elements"),this.plugins=new kc(Object,"plugins"),this.scales=new kc(rs,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):ue(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=sy(e);De(r["before"+i],[],r),n[e](r),De(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var In=new a3;class l3{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(De(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){he(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=ge(r.options&&r.options.plugins,{}),s=c3(r);return i===!1&&!n?[]:h3(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function c3(t){const e={},n=[],r=Object.keys(In.plugins.items);for(let s=0;s<r.length;s++)n.push(In.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function u3(t,e){return!e&&t===!1?null:t===!0?{}:t}function h3(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=u3(r[l],i);c!==null&&s.push({plugin:a,options:d3(t.config,{plugin:a,local:n[l]},c,o)})}return s}function d3(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Yp(t,e){const n=Ve.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function f3(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function p3(t,e){return t===e?"_index_":"_value_"}function Hw(t){if(t==="x"||t==="y"||t==="r")return t}function g3(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Xp(t,...e){if(Hw(t))return t;for(const n of e){const r=n.axis||g3(n.position)||t.length>1&&Hw(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function qw(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function m3(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return qw(t,"x",n[0])||qw(t,"y",n[0])}return{}}function y3(t,e){const n=Ki[t.type]||{scales:{}},r=e.scales||{},i=Yp(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!ce(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Xp(o,a,m3(o,t),Ve.scales[a.type]),c=p3(l,i),h=n.scales||{};s[o]=ya(Object.create(null),[{axis:l},a,h[l],h[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Yp(a,e),h=(Ki[a]||{}).scales||{};Object.keys(h).forEach(d=>{const p=f3(d,l),m=o[p+"AxisID"]||p;s[m]=s[m]||Object.create(null),ya(s[m],[{axis:p},r[m],h[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];ya(a,[Ve.scales[a.type],Ve.scale])}),s}function nb(t){const e=t.options||(t.options={});e.plugins=ge(e.plugins,{}),e.scales=y3(t,e)}function rb(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function _3(t){return t=t||{},t.data=rb(t.data),nb(t),t}const Kw=new Map,ib=new Set;function Ac(t,e){let n=Kw.get(t);return n||(n=e(),Kw.set(t,n),ib.add(n)),n}const Wo=(t,e,n)=>{const r=Zu(e,n);r!==void 0&&t.add(r)};class v3{constructor(e){this._config=_3(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=rb(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),nb(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Ac(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Ac(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Ac(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return Ac(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(d=>Wo(l,e,d))),h.forEach(d=>Wo(l,i,d)),h.forEach(d=>Wo(l,Ki[s]||{},d)),h.forEach(d=>Wo(l,Ve,d)),h.forEach(d=>Wo(l,Kp,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),ib.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Ki[n]||{},Ve.datasets[n]||{},{type:n},Ve,Kp]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=Gw(this._resolverCache,e,i);let l=o;if(E3(o,n)){s.$shared=!1,r=ti(r)?r():r;const c=this.createResolver(e,r,a);l=no(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=Gw(this._resolverCache,e,r);return ce(n)?no(s,n,void 0,i):s}}function Gw(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:uy(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const w3=t=>ce(t)&&Object.getOwnPropertyNames(t).some(e=>ti(t[e]));function E3(t,e){const{isScriptable:n,isIndexable:r}=$S(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(ti(a)||w3(a))||o&&Oe(a))return!0}return!1}var T3="4.4.9";const I3=["top","bottom","left","right","chartArea"];function Qw(t,e){return t==="top"||t==="bottom"||I3.indexOf(t)===-1&&e==="x"}function Yw(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function Xw(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),De(n&&n.onComplete,[t],e)}function x3(t){const e=t.chart,n=e.options.animation;De(n&&n.onProgress,[t],e)}function sb(t){return fy()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const nu={},Jw=t=>{const e=sb(t);return Object.values(nu).filter(n=>n.canvas===e).pop()};function S3(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function b3(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var fr;let Yh=(fr=class{static register(...e){In.add(...e),Zw()}static unregister(...e){In.remove(...e),Zw()}constructor(e,n){const r=this.config=new v3(n),i=sb(e),s=Jw(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||WU(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=k4(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new l3,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=K4(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],nu[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Vn.listen(this,"complete",Xw),Vn.listen(this,"progress",x3),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return he(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return In}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():xw(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ew(this.canvas,this.ctx),this}stop(){return Vn.stop(this),this}resize(e,n){Vn.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,xw(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),De(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ue(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Xp(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),ue(s,o=>{const a=o.options,l=a.id,c=Xp(l,a),h=ge(a.type,o.dtype);(a.position===void 0||Qw(a.position,c)!==Qw(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in r&&r[l].type===h)d=r[l];else{const p=In.getScale(h);d=new p({id:l,type:h,ctx:this.ctx,chart:this}),r[d.id]=d}d.init(a,e)}),ue(i,(o,a)=>{o||delete r[a]}),ue(r,o=>{Sc.configure(this,o,o.options),Sc.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(Yw("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||Yp(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=In.getController(a),{datasetElementType:c,dataElementType:h}=Ve.datasets[a];Object.assign(l,{dataElementType:In.getElement(h),datasetElementType:c&&In.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ue(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:d}=this.getDatasetMeta(c),p=!i&&s.indexOf(d)===-1;d.buildOrUpdateElements(p),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||ue(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Yw("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ue(this.scales,e=>{Sc.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!hw(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;S3(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!hw(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Sc.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],ue(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,ti(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Vn.has(this)?this.attached&&!Vn.running(this)&&Vn.start(this):(this.draw(),Xw({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=rU(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&US(n,i),e.controller.draw(),i&&zS(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Kn(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=IU.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=li(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);eh(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Vn.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Ew(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete nu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};ue(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){ue(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ue(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Xu(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(h=>!c.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=N4(e),c=b3(e,this._lastEvent,r,l);r&&(this._lastEvent=null,De(s.onHover,[e,a,this],this),l&&De(s.onClick,[e,a,this],this));const h=!Xu(a,i);return(h||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,h}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}},Q(fr,"defaults",Ve),Q(fr,"instances",nu),Q(fr,"overrides",Ki),Q(fr,"registry",In),Q(fr,"version",T3),Q(fr,"getChart",Jw),fr);function Zw(){return ue(Yh.instances,t=>t._plugins.invalidate())}function ob(t,e,n=e){t.lineCap=ge(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ge(n.borderDash,e.borderDash)),t.lineDashOffset=ge(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ge(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ge(n.borderWidth,e.borderWidth),t.strokeStyle=ge(n.borderColor,e.borderColor)}function k3(t,e,n){t.lineTo(n.x,n.y)}function A3(t){return t.stepped?lj:t.tension||t.cubicInterpolationMode==="monotone"?cj:k3}function ab(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),h=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!h?r+c-l:c-l}}function P3(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=ab(i,n,r),h=A3(s);let{move:d=!0,reverse:p}=r||{},m,y,w;for(m=0;m<=c;++m)y=i[(a+(p?c-m:m))%o],!y.skip&&(d?(t.moveTo(y.x,y.y),d=!1):h(t,w,y,p,s.stepped),w=y);return l&&(y=i[(a+(p?c:0))%o],h(t,w,y,p,s.stepped)),!!l}function C3(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=ab(i,n,r),{move:l=!0,reverse:c}=r||{};let h=0,d=0,p,m,y,w,I,_;const T=R=>(o+(c?a-R:R))%s,S=()=>{w!==I&&(t.lineTo(h,I),t.lineTo(h,w),t.lineTo(h,_))};for(l&&(m=i[T(0)],t.moveTo(m.x,m.y)),p=0;p<=a;++p){if(m=i[T(p)],m.skip)continue;const R=m.x,N=m.y,M=R|0;M===y?(N<w?w=N:N>I&&(I=N),h=(d*h+R)/++d):(S(),t.lineTo(R,N),y=M,d=0,w=I=N),_=N}S()}function Jp(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?C3:P3}function R3(t){return t.stepped?Bj:t.tension||t.cubicInterpolationMode==="monotone"?$j:Ei}function D3(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),ob(t,e.options),t.stroke(i)}function N3(t,e,n,r){const{segments:i,options:s}=e,o=Jp(e);for(const a of i)ob(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const O3=typeof Path2D=="function";function M3(t,e,n,r){O3&&!e.options.segment?D3(t,e,n,r):N3(t,e,n,r)}class ea extends Gi{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;Oj(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Zj(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=Yj(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=R3(r);let c,h;for(c=0,h=o.length;c<h;++c){const{start:d,end:p}=o[c],m=s[d],y=s[p];if(m===y){a.push(m);continue}const w=Math.abs((i-m[n])/(y[n]-m[n])),I=l(m,y,w,r.stepped);I[n]=e[n],a.push(I)}return a.length===1?a[0]:a}pathSegment(e,n,r){return Jp(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=Jp(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),M3(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Q(ea,"id","line"),Q(ea,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Q(ea,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Q(ea,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function eE(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class ru extends Gi{constructor(n){super();Q(this,"parsed");Q(this,"skip");Q(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return eE(this,n,"x",r)}inYRange(n,r){return eE(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!Kn(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,Gp(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Q(ru,"id","point"),Q(ru,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Q(ru,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const ta={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=qp(e,c);h<i&&(i=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function En(t,e){return e&&(Oe(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Fn(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function L3(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function tE(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=jt(e.bodyFont),c=jt(e.titleFont),h=jt(e.footerFont),d=s.length,p=i.length,m=r.length,y=rn(e.padding);let w=y.height,I=0,_=r.reduce((R,N)=>R+N.before.length+N.lines.length+N.after.length,0);if(_+=t.beforeBody.length+t.afterBody.length,d&&(w+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),_){const R=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;w+=m*R+(_-m)*l.lineHeight+(_-1)*e.bodySpacing}p&&(w+=e.footerMarginTop+p*h.lineHeight+(p-1)*e.footerSpacing);let T=0;const S=function(R){I=Math.max(I,n.measureText(R).width+T)};return n.save(),n.font=c.string,ue(t.title,S),n.font=l.string,ue(t.beforeBody.concat(t.afterBody),S),T=e.displayColors?o+2+e.boxPadding:0,ue(r,R=>{ue(R.before,S),ue(R.lines,S),ue(R.after,S)}),T=0,n.font=h.string,ue(t.footer,S),n.restore(),I+=y.width,{width:I,height:w}}function V3(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function F3(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function j3(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),F3(c,t,e,n)&&(c="center"),c}function nE(t,e,n){const r=n.yAlign||e.yAlign||V3(t,n);return{xAlign:n.xAlign||e.xAlign||j3(t,e,n,r),yAlign:r}}function U3(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function z3(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function rE(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:h,topRight:d,bottomLeft:p,bottomRight:m}=Ea(o);let y=U3(e,a);const w=z3(e,l,c);return l==="center"?a==="left"?y+=c:a==="right"&&(y-=c):a==="left"?y-=Math.max(h,p)+i:a==="right"&&(y+=Math.max(d,m)+i),{x:Xt(y,0,r.width-e.width),y:Xt(w,0,r.height-e.height)}}function Pc(t,e,n){const r=rn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function iE(t){return En([],Fn(t))}function B3(t,e,n){return li(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function sE(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const lb={beforeTitle:Ln,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Ln,beforeBody:Ln,beforeLabel:Ln,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return he(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Ln,afterBody:Ln,beforeFooter:Ln,footer:Ln,afterFooter:Ln};function bt(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?lb[e].call(n,r):i}class Zp extends Gi{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new QS(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=B3(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=bt(r,"beforeTitle",this,e),s=bt(r,"title",this,e),o=bt(r,"afterTitle",this,e);let a=[];return a=En(a,Fn(i)),a=En(a,Fn(s)),a=En(a,Fn(o)),a}getBeforeBody(e,n){return iE(bt(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return ue(e,s=>{const o={before:[],lines:[],after:[]},a=sE(r,s);En(o.before,Fn(bt(a,"beforeLabel",this,s))),En(o.lines,bt(a,"label",this,s)),En(o.after,Fn(bt(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return iE(bt(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=bt(r,"beforeFooter",this,e),s=bt(r,"footer",this,e),o=bt(r,"afterFooter",this,e);let a=[];return a=En(a,Fn(i)),a=En(a,Fn(s)),a=En(a,Fn(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(L3(this.chart,n[l]));return e.filter&&(a=a.filter((h,d,p)=>e.filter(h,d,p,r))),e.itemSort&&(a=a.sort((h,d)=>e.itemSort(h,d,r))),ue(a,h=>{const d=sE(e.callbacks,h);i.push(bt(d,"labelColor",this,h)),s.push(bt(d,"labelPointStyle",this,h)),o.push(bt(d,"labelTextColor",this,h))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=ta[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=tE(this,r),c=Object.assign({},a,l),h=nE(this.chart,r,c),d=rE(r,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:d}=Ea(a),{x:p,y:m}=e,{width:y,height:w}=n;let I,_,T,S,R,N;return s==="center"?(R=m+w/2,i==="left"?(I=p,_=I-o,S=R+o,N=R-o):(I=p+y,_=I+o,S=R-o,N=R+o),T=I):(i==="left"?_=p+Math.max(l,h)+o:i==="right"?_=p+y-Math.max(c,d)-o:_=this.caretX,s==="top"?(S=m,R=S-o,I=_-o,T=_+o):(S=m+w,R=S+o,I=_+o,T=_-o),N=S),{x1:I,x2:_,x3:T,y1:S,y2:R,y3:N}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=gf(r.rtl,this.x,this.width);for(e.x=Pc(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=jt(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,h=jt(s.bodyFont),d=Pc(this,"left",s),p=i.x(d),m=l<h.lineHeight?(h.lineHeight-l)/2:0,y=n.y+m;if(s.usePointStyle){const w={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},I=i.leftForLtr(p,c)+c/2,_=y+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Gp(e,w,I,_),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Gp(e,w,I,_)}else{e.lineWidth=ce(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const w=i.leftForLtr(p,c),I=i.leftForLtr(i.xPlus(p,1),c-2),_=Ea(o.borderRadius);Object.values(_).some(T=>T!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Qp(e,{x:w,y,w:c,h:l,radius:_}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Qp(e,{x:I,y:y+1,w:c-2,h:l-2,radius:_}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(w,y,c,l),e.strokeRect(w,y,c,l),e.fillStyle=o.backgroundColor,e.fillRect(I,y+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=r,d=jt(r.bodyFont);let p=d.lineHeight,m=0;const y=gf(r.rtl,this.x,this.width),w=function(v){n.fillText(v,y.x(e.x+m),e.y+p/2),e.y+=p+s},I=y.textAlign(o);let _,T,S,R,N,M,x;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=Pc(this,I,r),n.fillStyle=r.bodyColor,ue(this.beforeBody,w),m=a&&I!=="right"?o==="center"?c/2+h:c+2+h:0,R=0,M=i.length;R<M;++R){for(_=i[R],T=this.labelTextColors[R],n.fillStyle=T,ue(_.before,w),S=_.lines,a&&S.length&&(this._drawColorBox(n,e,R,y,r),p=Math.max(d.lineHeight,l)),N=0,x=S.length;N<x;++N)w(S[N]),p=d.lineHeight;ue(_.after,w)}m=0,p=d.lineHeight,ue(this.afterBody,w),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=gf(r.rtl,this.x,this.width);for(e.x=Pc(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=jt(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=r,{topLeft:d,topRight:p,bottomLeft:m,bottomRight:y}=Ea(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-p,l),n.quadraticCurveTo(a+c,l,a+c,l+p),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+h-y),n.quadraticCurveTo(a+c,l+h,a+c-y,l+h),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+m,l+h),n.quadraticCurveTo(a,l+h,a,l+h-m),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=ta[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=tE(this,e),l=Object.assign({},o,this._size),c=nE(n,e,l),h=rE(e,l,c,n);(i._to!==h.x||s._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=rn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),qj(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),Kj(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!Xu(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!Xu(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=ta[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}Q(Zp,"positioners",ta);var $3={id:"tooltip",_element:Zp,positioners:ta,afterInit(t,e,n){n&&(t.tooltip=new Zp({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:lb},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const W3=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function H3(t,e,n,r){const i=t.indexOf(e);if(i===-1)return W3(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const q3=(t,e)=>t===null?null:Xt(Math.round(t),0,e);function oE(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class eg extends rs{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(he(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:H3(r,e,ge(n,e),this._addedLabels),q3(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return oE.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Q(eg,"id","category"),Q(eg,"defaults",{ticks:{callback:oE}});function K3(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:d,includeBounds:p}=t,m=s||1,y=h-1,{min:w,max:I}=e,_=!he(o),T=!he(a),S=!he(c),R=(I-w)/(d+1);let N=fw((I-w)/y/m)*m,M,x,v,b;if(N<1e-14&&!_&&!T)return[{value:w},{value:I}];b=Math.ceil(I/N)-Math.floor(w/N),b>y&&(N=fw(b*N/y/m)*m),he(l)||(M=Math.pow(10,l),N=Math.ceil(N*M)/M),i==="ticks"?(x=Math.floor(w/N)*N,v=Math.ceil(I/N)*N):(x=w,v=I),_&&T&&s&&F4((a-o)/s,N/1e3)?(b=Math.round(Math.min((a-o)/N,h)),N=(a-o)/b,x=o,v=a):S?(x=_?o:x,v=T?a:v,b=c-1,N=(v-x)/b):(b=(v-x)/N,_a(b,Math.round(b),N/1e3)?b=Math.round(b):b=Math.ceil(b));const k=Math.max(pw(N),pw(x));M=Math.pow(10,he(l)?k:l),x=Math.round(x*M)/M,v=Math.round(v*M)/M;let C=0;for(_&&(p&&x!==o?(n.push({value:o}),x<o&&C++,_a(Math.round((x+C*N)*M)/M,o,aE(o,R,t))&&C++):x<o&&C++);C<b;++C){const D=Math.round((x+C*N)*M)/M;if(T&&D>a)break;n.push({value:D})}return T&&p&&v!==a?n.length&&_a(n[n.length-1].value,a,aE(a,R,t))?n[n.length-1].value=a:n.push({value:a}):(!T||v===a)&&n.push({value:v}),n}function aE(t,e,{horizontal:n,minRotation:r}){const i=Mr(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class oh extends rs{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return he(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=to(i),c=to(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=K3(i,s);return e.bounds==="ticks"&&OS(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return cy(e,this.chart.options.locale,this.options.ticks.format)}}class tg extends oh{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Ke(e)?e:0,this.max=Ke(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Mr(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Q(tg,"id","linear"),Q(tg,"defaults",{ticks:{callback:Gh.formatters.numeric}});const il=t=>Math.floor(Or(t)),mi=(t,e)=>Math.pow(10,il(t)+e);function lE(t){return t/Math.pow(10,il(t))===1}function cE(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function G3(t,e){const n=e-t;let r=il(n);for(;cE(t,e,r)>10;)r++;for(;cE(t,e,r)<10;)r--;return Math.min(r,il(t))}function Q3(t,{min:e,max:n}){e=Mt(t.min,e);const r=[],i=il(e);let s=G3(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,c=Math.round((e-l)*o)/o,h=Math.floor((e-l)/a/10)*a*10;let d=Math.floor((c-h)/Math.pow(10,s)),p=Mt(t.min,Math.round((l+h+d*Math.pow(10,s))*o)/o);for(;p<n;)r.push({value:p,major:lE(p),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),p=Math.round((l+h+d*Math.pow(10,s))*o)/o;const m=Mt(t.max,p);return r.push({value:m,major:lE(m),significand:d}),r}class uE extends rs{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const r=oh.prototype.parse.apply(this,[e,n]);if(r===0){this._zero=!0;return}return Ke(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Ke(e)?Math.max(0,e):null,this.max=Ke(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ke(this._userMin)&&(this.min=e===mi(this.min,0)?mi(this.min,-1):mi(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let r=this.min,i=this.max;const s=a=>r=e?r:a,o=a=>i=n?i:a;r===i&&(r<=0?(s(1),o(10)):(s(mi(r,-1)),o(mi(i,1)))),r<=0&&s(mi(i,-1)),i<=0&&o(mi(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},r=Q3(n,this);return e.bounds==="ticks"&&OS(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":cy(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Or(e),this._valueRange=Or(this.max)-Or(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Or(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}Q(uE,"id","logarithmic"),Q(uE,"defaults",{ticks:{callback:Gh.formatters.logarithmic,major:{enabled:!0}}});function ng(t){const e=t.ticks;if(e.display&&t.display){const n=rn(e.backdropPadding);return ge(e.font&&e.font.size,Ve.font.size)+n.height}return 0}function Y3(t,e,n){return n=Oe(n)?n:[n],{w:oj(t,e.string,n),h:n.length*e.lineHeight}}function hE(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function X3(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Qe/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));i[l]=c.padding;const h=t.getPointPosition(l,t.drawingArea+i[l],a),d=jt(c.font),p=Y3(t.ctx,d,t._pointLabels[l]);r[l]=p;const m=un(t.getIndexAngle(l)+a),y=Math.round(oy(m)),w=hE(y,h.x,p.w,0,180),I=hE(y,h.y,p.h,90,270);J3(n,e,m,w,I)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=t5(t,r,i)}function J3(t,e,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function Z3(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,r+i+o,s),c=Math.round(oy(un(l.angle+Ft))),h=i5(l.y,a.h,c),d=n5(c),p=r5(l.x,a.w,d);return{visible:!0,x:l.x,y:h,textAlign:d,left:p,top:h,right:p+a.w,bottom:h+a.h}}function e5(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:s}=t;return!(Kn({x:n,y:r},e)||Kn({x:n,y:s},e)||Kn({x:i,y:r},e)||Kn({x:i,y:s},e))}function t5(t,e,n){const r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:ng(s)/2,additionalAngle:o?Qe/i:0};let c;for(let h=0;h<i;h++){l.padding=n[h],l.size=e[h];const d=Z3(t,h,l);r.push(d),a==="auto"&&(d.visible=e5(d,c),d.visible&&(c=d))}return r}function n5(t){return t===0||t===180?"center":t<180?"left":"right"}function r5(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function i5(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function s5(t,e,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!he(a)){const l=Ea(e.borderRadius),c=rn(e.backdropPadding);t.fillStyle=a;const h=r-c.left,d=i-c.top,p=s-r+c.width,m=o-i+c.height;Object.values(l).some(y=>y!==0)?(t.beginPath(),Qp(t,{x:h,y:d,w:p,h:m,radius:l}),t.fill()):t.fillRect(h,d,p,m)}}function o5(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const s=t._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(t.getPointLabelContext(i));s5(n,o,s);const a=jt(o.font),{x:l,y:c,textAlign:h}=s;rh(n,t._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}function cb(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,en);else{let s=t.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=t.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function a5(t,e,n,r,i){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),cb(t,n,o,r),s.closePath(),s.stroke(),s.restore())}function l5(t,e,n){return li(t,{label:n,index:e,type:"pointLabel"})}class Cc extends oh{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=rn(ng(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=Ke(e)&&!isNaN(e)?e:0,this.max=Ke(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ng(this.options))}generateTickLabels(e){oh.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const i=De(this.options.pointLabels.callback,[n,r],this);return i||i===0?i:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?X3(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,i))}getIndexAngle(e){const n=en/(this._pointLabels.length||1),r=this.options.startAngle||0;return un(e*n+Mr(r))}getDistanceFromCenterForValue(e){if(he(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(he(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return l5(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const i=this.getIndexAngle(e)-Ft+r;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:n,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),cb(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:i,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&o5(this,o),i.display&&this.ticks.forEach((h,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(h.value);const p=this.getContext(d),m=i.setContext(p),y=s.setContext(p);a5(this,m,l,o,y)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const h=r.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:p}=h;!p||!d||(e.lineWidth=p,e.strokeStyle=d,e.setLineDash(h.borderDash),e.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=r.setContext(this.getContext(l)),h=jt(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=h.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const d=rn(c.backdropPadding);e.fillRect(-o/2-d.left,-s-h.size/2-d.top,o+d.width,h.size+d.height)}rh(e,a.label,0,-s,h,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}Q(Cc,"id","radialLinear"),Q(Cc,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Gh.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),Q(Cc,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Q(Cc,"descriptors",{angleLines:{_fallback:"grid"}});const Xh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},At=Object.keys(Xh);function dE(t,e){return t-e}function fE(t,e){if(he(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Ke(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(nl(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function pE(t,e,n,r){const i=At.length;for(let s=At.indexOf(t);s<i-1;++s){const o=Xh[At[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return At[s]}return At[i-1]}function c5(t,e,n,r,i){for(let s=At.length-1;s>=At.indexOf(n);s--){const o=At[s];if(Xh[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return At[n?At.indexOf(n):0]}function u5(t){for(let e=At.indexOf(t)+1,n=At.length;e<n;++e)if(Xh[At[e]].common)return At[e]}function gE(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=ay(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function h5(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function mE(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:h5(t,r,i,n)}class ah extends rs{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new _U._date(e.adapters.date);i.init(n),ya(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:fE(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Ke(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=Ke(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=W4(i,s,o);return this._unit=n.unit||(r.autoSkip?pE(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):c5(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:u5(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),mE(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Xt(n,0,o),r=Xt(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||pE(s.minUnit,n,r,this._getLabelCapacity(n)),a=ge(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=nl(l)||l===!0,h={};let d=n,p,m;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const y=i.ticks.source==="data"&&this.getDataTimestamps();for(p=d,m=0;p<r;p=+e.add(p,a,o),m++)gE(h,p,y);return(p===r||i.bounds==="ticks"||m===1)&&gE(h,p,y),Object.keys(h).sort(dE).map(w=>+w)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return De(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],d=c&&a[c],p=r[n],m=c&&d&&p&&p.major;return this._adapter.format(e,i||(m?d:h))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=Mr(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,mE(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(fE(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return q4(e.sort(dE))}}Q(ah,"id","time"),Q(ah,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Rc(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=Pi(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=Pi(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class yE extends ah{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Rc(n,this.min),this._tableRange=Rc(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)h=i[o+1],l=i[o-1],c=i[o],Math.round((h+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Rc(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Rc(this._table,r*this._tableRange+this._minPos,!0)}}Q(yE,"id","timeseries"),Q(yE,"defaults",ah.defaults);const ub="label";function _E(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function d5(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function hb(t,e){t.labels=e}function db(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ub;const r=[];t.datasets=e.map(i=>{const s=t.datasets.find(o=>o[n]===i[n]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function f5(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ub;const n={labels:[],datasets:[]};return hb(n,t.labels),db(n,t.datasets,e),n}function p5(t,e){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:h,updateMode:d,...p}=t,m=V.useRef(null),y=V.useRef(null),w=()=>{m.current&&(y.current=new Yh(m.current,{type:o,data:f5(a,s),options:l&&{...l},plugins:c}),_E(e,y.current))},I=()=>{_E(e,null),y.current&&(y.current.destroy(),y.current=null)};return V.useEffect(()=>{!i&&y.current&&l&&d5(y.current,l)},[i,l]),V.useEffect(()=>{!i&&y.current&&hb(y.current.config.data,a.labels)},[i,a.labels]),V.useEffect(()=>{!i&&y.current&&a.datasets&&db(y.current.config.data,a.datasets,s)},[i,a.datasets]),V.useEffect(()=>{y.current&&(i?(I(),setTimeout(w)):y.current.update(d))},[i,l,a.labels,a.datasets,d]),V.useEffect(()=>{y.current&&(I(),setTimeout(w))},[o]),V.useEffect(()=>(w(),()=>I()),[]),ol.createElement("canvas",{ref:m,role:"img",height:n,width:r,...p},h)}const g5=V.forwardRef(p5);function m5(t,e){return Yh.register(e),V.forwardRef((n,r)=>ol.createElement(g5,{...n,ref:r,type:t}))}const y5=m5("line",eu);Yh.register(eg,tg,ru,ea,$3);const _5={chest:"가슴",back:"등",shoulder:"어깨",leg:"하체"};function v5(){const{user:t}=hl(),[e,n]=V.useState("chest"),[r,i]=V.useState([]),[s,o]=V.useState(!0),[a,l]=V.useState(1),[c,h]=V.useState(!0),d=10;V.useEffect(()=>{t&&(o(!0),i([]),l(1),h(!0),console.log("GraphPage 로딩 시작, part:",e,"shouldRefresh:",localStorage.getItem("shouldRefreshGraph")),localStorage.getItem("shouldRefreshGraph")==="true"&&(console.log("캐시 무효화 실행"),nF(t.uid,e),localStorage.removeItem("shouldRefreshGraph")),rw(t.uid,e,d,0,!0).then(w=>{console.log("받은 데이터 개수:",w.length),w.length>0?(i(w),h(w.length===d)):i([]),o(!1)}).catch(w=>{console.error("데이터 로딩 중 오류:",w),o(!1)}))},[t,e]);const p=()=>{!t||!c||s||(o(!0),rw(t.uid,e,d,a).then(w=>{w.length>0&&(i(I=>[...I,...w]),l(I=>I+1)),h(w.length===d),o(!1)}).catch(w=>{console.error("추가 데이터 로딩 중 오류:",w),o(!1)}))},m=V.useMemo(()=>({labels:r.map(w=>new Date(w.date).toLocaleDateString("ko-KR",{month:"short",day:"numeric"})),datasets:[{label:"무게(kg)",data:r.map(w=>w.weight),borderColor:"#3B82F6",backgroundColor:"#3B82F6",pointRadius:6,pointHoverRadius:8,tension:.3}]}),[r]),y={id:"labelPlugin",afterDatasetDraw(w){const{ctx:I}=w,_=w.getDatasetMeta(0);r.forEach((T,S)=>{const{x:R,y:N}=_.data[S].tooltipPosition();I.save(),I.font="10px sans-serif",I.textAlign="center",I.fillStyle=T.isSuccess?"#22c55e":"#ef4444",I.fillText(T.isSuccess?"성공":"실패",R,N-10),I.restore()})}};return P.jsxs(qi,{children:[P.jsx("h1",{className:"text-2xl font-bold mb-6",children:"운동 그래프"}),P.jsx("select",{value:e,onChange:w=>n(w.target.value),className:"border px-3 py-2 rounded mb-6 dark:bg-gray-700 dark:text-white",children:Object.entries(_5).map(([w,I])=>P.jsx("option",{value:w,children:I},w))}),P.jsx("div",{className:"bg-white dark:bg-gray-800 rounded shadow p-4 mb-8 h-72",children:s&&r.length===0?P.jsxs("div",{className:"flex items-center justify-center h-full",children:[P.jsx("div",{className:"h-8 w-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mr-2"}),P.jsx("p",{className:"text-gray-500",children:"데이터를 불러오는 중..."})]}):r.length===0?P.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[P.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),P.jsx("p",{className:"text-gray-500 text-lg font-medium",children:"기록된 데이터가 없습니다"}),P.jsx("p",{className:"text-gray-400 text-sm",children:"운동을 기록하면 그래프가 표시됩니다"})]}):P.jsx(y5,{data:m,options:{responsive:!0,plugins:{legend:{display:!1}},scales:{y:{title:{display:!0,text:"무게(kg)"}}}},plugins:[y]})}),c&&r.length>0&&P.jsx("button",{onClick:p,className:"mt-4 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md w-full",disabled:s,children:s?"로딩 중...":"더 많은 데이터 보기"})]})}const w5={chest:"가슴",back:"등",shoulder:"어깨",leg:"하체"},E5=()=>{const[t,e]=V.useState("chest"),[n,r]=V.useState([]),[i,s]=V.useState(!0);return V.useEffect(()=>{(async()=>{s(!0);const a=await rF(t);r(a),s(!1)})()},[t]),P.jsxs(qi,{children:[P.jsxs("div",{className:"mb-6",children:[P.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"자주 묻는 질문"}),P.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"올바른 운동 방법 정보"})]}),P.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-6",children:[P.jsxs("div",{className:"mb-6",children:[P.jsx("label",{className:"block text-gray-700 dark:text-gray-300 font-medium mb-2",children:"부위 선택"}),P.jsx("select",{value:t,onChange:o=>e(o.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",children:Object.entries(w5).map(([o,a])=>P.jsx("option",{value:o,children:a},o))})]}),i?P.jsx("div",{className:"flex justify-center items-center h-32",children:P.jsx("div",{className:"spinner"})}):n.length>0?P.jsx("div",{className:"space-y-6",children:n.map(o=>P.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-6 last:border-0 last:pb-0",children:[P.jsx("h3",{className:"text-lg font-medium text-gray-800 dark:text-gray-200 mb-2",children:o.question}),P.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:o.answer}),o.videoUrl&&P.jsxs("a",{href:o.videoUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-blue-500 hover:text-blue-700",children:[P.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"영상 보기"]})]},o.id))}):P.jsx("div",{className:"text-center py-10",children:P.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"이 부위에 대한 Q&A가 없습니다."})})]})]})},T5=()=>{var i;const{user:t,logout:e}=hl(),n=uo(),r=async()=>{await tF(),e(),n("/login")};return P.jsxs(qi,{children:[P.jsx("div",{className:"mb-6",children:P.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"설정"})}),P.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden mb-6",children:[P.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:P.jsxs("div",{className:"flex items-center",children:[t!=null&&t.photoURL?P.jsx("img",{src:t.photoURL,alt:t.displayName||"사용자",className:"w-12 h-12 rounded-full mr-4"}):P.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500 flex items-center justify-center text-white text-lg font-bold mr-4",children:((i=t==null?void 0:t.displayName)==null?void 0:i[0])||"U"}),P.jsxs("div",{children:[P.jsx("h2",{className:"text-lg font-medium text-gray-800 dark:text-gray-200",children:(t==null?void 0:t.displayName)||"사용자"}),P.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:t==null?void 0:t.email})]})]})}),P.jsxs("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[P.jsx("button",{onClick:r,className:"w-full text-left px-6 py-4 text-red-500 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none",children:"로그아웃"}),P.jsx("a",{href:"https://corevia.com/privacy",target:"_blank",rel:"noopener noreferrer",className:"block px-6 py-4 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"개인정보 처리방침"}),P.jsx("a",{href:"https://corevia.com/terms",target:"_blank",rel:"noopener noreferrer",className:"block px-6 py-4 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"이용약관"})]})]}),P.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[P.jsx("h3",{className:"text-lg font-medium text-gray-800 dark:text-gray-200 mb-4",children:"앱 정보"}),P.jsxs("div",{className:"space-y-2 text-gray-600 dark:text-gray-400",children:[P.jsx("p",{children:"Corevia Training Tracker"}),P.jsx("p",{children:"버전: 1.0.0"}),P.jsx("p",{children:"© 2025 Corevia. All rights reserved."})]})]})]})},us=({children:t})=>{const{isAuthenticated:e}=hl();return e?P.jsx(P.Fragment,{children:t}):P.jsx(zT,{to:"/login",replace:!0})};function I5(){return P.jsx(gC,{children:P.jsxs(lC,{children:[P.jsx(pr,{path:"/",element:P.jsx(us,{children:P.jsx(aF,{})})}),P.jsx(pr,{path:"/record",element:P.jsx(us,{children:P.jsx(r4,{})})}),P.jsx(pr,{path:"/feedback",element:P.jsx(us,{children:P.jsx(i4,{})})}),P.jsx(pr,{path:"/graph",element:P.jsx(us,{children:P.jsx(v5,{})})}),P.jsx(pr,{path:"/qna",element:P.jsx(us,{children:P.jsx(E5,{})})}),P.jsx(pr,{path:"/settings",element:P.jsx(us,{children:P.jsx(T5,{})})}),P.jsx(pr,{path:"*",element:P.jsx(zT,{to:"/",replace:!0})})]})})}Tf.createRoot(document.getElementById("root")).render(P.jsx(ol.StrictMode,{children:P.jsx(I5,{})}));
